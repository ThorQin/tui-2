var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},tui;!function(tui){var widget;!function(widget){var ext;!function(ext){"use strict";var Picture=function(_super){function Picture(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Picture,_super),Picture.prototype.initRestriction=function(){var _this=this;_super.prototype.initRestriction.call(this),this._uploader=tui.browser.createUploader(this._),this.setRestrictions({action:{set:function(value){_this._uploader.getOptions().action=value},get:function(){return _this._uploader.getOptions().action}},accept:{set:function(value){_this._uploader.getOptions().accept=value,_this._uploader.getInput()&&(_this._uploader.deleteInput(),_this._uploader.createInput())},get:function(){return _this._uploader.getOptions().accept}},value:{set:function(value){_this._data.value=value,null!==value&&typeof value!==tui.UNDEFINED||_this._set("url","")}}})},Picture.prototype.init=function(){var _this=this,img=this._components.image=document.createElement("img");this._.appendChild(img),this._uploader.on("success",function(e){_this._set("value",e.data.response.fileId),_this.set("url",e.data.response.url)}),this._uploader.on("error",function(e){tui.errbox(e.data.response.error,tui.str("Error"))}),this.setInit("accept","image/png, image/jpeg, image/gif");var $root=$(this._);$root.on("dragenter",function(e){e.preventDefault(),e.stopPropagation(),_this._uploader.deleteInput(),$root.addClass("tui-drag-enter")}),$root.on("dragleave",function(e){e.preventDefault(),e.stopPropagation(),_this.get("disable")||_this._uploader.createInput(),$root.removeClass("tui-drag-enter")}),$root.on("dragover",function(e){e.preventDefault()}),$root.on("drop",function(e){e.preventDefault(),e.stopPropagation();var dts=e.originalEvent.dataTransfer;if(dts&&dts.files&&dts.files.length>0){var fileName=dts.files[0].name;/\.(jpg|jpeg|png|gif)$/i.test(fileName)?_this._uploader.uploadV5(fileName,dts.files[0]):tui.errbox(tui.str("invalid.file.type"))}_this.get("disable")||_this._uploader.createInput(),$root.removeClass("tui-drag-enter")})},Picture.prototype.render=function(){var $root=$(this._);this.get("disable")?(this._uploader.deleteInput(),this._.setAttribute("tabIndex","0")):(this._uploader.createInput(),this._.removeAttribute("tabIndex"));var url=this.get("url"),img=this._components.image;url?(img.setAttribute("src",url),$root.removeClass("tui-picture-empty")):$root.addClass("tui-picture-empty")},Picture}(widget.Widget);ext.Picture=Picture,widget.register(Picture,"picture")}(ext=widget.ext||(widget.ext={}))}(widget=tui.widget||(tui.widget={}))}(tui||(tui={}));
//# sourceMappingURL=picture.min.js.map
