var __extends=this&&this.__extends||function(){var extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,b){d.__proto__=b}||function(d,b){for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p])};return function(d,b){function __(){this.constructor=d}extendStatics(d,b),d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)}}(),tui;!function(tui){var widget;!function(widget){var ext;!function(ext){"use strict";var Navigator=function(_super){function Navigator(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Navigator,_super),Navigator.prototype.initRestriction=function(){var _this=this;_super.prototype.initRestriction.call(this),this.setRestrictions({items:{get:function(){var items=_this._data.items;return items?items:[]}},activeItem:{set:function(){},get:function(){return null!=_this._activeItem?_this._activeItem.item:void 0}}})},Navigator.prototype.initChildren=function(childNodes){function addChild(node,items){var item=new widget.Item(node),text=item.get("text");null===text&&(text=$.trim(tui.browser.getNodeOwnText(node)));var naviItem={text:text};naviItem.name=item.get("name"),naviItem.path=item.get("path"),naviItem.icon=item.get("icon"),naviItem.expand=item.get("expand");var children=[];addChildren(node.childNodes,children),children.length>0&&(naviItem.children=children),items.push(naviItem)}function addChildren(childNodes,data){for(var i=0;i<childNodes.length;i++){var node=childNodes[i];"tui:item"===widget.getFullName(node)&&addChild(node,data)}}var data=[];addChildren(childNodes,data),data.length>0&&this._set("items",data)},Navigator.prototype.checkScroll=function(){var container=this._components.container,up=this._components.up,down=this._components.down;up.style.display=0==container.scrollTop?"none":"block",down.style.display=container.scrollTop==container.scrollHeight-container.clientHeight?"none":"block"},Navigator.prototype.init=function(){function findLine(elem){return elem?$(elem).hasClass("tui-line")?elem:findLine(elem.parentElement):null}var _this=this,container=this._components.container=document.createElement("div"),up=this._components.up=document.createElement("div"),down=this._components.down=document.createElement("div");container.className="tui-container",up.className="tui-up",down.className="tui-down",this._.appendChild(container),this._.appendChild(up),this._.appendChild(down);var mousewheelevt=/Firefox/i.test(navigator.userAgent)?"DOMMouseScroll":"mousewheel";$(this._).on(mousewheelevt,function(ev){var e=ev.originalEvent,delta=e.detail?-1*e.detail:e.wheelDelta;0>=delta?container.scrollTop+container.clientHeight>=container.scrollHeight&&ev.preventDefault():container.scrollTop<=0&&ev.preventDefault(),ev.stopPropagation(),ev.stopImmediatePropagation()}),this.on("resize",function(){var scrollbarWidth=container.offsetWidth-container.clientWidth;container.style.width=_this._.offsetWidth+scrollbarWidth+"px",_this.checkScroll()}),container.onscroll=function(){_this.checkScroll()},$(container).on("click keydown",function(e){var elem=e.target||e.srcElement;if(elem=findLine(elem),("keydown"!==e.type||e.keyCode==tui.browser.KeyCode.ENTER)&&elem){var $elem=$(elem);if($elem.hasClass("tui-expand"))_this.collapse(elem);else if($elem.hasClass("tui-collapse"))_this.expand(elem);else{if(_this.active(elem),_this.fire("select",elem.item)===!1)return;if(_this.get("openPath")){var item=elem.item;item&&item.path&&(window.location.href=item.path)}}}})},Navigator.prototype.collapse=function(elem){var _this=this,$elem=$(elem);elem.item.expand=!1,$elem.hasClass("tui-collapse")||($elem.removeClass("tui-expand"),$elem.addClass("tui-collapse"),$elem.next().animate({height:"toggle"},function(){_this.checkScroll()}))},Navigator.prototype.expand=function(elem){var _this=this,$elem=$(elem);elem.item.expand=!0,$elem.hasClass("tui-expand")||($elem.removeClass("tui-collapse"),$elem.addClass("tui-expand"),$elem.next().animate({height:"toggle"},function(){_this.checkScroll()}))},Navigator.prototype.active=function(elem){var container=this._components.container,rc=tui.browser.getRectOfParent(elem);rc.top>=container.scrollTop&&rc.top+rc.height<=container.scrollTop+container.clientHeight||(rc.top<container.scrollTop?container.scrollTop=rc.top:rc.top+rc.height>container.scrollTop+container.clientHeight&&(container.scrollTop=rc.top+rc.height-container.clientHeight)),this._activeItem&&$(this._activeItem).removeClass("tui-active"),this.get("selectable")&&($(elem).addClass("tui-active"),this._activeItem=elem)},Navigator.prototype.drawItems=function(parent,items,level){for(var _i=0,items_1=items;_i<items_1.length;_i++){var item=items_1[_i],line=document.createElement("div");line.item=item;var $line=$(line);if($line.attr("unselectable","on"),$line.attr("tabIndex","0"),$line.addClass("tui-line"),$line.text(item.text),level>0&&$line.addClass("tui-child"),item.icon){var icon=document.createElement("i");icon.className=item.icon,line.insertBefore(icon,line.firstChild)}item.path&&line.setAttribute("path",item.path),item.name&&line.setAttribute("name",item.name);var space=document.createElement("span");if(space.style.display="inline-block",space.style.width=20*level+"px",line.insertBefore(space,line.firstChild),parent.appendChild(line),item.children&&item.children.length>0){var subArea=document.createElement("div");subArea.className="tui-sub",item.expand?($line.addClass("tui-expand"),subArea.style.display="block"):($line.addClass("tui-collapse"),subArea.style.display="none"),this.drawItems(subArea,item.children,level+1),parent.appendChild(subArea)}}},Navigator.prototype._activeBy=function(parent,key,value){for(var i=0;i<parent.children.length;i++){var node=parent.children[i];if($(node).hasClass("tui-line")){if(node.item[key]===value)return this.active(node),!0}else if($(node).hasClass("tui-sub")&&this._activeBy(node,key,value))return this.expand($(node).prev()[0]),!0}return!1},Navigator.prototype.activeBy=function(key,value){var container=this._components.container;this._activeBy(container,key,value)},Navigator.prototype.render=function(){var items=this.get("items"),container=this._components.container;container.innerHTML="",this.drawItems(container,items,0),this.checkScroll()},Navigator}(widget.Widget);ext.Navigator=Navigator,widget.register(Navigator,"navigator"),widget.registerResize("navigator")}(ext=widget.ext||(widget.ext={}))}(widget=tui.widget||(tui.widget={}))}(tui||(tui={}));
//# sourceMappingURL=navigator.min.js.map