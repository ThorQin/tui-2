var __extends=this&&this.__extends||function(d,b){function __(){this.constructor=d}for(var p in b)b.hasOwnProperty(p)&&(d[p]=b[p]);d.prototype=null===b?Object.create(b):(__.prototype=b.prototype,new __)},tui;!function(tui){var widget;!function(widget){var ext;!function(ext){"use strict";var _mapInit=!1,_mapLoaded=!1,_initFunctions=[],Location=function(_super){function Location(){return null!==_super&&_super.apply(this,arguments)||this}return __extends(Location,_super),Location.prototype.initRestriction=function(){_super.prototype.initRestriction.call(this);var input=widget.create("input");this._components.input=input._,this.setRestrictions({value:{set:function(value){input.set("value",value)},get:function(){return input.get("value")}},validate:{set:function(value){input.set("validate",value)},get:function(){return input.get("validate")}}})},Location.prototype.initChildren=function(childNodes){var input=widget.get(this._components.input);input._set("validate",widget.InputBase.parseValidators(childNodes))},Location.prototype.initMap=function(){var mapDiv=this._components.map;new window.AMap.Map(mapDiv,{zoom:10,center:[116.39,39.9]})},Location.prototype.init=function(){if(!_mapInit){_mapInit=!0;var schema="http";/^https:\/\/.+/i.test(location.href)&&(schema="https");var mapUrl=schema+"://webapi.amap.com/maps?v=1.3&key="+this.get("appKey");$.getScript(mapUrl,function(){_mapLoaded=!0;for(var _i=0,_initFunctions_1=_initFunctions;_i<_initFunctions_1.length;_i++){var initDef=_initFunctions_1[_i];initDef.func.call(initDef.context)}})}var mapDiv=this._components.map=document.createElement("div");mapDiv.className="tui-map-container";var input=widget.get(this._components.input);input.appendTo(this._),this.setInit("popup",!0),_mapLoaded?this.initMap():_initFunctions.push({context:this,func:this.initMap}),input.on("right-icon-mousedown",function(){var dlg=widget.create("dialog");dlg.setContent(mapDiv),dlg.open()})},Location.prototype.reset=function(){var input=widget.get(this._components.input);input.reset()},Location.prototype.updateEmptyState=function(empty){var input=widget.get(this._components.input);input.updateEmptyState(empty)},Location.prototype.validate=function(e){var input=widget.get(this._components.input);return input.validate(e)},Location.prototype.render=function(){var input=widget.get(this._components.input);this.get("popup")?input.set("iconRight","fa-map-marker"):input.set("iconRight",null)},Location}(widget.Widget);ext.Location=Location,widget.register(Location,"location")}(ext=widget.ext||(widget.ext={}))}(widget=tui.widget||(tui.widget={}))}(tui||(tui={}));
//# sourceMappingURL=location.min.js.map
