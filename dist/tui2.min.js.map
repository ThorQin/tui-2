{"version":3,"sources":["tui2.js"],"names":["__extends","this","d","b","__","constructor","p","hasOwnProperty","prototype","Object","create","lastTime","vendors","x","length","window","requestAnimationFrame","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","clearTimeout","tui","dict","lang","translator","_dict","str","toLowerCase","func","cloneInternal","obj","excludeProperties","UNDEFINED","Array","newArray","idx","indexOf","push","newObj","clone","$","trim","JSON","parse","stringify","undefined","navigator","language","browserLanguage","userLanguage","tuid","EventObject","_events","bind","eventName","handler","atFirst","handlers","i","splice","unbind","on","envs","split","v","once","isOnce","off","offAll","key","fire","data","wildcardHandlers","concat","eventInfo","event","removeArray","val","call","ieVer","rv","appName","ua","userAgent","re","RegExp","exec","parseFloat","$1","ffVer","text","parseBoolean","value","isNaN","String","format","token","params","_i","arguments","formatrg","replace","toDashSplit","word","buffer","c","charAt","code","charCodeAt","toCamel","strict","upperFlag","toUpperCase","paddingNumber","min","alignLeft","result","abs","substr","getUrlParam","url","regex","results","decodeURIComponent","getUrlAnchor","anchor","match","isAbsUrl","getBaseUrl","matcher","prefix","pos","substring","lastIndexOf","joinUrl","urls","_a","urls_1","u","service","service_1","parseParameters","fn","desc","matched","toString","use","argv","map","s","get","apply","getName","path","begin","end","load","services","names","_serviceReady","tasks","name","ajax","getFunction","when","done","register","ready","fail","Service","_constructor","_services","name_1","service_2","_readyCallbacks_1","_readyCallbacks","cb","onReady","_super","widget","getEventPosition","e","positions","originalEvent","changedTouches","touch","clientX","y","clientY","openDragMask","onMove","onClose","closeDragMask","_maskOpened","_mask","setCapture","document","browser","removeNode","preventDefault","innerHTML","className","style","cursor","removeAttribute","body","appendChild","createElement","setAttribute","onselectstart","mousewheelevt","test","ev","stopPropagation","widget_1","parseValue","eval","console","error","nodeName","widgetRegistration","getClassName","__widget__","elem","getElementById","namedWidgets","type","initParam","TypeError","Error","element","set","getFullName","targetElem","scopeName","init","parent","initFunc","searchInitCtrls","childNodes","node","nodeType","item","initSet","initSet_1","widget_3","refresh","widget_2","search","p1","p2","searchElem","widget_4","filter","searchArea","registerResize","resizeRegistration","WidgetBase","_this","_data","_rs","setRestriction","propCtrl","setRestrictions","restrictions","render","getComponent","dataStr","getAttribute","tmpData","_set","attributes","attr","names_1","name_2","removeNamedItem","defaultValue","setInit","Widget","root","_lastWidth","_lastHeight","_components","_","initRestriction","childNodes_1","initChildren","appendTo","detach","oldId","parentNode","disable","parent_1","group","Group","tooltip","follow-tooltip","testResize","isInDoc","offsetWidth","offsetHeight","focus","Item","detectResize","nodes","getElementsByTagName","j","reorder","dialogStack","insertBefore","dlg","remove","index","removeChild","getParent","disableSelect","Dialog","_sizeTimer","_contentSize","_moved","_init","div","childNodes_2","root$","html","titleBar","children","contentDiv","buttonBar","closeIcon","content","onclick","close","o","target","srcElement","dialogX","offsetLeft","dialogY","offsetTop","beginX","beginY","winSize","width","height","l","t","left","top","setContent","display","setButtons","buttonDef","_loop_1","name_3","pair","btn","button","names_2","open","css","position","setInterval","scrollHeight","scrollWidth","clearInterval","titleText","maxHeight","maxWidth","outerWidth","outerHeight","box","centX","centY","k","keyCode","KeyCode","ESCAPE","TAB","isPosterity","activeElement","resize","makeContent","message","makeDialog","title","esc","msgbox","infobox","okbox","errbox","warnbox","askbox","buttonName","waitbox","waitDlg","refCount","waitMsg","closed","setMessage","progressbox","cancelProc","send","method","options","deffered","Deferred","ajaxData","contentType","complete","jqXHR","status","respJson","getResponseHeader","respVal","responseJSON","responseText","resolve","respText","plainType","reject","processData","post","post_","silent","get_","getScript","xhr","XMLHttpRequest","onreadystatechange","readyState","getHtmlBody","TAG","lastIndex","m","bodyStart","bodyEnd","tag","SCRIPT_END","scriptEnd","getBody","child","param","ajaxSetup","timeout","xhrFields","withCredentials","$ajax","$post","$post_","$get","$get_","backupScrollPosition","BackupedScrollPosition","focusWithoutScroll","setActive","backup","restore","scrollToElement","distance","getWindowScrollElement","animate","scrollTop","offset","toElement","withParentDiv","el","firstChild","toHTML","toSafeText","args","nodeText","createTextNode","buf","nodeValue","getNodeText","setNodeText","getNodeOwnText","getRectOfParent","getRectOfPage","getRectOfScreen","$doc","scrollLeft","getTopBody","getWindow","ownerDocument","defaultView","parentWindow","documentElement","keepTopProc","scrollWindow","keepTopList_1","keepTopList","rect","oldPosition","oldTop","oldLeft","oldWidth","oldZIndex","zIndex","clientWidth","itemLeft","keepTop","keepToTop","cancelKeepToTop","newList","keepTopList_2","getCurrentStyle","currentStyle","getComputedStyle","isLButton","which","banBackspace","ban","vReadOnly","readOnly","vDisabled","disabled","flag1","flag2","cancelDefault","returnValue","cancelBubble","isAncestry","isFireInside","parentElement","saveCookie","expires","domain","secure","today","setTime","expires_date","cookie","encodeURIComponent","toUTCString","loadCookie","arr","deleteCookie","saveData","sessionOnly","storage","sessionStorage","localStorage","setItem","loadData","getItem","deleteData","removeItem","accelerate","ctrlKey","altKey","shiftKey","metaKey","_accMap","addAccelerate","actionId","deleteAccelerate","reg","r","location","allFingers","touches","touchList","identifier","setInnerHtml","backupInfo","scroll","keydown","$text","hashChange","hash","state","_rules","matchRule","_rules_1","_rules_2","_handler","startRouter","rules","stopRouter","fileFromPath","file","getExt","createUploader","container","Uploader","_settings","action","multiple","autoSubmit","_container","_input","setOptions","getOptions","createIframe","iframe","doc","contentDocument","frames","charset","createForm","settings","form","createInput","input","accept","right","margin","padding","opacity","fontSize","fontFamily","fileExt","ext","clearInput","submit","overflow","blur","deleteInput","getInput","processResponse","toDeleteFlag","src","response","normalize","responseObj","fireError","fileId","fileName","fireInvalidError","errorMessage","submitV5","extraData","fd","FormData","files","append","upload","addEventListener","lengthComputable","percentComplete","round","loaded","total","statusText","submitV4","prop","ds","filter_1","f","sort","order","treeData","a","order_1","aVal","bVal","DSBase","_finalData","_order","_filter","setOrder","build","getOrder","setFilter","getFilter","List","array","completely","RemoteList","cacheSize","_cache1","_cache2","_length","_cacheSize","reset","size","getFromCache","page","getIndexPage","_fillCache","rder","ceil","cache","update","TreeBase","_index","_rawData","getConfig","_config","getRawData","findNodeIndex","expandItems","items","level","items_1","expand","hasChild","getExpandCount","delCount","children_1","appendNodes","collapse","Tree","config","iterate_1","items_2","RemoteTree","_querying","success","notmodified","abort","parsererror","ok","cancel","agree","yes","no","time","now","timespan","seconds","beg","floor","h","dateDiff","dt1","dt2","unit","d1","d2","diff","symbol","toLocaleLowerCase","NaN","dateAdd","dt","tm","getFullYear","getMonth","getDate","getHours","mi","getMinutes","getSeconds","ms","getMilliseconds","totalMonth","newDate","totalDaysOfMonth","dayOfYear","parseDateInternal","dtStr","matchEnum","enumArray","join","values","matchNumber","len","num","parseInt","mapping","gcount","isUTC","rule","y+","M+","shortMonths","months","d+","D+","h+","H+","m+","s+","[qQ]+","S+","E+","shortWeeks","weeks","a|A","z+","tz","Z","\"[^\"]*\"|'[^']*'","[^yMmdDhHsSqEaAzZ'\"]+","parseCount","hour","year","getUTCFullYear","month","getUTCMonth","date","getUTCDate","ampm","h12","minute","second","millisecond","getTimezoneOffset","setUTCFullYear","setUTCMonth","setUTCDate","setUTCHours","setUTCMinutes","setUTCSeconds","setUTCMilliseconds","parseDate","formatDate","dateFmt","fullYear","hours","getUTCHours","minutes","getUTCMinutes","getUTCSeconds","milliseconds","getUTCMilliseconds","day","getUTCDay","getDay","q+","A","regexp","source","z","Button","checked","tristate","$root","unselectable","mousedown","mouseup","keyup","onClick","groupName","result_1","click","addClass","removeClass","removeAttr","Check","Radio","formatNumber","maxValue","setText","tb","line","column","cell","rows","cells","innerText","Calendar","setFullYear","setMonth","setDate","setHours","setMinutes","setSeconds","getMaxValue","tabIndex","insertRow","insertCell","timebar","getInputTime","timebar$","o$","LEFT","RIGHT","UP","select","DOWN","KEY_0","KEY_9","_lastInputTime","newTime","hasClass","prevMonth","prevYear","nextYear","nextMonth","onPicked","dblclick","oldTime","makeTime","proc","firstDay","firstWeek","daysOfMonth","offsetMonth","preMonthDay","valueOf","childNodes_3","children_2","children_3","result_2","ButtonGroup","check","children_4","children_5","children_6","widget_5","Component","checkReady","hasHandler","hasSrc","_scriptReady","_htmlReady","_changed","_childrenInit","_noReadyCount","_fn","oldValue","loadComponents","parentUrl","getParentUrl","getNodeName","href","widget_6","name_4","fullName","","forEach","n","VALIDATORS","*email","*chinese","*url","*digital","*integer","*float","*number","*currency","*date","*key","*any","InputBase","_valid","_invalidMessage","validators","childNodes_4","validator","updateEmptyState","empty","_isEmpty","validate","validator_1","imaxLen","ival","iminLen","imax","imin","other","otherText","valid","SelectBase","_inSelection","closeSelect","popup","createPopup","label","iconRight","iconInvalid","clearButton","openSelect","keypress","charCode","SPACE","noValue","PADDING","SelectPopupBase","DatePicker","calendar","timeBar","toolbar","borderWidth","todayButton","clearable","outline","File","_uploader","onblur","Frame","_cache","_go","go","vval","Grid","_setupHeadMoveListener","_columnWidths","_vLines","_handlers","updateCallback","me","drawContent","selectable","lineHeight","LINE_HEIGHT","dataType","_vbar","_hbar","list","tree","columns","clearBuffer","activeRow","_buffer","lines","row","activeRowData","_tuid","head","direction","createStyleSheet","_gridStyle","computeHOffset","delta","detail","wheelDelta","step","scrollSize","lastPos","scrollX","lastSpeed","scrollY","inTouched","targetTouches","pageX","pageY","hittestTimer","movePos","moveX","moveY","currentTime","spanTime","keepMove","timestamp","srcX","clientHeight","mask","initColumnWidth","computeScroll","computeColumnWidth","drawHeader","hittest","col","testLine","checkKey","drawLine","ENTER","scrollTo","PRIOR","_dispLines","NEXT","HOME","END","sortable","sortType","setSortFlag","iterate","iterateItem","treeItem","childrenKey","rawData","listItem","activeTo","dataKey","matchPath","treeNode","searchPath","searchLevel","found","pop","i_1","i_2","computeWidth","contentWidth","CELL_SPACE","vScroll","vEnable","hScroll","hEnable","_contentHeight","_contentWidth","computeV","first","realClientHeight","shouldEnable","computeH","realClientWidth","dispHeight","lineData","isTree","tipKey","span","arrow","iconKey","prefixContent","prefixKey","prefixSpan","suffixContent","suffixKey","suffixSpan","moveLine","base","createLine","sortClass","vbar","newBuffer","reusable","_drawTimer","used","totalNoBorder","totalNoFixed","totalCompute","fixed","cssText","i_3","i_4","_column","nameKey","checkable","checkedValues","valueKey","checkedNames","selectAll","deselectAll","Input","textbox","onInput","placeholder","iconLeft","propertyName","BACK","marginLeft","marginRight","phText","showPh","findPopupToClose","bindElem","popStack","Popup","popIndex","referRect","checkInterval","refProc","childNodes_5","refer","SyntaxError","newRect","closeSelf","ww","wh","ew","eh","compute","L","R","T","B","Menu","activeItem","hasChildItem","addChild","menuItem","icon","shortcut","addChildren","data_1","findMenuItemDiv","findDivIndex","activeLine","ie8hack","deactiveLine","mousemove","openSubMenuTimer","openSubMenu","mouseleave","data_2","it","findItem","from","stopEvent","div_1","itemIndex_1","childItems","subMenu","Navigator","_activeItem","naviItem","checkScroll","up","down","findLine","stopImmediatePropagation","scrollbarWidth","onscroll","$elem","active","next","drawItems","items_3","$line","space","subArea","_activeBy","prev","activeBy","Scrollbar","dir","btnThumb","thumbLen","offsetY","layerY","offsetX","layerX","posToValue","beginLeft","beginTop","dragThumb","dragEnd","valueToPos","minSize","vertical","scale","Select","LIST_LINE_HEIGHT","updateTextByValue","selection","getSelection","multiSelect","showCount","count","canSearch","changeSize","textKey","selectedItems_1","selectedItem_1","selected","reduce","searchbar","searchBox","rowData","searchValue","minWidth","checkButtons","DialogSelect","dialog","Textarea","oldHeight","_lastTextHeight","showTooltip","show","_tooltip","_tooltipTarget","whiteSpace","hasAttribute","closeTooltip","whetherShowTooltip","_tooltipTimer","whetherCloseTooltip","_hoverElement"],"mappings":"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","file":"tui2.min.js","sourcesContent":["var __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function () {\n    var lastTime = 0;\n    var vendors = ['ms', 'moz', 'webkit', 'o'];\n    for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n        window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] ||\n            window[vendors[x] + 'CancelRequestAnimationFrame'];\n    }\n    if (!window.requestAnimationFrame)\n        window.requestAnimationFrame = function (callback) {\n            var currTime = new Date().getTime();\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n            var id = window.setTimeout(function () {\n                callback(currTime + timeToCall);\n            }, timeToCall);\n            lastTime = currTime + timeToCall;\n            return id;\n        };\n    if (!window.cancelAnimationFrame)\n        window.cancelAnimationFrame = function (id) {\n            clearTimeout(id);\n        };\n}());\n/// <reference path=\"jquery.d.ts\" />\n/// <reference path=\"animation.ts\" />\nvar tui;\n(function (tui) {\n    \"use strict\";\n    tui.UNDEFINED = (function (undefined) {\n        return typeof undefined;\n    })();\n    // Used to decide which language should be used to display UI control\n    tui.lang = (function () {\n        return (navigator.language || navigator.browserLanguage || navigator.userLanguage).toLowerCase();\n    })();\n    var _dict = {};\n    function dict(lang, translator) {\n        if (typeof translator === \"function\")\n            _dict[lang] = translator;\n        else if (typeof translator === \"object\" && translator !== null) {\n            _dict[lang] = function (str) {\n                return translator[(str + \"\").toLowerCase()] || str;\n            };\n        }\n    }\n    tui.dict = dict;\n    /**\n     * Multi-language support, translate source text to specified language(default use tui.lang setting)\n     * @param str {string} source text\n     * @param lang {string} if specified then use this parameter as objective language otherwise use tui.lang as objective language\n     */\n    function str(str, lang) {\n        if (!lang) {\n            if (!tui.lang)\n                lang = \"en-us\";\n            else\n                lang = tui.lang.toLowerCase();\n        }\n        var func = _dict[lang];\n        if (typeof func === \"function\") {\n            return func(str);\n        }\n        else {\n            func = _dict[\"en-us\"];\n            if (typeof func === \"function\")\n                return func(str);\n            else\n                return str;\n        }\n    }\n    tui.str = str;\n    tui.tuid = (function () {\n        var id = 0;\n        return function () {\n            return ('tuid-' + id++);\n        };\n    })();\n    /**\n     * Base object, all other control extended from this base class.\n     */\n    var EventObject = (function () {\n        function EventObject() {\n            this._events = {};\n        }\n        /**\n         * Register event handler.\n         * @param {string} eventName\n         * @param {EventHandler} handler Which handler to be registered\n         * @param {boolean} atFirst If true then handler will be triggered firstly\n         */\n        EventObject.prototype.bind = function (eventName, handler, atFirst) {\n            if (!eventName)\n                return this;\n            if (!this._events[eventName]) {\n                this._events[eventName] = [];\n            }\n            var handlers = this._events[eventName];\n            for (var i = 0; i < handlers.length; i++) {\n                if (handlers[i] === handler)\n                    return this;\n            }\n            if (atFirst)\n                handlers.splice(0, 0, handler);\n            else\n                handlers.push(handler);\n            return this;\n        };\n        /**\n         * Unregister event handler.\n         * @param eventName\n         * @param handler Which handler to be unregistered if don't specified then unregister all handler\n         */\n        EventObject.prototype.unbind = function (eventName, handler) {\n            if (!eventName)\n                return this;\n            var handlers = this._events[eventName];\n            if (handler) {\n                for (var i = 0; i < handlers.length; i++) {\n                    if (handler === handlers[i]) {\n                        handlers.splice(i, 1);\n                        return this;\n                    }\n                }\n            }\n            else {\n                handlers.length = 0;\n            }\n            return this;\n        };\n        /**\n         * Register event handler.\n         * @param {string} eventName\n         * @param {callback} callback Which handler to be registered\n         * @param {boolean} atFirst If true then handler will be triggered firstly\n         */\n        EventObject.prototype.on = function (eventName, callback, atFirst) {\n            if (atFirst === void 0) { atFirst = false; }\n            var envs = eventName.split(/\\s+/);\n            for (var i = 0; i < envs.length; i++) {\n                var v = envs[i];\n                this.bind(v, callback, atFirst);\n            }\n            return this;\n        };\n        /**\n         * Register event handler.\n         * @param eventName\n         * @param callback Which handler to be registered but event only can be trigered once\n         * @param atFirst If true then handler will be triggered firstly\n         */\n        EventObject.prototype.once = function (eventName, callback, atFirst) {\n            if (atFirst === void 0) { atFirst = false; }\n            callback.isOnce = true;\n            return this.on(eventName, callback, atFirst);\n        };\n        /**\n         * Unregister event handler.\n         * @param eventName\n         * @param callback Which handler to be unregistered if don't specified then unregister all handler\n         */\n        EventObject.prototype.off = function (eventName, callback) {\n            var envs = eventName.split(/\\s+/);\n            for (var i = 0; i < envs.length; i++) {\n                var v = envs[i];\n                this.unbind(v, callback);\n            }\n            return this;\n        };\n        EventObject.prototype.offAll = function () {\n            for (var key in this._events) {\n                this.off(key);\n            }\n        };\n        /**\n         * Fire event. If some handler process return false then cancel the event channe and return false either\n         * @param {string} eventName\n         * @param {any[]} param\n         * @return {boolean} If any handler return false then stop other processing and return false either, otherwise return true\n         */\n        EventObject.prototype.fire = function (eventName, data) {\n            var handlers = this._events[eventName];\n            if (!(handlers instanceof Array)) {\n                handlers = [];\n            }\n            var wildcardHandlers = this._events['*'];\n            if (wildcardHandlers instanceof Array)\n                handlers = handlers.concat(wildcardHandlers);\n            if (handlers.length === 0)\n                return true;\n            var eventInfo = {\n                \"event\": eventName,\n                \"data\": data\n            };\n            var removeArray = [];\n            for (var i = 0; i < handlers.length; i++) {\n                var handler = handlers[i];\n                if (handler.isOnce)\n                    removeArray.push(handler);\n                var val = handler.call(this, eventInfo);\n                if (typeof val === \"boolean\" && !val)\n                    return false;\n            }\n            for (var i = 0; i < removeArray.length; i++) {\n                this.off(eventName, removeArray[i]);\n            }\n            return true;\n        };\n        return EventObject;\n    }());\n    tui.EventObject = EventObject;\n    tui.event = new EventObject();\n    function cloneInternal(obj, excludeProperties) {\n        if (obj === null)\n            return null;\n        else if (typeof obj === tui.UNDEFINED)\n            return undefined;\n        else if (obj instanceof Array) {\n            var newArray = [];\n            for (var idx in obj) {\n                if (obj.hasOwnProperty(idx) && excludeProperties.indexOf(idx) < 0) {\n                    newArray.push(cloneInternal(obj[idx], excludeProperties));\n                }\n            }\n            return newArray;\n        }\n        else if (typeof obj === \"number\")\n            return obj;\n        else if (typeof obj === \"string\")\n            return obj;\n        else if (typeof obj === \"boolean\")\n            return obj;\n        else if (typeof obj === \"function\")\n            return obj;\n        else {\n            var newObj = {};\n            for (var idx in obj) {\n                if (obj.hasOwnProperty(idx) && excludeProperties.indexOf(idx) < 0) {\n                    newObj[idx] = cloneInternal(obj[idx], excludeProperties);\n                }\n            }\n            return newObj;\n        }\n    }\n    /**\n     * Deeply copy an object to an other object, but only contain properties without methods\n     */\n    function clone(obj, excludeProperties) {\n        if (typeof excludeProperties === \"string\" && $.trim(excludeProperties).length > 0) {\n            return cloneInternal(obj, [excludeProperties]);\n        }\n        else if (excludeProperties instanceof Array) {\n            return cloneInternal(obj, excludeProperties);\n        }\n        else\n            return JSON.parse(JSON.stringify(obj));\n    }\n    tui.clone = clone;\n    /**\n     * Get IE version\n     * @return {Number}\n     */\n    tui.ieVer = (function () {\n        var rv = -1; // Return value assumes failure.\n        if (navigator.appName === \"Microsoft Internet Explorer\" ||\n            navigator.appName === \"Netscape\") {\n            var ua = navigator.userAgent;\n            var re = new RegExp(\"MSIE ([0-9]{1,}[\\.0-9]{0,})\");\n            if (re.exec(ua) !== null)\n                rv = parseFloat(RegExp.$1);\n        }\n        if (rv === -1 && navigator.appName === \"Netscape\") {\n            var ua = navigator.userAgent;\n            var re = new RegExp(\"Trident/([0-9]{1,}[\\.0-9]{0,})\");\n            if (re.exec(ua) !== null)\n                rv = parseFloat(RegExp.$1);\n            if (rv >= 7.0)\n                rv = 11.0;\n        }\n        return rv;\n    })();\n    /**\n     * Get Firefox version\n     * @return {Number}\n     */\n    tui.ffVer = (function () {\n        var rv = -1; // Return value assumes failure.\n        if (navigator.appName === \"Netscape\") {\n            var ua = navigator.userAgent;\n            var re = new RegExp(\"Firefox/([0-9]{1,}[\\.0-9]{0,})\");\n            if (re.exec(ua) !== null)\n                rv = parseFloat(RegExp.$1);\n        }\n        return rv;\n    })();\n})(tui || (tui = {}));\n/// <reference path=\"../core.ts\" />\nvar tui;\n(function (tui) {\n    var text;\n    (function (text) {\n        \"use strict\";\n        /**\n         * Convert anything to boolean\n         */\n        function parseBoolean(value) {\n            if (typeof value === tui.UNDEFINED)\n                return false;\n            if (typeof value === \"number\")\n                return isNaN(value) && value != 0;\n            switch (String(tui.str).toLowerCase()) {\n                case \"true\":\n                case \"1\":\n                case \"yes\":\n                case \"y\":\n                    return true;\n                default:\n                    return false;\n            }\n        }\n        text.parseBoolean = parseBoolean;\n        /**\n         * Format a string use a set of parameters\n         */\n        function format(token) {\n            var params = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                params[_i - 1] = arguments[_i];\n            }\n            var formatrg = /\\{(\\d+)\\}/g;\n            token && (typeof token === \"string\") && params.length && (token = token.replace(formatrg, function (str, i) {\n                return params[i] === null ? \"\" : params[i];\n            }));\n            return token ? token : \"\";\n        }\n        text.format = format;\n        /**\n         * Convert 'aaaBbbCcc' to 'aaa-bbb-ccc'\n         */\n        function toDashSplit(word) {\n            var buffer = '';\n            for (var i = 0; i < word.length; i++) {\n                var c = word.charAt(i);\n                var code = c.charCodeAt(0);\n                if (code >= 65 && code <= 90) {\n                    if (i > 0)\n                        buffer += '-';\n                    buffer += c.toLowerCase();\n                }\n                else\n                    buffer += c;\n            }\n            return buffer;\n        }\n        text.toDashSplit = toDashSplit;\n        /**\n         * Convert 'aaa-bbb-ccc' or 'aaa_bbb_ccc' to 'aaaBbbCcc'\n         */\n        function toCamel(word, strict) {\n            if (strict === void 0) { strict = false; }\n            var buffer = '';\n            if (strict)\n                word = word.toLowerCase();\n            var upperFlag = false;\n            for (var i = 0; i < word.length; i++) {\n                var c = word.charAt(i);\n                if (c === '-' || c === '_') {\n                    upperFlag = true;\n                }\n                else {\n                    buffer += upperFlag ? c.toUpperCase() : c;\n                    upperFlag = false;\n                }\n            }\n            return buffer;\n        }\n        text.toCamel = toCamel;\n        /**\n         * Format a number that padding it with '0'\n         */\n        function paddingNumber(v, min, max, alignLeft) {\n            if (alignLeft === void 0) { alignLeft = false; }\n            var result = Math.abs(v) + \"\";\n            while (result.length < min) {\n                result = \"0\" + result;\n            }\n            if (typeof max === \"number\" && result.length > max) {\n                if (alignLeft)\n                    result = result.substr(0, max);\n                else\n                    result = result.substr(result.length - max, max);\n            }\n            if (v < 0)\n                result = \"-\" + result;\n            return result;\n        }\n        text.paddingNumber = paddingNumber;\n        /**\n         * Get the parameter of the URL query string.\n         * @param {String} url\n         * @param {String} key Parameter name\n         */\n        function getUrlParam(url, key) {\n            key = key.replace(/[\\[]/, \"\\\\\\[\").replace(/[\\]]/, \"\\\\\\]\");\n            var regex = new RegExp(\"[\\\\?&]\" + key + \"=([^&#]*)\"), results = regex.exec(url);\n            return results === null ? null : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n        }\n        text.getUrlParam = getUrlParam;\n        /**\n         * Get the anchor of the URL query string.\n         * @param {String} url\n         */\n        function getUrlAnchor(url) {\n            var anchor = url.match(\"(#.+)(?:\\\\?.*)?\");\n            if (anchor)\n                anchor = anchor[1];\n            return anchor;\n        }\n        text.getUrlAnchor = getUrlAnchor;\n        function isAbsUrl(url) {\n            if (!url)\n                return false;\n            return !!url.match(/^(([a-z0-9]+:)?\\/\\/|\\/)/i);\n        }\n        text.isAbsUrl = isAbsUrl;\n        function getBaseUrl(url) {\n            var matcher = url.match(/^(?:[a-z0-9]+:)?\\/\\//i);\n            var prefix = \"\";\n            if (matcher) {\n                prefix = matcher[0];\n                url = url.substr(matcher[0].length);\n            }\n            var pos = url.indexOf(\"#\");\n            if (pos >= 0) {\n                url = url.substring(0, pos);\n            }\n            var pos = url.lastIndexOf(\"/\");\n            if (pos >= 0) {\n                url = url.substring(0, pos + 1);\n            }\n            return prefix + url;\n        }\n        text.getBaseUrl = getBaseUrl;\n        function joinUrl() {\n            var urls = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                urls[_i] = arguments[_i];\n            }\n            var result = null;\n            for (var _a = 0, urls_1 = urls; _a < urls_1.length; _a++) {\n                var u = urls_1[_a];\n                if (!result)\n                    result = u;\n                else {\n                    if (u[0] == \"/\")\n                        u = u.substr(1);\n                    if (result[result.length - 1] == \"/\") {\n                        result += u;\n                    }\n                    else\n                        result += \"/\" + u;\n                }\n            }\n            return result;\n        }\n        text.joinUrl = joinUrl;\n    })(text = tui.text || (tui.text = {}));\n})(tui || (tui = {}));\n/// <reference path=\"../core.ts\" />\n/// <reference path=\"../ajax/ajax.ts\" />\nvar tui;\n(function (tui) {\n    var service;\n    (function (service_1) {\n        \"use strict\";\n        function parseParameters(fn, desc) {\n            var params = \"\";\n            if (desc)\n                params = desc + \"\";\n            else {\n                var matched = fn.toString().match(/^\\s*function\\s*[a-zA-Z0-9_]*\\s*\\(([\\sa-zA-Z0-9,_\\$]*)\\)/);\n                if (matched) {\n                    params = matched[1];\n                }\n                else {\n                    matched = fn.toString().match(/^\\s*\\(([\\sa-zA-Z0-9,_\\$]*)\\)\\s*=>/);\n                    if (matched)\n                        params = matched[1];\n                }\n            }\n            return (params || \"\");\n        }\n        service_1.parseParameters = parseParameters;\n        var Service = (function (_super) {\n            __extends(Service, _super);\n            function Service() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            Service.prototype.use = function (fn, desc) {\n                service.use.call(this, fn, desc);\n            };\n            return Service;\n        }(tui.EventObject));\n        var _services = {};\n        var _serviceReady = true;\n        var _readyCallbacks = [];\n        function use(fn, desc) {\n            if (typeof fn === \"function\") {\n                var params = parseParameters(fn, desc);\n                var argv = params.split(\",\").map(function (s) {\n                    if (!s)\n                        return null;\n                    else if (s[0] === '$') {\n                        return tui.service.get(s.substr(1));\n                    }\n                    else {\n                        return null;\n                    }\n                });\n                fn.apply(this, argv);\n            }\n        }\n        service_1.use = use;\n        function getName(path) {\n            var begin = path.lastIndexOf(\"/\");\n            if (begin >= 0)\n                path = path.substr(begin + 1);\n            var end = path.lastIndexOf(\".\");\n            if (end >= 0)\n                path = path.substring(0, end);\n            return tui.text.toCamel(path.replace(/[\\-\\s\\.\\/]/g, \"_\"));\n        }\n        function load(services, names) {\n            _serviceReady = false;\n            var tasks = [];\n            for (var i = 0; i < services.length; i++) {\n                var s = services[i];\n                var name = names && names[i] || getName(s);\n                tasks.push(tui.ajax.getFunction(s, name));\n            }\n            $.when.apply(null, tasks).done(function () {\n                for (var i = 0; i < arguments.length; i++) {\n                    var p = arguments[i];\n                    register(p[1], p[0]);\n                }\n                ready();\n            }).fail(function () {\n                _serviceReady = true;\n            });\n        }\n        service_1.load = load;\n        function register(name, fn) {\n            var service = new Service();\n            service._constructor = fn;\n            _services[name] = service;\n        }\n        service_1.register = register;\n        function ready() {\n            for (var name_1 in _services) {\n                if (_services.hasOwnProperty(name_1)) {\n                    var service_2 = _services[name_1];\n                    service_2._constructor.call(service_2);\n                }\n            }\n            _serviceReady = true;\n            for (var _i = 0, _readyCallbacks_1 = _readyCallbacks; _i < _readyCallbacks_1.length; _i++) {\n                var cb = _readyCallbacks_1[_i];\n                cb();\n            }\n        }\n        service_1.ready = ready;\n        function get(name) {\n            return _services[name];\n        }\n        service_1.get = get;\n        function onReady(fn) {\n            if (_serviceReady) {\n                fn();\n            }\n            else {\n                _readyCallbacks.push(fn);\n            }\n        }\n        service_1.onReady = onReady;\n    })(service = tui.service || (tui.service = {}));\n})(tui || (tui = {}));\n/// <reference path=\"../core.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        var _maskOpened = false;\n        var _mask = document.createElement(\"div\");\n        _mask.setAttribute(\"unselectable\", \"on\");\n        _mask.onselectstart = function () { return false; };\n        var mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? \"DOMMouseScroll\" : \"mousewheel\";\n        $(_mask).on(mousewheelevt, function (ev) {\n            ev.stopPropagation();\n            ev.preventDefault();\n        });\n        function getEventPosition(e) {\n            var positions = [];\n            var event = e.originalEvent || e;\n            if (event.changedTouches) {\n                for (var i = 0; i < event.changedTouches.length; i++) {\n                    var touch = event.changedTouches[i];\n                    positions.push({ x: touch.clientX, y: touch.clientY });\n                }\n            }\n            else {\n                positions.push({ x: event.clientX, y: event.clientY });\n            }\n            return positions;\n        }\n        widget.getEventPosition = getEventPosition;\n        /**\n         * Show a mask layer to prevent user drag or select document elements which don't want to be affected.\n         * It's very useful when user perform a dragging operation.\n         */\n        function openDragMask(onMove, onClose) {\n            if (onClose === void 0) { onClose = null; }\n            if (_maskOpened)\n                return null;\n            _mask.innerHTML = \"\";\n            _mask.className = \"tui-mask\";\n            _mask.style.cursor = \"\";\n            _mask.removeAttribute(\"tabIndex\");\n            _mask.removeAttribute(\"tooltip\");\n            _mask.removeAttribute(\"fixed-tooltip\");\n            document.body.appendChild(_mask);\n            // _dragMoveFunc = onMove;\n            function closeDragMask(e) {\n                _maskOpened = false;\n                if (_mask.setCapture)\n                    $(_mask).off();\n                else {\n                    $(document).off(\"mousemove touchmove\", onMove);\n                    $(document).off(\"mouseup touchend\", closeDragMask);\n                }\n                tui.browser.removeNode(_mask);\n                if (typeof onClose === \"function\") {\n                    onClose(e);\n                }\n                e.preventDefault();\n            }\n            if (_mask.setCapture) {\n                _mask.setCapture();\n                $(_mask).on(\"mousemove touchmove\", onMove);\n                $(_mask).on(\"mouseup touchend\", closeDragMask);\n            }\n            else {\n                $(document).on(\"mousemove touchmove\", onMove);\n                $(document).on(\"mouseup touchend\", closeDragMask);\n            }\n            _maskOpened = true;\n            return _mask;\n        }\n        widget.openDragMask = openDragMask;\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"../core.ts\" />\n/// <reference path=\"../text/text.ts\" />\n/// <reference path=\"../ajax/ajax.ts\" />\n/// <reference path=\"../service/service.ts\" />\n/// <reference path=\"mask.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget_1) {\n        \"use strict\";\n        function parseValue(value) {\n            if (value === null || value.length === 0)\n                return null;\n            if (/^\\{(.|\\r|\\n)+\\}$/m.test(value)) {\n                value = value.substring(1, value.length - 1);\n                try {\n                    return eval(\"(\" + value + \")\");\n                }\n                catch (e) {\n                    console && console.error(\"Bad attribute: \" + e);\n                    return null;\n                }\n            }\n            else\n                return value;\n        }\n        var WidgetBase = (function (_super) {\n            __extends(WidgetBase, _super);\n            function WidgetBase() {\n                var _this = _super !== null && _super.apply(this, arguments) || this;\n                _this._data = undefined;\n                _this._rs = {};\n                return _this;\n            }\n            //restrict\n            WidgetBase.prototype.setRestriction = function (key, propCtrl) {\n                if (propCtrl === null)\n                    delete this._rs[key];\n                else\n                    this._rs[key] = propCtrl;\n            };\n            WidgetBase.prototype.setRestrictions = function (restrictions) {\n                for (var key in restrictions) {\n                    this.setRestriction(key, restrictions[key]);\n                }\n            };\n            WidgetBase.prototype.refresh = function () {\n                if (this.get(\"autoRefresh\") === true) {\n                    this.render();\n                }\n                return this;\n            };\n            WidgetBase.prototype.load = function () {\n                if (typeof this._data !== tui.UNDEFINED) {\n                    return;\n                }\n                this._data = {};\n                var elem = this.getComponent();\n                if (elem != null) {\n                    var dataStr = elem.getAttribute(\"props\");\n                    try {\n                        var tmpData = eval(\"(\" + dataStr + \")\");\n                        if (tmpData instanceof Object) {\n                            for (var key in tmpData) {\n                                if (tmpData.hasOwnProperty(key)) {\n                                    this._set(key, tmpData[key]);\n                                }\n                            }\n                        }\n                    }\n                    catch (e) {\n                        console && console.error(\"Bad props: \" + e);\n                    }\n                    var names = [];\n                    for (var i = 0; i < elem.attributes.length; i++) {\n                        var attr = elem.attributes[i];\n                        if (/^(style|class|tooltip|follow-tooltip|__widget__|jquery[\\d]+)$/.test(attr.name.toLowerCase()))\n                            continue;\n                        var v = parseValue(attr.value);\n                        if (v !== null)\n                            this._set(tui.text.toCamel(attr.name), v);\n                        if (!/^(id|name)$/i.test(attr.name.toLowerCase()))\n                            names.push(attr.name);\n                    }\n                    for (var _i = 0, names_1 = names; _i < names_1.length; _i++) {\n                        var name_2 = names_1[_i];\n                        elem.attributes.removeNamedItem(name_2);\n                        if (/^(onclick|onmousedown|onmouseup|onmousemove|ondblclick|onkeydown|onkeyup|onkeypress)$/i.test(name_2))\n                            elem[name_2.toLowerCase()] = null;\n                    }\n                }\n            };\n            WidgetBase.prototype.get = function (key, defaultValue) {\n                var value;\n                if (typeof key === tui.UNDEFINED || key === null) {\n                    value = this._data;\n                }\n                else if (typeof key === \"string\") {\n                    if (this._rs[key] && typeof this._rs[key].get === \"function\") {\n                        value = this._rs[key].get();\n                    }\n                    else {\n                        if (typeof this._data === \"object\")\n                            value = this._data[key];\n                        else\n                            value = null;\n                    }\n                }\n                if (typeof value === tui.UNDEFINED)\n                    value = null;\n                if (value === null && typeof defaultValue !== tui.UNDEFINED)\n                    return defaultValue;\n                else\n                    return value;\n            };\n            WidgetBase.prototype.set = function (p1, p2) {\n                this._set(p1, p2);\n                this.refresh();\n                return this;\n            };\n            WidgetBase.prototype._set = function (p1, p2) {\n                if (typeof p2 === tui.UNDEFINED && p1 instanceof Object) {\n                    for (var key in p1) {\n                        if (p1.hasOwnProperty(key))\n                            this._set(key, p1[key]);\n                    }\n                }\n                else if (typeof p1 === \"string\" && typeof p2 !== tui.UNDEFINED) {\n                    if (this._rs[p1] && typeof this._rs[p1].set === \"function\") {\n                        this._rs[p1].set(p2);\n                    }\n                    else {\n                        if (p2 === null) {\n                            this._data && delete this._data[p1];\n                        }\n                        else {\n                            if (typeof this._data === \"object\")\n                                this._data[p1] = p2;\n                        }\n                    }\n                }\n                return this;\n            };\n            WidgetBase.prototype.setInit = function (p1, p2) {\n                if (typeof p2 === tui.UNDEFINED) {\n                    if (p1 instanceof Object) {\n                        for (var key in p1) {\n                            if (p1.hasOwnProperty(key) && this.get(key) === null)\n                                this._set(key, p1[key]);\n                        }\n                    }\n                }\n                else {\n                    if (this.get(p1) === null)\n                        this._set(p1, p2);\n                }\n                return this;\n            };\n            return WidgetBase;\n        }(tui.EventObject)); // End of class WidgetBase\n        widget_1.WidgetBase = WidgetBase;\n        var namedWidgets = {};\n        var Widget = (function (_super) {\n            __extends(Widget, _super);\n            function Widget(root, initParam) {\n                var _this = _super.call(this) || this;\n                _this._lastWidth = null;\n                _this._lastHeight = null;\n                _this._components = {};\n                // if (getFullName(root) !== \"tui:\" + this.getNodeName()) {\n                // \tthrow new TypeError(\"Node type unmatched!\");\n                // }\n                _this._components[''] = root;\n                _this._ = root;\n                root.__widget__ = _this;\n                _this.initRestriction(); // install restrictor\n                _this.load(); // load initial properties\n                // Obtain all child nodes\n                var childNodes = [];\n                for (var i = 0; i < root.childNodes.length; i++) {\n                    var node = root.childNodes[i];\n                    childNodes.push(node);\n                }\n                for (var _i = 0, childNodes_1 = childNodes; _i < childNodes_1.length; _i++) {\n                    var removeNode = childNodes_1[_i];\n                    tui.browser.removeNode(removeNode);\n                }\n                _this.initChildren(childNodes);\n                if (typeof initParam !== tui.UNDEFINED) {\n                    _this._set(initParam);\n                }\n                _this.init();\n                // Any widget which has ID property will be registered in namedWidgets\n                var id = _this.get(\"id\");\n                if (typeof id === \"string\" && id.length > 0)\n                    namedWidgets[id] = _this;\n                return _this;\n            }\n            Widget.prototype.init = function () { };\n            ;\n            Widget.prototype.appendTo = function (parent, refresh) {\n                if (refresh === void 0) { refresh = true; }\n                if (typeof parent === \"string\") {\n                    parent = document.getElementById(parent);\n                }\n                if (parent && typeof parent === \"object\" && parent.appendChild) {\n                    parent.appendChild(this._);\n                    refresh && this.set(\"autoRefresh\", true);\n                }\n                return this;\n            };\n            Widget.prototype.detach = function () {\n                tui.browser.removeNode(this._);\n            };\n            Widget.prototype.initChildren = function (childNodes) {\n                // Default do nothing ...\n            };\n            Widget.prototype.initRestriction = function () {\n                var _this = this;\n                this.setRestrictions({\n                    \"id\": {\n                        \"set\": function (value) {\n                            var oldId = _this._.getAttribute(\"id\");\n                            if (oldId) {\n                                delete namedWidgets[oldId];\n                            }\n                            if (typeof value === \"string\" && value.length > 0) {\n                                namedWidgets[value] = _this;\n                                _this._.setAttribute(\"id\", value);\n                            }\n                            else\n                                _this._.removeAttribute(\"id\");\n                        },\n                        \"get\": function () {\n                            return _this._.getAttribute(\"id\");\n                        }\n                    },\n                    \"name\": {\n                        \"set\": function (value) {\n                            if (typeof value === \"string\" && value.length > 0) {\n                                _this._.setAttribute(\"name\", value);\n                            }\n                            else\n                                _this._.removeAttribute(\"name\");\n                        },\n                        \"get\": function () {\n                            return _this._.getAttribute(\"name\");\n                        }\n                    },\n                    \"parent\": {\n                        \"get\": function () {\n                            var elem = _this._.parentNode;\n                            while (elem) {\n                                if (elem.__widget__) {\n                                    return elem.__widget__;\n                                }\n                                else {\n                                    elem = elem.parentNode;\n                                }\n                            }\n                            return null;\n                        },\n                        \"set\": function (value) { }\n                    },\n                    \"disable\": {\n                        \"get\": function () {\n                            var v = _this._data[\"disable\"];\n                            if (v === null || typeof v === tui.UNDEFINED) {\n                                var parent_1 = _this.get(\"parent\");\n                                if (parent_1)\n                                    v = parent_1.get(\"disable\");\n                                return v === null ? false : !!v;\n                            }\n                            else\n                                return v;\n                        }\n                    },\n                    \"group\": {\n                        \"get\": function () {\n                            if (_this.get(\"inner\") === true)\n                                return null;\n                            if (_this._data[\"group\"])\n                                return _this._data[\"group\"];\n                            var parent = _this.get(\"parent\");\n                            if (parent && parent instanceof widget_1.Group && parent.get(\"name\"))\n                                return parent.get(\"name\");\n                            return null;\n                        }\n                    },\n                    \"tooltip\": {\n                        \"set\": function (value) {\n                            if (value)\n                                _this._.setAttribute(\"tooltip\", value);\n                            else\n                                _this._.removeAttribute(\"tooltip\");\n                        },\n                        \"get\": function () {\n                            return _this._.getAttribute(\"tooltip\");\n                        }\n                    },\n                    \"follow-tooltip\": {\n                        \"set\": function (value) {\n                            if (value)\n                                _this._.setAttribute(\"follow-tooltip\", value);\n                            else\n                                _this._.removeAttribute(\"follow-tooltip\");\n                        },\n                        \"get\": function () {\n                            return _this._.getAttribute(\"follow-tooltip\");\n                        }\n                    }\n                });\n            };\n            Widget.prototype.testResize = function () {\n                if (!tui.browser.isInDoc(this._))\n                    return;\n                if (this._.offsetWidth != this._lastWidth) {\n                    this._lastWidth = this._.offsetWidth;\n                    this.fire(\"resize\");\n                }\n                else if (this._.offsetHeight != this._lastHeight) {\n                    this._lastHeight = this._.offsetHeight;\n                    this.fire(\"resize\");\n                }\n            };\n            Widget.prototype.getComponent = function (name) {\n                if (arguments.length > 0) {\n                    return this._components[name];\n                }\n                else {\n                    return this._components[''];\n                }\n            };\n            // getNodeName(): string {\n            // \treturn text.toDashSplit(getClassName(this.constructor));\n            // }\n            Widget.prototype.focus = function () {\n                this._.focus();\n            };\n            return Widget;\n        }(WidgetBase)); // End of class Widget\n        widget_1.Widget = Widget;\n        /**\n         * Any config element can extends from this class.\n         */\n        var Item = (function (_super) {\n            __extends(Item, _super);\n            function Item(root) {\n                var _this = _super.call(this) || this;\n                _this._ = root;\n                _this.load();\n                return _this;\n            }\n            Item.prototype.getComponent = function (name) {\n                if (arguments.length > 0) {\n                    return null;\n                }\n                else {\n                    return this._;\n                }\n            };\n            Item.prototype.render = function () { };\n            return Item;\n        }(WidgetBase)); // End of ConfigNode\n        widget_1.Item = Item;\n        var widgetRegistration = {};\n        function register(constructor, nodeName) {\n            if (typeof nodeName === \"string\")\n                widgetRegistration[\"tui:\" + nodeName.toLowerCase()] = constructor;\n            else {\n                widgetRegistration[\"tui:\" + tui.text.toDashSplit(getClassName(constructor))] = constructor;\n            }\n        }\n        widget_1.register = register;\n        function get(id) {\n            if (typeof id === \"object\" && id.nodeName) {\n                if (id.__widget__)\n                    return id.__widget__;\n                else\n                    return null;\n            }\n            var elem = document.getElementById(id);\n            if (elem === null) {\n                if (namedWidgets[id])\n                    return namedWidgets[id];\n                else\n                    return null;\n            }\n            if (elem.__widget__)\n                return elem.__widget__;\n            else\n                return null;\n        }\n        widget_1.get = get;\n        window[\"$$\"] = get;\n        function create(type, initParam) {\n            if (typeof type !== \"string\")\n                throw new TypeError(\"Invalid parameters.\");\n            var constructor = widgetRegistration[\"tui:\" + type.toLowerCase()];\n            if (typeof constructor !== \"function\")\n                throw new Error(\"Undefined type: \" + type);\n            var element = document.createElement(\"tui:\" + type);\n            var obj;\n            if (typeof initParam !== tui.UNDEFINED)\n                obj = new constructor(element, initParam);\n            else\n                obj = new constructor(element);\n            obj.set(\"autoRefresh\", true);\n            return obj;\n        }\n        widget_1.create = create;\n        window[\"$new\"] = create;\n        function getClassName(func) {\n            var results = /function\\s+([^\\s]+)\\s*\\(/.exec(func.toString());\n            return (results && results.length > 1) ? results[1] : \"\";\n        }\n        widget_1.getClassName = getClassName;\n        function getFullName(targetElem) {\n            if (targetElem.scopeName && targetElem.scopeName.toLowerCase() === \"tui\") {\n                if (targetElem.nodeName.toLowerCase().match(\"^\" + targetElem.scopeName + \":\") !== null)\n                    return targetElem.nodeName.toLowerCase();\n                else\n                    return targetElem.scopeName + \":\" + targetElem.nodeName.toLowerCase();\n            }\n            else {\n                return targetElem.nodeName.toLowerCase();\n            }\n        }\n        widget_1.getFullName = getFullName;\n        function init(parent, initFunc) {\n            var initSet = [];\n            function searchInitCtrls(parent) {\n                for (var i = 0; i < parent.childNodes.length; i++) {\n                    var node = parent.childNodes[i];\n                    if (node.nodeType === 1) {\n                        var elem = node;\n                        var constructor = widgetRegistration[getFullName(elem)];\n                        if (constructor) {\n                            var item = [elem, constructor];\n                            initSet.push(item);\n                        }\n                        else\n                            searchInitCtrls(elem);\n                    }\n                }\n            }\n            searchInitCtrls(parent);\n            for (var _i = 0, initSet_1 = initSet; _i < initSet_1.length; _i++) {\n                var item = initSet_1[_i];\n                var elem = item[0];\n                var constructor = item[1];\n                // try {\n                if (!elem.__widget__) {\n                    var widget_2 = new constructor(elem);\n                    if (typeof initFunc === \"function\") {\n                        if (initFunc(widget_2))\n                            widget_2.set(\"autoRefresh\", true);\n                    }\n                    else\n                        widget_2.set(\"autoRefresh\", true);\n                }\n                else {\n                    var widget_3 = elem.__widget__;\n                    widget_3.refresh();\n                }\n            }\n        }\n        widget_1.init = init;\n        function search(p1, p2) {\n            var searchArea = null;\n            var filter = null;\n            if (typeof p2 === tui.UNDEFINED) {\n                if (typeof p1 === \"function\")\n                    filter = p1;\n                else if (typeof p1 === \"object\" && p1.nodeName)\n                    searchArea = p1;\n            }\n            else if (typeof p2 === \"function\") {\n                searchArea = p1;\n                filter = p2;\n            }\n            var result = [];\n            if (searchArea === null) {\n                searchArea = document.body;\n            }\n            function searchElem(parent) {\n                for (var i = 0; i < parent.childNodes.length; i++) {\n                    var node = parent.childNodes[i];\n                    if (node.nodeType !== 1) {\n                        continue;\n                    }\n                    var widget_4 = node.__widget__;\n                    if (widget_4 && (filter && filter(widget_4) || filter === null)) {\n                        result.push(widget_4);\n                    }\n                    else\n                        searchElem(node);\n                }\n            }\n            searchElem(searchArea);\n            return result;\n        }\n        widget_1.search = search;\n        // Detecting which widgets was resied.\n        var resizeRegistration = [];\n        function registerResize(nodeName) {\n            resizeRegistration.push(\"tui:\" + nodeName);\n        }\n        widget_1.registerResize = registerResize;\n        var detectResize;\n        $(window.document).ready(function () {\n            tui.service.onReady(function () {\n                init(document.body);\n                tui.event.fire(\"initialized\");\n            });\n            if (typeof document.body.scopeName === \"string\" && tui.ieVer < 9) {\n                detectResize = function () {\n                    for (var i = 0; i < resizeRegistration.length; i++) {\n                        var nodes = document.getElementsByTagName(resizeRegistration[i].substr(4));\n                        for (var j = 0; j < nodes.length; j++) {\n                            var node = nodes[j];\n                            if (node.scopeName.toUpperCase() === \"TUI\" && node.__widget__) {\n                                node.__widget__.testResize();\n                            }\n                        }\n                    }\n                    requestAnimationFrame(detectResize);\n                };\n            }\n            else {\n                detectResize = function () {\n                    for (var i = 0; i < resizeRegistration.length; i++) {\n                        var nodes = document.getElementsByTagName(resizeRegistration[i]);\n                        for (var j = 0; j < nodes.length; j++) {\n                            var node = nodes[j];\n                            if (node.__widget__) {\n                                node.__widget__.testResize();\n                            }\n                        }\n                    }\n                    requestAnimationFrame(detectResize);\n                };\n            }\n            requestAnimationFrame(detectResize);\n        });\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n(function (tui) {\n    tui.get = tui.widget.get;\n    tui.create = tui.widget.create;\n    tui.search = tui.widget.search;\n})(tui || (tui = {}));\n/// <reference path=\"base.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        widget.dialogStack = [];\n        var _mask = document.createElement(\"div\");\n        _mask.className = \"tui-dialog-mask\";\n        _mask.setAttribute(\"unselectable\", \"on\");\n        var mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? \"DOMMouseScroll\" : \"mousewheel\";\n        $(_mask).on(mousewheelevt + \" selectstart\", function (ev) {\n            ev.stopPropagation();\n            ev.preventDefault();\n        });\n        function reorder() {\n            tui.browser.removeNode(_mask);\n            if (widget.dialogStack.length > 0) {\n                document.body.insertBefore(_mask, widget.dialogStack[widget.dialogStack.length - 1]._);\n            }\n        }\n        function push(dlg) {\n            widget.dialogStack.push(dlg);\n            document.body.appendChild(dlg._);\n            reorder();\n        }\n        function remove(dlg) {\n            var index = widget.dialogStack.indexOf(dlg);\n            if (index >= 0) {\n                widget.dialogStack.splice(index, 1);\n            }\n            document.body.removeChild(dlg._);\n            reorder();\n        }\n        function getParent(dlg) {\n            var index = widget.dialogStack.indexOf(dlg);\n            if (index > 0) {\n                widget.dialogStack[index - 1];\n            }\n            else\n                return null;\n        }\n        function disableSelect() {\n            return false;\n        }\n        /**\n         * <dialog>\n         * Attributes: content(element or html), opened(boolean), title, buttons(button array), esc(boolean)\n         * Method: open(buttonDef: string = null), close()\n         * Events: open, close, click-<button name>\n         */\n        var Dialog = (function (_super) {\n            __extends(Dialog, _super);\n            function Dialog() {\n                var _this = _super !== null && _super.apply(this, arguments) || this;\n                _this._sizeTimer = null;\n                _this._contentSize = null;\n                _this._moved = false;\n                _this._init = true;\n                return _this;\n            }\n            Dialog.prototype.initChildren = function (childNodes) {\n                if (childNodes.length > 0) {\n                    var div = document.createElement(\"div\");\n                    for (var _i = 0, childNodes_2 = childNodes; _i < childNodes_2.length; _i++) {\n                        var node = childNodes_2[_i];\n                        div.appendChild(node);\n                    }\n                    this._set(\"content\", div);\n                }\n            };\n            Dialog.prototype.init = function () {\n                var _this = this;\n                var root$ = $(this._);\n                root$.attr(\"tabIndex\", \"-1\");\n                root$.html(\"<div class='tui-title-bar' unselectable='on'><span class='tui-text'></span><span class='tui-close'></span></div>\" +\n                    \"<div class='tui-content'></div><div class='tui-button-bar'></div>\");\n                var titleBar = this._components[\"titleBar\"] = root$.children(\".tui-title-bar\")[0];\n                var contentDiv = this._components[\"content\"] = root$.children(\".tui-content\")[0];\n                var buttonBar = this._components[\"buttonBar\"] = root$.children(\".tui-button-bar\")[0];\n                var closeIcon = this._components[\"closeIcon\"] = $(titleBar).children(\".tui-close\")[0];\n                titleBar.onselectstart = disableSelect;\n                buttonBar.onselectstart = disableSelect;\n                var content = this.get(\"content\");\n                if (typeof content === \"object\" && content && content.nodeName)\n                    contentDiv.appendChild(content);\n                else if (typeof content === \"string\") {\n                    contentDiv.innerHTML = content;\n                }\n                this.setInit(\"esc\", true);\n                widget.init(contentDiv); // Convert all child elements into tui controls\n                closeIcon.onclick = function () {\n                    _this.close();\n                };\n                tui.browser.removeNode(this._);\n                $(titleBar).on(\"mousedown\", function (e) {\n                    var o = (e.target || e.srcElement);\n                    if (o === closeIcon)\n                        return;\n                    var dialogX = _this._.offsetLeft;\n                    var dialogY = _this._.offsetTop;\n                    var beginX = e.clientX;\n                    var beginY = e.clientY;\n                    var winSize = { width: _mask.offsetWidth, height: _mask.offsetHeight };\n                    var mask = tui.widget.openDragMask(function (e) {\n                        var l = dialogX + e.clientX - beginX;\n                        var t = dialogY + e.clientY - beginY;\n                        if (l > winSize.width - _this._.offsetWidth)\n                            l = winSize.width - _this._.offsetWidth;\n                        if (l < 0)\n                            l = 0;\n                        if (t > winSize.height - _this._.offsetHeight)\n                            t = winSize.height - _this._.offsetHeight;\n                        if (t < 0)\n                            t = 0;\n                        _this._.style.left = l + \"px\";\n                        _this._.style.top = t + \"px\";\n                        _this._moved = true;\n                    }, function (e) {\n                        _this.render();\n                    });\n                });\n                root$.on(mousewheelevt, function (ev) {\n                    ev.stopPropagation();\n                });\n            };\n            Dialog.prototype.setContent = function (content) {\n                var contentDiv = this._components[\"content\"];\n                contentDiv.innerHTML = \"\";\n                if (typeof content === \"object\" && content.nodeName) {\n                    content.style.display = \"block\";\n                    contentDiv.appendChild(content);\n                }\n                else if (typeof content === \"string\") {\n                    contentDiv.innerHTML = content;\n                }\n                this.render();\n            };\n            Dialog.prototype.setButtons = function (buttonDef) {\n                var _this = this;\n                if (buttonDef === void 0) { buttonDef = null; }\n                var buttonBar = this._components[\"buttonBar\"];\n                buttonBar.innerHTML = \"\";\n                if (typeof buttonDef === \"string\" && buttonDef.length > 0) {\n                    var names = buttonDef.split(\",\");\n                    var _loop_1 = function (name_3) {\n                        var pair = name_3.split(\"#\");\n                        var btn = widget.create(\"button\", { text: tui.str($.trim(pair[0])) });\n                        if (pair.length > 1 && $.trim(pair[1]).length > 0)\n                            btn._.className = pair[1];\n                        btn.on(\"click\", function (e) {\n                            _this.fire(\"btnclick\", { e: e, button: $.trim(pair[0]) });\n                        });\n                        btn.appendTo(buttonBar);\n                    };\n                    for (var _i = 0, names_2 = names; _i < names_2.length; _i++) {\n                        var name_3 = names_2[_i];\n                        _loop_1(name_3);\n                    }\n                    buttonBar.style.display = \"block\";\n                }\n                else {\n                    buttonBar.style.display = \"none\";\n                }\n                this.render();\n            };\n            Dialog.prototype.open = function (buttonDef) {\n                var _this = this;\n                if (buttonDef === void 0) { buttonDef = null; }\n                if (this.get(\"opened\"))\n                    return;\n                var contentDiv = this._components[\"content\"];\n                widget.init(contentDiv);\n                this._init = true;\n                this._moved = false;\n                $(this._).css({\n                    \"display\": \"block\",\n                    \"position\": \"fixed\"\n                });\n                this._set(\"opened\", true);\n                push(this);\n                this.setButtons(buttonDef);\n                this._.focus();\n                this.fire(\"open\");\n                this._sizeTimer = setInterval(function () {\n                    if (_this._contentSize == null)\n                        return;\n                    if (contentDiv.scrollHeight !== _this._contentSize.height ||\n                        contentDiv.scrollWidth !== _this._contentSize.width) {\n                        _this.refresh();\n                    }\n                }, 50);\n            };\n            Dialog.prototype.close = function () {\n                if (!this.get(\"opened\"))\n                    return;\n                clearInterval(this._sizeTimer);\n                this._sizeTimer = null;\n                this._moved = false;\n                this._contentSize = null;\n                remove(this);\n                this._set(\"opened\", false);\n                this.fire(\"close\");\n            };\n            Dialog.prototype.render = function () {\n                if (!this.get(\"opened\"))\n                    return;\n                var titleBar = this._components[\"titleBar\"];\n                var buttonBar = this._components[\"buttonBar\"];\n                var contentDiv = this._components[\"content\"];\n                var closeIcon = this._components[\"closeIcon\"];\n                // Adjust title bar\n                if (this.get(\"title\") === null && !this.get(\"esc\")) {\n                    titleBar.style.display = \"none\";\n                }\n                else {\n                    titleBar.style.display = \"block\";\n                    if (this.get(\"esc\")) {\n                        closeIcon.style.display = \"inline-block\";\n                    }\n                    else\n                        closeIcon.style.display = \"none\";\n                    var titleText = $(titleBar).children(\".tui-text\")[0];\n                    titleText.innerHTML = this.get(\"title\") !== null ? this.get(\"title\") : \"\";\n                    if (tui.ieVer >= 7 && tui.ieVer < 9) {\n                        titleText.style.width = \"\";\n                        titleText.style.width = titleText.offsetWidth + \"px\";\n                    }\n                }\n                // Change position\n                var winSize = { width: _mask.offsetWidth, height: _mask.offsetHeight };\n                var root = this._;\n                var root$ = $(root);\n                // Limit content size\n                contentDiv.style.maxHeight = \"\";\n                root$.css({\n                    \"maxWidth\": winSize.width + \"px\",\n                    \"maxHeight\": winSize.height + \"px\"\n                });\n                $(contentDiv).css({\n                    \"maxWidth\": winSize.width - $(contentDiv).outerWidth() + $(contentDiv).width() + \"px\",\n                    \"maxHeight\": winSize.height - titleBar.offsetHeight - buttonBar.offsetHeight - $(contentDiv).outerHeight() + $(contentDiv).height() + \"px\"\n                });\n                var box = {\n                    left: root.offsetLeft,\n                    top: root.offsetTop,\n                    width: root.offsetWidth,\n                    height: root.offsetHeight\n                };\n                if (this._init) {\n                    var parent = getParent(this);\n                    var centX, centY;\n                    if (parent) {\n                        var e = parent._;\n                        centX = e.offsetLeft + e.offsetWidth / 2;\n                        centY = e.offsetTop + e.offsetHeight / 2;\n                        this._moved = true;\n                    }\n                    else {\n                        centX = winSize.width / 2;\n                        centY = winSize.height / 2;\n                        this._moved = false;\n                    }\n                    box.left = centX - box.width / 2;\n                    box.top = centY - box.height / 2;\n                    this._init = false;\n                }\n                else {\n                    if (!this._moved) {\n                        box.left = (winSize.width - box.width) / 2;\n                        box.top = (winSize.height - box.height) / 2;\n                    }\n                }\n                if (box.left + box.width > winSize.width)\n                    box.left = winSize.width - box.width;\n                if (box.top + box.height > winSize.height)\n                    box.top = winSize.height - box.height;\n                if (box.left < 0)\n                    box.left = 0;\n                if (box.top < 0)\n                    box.top = 0;\n                this._.style.left = box.left + \"px\";\n                this._.style.top = box.top + \"px\";\n                this._contentSize = { width: contentDiv.scrollWidth, height: contentDiv.scrollHeight };\n            };\n            return Dialog;\n        }(widget.Widget)); // End of Dialog class\n        widget.Dialog = Dialog;\n        widget.register(Dialog, \"dialog\");\n        $(document).on(\"keydown\", function (e) {\n            var k = e.keyCode;\n            if (widget.dialogStack.length <= 0)\n                return;\n            var dlg = widget.dialogStack[widget.dialogStack.length - 1];\n            if (k === tui.browser.KeyCode.ESCAPE) {\n                dlg.get(\"esc\") && dlg.close();\n            }\n            else if (k === tui.browser.KeyCode.TAB) {\n                setTimeout(function () {\n                    if (!tui.browser.isPosterity(dlg._, document.activeElement)) {\n                        dlg._.focus();\n                    }\n                });\n            }\n        });\n        $(window).resize(function () {\n            for (var i = 0; i < widget.dialogStack.length; i++) {\n                widget.dialogStack[i].refresh();\n            }\n        });\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n(function (tui) {\n    \"use strict\";\n    function makeContent(message, className) {\n        return tui.text.format(\"<table align='center' class='tui-msg-container'><tr><td class='{1}'><span></span></td><td>{0}</td></tr></table>\", message, className);\n    }\n    function makeDialog(message, className, title, btn, callback, esc) {\n        if (btn === void 0) { btn = \"ok#tui-primary\"; }\n        if (callback === void 0) { callback = null; }\n        if (esc === void 0) { esc = true; }\n        var dlg = tui.widget.create(\"dialog\", {\n            \"content\": makeContent(message, className),\n            \"title\": title,\n            \"esc\": esc\n        });\n        dlg.on(\"btnclick\", function (e) {\n            dlg.close();\n            if (callback)\n                callback(e.data.button);\n        });\n        dlg.open(btn);\n        return dlg;\n    }\n    function msgbox(message, title) {\n        return makeDialog(message, \"tui-msg-box\", title);\n    }\n    tui.msgbox = msgbox;\n    function infobox(message, title) {\n        return makeDialog(message, \"tui-info-box\", title);\n    }\n    tui.infobox = infobox;\n    function okbox(message, title) {\n        return makeDialog(message, \"tui-ok-box\", title);\n    }\n    tui.okbox = okbox;\n    function errbox(message, title) {\n        return makeDialog(message, \"tui-err-box\", title);\n    }\n    tui.errbox = errbox;\n    function warnbox(message, title) {\n        return makeDialog(message, \"tui-warn-box\", title);\n    }\n    tui.warnbox = warnbox;\n    function askbox(message, title, callback) {\n        if (typeof title === \"function\")\n            callback = title;\n        return makeDialog(message, \"tui-ask-box\", title, \"ok#tui-primary,cancel\", function (buttonName) {\n            if (typeof callback === \"function\")\n                callback(buttonName === \"ok\");\n        });\n    }\n    tui.askbox = askbox;\n    var refCount = 0;\n    var waitDlg = null;\n    var waitMsg = null;\n    function waitbox(message) {\n        if (waitDlg == null) {\n            refCount = 0;\n            waitMsg = [message];\n            waitDlg = makeDialog(message, \"tui-wait-box\", null, null, null, false);\n        }\n        else {\n            waitMsg.push(message);\n            waitDlg.setContent(makeContent(message, \"tui-wait-box\"));\n        }\n        var index = waitMsg.length - 1;\n        refCount++;\n        var closed = false;\n        return {\n            close: function () {\n                if (!closed) {\n                    refCount--;\n                    closed = true;\n                    waitMsg[index] = null;\n                    for (var i = index - 1; i >= 0; i--) {\n                        if (waitMsg[i] != null) {\n                            waitDlg.setContent(makeContent(waitMsg[i], \"tui-wait-box\"));\n                            break;\n                        }\n                    }\n                    if (refCount === 0) {\n                        waitDlg.close();\n                        waitDlg = null;\n                        waitMsg = null;\n                    }\n                }\n            },\n            setMessage: function (message) {\n                if (!closed) {\n                    waitMsg[index] = message;\n                    if (index === waitMsg.length - 1)\n                        waitDlg.setContent(makeContent(message, \"tui-wait-box\"));\n                }\n            }\n        };\n    }\n    tui.waitbox = waitbox;\n    function progressbox(message, cancelProc) {\n        if (cancelProc === void 0) { cancelProc = null; }\n        // TODO: NOT FINISHED\n        return null;\n    }\n    tui.progressbox = progressbox;\n})(tui || (tui = {}));\n/// <reference path=\"../core.ts\" />\n/// <reference path=\"../widget/dialog.ts\" />\nvar tui;\n(function (tui) {\n    var ajax;\n    (function (ajax) {\n        $.ajaxSetup({\n            \"timeout\": 30000,\n            \"xhrFields\": {\n                'withCredentials': true\n            }\n        });\n        function send(url, method, data, options) {\n            var deffered = $.Deferred();\n            var waitbox = null;\n            if (!options || !options[\"silent\"])\n                waitbox = tui.waitbox(tui.str(\"Processing...\"));\n            var ajaxData = {\n                \"type\": method.toUpperCase(),\n                \"url\": url,\n                \"contentType\": \"application/json\",\n                \"data\": (method.toUpperCase() === \"GET\" ? data : JSON.stringify(data)),\n                \"complete\": function (jqXHR, status) {\n                    waitbox && waitbox.close();\n                    if (status === \"success\") {\n                        var respJson = /^\\s*application\\/json\\s*(;.+)?/i.test(jqXHR.getResponseHeader(\"content-type\"));\n                        var respVal = (respJson ? jqXHR.responseJSON : jqXHR.responseText);\n                        deffered.resolve(respVal, jqXHR);\n                    }\n                    else {\n                        var plainType = /^\\s*text\\/plain\\s*(;.+)?/i.test(jqXHR.getResponseHeader(\"content-type\"));\n                        var respText;\n                        if (plainType && jqXHR.responseText)\n                            respText = tui.str(jqXHR.responseText);\n                        else {\n                            if (jqXHR.status != 0)\n                                respText = tui.str(status) + \" (\" + jqXHR.status + \")\";\n                            else\n                                respText = \"Operation was canceled!\";\n                        }\n                        if ((!options || !options[\"silent\"]) && jqXHR.status != 0)\n                            tui.errbox(respText);\n                        deffered.reject(jqXHR.status, respText, jqXHR);\n                    }\n                },\n                \"processData\": false\n            };\n            if (options) {\n                for (var k in options) {\n                    if (options.hasOwnProperty(k)) {\n                        ajaxData[k] = options[k];\n                    }\n                }\n            }\n            $.ajax(ajaxData);\n            return deffered;\n        }\n        ajax.send = send;\n        function post(url, data, options) {\n            return send(url, \"post\", data, options);\n        }\n        ajax.post = post;\n        function post_(url, data, options) {\n            if (!options)\n                options = { \"silent\": true };\n            else\n                options[\"silent\"] = true;\n            return send(url, \"post\", data, options);\n        }\n        ajax.post_ = post_;\n        function get(url, options) {\n            return send(url, \"get\", null, options);\n        }\n        ajax.get = get;\n        function get_(url, options) {\n            if (!options)\n                options = { \"silent\": true };\n            else\n                options[\"silent\"] = true;\n            return send(url, \"get\", null, options);\n        }\n        ajax.get_ = get_;\n        function getScript(url) {\n            var deffered = $.Deferred();\n            var xhr = new XMLHttpRequest();\n            xhr.onreadystatechange = function () {\n                if (xhr.readyState == 4) {\n                    if (xhr.status == 200)\n                        deffered.resolve(xhr.responseText, xhr);\n                    else\n                        deffered.reject(xhr.status, xhr.responseText, xhr);\n                }\n            };\n            xhr.open(\"GET\", url, true);\n            xhr.send(null);\n            return deffered;\n        }\n        ajax.getScript = getScript;\n        var TAG = /<(\\/?[a-z0-9_\\-:]+)(\\s+[a-z0-9_\\-]+(\\s*=('[^']*'|\"[^\"]*\"|[^\\s>]+)))*\\/?>/img;\n        var SCRIPT_END = /<\\/\\s*script(\\s+[a-z0-9_\\-]+(\\s*=('[^']*'|\"[^\"]*\"|[^\\s>]+)))*>/img;\n        function getHtmlBody(result) {\n            // To compatible IE 8~9 I must parse html by myself!\n            if (result == null || result.length == 0)\n                return document.createElement(\"body\");\n            TAG.lastIndex = 0;\n            var len = result.length;\n            var m;\n            var bodyStart = null;\n            var bodyEnd = null;\n            while ((m = TAG.exec(result)) != null) {\n                var tag = m[1].toLowerCase();\n                if (tag === \"script\") {\n                    SCRIPT_END.lastIndex = TAG.lastIndex;\n                    var scriptEnd = SCRIPT_END.exec(result);\n                    if (scriptEnd == null)\n                        break;\n                    TAG.lastIndex = SCRIPT_END.lastIndex;\n                }\n                else if (tag === \"body\") {\n                    bodyStart = TAG.lastIndex;\n                }\n                else if (tag === \"/body\") {\n                    bodyEnd = m.index;\n                }\n                else if (tag === \"/html\") {\n                    if (bodyEnd == null)\n                        bodyEnd = m.index;\n                }\n            }\n            if (bodyStart != null) {\n                if (bodyEnd != null && bodyEnd >= bodyStart) {\n                    result = result.substring(bodyStart, bodyEnd);\n                }\n                else {\n                    result = result.substring(bodyStart);\n                }\n            }\n            var body = document.createElement(\"body\");\n            body.innerHTML = result;\n            return body;\n        }\n        function getBody(url) {\n            var deffered = $.Deferred();\n            getScript(url).done(function (result) {\n                deffered.resolve(getHtmlBody(result).innerHTML);\n            }).fail(function (status, responseText, xhr) {\n                deffered.reject(status, responseText, xhr);\n            });\n            return deffered;\n        }\n        ajax.getBody = getBody;\n        function getComponent(url) {\n            var deffered = $.Deferred();\n            getScript(url).done(function (result) {\n                var body = getHtmlBody(result);\n                for (var i = 0; i < body.children.length; i++) {\n                    var child = body.children[i];\n                    if (tui.widget.getFullName(child) === \"tui:component\") {\n                        var handler = child.getAttribute(\"handler\");\n                        if (handler && handler.trim()) {\n                            if (!tui.text.isAbsUrl(handler)) {\n                                handler = tui.text.joinUrl(tui.text.getBaseUrl(url), handler);\n                            }\n                        }\n                        deffered.resolve(child.innerHTML, handler ? handler : null);\n                        return;\n                    }\n                }\n                deffered.resolve(body.innerHTML);\n            }).fail(function (status, responseText, xhr) {\n                deffered.reject(status, responseText, xhr);\n            });\n            return deffered;\n        }\n        ajax.getComponent = getComponent;\n        function getFunction(url, param) {\n            var deffered = $.Deferred();\n            getScript(url).done(function (result) {\n                var fn = eval(\"(0,function(){\\n\" + result + \"})\"\n                    + \"\\n//# sourceURL=\" + url);\n                deffered.resolve(fn, param);\n            }).fail(function (status, responseText, xhr) {\n                deffered.reject(status, responseText, xhr);\n            });\n            return deffered;\n        }\n        ajax.getFunction = getFunction;\n        window.$ajax = send;\n        window.$post = post;\n        window.$post_ = post_; // silent mode\n        window.$get = get;\n        window.$get_ = get_; // silent mode\n    })(ajax = tui.ajax || (tui.ajax = {}));\n})(tui || (tui = {}));\n/// <reference path=\"../core.ts\" />\nvar tui;\n(function (tui) {\n    var browser;\n    (function (browser) {\n        \"use strict\";\n        var BackupedScrollPosition = (function () {\n            function BackupedScrollPosition(target) {\n                this.backupInfo = [];\n                var obj = target;\n                while (obj && obj !== document.body) {\n                    obj = obj.parentElement;\n                    if (obj)\n                        this.backupInfo.push({ obj: obj, left: obj.scrollLeft, top: obj.scrollTop });\n                }\n            }\n            BackupedScrollPosition.prototype.restore = function () {\n                for (var i = 0; i < this.backupInfo.length; i++) {\n                    var item = this.backupInfo[i];\n                    item.obj.scrollLeft = item.left;\n                    item.obj.scrollTop = item.top;\n                }\n            };\n            return BackupedScrollPosition;\n        }());\n        browser.BackupedScrollPosition = BackupedScrollPosition;\n        function backupScrollPosition(target) {\n            return new BackupedScrollPosition(target);\n        }\n        browser.backupScrollPosition = backupScrollPosition;\n        function focusWithoutScroll(target) {\n            setTimeout(function () {\n                if (tui.ieVer > 0) {\n                    target.setActive();\n                }\n                else if (tui.ffVer > 0)\n                    target.focus();\n                else {\n                    var backup = tui.browser.backupScrollPosition(target);\n                    target.focus();\n                    backup.restore();\n                }\n            }, 0);\n        }\n        browser.focusWithoutScroll = focusWithoutScroll;\n        function scrollToElement(elem, p1, p2) {\n            var distance = 0;\n            if (typeof p1 === \"number\")\n                distance = p1;\n            var cb = null;\n            if (typeof p1 === \"function\" && typeof p2 === tui.UNDEFINED)\n                cb = p1;\n            if (typeof p2 === \"function\")\n                cb = p2;\n            $(getWindowScrollElement()).animate({ scrollTop: $(elem).offset().top - distance }, 200, cb);\n        }\n        browser.scrollToElement = scrollToElement;\n        function toElement(html, withParentDiv) {\n            if (withParentDiv === void 0) { withParentDiv = false; }\n            var div = document.createElement(\"div\");\n            div.innerHTML = $.trim(html);\n            if (withParentDiv)\n                return div;\n            var el = div.firstChild;\n            return div.removeChild(el);\n        }\n        browser.toElement = toElement;\n        function toHTML(node) {\n            var elem = document.createElement(\"span\");\n            if (typeof node.nodeName === \"string\") {\n                elem.appendChild(node);\n            }\n            else if (typeof node.length === \"number\") {\n                for (var i = 0; i < node.length; i++) {\n                    elem.appendChild(node[i]);\n                }\n            }\n            return elem.innerHTML;\n        }\n        browser.toHTML = toHTML;\n        function removeNode(node) {\n            node.parentNode && node.parentNode.removeChild(node);\n        }\n        browser.removeNode = removeNode;\n        function toSafeText(text) {\n            return text.replace(/<|>|&/g, function (str) {\n                var args = [];\n                for (var _i = 1; _i < arguments.length; _i++) {\n                    args[_i - 1] = arguments[_i];\n                }\n                if (str === \"<\")\n                    return \"&lt;\";\n                else if (str === \"<\")\n                    return \"&gt;\";\n                else if (str === \"&\")\n                    return \"&amp;\";\n                else\n                    return str;\n            });\n        }\n        browser.toSafeText = toSafeText;\n        /**\n         * Get or set a HTMLElement's text content, return Element's text content.\n         * @param elem {HTMLElement or ID of the element} Objective element\n         * @param text {string or boolean}\n         */\n        function nodeText(elem, text) {\n            if (typeof elem === \"string\")\n                elem = document.getElementById(elem);\n            if (elem) {\n                if (typeof text === \"string\") {\n                    elem.innerHTML = \"\";\n                    elem.appendChild(document.createTextNode(text));\n                    return text;\n                }\n                if (typeof text !== \"boolean\")\n                    text = true;\n                var buf = \"\";\n                for (var i = 0; i < elem.childNodes.length; i++) {\n                    var c = elem.childNodes[i];\n                    if (c.nodeName.toLowerCase() === \"#text\") {\n                        buf += c.nodeValue;\n                    }\n                    else if (text)\n                        buf += nodeText(c);\n                }\n                return buf;\n            }\n            else\n                return null;\n        }\n        function getNodeText(elem) {\n            return nodeText(elem);\n        }\n        browser.getNodeText = getNodeText;\n        function setNodeText(elem, text) {\n            nodeText(elem, text);\n        }\n        browser.setNodeText = setNodeText;\n        function getNodeOwnText(elem) {\n            return nodeText(elem, false);\n        }\n        browser.getNodeOwnText = getNodeOwnText;\n        function getRectOfParent(elem) {\n            if (elem === null)\n                return null;\n            return {\n                left: elem.offsetLeft,\n                top: elem.offsetTop,\n                width: elem.offsetWidth,\n                height: elem.offsetHeight\n            };\n        }\n        browser.getRectOfParent = getRectOfParent;\n        function getRectOfPage(elem) {\n            if (elem === null)\n                return null;\n            var offset = $(elem).offset();\n            return {\n                left: offset.left,\n                top: offset.top,\n                width: elem.offsetWidth,\n                height: elem.offsetHeight\n            };\n        }\n        browser.getRectOfPage = getRectOfPage;\n        function getRectOfScreen(elem) {\n            if (elem === null)\n                return null;\n            var offset = $(elem).offset();\n            var $doc = $(document);\n            return {\n                left: offset.left - $doc.scrollLeft(),\n                top: offset.top - $doc.scrollTop(),\n                width: elem.offsetWidth,\n                height: elem.offsetHeight\n            };\n        }\n        browser.getRectOfScreen = getRectOfScreen;\n        /**\n         * Get top window's body element\n         */\n        function getTopBody() {\n            return top.document.body || top.document.getElementsByTagName(\"BODY\")[0];\n        }\n        browser.getTopBody = getTopBody;\n        /**\n         * Get element's owner window\n         */\n        function getWindow(elem) {\n            return elem.ownerDocument.defaultView || elem.ownerDocument.parentWindow;\n        }\n        browser.getWindow = getWindow;\n        function getWindowScrollElement() {\n            if (tui.ieVer > 0 || tui.ffVer > 0) {\n                return window.document.documentElement;\n            }\n            else {\n                return window.document.body;\n            }\n        }\n        browser.getWindowScrollElement = getWindowScrollElement;\n        var keepTopList = [];\n        function keepTopProc() {\n            var scrollWindow = browser.getWindowScrollElement();\n            for (var _i = 0, keepTopList_1 = keepTopList; _i < keepTopList_1.length; _i++) {\n                var item = keepTopList_1[_i];\n                var rect = browser.getRectOfScreen(item.elem);\n                if (rect.top < item.top) {\n                    item.oldPosition = item.elem.style.position;\n                    item.oldTop = item.elem.style.top;\n                    item.oldLeft = item.elem.style.left;\n                    item.oldWidth = item.elem.style.width;\n                    item.oldZIndex = item.elem.style.zIndex;\n                    item.scrollTop = scrollWindow.scrollTop;\n                    item.scrollLeft = scrollWindow.scrollLeft;\n                    item.elem.style.zIndex = \"1000\";\n                    item.elem.style.width = item.elem.clientWidth + \"px\";\n                    item.elem.style.position = \"fixed\";\n                    item.elem.style.top = item.top + \"px\";\n                    item.elem.style.left = rect.left + \"px\";\n                    item.itemLeft = rect.left;\n                    item.keepTop = true;\n                }\n                else if (scrollWindow.scrollTop < item.scrollTop) {\n                    item.elem.style.position = item.oldPosition;\n                    item.elem.style.top = item.oldTop;\n                    item.elem.style.left = item.oldLeft;\n                    item.elem.style.width = item.oldWidth;\n                    item.keepTop = false;\n                }\n                else if (item.keepTop) {\n                    item.elem.style.left = (item.itemLeft - scrollWindow.scrollLeft + item.scrollLeft) + \"px\";\n                }\n            }\n        }\n        $(window).scroll(keepTopProc);\n        function keepToTop(elem, top) {\n            if (top === void 0) { top = 0; }\n            keepTopList.push({ keepTop: false, elem: elem, top: top });\n        }\n        browser.keepToTop = keepToTop;\n        function cancelKeepToTop(elem) {\n            var newList = [];\n            for (var _i = 0, keepTopList_2 = keepTopList; _i < keepTopList_2.length; _i++) {\n                var item = keepTopList_2[_i];\n                if (item.elem !== elem) {\n                    newList.push(item);\n                }\n                else {\n                    item.elem.style.position = item.oldPosition;\n                    item.elem.style.top = item.oldTop;\n                    item.elem.style.left = item.oldLeft;\n                    item.elem.style.width = item.oldWidth;\n                    item.keepTop = false;\n                }\n            }\n            keepTopList = newList;\n        }\n        browser.cancelKeepToTop = cancelKeepToTop;\n        function getCurrentStyle(elem) {\n            if (elem.currentStyle)\n                return elem.currentStyle;\n            else if (window.getComputedStyle) {\n                return window.getComputedStyle(elem);\n            }\n            else\n                return elem.style;\n        }\n        browser.getCurrentStyle = getCurrentStyle;\n        /**\n         * Test whether the button code is indecated that the event is triggered by a left mouse button.\n         */\n        function isLButton(e) {\n            var button = (typeof e.which !== \"undefined\") ? e.which : e.button;\n            if (button == 1) {\n                return true;\n            }\n            else\n                return false;\n        }\n        browser.isLButton = isLButton;\n        /**\n         * Prevent user press backspace key to go back to previous page\n         */\n        function banBackspace() {\n            function ban(e) {\n                var ev = e || window.event;\n                var obj = ev.target || ev.srcElement;\n                var t = obj.type || obj.getAttribute('type');\n                var vReadOnly = obj.readOnly;\n                var vDisabled = obj.disabled;\n                vReadOnly = (typeof vReadOnly === tui.UNDEFINED) ? false : vReadOnly;\n                vDisabled = (typeof vDisabled === tui.UNDEFINED) ? true : vDisabled;\n                var flag1 = ev.keyCode === 8 && (t === \"password\" || t === \"text\" || t === \"textarea\") && (vReadOnly || vDisabled);\n                var flag2 = ev.keyCode === 8 && t !== \"password\" && t !== \"text\" && t !== \"textarea\";\n                if (flag2 || flag1)\n                    return false;\n            }\n            $(document).bind(\"keypress\", ban);\n            $(document).bind(\"keydown\", ban);\n        }\n        browser.banBackspace = banBackspace;\n        function cancelDefault(event) {\n            if (event.preventDefault) {\n                event.preventDefault();\n            }\n            else {\n                event.returnValue = false;\n            }\n            return false;\n        }\n        browser.cancelDefault = cancelDefault;\n        function cancelBubble(event) {\n            if (event && event.stopPropagation)\n                event.stopPropagation();\n            else\n                window.event.cancelBubble = true;\n            return false;\n        }\n        browser.cancelBubble = cancelBubble;\n        /**\n         * Detect whether the given parent element is the real ancestry element\n         * @param elem\n         * @param parent\n         */\n        function isAncestry(elem, parent) {\n            while (elem) {\n                if (elem === parent)\n                    return true;\n                else\n                    elem = elem.parentNode;\n            }\n            return false;\n        }\n        browser.isAncestry = isAncestry;\n        /**\n         * Detect whether the given child element is the real posterity element\n         * @param elem\n         * @param child\n         */\n        function isPosterity(elem, child) {\n            return isAncestry(child, elem);\n        }\n        browser.isPosterity = isPosterity;\n        function isFireInside(elem, event) {\n            var target = event.target || event.srcElement;\n            return isPosterity(elem, target);\n        }\n        browser.isFireInside = isFireInside;\n        /**\n         * Detect whether the element is inside the document\n         * @param {type} elem\n         */\n        function isInDoc(elem) {\n            var obj = elem;\n            while (obj) {\n                if (obj.nodeName.toUpperCase() === \"HTML\")\n                    return true;\n                obj = obj.parentElement;\n            }\n            return false;\n        }\n        browser.isInDoc = isInDoc;\n        /**\n         * Set cookie value\n         * @param name\n         * @param value\n         * @param expires valid days\n         */\n        function saveCookie(name, value, expires, path, domain, secure) {\n            if (secure === void 0) { secure = false; }\n            // set time, it's in milliseconds\n            var today = new Date();\n            today.setTime(today.getTime());\n            /*\n            if the expires variable is set, make the correct\n            expires time, the current script below will set\n            it for x number of days, to make it for hours,\n            delete * 24, for minutes, delete * 60 * 24\n            */\n            if (expires) {\n                expires = expires * 1000 * 60 * 60 * 24;\n            }\n            var expires_date = new Date(today.getTime() + (expires));\n            document.cookie = name + \"=\" + encodeURIComponent(JSON.stringify(value)) +\n                ((expires) ? \";expires=\" + expires_date.toUTCString() : \"\") +\n                ((path) ? \";path=\" + path : \"\") +\n                ((domain) ? \";domain=\" + domain : \"\") +\n                ((secure) ? \";secure\" : \"\");\n        }\n        browser.saveCookie = saveCookie;\n        /**\n         * Get cookie value\n         * @param name\n         */\n        function loadCookie(name) {\n            var arr = document.cookie.match(new RegExp(\"(^| )\" + name + \"=([^;]*)(;|$)\"));\n            if (arr !== null)\n                return JSON.parse(decodeURIComponent(arr[2]));\n            else\n                return null;\n        }\n        browser.loadCookie = loadCookie;\n        /**\n         * Delete cookie\n         * @param name\n         */\n        function deleteCookie(name, path, domain) {\n            if (loadCookie(name))\n                document.cookie = name + \"=\" +\n                    ((path) ? \";path=\" + path : \"\") +\n                    ((domain) ? \";domain=\" + domain : \"\") +\n                    \";expires=Thu, 01-Jan-1970 00:00:01 GMT\";\n        }\n        browser.deleteCookie = deleteCookie;\n        /**\n         * Save key value into local storage, if local storage doesn't usable then use local cookie instead.\n         * @param {String} key\n         * @param {String} value\n         * @param {Boolean} sessionOnly If true data only be keeped in this session\n         */\n        function saveData(key, value, sessionOnly) {\n            if (sessionOnly === void 0) { sessionOnly = false; }\n            try {\n                var storage = (sessionOnly === true ? window.sessionStorage : window.localStorage);\n                if (storage) {\n                    storage.setItem(key, JSON.stringify(value));\n                }\n                else\n                    saveCookie(key, value, 365);\n            }\n            catch (e) {\n            }\n        }\n        browser.saveData = saveData;\n        /**\n         * Load value from local storage, if local storage doesn't usable then use local cookie instead.\n         * @param {String} key\n         * @param {Boolean} sessionOnly If true data only be keeped in this session\n         */\n        function loadData(key, sessionOnly) {\n            if (sessionOnly === void 0) { sessionOnly = false; }\n            try {\n                var storage = (sessionOnly === true ? window.sessionStorage : window.localStorage);\n                if (storage)\n                    return JSON.parse(storage.getItem(key));\n                else\n                    return loadCookie(key);\n            }\n            catch (e) {\n                return null;\n            }\n        }\n        browser.loadData = loadData;\n        /**\n         * Remove value from local storage, if local storage doesn't usable then use local cookie instead.\n         * @param key\n         * @param {Boolean} sessionOnly If true data only be keeped in this session\n         */\n        function deleteData(key, sessionOnly) {\n            if (sessionOnly === void 0) { sessionOnly = false; }\n            try {\n                var storage = (sessionOnly === true ? window.sessionStorage : window.localStorage);\n                if (storage)\n                    storage.removeItem(key);\n                else\n                    deleteCookie(key);\n            }\n            catch (e) {\n            }\n        }\n        browser.deleteData = deleteData;\n        var _accMap = {};\n        function accelerate(e) {\n            var k = browser.KeyCode[e.keyCode];\n            if (!k) {\n                return;\n            }\n            k = k.toUpperCase();\n            var key = (e.ctrlKey ? \"CTRL\" : \"\");\n            if (e.altKey) {\n                if (key.length > 0)\n                    key += \"+\";\n                key += \"ALT\";\n            }\n            if (e.shiftKey) {\n                if (key.length > 0)\n                    key += \"+\";\n                key += \"SHIFT\";\n            }\n            if (e.metaKey) {\n                if (key.length > 0)\n                    key += \"+\";\n                key += \"META\";\n            }\n            if (key.length > 0)\n                key += \"+\";\n            key += k;\n            var l = _accMap[key];\n            if (l) {\n                for (var i = 0; i < l.length; i++) {\n                    if (tui.event.fire(\"accelerate\", { name: l[i], event: e }) === false)\n                        return;\n                }\n            }\n        }\n        function addAccelerate(key, actionId) {\n            key = key.toUpperCase();\n            var l = null;\n            if (_accMap.hasOwnProperty(key))\n                l = _accMap[key];\n            else {\n                l = [];\n                _accMap[key] = l;\n            }\n            if (l.indexOf(actionId) < 0)\n                l.push(actionId);\n        }\n        browser.addAccelerate = addAccelerate;\n        function deleteAccelerate(key, actionId) {\n            key = key.toUpperCase();\n            if (!_accMap.hasOwnProperty(key))\n                return;\n            var l = _accMap[key];\n            var pos = l.indexOf(actionId);\n            if (pos >= 0) {\n                l.splice(pos, 1);\n                if (l.length <= 0)\n                    delete _accMap[key];\n            }\n        }\n        browser.deleteAccelerate = deleteAccelerate;\n        $(document).keydown(accelerate);\n        function getUrlParam(key) {\n            var reg = new RegExp(\"(^|&)\" + key + \"=([^&]*)(&|$)\");\n            var r = window.location.search.substr(1).match(reg);\n            if (r != null)\n                return decodeURIComponent(r[2]);\n            return null;\n        }\n        browser.getUrlParam = getUrlParam;\n        function getEventPosition(e, allFingers) {\n            if (allFingers === void 0) { allFingers = false; }\n            var positions = [];\n            var event = e.originalEvent || e;\n            if (event.touches) {\n                var touchList = (allFingers ? event.touches : event.changedTouches);\n                for (var i = 0; i < touchList.length; i++) {\n                    var touch = touchList[i];\n                    positions.push({ x: touch.clientX, y: touch.clientY, id: touch.identifier });\n                }\n            }\n            else {\n                positions.push({ x: event.clientX, y: event.clientY });\n            }\n            return positions;\n        }\n        browser.getEventPosition = getEventPosition;\n        function setInnerHtml(elem, content) {\n            if (tui.ieVer > 0 && tui.ieVer < 9) {\n                elem.innerHTML = \"\";\n                var d = document.createElement(\"div\");\n                d.innerHTML = content;\n                while (d.children.length > 0)\n                    elem.appendChild(d.children[0]);\n            }\n            else {\n                elem && (elem.innerHTML = content);\n            }\n        }\n        browser.setInnerHtml = setInnerHtml;\n        window.$text = toSafeText;\n    })(browser = tui.browser || (tui.browser = {}));\n})(tui || (tui = {}));\nvar tui;\n(function (tui) {\n    var browser;\n    (function (browser) {\n        \"use strict\";\n        var KeyCode;\n        (function (KeyCode) {\n            KeyCode[KeyCode[\"BACK\"] = 8] = \"BACK\";\n            KeyCode[KeyCode[\"TAB\"] = 9] = \"TAB\";\n            KeyCode[KeyCode[\"ENTER\"] = 13] = \"ENTER\";\n            KeyCode[KeyCode[\"SHIFT\"] = 16] = \"SHIFT\";\n            KeyCode[KeyCode[\"CTRL\"] = 17] = \"CTRL\";\n            KeyCode[KeyCode[\"ALT\"] = 18] = \"ALT\";\n            KeyCode[KeyCode[\"PAUSE\"] = 19] = \"PAUSE\";\n            KeyCode[KeyCode[\"CAPS\"] = 20] = \"CAPS\";\n            KeyCode[KeyCode[\"ESCAPE\"] = 27] = \"ESCAPE\";\n            KeyCode[KeyCode[\"SPACE\"] = 32] = \"SPACE\";\n            KeyCode[KeyCode[\"PRIOR\"] = 33] = \"PRIOR\";\n            KeyCode[KeyCode[\"NEXT\"] = 34] = \"NEXT\";\n            KeyCode[KeyCode[\"END\"] = 35] = \"END\";\n            KeyCode[KeyCode[\"HOME\"] = 36] = \"HOME\";\n            KeyCode[KeyCode[\"LEFT\"] = 37] = \"LEFT\";\n            KeyCode[KeyCode[\"UP\"] = 38] = \"UP\";\n            KeyCode[KeyCode[\"RIGHT\"] = 39] = \"RIGHT\";\n            KeyCode[KeyCode[\"DOWN\"] = 40] = \"DOWN\";\n            KeyCode[KeyCode[\"PRINT\"] = 44] = \"PRINT\";\n            KeyCode[KeyCode[\"INSERT\"] = 45] = \"INSERT\";\n            KeyCode[KeyCode[\"DELETE\"] = 46] = \"DELETE\";\n            KeyCode[KeyCode[\"KEY_0\"] = 48] = \"KEY_0\";\n            KeyCode[KeyCode[\"KEY_1\"] = 49] = \"KEY_1\";\n            KeyCode[KeyCode[\"KEY_2\"] = 50] = \"KEY_2\";\n            KeyCode[KeyCode[\"KEY_3\"] = 51] = \"KEY_3\";\n            KeyCode[KeyCode[\"KEY_4\"] = 52] = \"KEY_4\";\n            KeyCode[KeyCode[\"KEY_5\"] = 53] = \"KEY_5\";\n            KeyCode[KeyCode[\"KEY_6\"] = 54] = \"KEY_6\";\n            KeyCode[KeyCode[\"KEY_7\"] = 55] = \"KEY_7\";\n            KeyCode[KeyCode[\"KEY_8\"] = 56] = \"KEY_8\";\n            KeyCode[KeyCode[\"KEY_9\"] = 57] = \"KEY_9\";\n            KeyCode[KeyCode[\"SEMICOLON\"] = 59] = \"SEMICOLON\";\n            KeyCode[KeyCode[\"EQUALS\"] = 61] = \"EQUALS\";\n            KeyCode[KeyCode[\"A\"] = 65] = \"A\";\n            KeyCode[KeyCode[\"B\"] = 66] = \"B\";\n            KeyCode[KeyCode[\"C\"] = 67] = \"C\";\n            KeyCode[KeyCode[\"D\"] = 68] = \"D\";\n            KeyCode[KeyCode[\"E\"] = 69] = \"E\";\n            KeyCode[KeyCode[\"F\"] = 70] = \"F\";\n            KeyCode[KeyCode[\"G\"] = 71] = \"G\";\n            KeyCode[KeyCode[\"H\"] = 72] = \"H\";\n            KeyCode[KeyCode[\"I\"] = 73] = \"I\";\n            KeyCode[KeyCode[\"J\"] = 74] = \"J\";\n            KeyCode[KeyCode[\"K\"] = 75] = \"K\";\n            KeyCode[KeyCode[\"L\"] = 76] = \"L\";\n            KeyCode[KeyCode[\"M\"] = 77] = \"M\";\n            KeyCode[KeyCode[\"N\"] = 78] = \"N\";\n            KeyCode[KeyCode[\"O\"] = 79] = \"O\";\n            KeyCode[KeyCode[\"P\"] = 80] = \"P\";\n            KeyCode[KeyCode[\"Q\"] = 81] = \"Q\";\n            KeyCode[KeyCode[\"R\"] = 82] = \"R\";\n            KeyCode[KeyCode[\"S\"] = 83] = \"S\";\n            KeyCode[KeyCode[\"T\"] = 84] = \"T\";\n            KeyCode[KeyCode[\"U\"] = 85] = \"U\";\n            KeyCode[KeyCode[\"V\"] = 86] = \"V\";\n            KeyCode[KeyCode[\"W\"] = 87] = \"W\";\n            KeyCode[KeyCode[\"X\"] = 88] = \"X\";\n            KeyCode[KeyCode[\"Y\"] = 89] = \"Y\";\n            KeyCode[KeyCode[\"Z\"] = 90] = \"Z\";\n            KeyCode[KeyCode[\"WINDOWS\"] = 91] = \"WINDOWS\";\n            KeyCode[KeyCode[\"NUM_0\"] = 96] = \"NUM_0\";\n            KeyCode[KeyCode[\"NUM_1\"] = 97] = \"NUM_1\";\n            KeyCode[KeyCode[\"NUM_2\"] = 98] = \"NUM_2\";\n            KeyCode[KeyCode[\"NUM_3\"] = 99] = \"NUM_3\";\n            KeyCode[KeyCode[\"NUM_4\"] = 100] = \"NUM_4\";\n            KeyCode[KeyCode[\"NUM_5\"] = 101] = \"NUM_5\";\n            KeyCode[KeyCode[\"NUM_6\"] = 102] = \"NUM_6\";\n            KeyCode[KeyCode[\"NUM_7\"] = 103] = \"NUM_7\";\n            KeyCode[KeyCode[\"NUM_8\"] = 104] = \"NUM_8\";\n            KeyCode[KeyCode[\"NUM_9\"] = 105] = \"NUM_9\";\n            KeyCode[KeyCode[\"NUM_MUL\"] = 106] = \"NUM_MUL\";\n            KeyCode[KeyCode[\"NUM_PLUS\"] = 107] = \"NUM_PLUS\";\n            KeyCode[KeyCode[\"NUM_MINUS\"] = 109] = \"NUM_MINUS\";\n            KeyCode[KeyCode[\"NUM_DOT\"] = 110] = \"NUM_DOT\";\n            KeyCode[KeyCode[\"NUM_DIV\"] = 111] = \"NUM_DIV\";\n            KeyCode[KeyCode[\"F1\"] = 112] = \"F1\";\n            KeyCode[KeyCode[\"F2\"] = 113] = \"F2\";\n            KeyCode[KeyCode[\"F3\"] = 114] = \"F3\";\n            KeyCode[KeyCode[\"F4\"] = 115] = \"F4\";\n            KeyCode[KeyCode[\"F5\"] = 116] = \"F5\";\n            KeyCode[KeyCode[\"F6\"] = 117] = \"F6\";\n            KeyCode[KeyCode[\"F7\"] = 118] = \"F7\";\n            KeyCode[KeyCode[\"F8\"] = 119] = \"F8\";\n            KeyCode[KeyCode[\"F9\"] = 120] = \"F9\";\n            KeyCode[KeyCode[\"F10\"] = 121] = \"F10\";\n            KeyCode[KeyCode[\"F11\"] = 122] = \"F11\";\n            KeyCode[KeyCode[\"F12\"] = 123] = \"F12\";\n            KeyCode[KeyCode[\"DASH\"] = 173] = \"DASH\";\n            KeyCode[KeyCode[\"COMMA\"] = 188] = \"COMMA\";\n            KeyCode[KeyCode[\"PERIOD\"] = 190] = \"PERIOD\";\n            KeyCode[KeyCode[\"SLASH\"] = 191] = \"SLASH\";\n            KeyCode[KeyCode[\"GRAVE\"] = 192] = \"GRAVE\";\n            KeyCode[KeyCode[\"LEFT_BRACKET\"] = 219] = \"LEFT_BRACKET\";\n            KeyCode[KeyCode[\"BACKSLASH\"] = 220] = \"BACKSLASH\";\n            KeyCode[KeyCode[\"RIGHT_BRACKET\"] = 221] = \"RIGHT_BRACKET\";\n            KeyCode[KeyCode[\"QUOTE\"] = 222] = \"QUOTE\";\n        })(KeyCode = browser.KeyCode || (browser.KeyCode = {}));\n    })(browser = tui.browser || (tui.browser = {}));\n})(tui || (tui = {}));\n/// <reference path=\"../core.ts\" />\n/// <reference path=\"browser.ts\" />\nvar tui;\n(function (tui) {\n    var browser;\n    (function (browser) {\n        \"use strict\";\n        var _rules;\n        var _handler;\n        function hashChange() {\n            var hash = location.hash;\n            var state = null;\n            if (hash) {\n                var p = hash.indexOf(\"?\");\n                if (p >= 0)\n                    state = hash.substring(1, p);\n                else\n                    state = hash.substring(1);\n            }\n            if (_rules) {\n                var matchRule = null;\n                for (var _i = 0, _rules_1 = _rules; _i < _rules_1.length; _i++) {\n                    var r = _rules_1[_i];\n                    if (r.state === state) {\n                        matchRule = r;\n                        break;\n                    }\n                }\n                if (matchRule == null) {\n                    for (var _a = 0, _rules_2 = _rules; _a < _rules_2.length; _a++) {\n                        var r = _rules_2[_a];\n                        if (r.state === \"/\") {\n                            matchRule = r;\n                            break;\n                        }\n                    }\n                }\n                if (matchRule) {\n                    if (matchRule.handler && matchRule.handler(matchRule.state, hash, matchRule.url) === false) {\n                        return;\n                    }\n                    _handler && _handler(matchRule.state, hash, matchRule.url);\n                }\n            }\n        }\n        function startRouter(rules, handler) {\n            _rules = rules;\n            _handler = handler;\n            $(window).on(\"hashchange\", hashChange);\n            tui.event.on(\"initialized\", function () {\n                hashChange();\n            });\n        }\n        browser.startRouter = startRouter;\n        function stopRouter() {\n            $(window).off(\"hashchange\", hashChange);\n        }\n        browser.stopRouter = stopRouter;\n    })(browser = tui.browser || (tui.browser = {}));\n})(tui || (tui = {}));\n/// <reference path=\"../core.ts\" />\n/// <reference path=\"browser.ts\" />\nvar tui;\n(function (tui) {\n    var browser;\n    (function (browser) {\n        \"use strict\";\n        function fileFromPath(file) {\n            return file.replace(/.*(\\/|\\\\)/, \"\");\n        }\n        function getExt(file) {\n            return (-1 !== file.indexOf('.')) ? file.replace(/.*[.]/, '') : '';\n        }\n        function preventDefault(e) {\n            return e.preventDefault();\n        }\n        var Uploader = (function (_super) {\n            __extends(Uploader, _super);\n            function Uploader(container, options) {\n                var _this = _super.call(this) || this;\n                _this._settings = {\n                    action: \"upload\",\n                    name: \"file\",\n                    multiple: false,\n                    autoSubmit: true\n                };\n                _this._container = null;\n                _this._input = null;\n                _this.setOptions(options);\n                if (!container || container.nodeType !== 1) {\n                    throw new Error(\"Please make sure that you're passing a valid element\");\n                }\n                if (container.nodeName.toLowerCase() === 'a') {\n                    // disable link\n                    $(container).on('click', function (e) { e.preventDefault(); });\n                }\n                // DOM element\n                _this._container = container;\n                // DOM element                 \n                _this._input = null;\n                return _this;\n            }\n            Uploader.prototype.setOptions = function (options) {\n                if (options) {\n                    for (var i in options) {\n                        if (options.hasOwnProperty(i)) {\n                            this._settings[i] = options[i];\n                        }\n                    }\n                }\n            };\n            Uploader.prototype.getOptions = function () {\n                return this._settings;\n            };\n            Uploader.prototype.createIframe = function () {\n                var id = tui.tuid();\n                var iframe = browser.toElement('<iframe src=\"javascript:false;\" name=\"' + id + '\" />');\n                iframe.setAttribute('id', id);\n                iframe.style.display = 'none';\n                document.body.appendChild(iframe);\n                var doc = iframe.contentDocument ? iframe.contentDocument : window.frames[iframe.id].document;\n                try {\n                    doc.charset = \"utf-8\";\n                }\n                catch (e) { }\n                return iframe;\n            };\n            Uploader.prototype.createForm = function (iframe) {\n                var settings = this._settings;\n                var form = browser.toElement('<form method=\"post\" enctype=\"multipart/form-data\" accept-charset=\"UTF-8\"></form>');\n                form.setAttribute('accept-charset', 'UTF-8');\n                if (settings.action)\n                    form.setAttribute('action', settings.action);\n                form.setAttribute('target', iframe.name);\n                form.style.display = 'none';\n                document.body.appendChild(form);\n                // Create hidden input element for each data key\n                return form;\n            };\n            Uploader.prototype.createInput = function () {\n                var _this = this;\n                if (this._input) {\n                    return;\n                }\n                var input = document.createElement(\"input\");\n                input.setAttribute('type', 'file');\n                if (this._settings.accept)\n                    input.setAttribute('accept', this._settings.accept);\n                input.setAttribute('name', this._settings.name);\n                if (this._settings.multiple)\n                    input.setAttribute('multiple', 'multiple');\n                if (tui.ieVer > 0)\n                    input.title = \"\";\n                else\n                    input.title = \" \";\n                $(input).css({\n                    'position': 'absolute',\n                    'right': 0,\n                    'top': 0,\n                    'height': '1000px',\n                    'width': '2000px',\n                    'margin': 0,\n                    'padding': 0,\n                    'opacity': 0,\n                    'filter': 'alpha(opacity=0)',\n                    'fontSize': '10000px',\n                    'fontFamily': 'sans-serif',\n                    'cursor': 'pointer'\n                });\n                $(input).on('change', function (e) {\n                    if (!input || input.value === '') {\n                        return;\n                    }\n                    // Get filename from input, required                \n                    // as some browsers have path instead of it\n                    var file = fileFromPath(input.value);\n                    var fileExt = getExt(file);\n                    if (_this.fire(\"change\", { e: e, \"file\": file, \"ext\": fileExt }) === false) {\n                        _this.clearInput();\n                        return;\n                    }\n                    // Submit form when value is changed\n                    if (_this._settings.autoSubmit) {\n                        _this.submit();\n                    }\n                });\n                var style = browser.getCurrentStyle(this._container);\n                if (style.position === \"static\") {\n                    this._container.style.position = \"relative\";\n                }\n                this._container.style.overflow = \"hidden\";\n                this._container.appendChild(input);\n                this._input = input;\n                $(this._input).focus(function () {\n                    _this.fire(\"focus\");\n                });\n                $(this._input).blur(function () {\n                    _this.fire(\"blur\");\n                });\n            };\n            Uploader.prototype.deleteInput = function () {\n                if (!this._input) {\n                    return;\n                }\n                browser.removeNode(this._input);\n                this._input = null;\n            };\n            Uploader.prototype.getInput = function () {\n                return this._input;\n            };\n            Uploader.prototype.clearInput = function () {\n                this.deleteInput();\n                this.createInput();\n            };\n            /**\n            * Gets response from iframe and fires onComplete event when ready\n            * @param iframe\n            * @param file Filename to use in onComplete callback\n            */\n            Uploader.prototype.processResponse = function (iframe, file) {\n                var _this = this;\n                // getting response\n                var waitbox = tui.waitbox(tui.str(\"Uploading...\"));\n                var toDeleteFlag = false, settings = this._settings;\n                $(iframe).on('load', function () {\n                    if (iframe.src === \"javascript:'%3Chtml%3E%3C/html%3E';\" ||\n                        // For FF, IE\n                        iframe.src === \"javascript:'<html></html>';\") {\n                        // First time around, do not delete.\n                        // We reload to blank page, so that reloading main page\n                        // does not re-submit the post.\n                        if (toDeleteFlag) {\n                            // Fix busy state in FF3\n                            setTimeout(function () {\n                                browser.removeNode(iframe);\n                            }, 0);\n                        }\n                        return;\n                    }\n                    var doc = iframe.contentDocument ? iframe.contentDocument : window.frames[iframe.id].document;\n                    // fixing Opera 9.26,10.00\n                    if (doc.readyState && doc.readyState !== 'complete') {\n                        waitbox.close();\n                        return;\n                    }\n                    // fixing Opera 9.64\n                    if (doc.body && doc.body.innerHTML === \"false\") {\n                        waitbox.close();\n                        return;\n                    }\n                    waitbox.close();\n                    var response;\n                    if (doc.body) {\n                        // response is html document or plain text\n                        response = doc.body.innerHTML;\n                        try {\n                            if (doc.body.firstChild && doc.body.firstChild.nodeName.toUpperCase() === 'PRE') {\n                                doc.normalize && doc.normalize();\n                                response = doc.body.firstChild.firstChild.nodeValue;\n                            }\n                            if (response) {\n                                var responseObj = eval(\"(\" + response + \")\");\n                                if (!responseObj) {\n                                    _this.fireError();\n                                }\n                                else if (responseObj.error) {\n                                    _this.fireError(responseObj.error);\n                                }\n                                else if (responseObj.fileId && responseObj.fileName)\n                                    _this.fire(\"success\", { \"file\": file, \"ext\": getExt(file), \"response\": responseObj });\n                                else\n                                    _this.fireError();\n                            }\n                            else {\n                                _this.fireError();\n                            }\n                        }\n                        catch (e) {\n                            _this.fireError();\n                        }\n                    }\n                    else {\n                        _this.fireError();\n                    }\n                    // Reload blank page, so that reloading main page\n                    // does not re-submit the post. Also, remember to\n                    // delete the frame\n                    toDeleteFlag = true;\n                    // Fix IE mixed content issue\n                    iframe.src = \"javascript:'<html></html>';\";\n                    browser.removeNode(iframe);\n                });\n            };\n            Uploader.prototype.fireInvalidError = function () {\n                this.fire(\"error\", { \"response\": { error: tui.str(\"Upload failed: invalid response content!\") } });\n            };\n            Uploader.prototype.fireError = function (errorMessage) {\n                this.fire(\"error\", { \"response\": {\n                        error: tui.str(\"Upload failed!\") + (errorMessage ? errorMessage : \"\")\n                    } });\n            };\n            Uploader.prototype.submitV5 = function (file, extraData) {\n                var _this = this;\n                var waitbox = tui.waitbox(tui.str(\"Uploading...\"));\n                var fd = new FormData();\n                for (var i = 0; i < this._input.files.length; i++)\n                    fd.append(this._settings.name, this._input.files[i]);\n                var xhr = new XMLHttpRequest();\n                xhr.upload.addEventListener(\"progress\", function (e) {\n                    if (e.lengthComputable) {\n                        var percentComplete = Math.round(e.loaded * 100 / e.total);\n                        waitbox.setMessage(tui.str(\"Uploading... \") + percentComplete.toString() + '%');\n                    }\n                }, false);\n                xhr.addEventListener(\"load\", function (e) {\n                    waitbox.close();\n                    if (e.target.status != 200) {\n                        _this.fire(\"error\", { \"file\": file, \"ext\": getExt(file), \"response\": {\n                                error: tui.str(e.target.response || e.target.statusText || e.target.status)\n                            } });\n                    }\n                    else {\n                        try {\n                            var result = JSON.parse(e.target.responseText);\n                            if (result.fileId && result.fileName)\n                                _this.fire(\"success\", { \"file\": file, \"ext\": getExt(file), \"response\": result });\n                            else\n                                _this.fireError();\n                        }\n                        catch (e) {\n                            _this.fireInvalidError();\n                        }\n                    }\n                }, false);\n                xhr.addEventListener(\"error\", function (e) {\n                    waitbox.close();\n                    _this.fireError();\n                }, false);\n                xhr.addEventListener(\"abort\", function (e) {\n                    waitbox.close();\n                    _this.fireError();\n                }, false);\n                xhr.open(\"POST\", this._settings.action);\n                xhr.send(fd);\n                this.clearInput();\n            };\n            Uploader.prototype.submitV4 = function (file, extraData) {\n                // sending request    \n                var iframe = this.createIframe();\n                var form = this.createForm(iframe);\n                // assuming following structure\n                // div -> input type='file'\n                form.appendChild(this._input);\n                if (extraData) {\n                    for (var prop in extraData) {\n                        if (extraData.hasOwnProperty(prop)) {\n                            var el = document.createElement(\"input\");\n                            el.setAttribute('type', 'hidden');\n                            el.setAttribute('name', prop);\n                            el.setAttribute('value', extraData[prop]);\n                            form.appendChild(el);\n                        }\n                    }\n                }\n                this.processResponse(iframe, file);\n                form.submit();\n                // request set, clean up\n                browser.removeNode(form);\n                form = null;\n                this.clearInput();\n            };\n            Uploader.prototype.submit = function (extraData) {\n                if (!this._input || this._input.value === '') {\n                    return;\n                }\n                var file = fileFromPath(this._input.value);\n                // user returned false to cancel upload\n                if (this.fire(\"submit\", { \"file\": file, \"ext\": getExt(file) }) === false) {\n                    this.clearInput();\n                    this.fire(\"blur\");\n                    return;\n                }\n                this.fire(\"blur\");\n                if (typeof FormData === \"function\") {\n                    this.submitV5(file, extraData);\n                }\n                else\n                    this.submitV4(file, extraData);\n            };\n            return Uploader;\n        }(tui.EventObject));\n        browser.Uploader = Uploader;\n        function createUploader(container, options) {\n            return new Uploader(container, options);\n        }\n        browser.createUploader = createUploader;\n    })(browser = tui.browser || (tui.browser = {}));\n})(tui || (tui = {}));\n/// <reference path=\"../core.ts\" />\nvar tui;\n(function (tui) {\n    var ds;\n    (function (ds) {\n        \"use strict\";\n        var DSBase = (function (_super) {\n            __extends(DSBase, _super);\n            function DSBase() {\n                var _this = _super !== null && _super.apply(this, arguments) || this;\n                _this._finalData = null;\n                _this._order = null;\n                _this._filter = null;\n                return _this;\n            }\n            DSBase.prototype.setOrder = function (order) {\n                this._order = order;\n                this.build();\n            };\n            DSBase.prototype.getOrder = function () {\n                return this._order;\n            };\n            DSBase.prototype.setFilter = function (filter) {\n                this._filter = filter;\n                this.build();\n            };\n            DSBase.prototype.getFilter = function () {\n                return this._filter;\n            };\n            return DSBase;\n        }(tui.EventObject));\n        ds.DSBase = DSBase;\n        function filter(value, filter) {\n            if (filter) {\n                for (var _i = 0, filter_1 = filter; _i < filter_1.length; _i++) {\n                    var f = filter_1[_i];\n                    var v = value[f.key];\n                    if (v == null) {\n                        if (f.value == null)\n                            continue;\n                        else\n                            return false;\n                    }\n                    try {\n                        var regex = new RegExp(f.value);\n                        if (v.toString().match(regex) == null)\n                            return false;\n                    }\n                    catch (e) {\n                        if (v.indexOf(f.value) < 0)\n                            return false;\n                    }\n                }\n            }\n            return true;\n        }\n        function sort(data, order, treeData) {\n            if (order && order.length > 0) {\n                data.sort(function (a, b) {\n                    for (var _i = 0, order_1 = order; _i < order_1.length; _i++) {\n                        var s = order_1[_i];\n                        var aVal = treeData ? a.item[s.key] : a[s.key];\n                        var bVal = treeData ? b.item[s.key] : b[s.key];\n                        if (aVal == bVal)\n                            continue;\n                        if (s.desc) {\n                            return aVal > bVal ? -1 : 1;\n                        }\n                        else\n                            return aVal < bVal ? -1 : 1;\n                    }\n                    return 0;\n                });\n            }\n        }\n        var List = (function (_super) {\n            __extends(List, _super);\n            function List(data, filter, order) {\n                if (filter === void 0) { filter = null; }\n                if (order === void 0) { order = null; }\n                var _this = _super.call(this) || this;\n                _this._data = data;\n                _this._filter = filter;\n                _this._order = order;\n                _this.build();\n                return _this;\n            }\n            List.prototype.length = function () {\n                if (this._finalData == null)\n                    return this._data.length;\n                else\n                    return this._finalData.length;\n            };\n            List.prototype.get = function (index) {\n                if (this._finalData == null)\n                    return this._data[index];\n                else\n                    return this._finalData[index];\n            };\n            List.prototype.build = function () {\n                var _this = this;\n                if (this._data == null) {\n                    this._finalData = null;\n                    return;\n                }\n                if ((this._filter == null || this._filter.length == 0) &&\n                    (this._order == null || this._order.length == 0))\n                    this._finalData = null;\n                else {\n                    this._finalData = this._data.filter(function (value, index, array) {\n                        return filter(value, _this._filter);\n                    });\n                    sort(this._finalData, this._order, false);\n                }\n                this.fire(\"update\", { \"completely\": true });\n            };\n            return List;\n        }(DSBase));\n        ds.List = List;\n        var RemoteList = (function (_super) {\n            __extends(RemoteList, _super);\n            function RemoteList(cacheSize, filter, order) {\n                if (cacheSize === void 0) { cacheSize = 50; }\n                if (filter === void 0) { filter = null; }\n                if (order === void 0) { order = null; }\n                var _this = _super.call(this) || this;\n                _this._cache1 = null;\n                _this._cache2 = null;\n                _this._length = null;\n                _this._cacheSize = cacheSize;\n                _this.reset();\n                _this._filter = filter;\n                _this._order = order;\n                return _this;\n            }\n            RemoteList.prototype.length = function () {\n                if (this._length === null) {\n                    this.fire(\"query\", {\n                        begin: 0,\n                        size: this._cacheSize,\n                        filter: this._filter,\n                        order: this._order\n                    });\n                    return 0;\n                }\n                else\n                    return this._length;\n            };\n            RemoteList.prototype.get = function (index) {\n                if (index >= 0 && index < this.length()) {\n                    var item = this.getFromCache(index, this._cache1);\n                    if (item === null)\n                        item = this.getFromCache(index, this._cache2);\n                    if (item === null) {\n                        var page = this.getIndexPage(index);\n                        if (this._cache1 === null) {\n                            this._fillCache = 1;\n                        }\n                        else if (this._cache2 === null)\n                            this._fillCache = 2;\n                        else {\n                            this._fillCache = Math.abs(page - this._cache1.page) > Math.abs(page - this._cache2.page) ? 1 : 2;\n                        }\n                        this.fire(\"query\", {\n                            begin: page * this._cacheSize,\n                            size: this._cacheSize,\n                            filter: this._filter,\n                            rder: this._order\n                        });\n                    }\n                }\n                else\n                    return null;\n            };\n            RemoteList.prototype.getIndexPage = function (index) {\n                return Math.ceil((index + 1) / this._cacheSize - 1);\n            };\n            RemoteList.prototype.getFromCache = function (index, cache) {\n                if (cache === null)\n                    return null;\n                var begin = cache.page * this._cacheSize;\n                var end = begin + cache.data.length;\n                if (index >= begin && index < end)\n                    return cache.data[index - begin];\n                else\n                    return null;\n            };\n            RemoteList.prototype.update = function (result) {\n                var completely = this._length != result.length;\n                this._length = result.length;\n                if (this._fillCache === 1) {\n                    this._cache1 = { page: this.getIndexPage(result.begin), data: result.data };\n                }\n                else if (this._fillCache === 2) {\n                    this._cache2 = { page: this.getIndexPage(result.begin), data: result.data };\n                }\n                this.fire(\"update\", { \"completely\": completely });\n            };\n            RemoteList.prototype.reset = function () {\n                this._length = null;\n                this._cache1 = this._cache2 = null;\n                this._fillCache = 1;\n            };\n            RemoteList.prototype.build = function () {\n                this.reset();\n                this.fire(\"query\", {\n                    begin: 0,\n                    size: this._cacheSize,\n                    filter: this._filter,\n                    order: this._order\n                });\n            };\n            return RemoteList;\n        }(DSBase)); // End of RemoteListSource\n        ds.RemoteList = RemoteList;\n        var TreeBase = (function (_super) {\n            __extends(TreeBase, _super);\n            function TreeBase() {\n                var _this = _super !== null && _super.apply(this, arguments) || this;\n                _this._index = null;\n                _this._rawData = null;\n                return _this;\n            }\n            TreeBase.prototype.getConfig = function () {\n                return this._config;\n            };\n            TreeBase.prototype.length = function () {\n                if (this._finalData)\n                    return this._finalData.length;\n                else if (this._index)\n                    return this._index.length;\n                else\n                    return 0;\n            };\n            TreeBase.prototype.getRawData = function () {\n                return this._rawData;\n            };\n            TreeBase.prototype.get = function (index) {\n                if (this._finalData) {\n                    if (index >= 0 && index < this._finalData.length)\n                        return this._finalData[index];\n                    else\n                        return null;\n                }\n                else if (index >= 0 && index < this.length()) {\n                    return this._index[index];\n                }\n                else\n                    return null;\n            };\n            TreeBase.prototype.findNodeIndex = function (node) {\n                for (var i = 0; i < this._index.length; i++) {\n                    if (this._index[i] === node)\n                        return i;\n                }\n                return -1;\n            };\n            TreeBase.prototype.expandItems = function (parent, items, index, level, init) {\n                if (init === void 0) { init = false; }\n                if (typeof items === tui.UNDEFINED || items === null)\n                    items = [];\n                for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n                    var item = items_1[_i];\n                    var children = item[this._config.children];\n                    var expand = void 0;\n                    if (init) {\n                        expand = false;\n                        item[this._config.expand] = false;\n                    }\n                    else\n                        expand = item[this._config.expand] && children && children.length > 0;\n                    var hasChild = void 0;\n                    if (children && children.length > 0)\n                        hasChild = true;\n                    else\n                        hasChild = !!item[this._config.hasChild];\n                    var node = {\n                        parent: parent,\n                        hasChild: hasChild,\n                        item: item,\n                        level: level,\n                        expand: expand\n                    };\n                    index && index.push(node);\n                    if (expand) {\n                        this.expandItems(node, children, index, level + 1);\n                    }\n                }\n            };\n            TreeBase.prototype.getExpandCount = function (children) {\n                if (!children)\n                    return 0;\n                var delCount = children.length;\n                for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\n                    var child = children_1[_i];\n                    if (child.children && child.children.length > 0 && child[this._config.expand]) {\n                        delCount += this.getExpandCount(child.children);\n                    }\n                }\n                return delCount;\n            };\n            TreeBase.prototype.expand = function (index) {\n                if (index >= 0 && index < this._index.length) {\n                    var node = this._index[index];\n                    if (node.hasChild && !node.expand) {\n                        node.expand = true;\n                        node.item[this._config.expand] = true;\n                        var appendNodes = [];\n                        this.expandItems(node, node.item[this._config.children], appendNodes, node.level + 1);\n                        (_a = this._index).splice.apply(_a, [index + 1, 0].concat(appendNodes));\n                    }\n                }\n                var _a;\n            };\n            TreeBase.prototype.collapse = function (index) {\n                if (index >= 0 && index < this._index.length) {\n                    var node = this._index[index];\n                    if (node.hasChild && node.expand) {\n                        node.expand = false;\n                        node.item[this._config.expand] = false;\n                        var delCount = this.getExpandCount(node.item[this._config.children]);\n                        this._index.splice(index + 1, delCount);\n                    }\n                }\n            };\n            return TreeBase;\n        }(DSBase));\n        ds.TreeBase = TreeBase;\n        var Tree = (function (_super) {\n            __extends(Tree, _super);\n            function Tree(data, config, filter, order) {\n                if (config === void 0) { config = { children: \"children\", expand: \"expand\" }; }\n                if (filter === void 0) { filter = null; }\n                if (order === void 0) { order = null; }\n                var _this = _super.call(this) || this;\n                _this._config = config;\n                _this._filter = filter;\n                _this._order = order;\n                _this.update(data);\n                return _this;\n            }\n            Tree.prototype.update = function (data) {\n                var config = this._config;\n                this._index = [];\n                this._rawData = data;\n                this.expandItems(null, data, this._index, 0);\n                this.build();\n            };\n            Tree.prototype.build = function () {\n                var _this = this;\n                if (this._rawData == null) {\n                    this._finalData = null;\n                    return;\n                }\n                if ((this._filter == null || this._filter.length == 0) &&\n                    (this._order == null || this._order.length == 0))\n                    this._finalData = null;\n                else {\n                    this._finalData = [];\n                    var iterate_1 = function (items) {\n                        if (typeof items === tui.UNDEFINED || items === null)\n                            items = [];\n                        for (var _i = 0, items_2 = items; _i < items_2.length; _i++) {\n                            var item = items_2[_i];\n                            if (filter(item, _this._filter)) {\n                                var node = {\n                                    parent: null,\n                                    hasChild: false,\n                                    item: item,\n                                    level: 0,\n                                    expand: false\n                                };\n                                _this._finalData.push(node);\n                            }\n                            var children = item[_this._config.children];\n                            children && iterate_1(children);\n                        }\n                    };\n                    iterate_1(this._rawData);\n                    sort(this._finalData, this._order, true);\n                }\n                this.fire(\"update\", { \"completely\": true });\n            };\n            return Tree;\n        }(TreeBase));\n        ds.Tree = Tree;\n        var RemoteTree = (function (_super) {\n            __extends(RemoteTree, _super);\n            function RemoteTree(config, filter, order) {\n                if (config === void 0) { config = { children: \"children\", expand: \"expand\", hasChild: \"hasChild\" }; }\n                if (filter === void 0) { filter = null; }\n                if (order === void 0) { order = null; }\n                var _this = _super.call(this) || this;\n                _this._querying = false;\n                _this._config = config;\n                _this._filter = filter;\n                _this._order = order;\n                return _this;\n            }\n            RemoteTree.prototype.length = function () {\n                if (this._index)\n                    return this._index.length;\n                else {\n                    if (!this._querying) {\n                        this._querying = true;\n                        this.fire(\"query\", { parent: null, filter: this._filter, order: this._order });\n                    }\n                    return 0;\n                }\n            };\n            RemoteTree.prototype.expand = function (index) {\n                if (index >= 0 && index < this._index.length) {\n                    var node = this._index[index];\n                    if (node.hasChild && !node.expand) {\n                        node.expand = true;\n                        node.item[this._config.expand] = true;\n                        var children = node.item[this._config.children];\n                        if (children) {\n                            var appendNodes = [];\n                            this.expandItems(node, children, appendNodes, node.level + 1);\n                            (_a = this._index).splice.apply(_a, [index + 1, 0].concat(appendNodes));\n                        }\n                        else {\n                            this.fire(\"query\", { parent: node, filter: this._filter, order: this._order });\n                            this._querying = true;\n                        }\n                    }\n                }\n                var _a;\n            };\n            RemoteTree.prototype.update = function (result) {\n                this._querying = false;\n                if (result.parent === null) {\n                    this._index = [];\n                    this._rawData = result.data;\n                    this.expandItems(null, result.data, this._index, 0, true);\n                }\n                else {\n                    var index = this.findNodeIndex(result.parent);\n                    if (index >= 0) {\n                        this.collapse(index);\n                    }\n                    result.parent.item[this._config.children] = result.data;\n                    if (index >= 0) {\n                        this.expand(index);\n                    }\n                }\n                this.fire(\"update\", { \"completely\": true });\n            };\n            RemoteTree.prototype.build = function () {\n                this._index = null;\n                this._rawData = null;\n                this._finalData = null;\n                this.fire(\"query\", { parent: null, filter: this._filter, order: this._order });\n            };\n            return RemoteTree;\n        }(TreeBase));\n        ds.RemoteTree = RemoteTree;\n    })(ds = tui.ds || (tui.ds = {}));\n})(tui || (tui = {}));\n/// <reference path=\"core.ts\" />\ntui.dict(\"en-us\", {\n    \"success\": \"Success\",\n    \"notmodified\": \"Request's content has not been modified!\",\n    \"error\": \"Error\",\n    \"timeout\": \"Request timeout!\",\n    \"abort\": \"Operating has been aborted!\",\n    \"parsererror\": \"Server response invalid content!\",\n    \"ok\": \"OK\",\n    \"close\": \"Close\",\n    \"cancel\": \"Cancel\",\n    \"accept\": \"Accept\",\n    \"agree\": \"Agree\",\n    \"reject\": \"Reject\",\n    \"yes\": \"Yes\",\n    \"no\": \"No\"\n});\n/// <reference path=\"../core.ts\" />\n/// <reference path=\"../text/text.ts\" />\nvar tui;\n(function (tui) {\n    var time;\n    (function (time) {\n        time.shortWeeks = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n        time.weeks = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n        time.shortMonths = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n        time.months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n        /**\n         * Get today\n         */\n        function now() {\n            return new Date();\n        }\n        time.now = now;\n        /**\n         * Input seconds and get a time description\n         * @param seconds Tims distance of seconds\n         * @param lang Display language\n         */\n        function timespan(seconds, lang) {\n            var desc = [\"day\", \"hour\", \"minute\", \"second\"];\n            var val = [];\n            var beg = \"\", end = \"\";\n            var d = Math.floor(seconds / 86400);\n            val.push(d);\n            seconds = seconds % 86400;\n            var h = Math.floor(seconds / 3600);\n            val.push(h);\n            seconds = seconds % 3600;\n            var m = Math.floor(seconds / 60);\n            val.push(m);\n            val.push(seconds % 60);\n            var i = 0, j = 3;\n            while (i < 4) {\n                if (val[i] > 0) {\n                    beg.length && (beg += \" \");\n                    beg += val[i] + \" \" + tui.str(val[i] > 1 ? desc[i] + \"s\" : desc[i], lang);\n                    break;\n                }\n                i++;\n            }\n            while (i < j) {\n                if (val[j] > 0) {\n                    end.length && (end += \" \");\n                    end += val[j] + \" \" + tui.str(val[j] > 1 ? desc[j] + \"s\" : desc[j], lang);\n                    break;\n                }\n                j--;\n            }\n            i++;\n            while (i < j) {\n                beg.length && (beg += \" \");\n                beg += val[i] + \" \" + tui.str(val[i] > 1 ? desc[i] + \"s\" : desc[i], lang);\n                i++;\n            }\n            return beg + (beg.length ? \" \" : \"\") + end;\n        }\n        time.timespan = timespan;\n        /**\n         * Get the distance of dt2 compare to dt1 (dt2 - dt1) return in specified unit (d: day, h: hours, m: minutes, s: seconds, ms: milliseconds)\n         * @param dt1\n         * @param dt2\n         * @param unit \"d\", \"h\", \"m\", \"s\" or \"ms\"\n         */\n        function dateDiff(dt1, dt2, unit) {\n            if (unit === void 0) { unit = \"d\"; }\n            var d1 = dt1.getTime();\n            var d2 = dt2.getTime();\n            var diff = d2 - d1;\n            var symbol = diff < 0 ? -1 : 1;\n            diff = Math.abs(diff);\n            unit = unit.toLocaleLowerCase();\n            if (unit === \"d\") {\n                return Math.floor(diff / 86400000) * symbol;\n            }\n            else if (unit === \"h\") {\n                return Math.floor(diff / 3600000) * symbol;\n            }\n            else if (unit === \"m\") {\n                return Math.floor(diff / 60000) * symbol;\n            }\n            else if (unit === \"s\") {\n                return Math.floor(diff / 1000) * symbol;\n            }\n            else if (unit === \"ms\") {\n                return diff * symbol;\n            }\n            else\n                return NaN;\n        }\n        time.dateDiff = dateDiff;\n        /**\n         * Get new date of dt add specified unit of values.\n         * @param dt The day of the target\n         * @param val Increased value\n         * @param unit \"y\", \"M\", \"d\", \"h\", \"m\", \"s\" or \"ms\"\n         */\n        function dateAdd(dt, val, unit) {\n            if (unit === void 0) { unit = \"d\"; }\n            var tm = dt.getTime();\n            if (unit === \"y\") {\n                var y = dt.getFullYear(), m = dt.getMonth(), d = dt.getDate();\n                var h = dt.getHours(), mi = dt.getMinutes(), s = dt.getSeconds(), ms = dt.getMilliseconds();\n                var totalMonth = y * 12 + m + (val * 12);\n                y = Math.floor(totalMonth / 12);\n                m = totalMonth % 12;\n                var newDate = new Date(y, m, 1);\n                if (d > totalDaysOfMonth(newDate))\n                    d = totalDaysOfMonth(newDate);\n                return new Date(y, m, d, h, mi, s, ms);\n            }\n            else if (unit === \"M\") {\n                var y = dt.getFullYear(), m = dt.getMonth(), d = dt.getDate();\n                var h = dt.getHours(), mi = dt.getMinutes(), s = dt.getSeconds(), ms = dt.getMilliseconds();\n                var totalMonth = y * 12 + m + val;\n                y = Math.floor(totalMonth / 12);\n                m = totalMonth % 12;\n                var newDate = new Date(y, m, 1);\n                if (d > totalDaysOfMonth(newDate))\n                    d = totalDaysOfMonth(newDate);\n                return new Date(y, m, d, h, mi, s, ms);\n            }\n            else if (unit === \"d\") {\n                return new Date(tm + val * 86400000);\n            }\n            else if (unit === \"h\") {\n                return new Date(tm + val * 3600000);\n            }\n            else if (unit === \"m\") {\n                return new Date(tm + val * 60000);\n            }\n            else if (unit === \"s\") {\n                return new Date(tm + val * 1000);\n            }\n            else if (unit === \"ms\") {\n                return new Date(tm + val);\n            }\n            else\n                return null;\n        }\n        time.dateAdd = dateAdd;\n        /**\n         * Get day in year\n         * @param dt The day of the target\n         */\n        function dayOfYear(dt) {\n            var y = dt.getFullYear();\n            var d1 = new Date(y, 0, 1);\n            return dateDiff(d1, dt, \"d\");\n        }\n        time.dayOfYear = dayOfYear;\n        /**\n         * Get total days of month\n         * @param dt The day of the target\n         */\n        function totalDaysOfMonth(dt) {\n            var y = dt.getFullYear();\n            var m = dt.getMonth();\n            var d1 = new Date(y, m, 1);\n            if (m === 11) {\n                y++;\n                m = 0;\n            }\n            else {\n                m++;\n            }\n            var d2 = new Date(y, m, 1);\n            return dateDiff(d1, d2, \"d\");\n        }\n        time.totalDaysOfMonth = totalDaysOfMonth;\n        function parseDateInternal(dtStr, format) {\n            if (!dtStr || !format)\n                return null;\n            var mapping = {};\n            var gcount = 0;\n            var isUTC = false;\n            var values = {};\n            function matchEnum(v, key, enumArray) {\n                var m = dtStr.match(new RegExp(\"^\" + enumArray.join(\"|\"), \"i\"));\n                if (m === null)\n                    return false;\n                v = m[0].toLowerCase();\n                v = v.substr(0, 1).toUpperCase() + v.substr(1);\n                values[key] = enumArray.indexOf(v);\n                dtStr = dtStr.substr(v.length);\n                return true;\n            }\n            function matchNumber(v, key, min, max) {\n                var len = v.length;\n                var m = dtStr.match(\"^[0-9]{1,\" + len + \"}\");\n                if (m === null)\n                    return false;\n                v = m[0];\n                var num = parseInt(v);\n                if (num < min || num > max)\n                    return false;\n                key && (values[key] = num);\n                dtStr = dtStr.substr(v.length);\n                return true;\n            }\n            var rule = {\n                \"y+\": function (v) {\n                    if (!matchNumber(v, \"year\"))\n                        return false;\n                    if (values[\"year\"] < 100)\n                        values[\"year\"] += 1900;\n                    return true;\n                },\n                \"M+\": function (v) {\n                    var len = v.length;\n                    if (len < 3) {\n                        if (!matchNumber(v, \"month\", 1, 12))\n                            return false;\n                        values[\"month\"] -= 1;\n                        return true;\n                    }\n                    else if (len === 3) {\n                        return matchEnum(v, \"month\", time.shortMonths);\n                    }\n                    else {\n                        return matchEnum(v, \"month\", time.months);\n                    }\n                },\n                \"d+\": function (v) {\n                    return matchNumber(v, \"date\", 1, 31);\n                },\n                \"D+\": matchNumber,\n                \"h+\": function (v) {\n                    return matchNumber(v, \"12hour\", 1, 12);\n                },\n                \"H+\": function (v) {\n                    return matchNumber(v, \"hour\", 0, 24);\n                },\n                \"m+\": function (v) {\n                    return matchNumber(v, \"minute\", 0, 59);\n                },\n                \"s+\": function (v) {\n                    return matchNumber(v, \"second\", 0, 59);\n                },\n                \"[qQ]+\": function (v) {\n                    return matchNumber(v, null, 1, 4);\n                },\n                \"S+\": function (v) {\n                    return matchNumber(v, \"millisecond\", 0, 999);\n                },\n                \"E+\": function (v) {\n                    var len = v.length;\n                    if (len < 3) {\n                        if (!matchNumber(v, null, 0, 6))\n                            return false;\n                        return true;\n                    }\n                    else if (len === 3) {\n                        return matchEnum(v, null, time.shortWeeks);\n                    }\n                    else {\n                        return matchEnum(v, null, time.weeks);\n                    }\n                },\n                \"a|A\": function matchNumber(v) {\n                    var len = v.length;\n                    var m = dtStr.match(/^(am|pm)/i);\n                    if (m === null)\n                        return false;\n                    v = m[0];\n                    values[\"ampm\"] = v.toLowerCase();\n                    dtStr = dtStr.substr(v.length);\n                    return true;\n                },\n                \"z+\": function (v) {\n                    var len = v.length;\n                    var m;\n                    if (len <= 2)\n                        m = dtStr.match(/^([\\-+][0-9]{2})/i);\n                    else if (len === 3)\n                        m = dtStr.match(/^([\\-+][0-9]{2})([0-9]{2})/i);\n                    else\n                        m = dtStr.match(/^([\\-+][0-9]{2}):([0-9]{2})/i);\n                    if (m === null)\n                        return false;\n                    v = m[0];\n                    var tz = parseInt(m[1]);\n                    if (Math.abs(tz) < -11 || Math.abs(tz) > 11)\n                        return false;\n                    tz *= 60;\n                    if (typeof m[2] !== tui.UNDEFINED) {\n                        if (tz > 0)\n                            tz += parseInt(m[2]);\n                        else\n                            tz -= parseInt(m[2]);\n                    }\n                    values[\"tz\"] = -tz;\n                    dtStr = dtStr.substr(v.length);\n                    return true;\n                },\n                \"Z\": function (v) {\n                    if (dtStr.substr(0, 1) !== \"Z\")\n                        return false;\n                    isUTC = true;\n                    dtStr = dtStr.substr(1);\n                    return true;\n                },\n                \"\\\"[^\\\"]*\\\"|'[^']*'\": function (v) {\n                    v = v.substr(1, v.length - 2);\n                    if (dtStr.substr(0, v.length).toLowerCase() !== v.toLowerCase())\n                        return false;\n                    dtStr = dtStr.substr(v.length);\n                    return true;\n                },\n                \"[^yMmdDhHsSqEaAzZ'\\\"]+\": function (v) {\n                    v = v.replace(/(.)/g, '\\\\$1');\n                    var m = dtStr.match(new RegExp(\"^\" + v));\n                    if (m === null)\n                        return false;\n                    v = m[0];\n                    dtStr = dtStr.substr(v.length);\n                    return true;\n                }\n            };\n            var regex = \"\";\n            for (var k in rule) {\n                if (!rule.hasOwnProperty(k))\n                    continue;\n                if (regex.length > 0)\n                    regex += \"|\";\n                regex += \"(^\" + k + \")\";\n                mapping[k] = ++gcount;\n            }\n            var result;\n            while ((result = format.match(regex)) !== null) {\n                for (var k in mapping) {\n                    var v = result[mapping[k]];\n                    if (typeof v !== tui.UNDEFINED) {\n                        if (rule[k](v) === false)\n                            return null;\n                        break;\n                    }\n                }\n                format = format.substr(result[0].length);\n            }\n            if (format.length > 0 || dtStr.length > 0)\n                return null;\n            var parseCount = 0;\n            for (var k in values) {\n                if (!values.hasOwnProperty(k))\n                    continue;\n                parseCount++;\n            }\n            if (parseCount <= 0)\n                return null;\n            var now = new Date();\n            var year = values.hasOwnProperty(\"year\") ? values[\"year\"] : (isUTC ? now.getUTCFullYear() : now.getFullYear());\n            var month = values.hasOwnProperty(\"month\") ? values[\"month\"] : (isUTC ? now.getUTCMonth() : now.getMonth());\n            var date = values.hasOwnProperty(\"date\") ? values[\"date\"] : (isUTC ? now.getUTCDate() : now.getDate());\n            var ampm = values.hasOwnProperty(\"ampm\") ? values[\"ampm\"] : \"am\";\n            var hour;\n            if (values.hasOwnProperty(\"hour\"))\n                hour = values[\"hour\"];\n            else if (values.hasOwnProperty(\"12hour\")) {\n                var h12 = values[\"12hour\"];\n                if (ampm === \"am\") {\n                    if (h12 >= 1 && h12 <= 11) {\n                        hour = h12;\n                    }\n                    else if (h12 === 12) {\n                        hour = h12 - 12;\n                    }\n                    else\n                        return null;\n                }\n                else {\n                    if (h12 === 12)\n                        hour = h12;\n                    else if (h12 >= 1 && h12 <= 11)\n                        hour = h12 + 12;\n                    else\n                        return null;\n                }\n            }\n            else\n                hour = 0;\n            var minute = values.hasOwnProperty(\"minute\") ? values[\"minute\"] : 0;\n            var second = values.hasOwnProperty(\"second\") ? values[\"second\"] : 0;\n            var millisecond = values.hasOwnProperty(\"millisecond\") ? values[\"millisecond\"] : 0;\n            var tz = values.hasOwnProperty(\"tz\") ? values[\"tz\"] : now.getTimezoneOffset();\n            now.setUTCFullYear(year);\n            now.setUTCMonth(month);\n            now.setUTCDate(date);\n            now.setUTCHours(hour);\n            now.setUTCMinutes(minute);\n            now.setUTCSeconds(second);\n            now.setUTCMilliseconds(millisecond);\n            if (!isUTC) {\n                now.setTime(now.getTime() + tz * 60 * 1000);\n            }\n            return now;\n        }\n        /**\n         * Parse string get date instance (\n         * try to parse format:\n         *\t\tyyyy-MM-dd HH:mm:ss，\n         *\t\tyyyy-MM-dd,\n         *\t\tdd MMM yyyy,\n         *\t\tMMM dd, yyyy,\n         *\t\tISO8601 format)\n         * @param {String} dtStr Data string\n         */\n        function parseDate(dtStr, format) {\n            if (typeof format === \"string\")\n                return parseDateInternal(dtStr, format);\n            else if (typeof format === tui.UNDEFINED) {\n                var dt = new Date(dtStr);\n                if (!isNaN(dt.getTime()))\n                    return dt;\n                dt = parseDateInternal(dtStr, \"yyyy-MM-dd\");\n                if (dt !== null)\n                    return dt;\n                dt = parseDateInternal(dtStr, \"yyyy-MM-dd HH:mm:ss\");\n                if (dt !== null)\n                    return dt;\n                dt = parseDateInternal(dtStr, \"MMM dd, yyyy HH:mm:ss\");\n                if (dt !== null)\n                    return dt;\n                dt = parseDateInternal(dtStr, \"MMM dd, yyyy\");\n                if (dt !== null)\n                    return dt;\n                dt = parseDateInternal(dtStr, \"dd MMM yyyy HH:mm:ss\");\n                if (dt !== null)\n                    return dt;\n                dt = parseDateInternal(dtStr, \"dd MMM yyyy\");\n                if (dt !== null)\n                    return dt;\n            }\n            return null;\n        }\n        time.parseDate = parseDate;\n        /**\n         * Convert date to string and output can be formated to ISO8601, RFC2822, RFC3339 or other customized format\n         * @param dt {Date} Date object to be convert\n         * @param dateFmt {String} which format should be apply, default use ISO8601 standard format\n         */\n        function formatDate(dt, dateFmt) {\n            if (dateFmt === void 0) { dateFmt = \"yyyy-MM-ddTHH:mm:sszzz\"; }\n            var isUTC = (dateFmt.indexOf(\"Z\") >= 0 ? true : false);\n            var fullYear = isUTC ? dt.getUTCFullYear() : dt.getFullYear();\n            var month = isUTC ? dt.getUTCMonth() : dt.getMonth();\n            var date = isUTC ? dt.getUTCDate() : dt.getDate();\n            var hours = isUTC ? dt.getUTCHours() : dt.getHours();\n            var minutes = isUTC ? dt.getUTCMinutes() : dt.getMinutes();\n            var seconds = isUTC ? dt.getUTCSeconds() : dt.getSeconds();\n            var milliseconds = isUTC ? dt.getUTCMilliseconds() : dt.getMilliseconds();\n            var day = isUTC ? dt.getUTCDay() : dt.getDay();\n            var rule = {\n                \"y+\": fullYear,\n                \"M+\": month + 1,\n                \"d+\": date,\n                \"D+\": dayOfYear(dt) + 1,\n                \"h+\": (function (h) {\n                    if (h === 0)\n                        return h + 12;\n                    else if (h >= 1 && h <= 12)\n                        return h;\n                    else if (h >= 13 && h <= 23)\n                        return h - 12;\n                })(hours),\n                \"H+\": hours,\n                \"m+\": minutes,\n                \"s+\": seconds,\n                \"q+\": Math.floor((month + 3) / 3),\n                \"S+\": milliseconds,\n                \"E+\": day,\n                \"a\": (function (h) {\n                    if (h >= 0 && h <= 11)\n                        return \"am\";\n                    else\n                        return \"pm\";\n                })(isUTC ? dt.getUTCHours() : dt.getHours()),\n                \"A\": (function (h) {\n                    if (h >= 0 && h <= 11)\n                        return \"AM\";\n                    else\n                        return \"PM\";\n                })(hours),\n                \"z+\": dt.getTimezoneOffset()\n            };\n            var regex = \"\";\n            for (var k in rule) {\n                if (!rule.hasOwnProperty(k))\n                    continue;\n                if (regex.length > 0)\n                    regex += \"|\";\n                regex += k;\n            }\n            var regexp = new RegExp(regex, \"g\");\n            return dateFmt.replace(regexp, function (str, pos, source) {\n                for (var k in rule) {\n                    if (str.match(k) !== null) {\n                        if (k === \"y+\") {\n                            return tui.text.paddingNumber(rule[k], str.length, str.length);\n                        }\n                        else if (k === \"a\" || k === \"A\") {\n                            return rule[k];\n                        }\n                        else if (k === \"z+\") {\n                            var z = \"\";\n                            if (rule[k] >= 0) {\n                                z += \"-\";\n                            }\n                            else {\n                                z += \"+\";\n                            }\n                            if (str.length < 2)\n                                z += Math.abs(Math.floor(rule[k] / 60));\n                            else\n                                z += tui.text.paddingNumber(Math.abs(Math.floor(rule[k] / 60)), 2);\n                            if (str.length === 3)\n                                z += tui.text.paddingNumber(Math.abs(Math.floor(rule[k] % 60)), 2);\n                            else if (str.length > 3)\n                                z += (\":\" + tui.text.paddingNumber(Math.abs(Math.floor(rule[k] % 60)), 2));\n                            return z;\n                        }\n                        else if (k === \"E+\") {\n                            if (str.length < 3)\n                                return tui.text.paddingNumber(rule[k], str.length);\n                            else if (str.length === 3)\n                                return time.shortWeeks[rule[k]];\n                            else\n                                return time.weeks[rule[k]];\n                        }\n                        else if (k === \"M+\") {\n                            if (str.length < 3)\n                                return tui.text.paddingNumber(rule[k], str.length);\n                            else if (str.length === 3)\n                                return time.shortMonths[rule[k] - 1];\n                            else\n                                return time.months[rule[k] - 1];\n                        }\n                        else if (k === \"S+\") {\n                            return tui.text.paddingNumber(rule[k], str.length, str.length, true);\n                        }\n                        else {\n                            return tui.text.paddingNumber(rule[k], str.length);\n                        }\n                    }\n                }\n                return str;\n            });\n        }\n        time.formatDate = formatDate;\n    })(time = tui.time || (tui.time = {}));\n})(tui || (tui = {}));\n/// <reference path=\"base.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        /**\n         * <button>\n         * Attributes: value, text, type, checked, group, disable\n         * Events: click, mousedown, mouseup, keydown, keyup\n         */\n        var Button = (function (_super) {\n            __extends(Button, _super);\n            function Button() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            Button.prototype.initChildren = function (childNodes) {\n                if (childNodes && childNodes.length > 0)\n                    this._set(\"text\", tui.browser.toHTML(childNodes));\n            };\n            Button.prototype.initRestriction = function () {\n                var _this = this;\n                _super.prototype.initRestriction.call(this);\n                this.setRestrictions({\n                    \"type\": {\n                        \"get\": function () {\n                            if (_this._data[\"type\"])\n                                return _this._data[\"type\"];\n                            var parent = _this.get(\"parent\");\n                            if (parent && parent instanceof widget.Group && parent.get(\"type\"))\n                                return parent.get(\"type\");\n                            return null;\n                        }\n                    },\n                    \"value\": {\n                        \"get\": function () {\n                            if (_this._data[\"value\"])\n                                return _this._data[\"value\"];\n                            return _this.get(\"text\");\n                        }\n                    },\n                    \"checked\": {\n                        \"set\": function (value) {\n                            _this._data[\"checked\"] = !!value;\n                            if (!value)\n                                _this._data[\"tristate\"] = false;\n                        }\n                    },\n                    \"tristate\": {\n                        \"set\": function (value) {\n                            _this._data[\"tristate\"] = !!value;\n                            if (value)\n                                _this._data[\"checked\"] = true;\n                        }\n                    }\n                });\n            };\n            Button.prototype.init = function () {\n                var _this = this;\n                var $root = $(this._);\n                $root.attr({\n                    \"unselectable\": \"on\"\n                });\n                $root.mousedown(function (e) {\n                    if (_this.get(\"disable\"))\n                        return;\n                    $root.focus();\n                    _this.fire(\"mousedown\", e);\n                });\n                $root.mouseup(function (e) {\n                    if (_this.get(\"disable\"))\n                        return;\n                    _this.fire(\"mouseup\", e);\n                });\n                $root.keydown(function (e) {\n                    if (_this.get(\"disable\"))\n                        return;\n                    _this.fire(\"keydown\", e);\n                });\n                $root.keyup(function (e) {\n                    if (_this.get(\"disable\"))\n                        return;\n                    _this.fire(\"keyup\", e);\n                });\n                var onClick = function (e) {\n                    if (_this.get(\"disable\"))\n                        return;\n                    if (_this.get(\"type\") === \"toggle\" || _this.get(\"type\") === \"toggle-radio\") {\n                        _this.set(\"checked\", !_this.get(\"checked\"));\n                    }\n                    else if (_this.get(\"type\") === \"radio\")\n                        _this.set(\"checked\", true);\n                    var parent = _this.get(\"parent\");\n                    var groupName = _this.get(\"group\");\n                    if (_this.get(\"type\") === \"radio\" ||\n                        _this.get(\"type\") === \"toggle-radio\" && _this.get(\"checked\")) {\n                        var result = void 0;\n                        if (parent && parent instanceof widget.Group) {\n                            result = widget.search(parent._, function (elem) {\n                                if ((elem.get(\"type\") === \"radio\" || elem.get(\"type\") === \"toggle-radio\")\n                                    && elem !== _this)\n                                    return true;\n                                else\n                                    return false;\n                            });\n                        }\n                        else {\n                            result = widget.search(function (elem) {\n                                if (groupName && elem.get(\"group\") === groupName\n                                    && (elem.get(\"type\") === \"radio\" || elem.get(\"type\") === \"toggle-radio\")\n                                    && elem !== _this)\n                                    return true;\n                                else\n                                    return false;\n                            });\n                        }\n                        for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\n                            var elem = result_1[_i];\n                            elem.set(\"checked\", false);\n                        }\n                    }\n                    var onclick = _this.get(\"onclick\");\n                    if (onclick) {\n                        eval.call(window, onclick);\n                    }\n                    _this.fire(\"click\", e);\n                    if (parent && parent instanceof widget.Group)\n                        parent.fire(\"click\", { e: e, button: _this });\n                };\n                $root.click(onClick);\n                $root.keydown(function (e) {\n                    if (e.keyCode === 13 || e.keyCode === 32) {\n                        e.preventDefault();\n                        onClick(e);\n                    }\n                });\n            };\n            Button.prototype.render = function () {\n                var $root = $(this._);\n                if (this.get(\"checked\")) {\n                    $root.addClass(\"tui-checked\");\n                }\n                else {\n                    $root.removeClass(\"tui-checked\");\n                }\n                if (this.get(\"disable\")) {\n                    $root.addClass(\"tui-disable\");\n                    $root.removeAttr(\"tabIndex\");\n                }\n                else {\n                    $root.removeClass(\"tui-disable\");\n                    $root.attr(\"tabIndex\", \"0\");\n                }\n                if (this.get(\"checked\") && this.get(\"tristate\")) {\n                    $root.addClass(\"tui-tristate\");\n                }\n                else\n                    $root.removeClass(\"tui-tristate\");\n                var text = this.get(\"text\");\n                if (typeof text !== \"string\")\n                    text = \"\";\n                $root.html(text);\n            };\n            return Button;\n        }(widget.Widget));\n        widget.Button = Button;\n        var Check = (function (_super) {\n            __extends(Check, _super);\n            function Check() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            Check.prototype.init = function () {\n                _super.prototype.init.call(this);\n                this._set(\"type\", \"toggle\");\n            };\n            return Check;\n        }(Button));\n        widget.Check = Check;\n        var Radio = (function (_super) {\n            __extends(Radio, _super);\n            function Radio() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            Radio.prototype.init = function () {\n                _super.prototype.init.call(this);\n                this._set(\"type\", \"radio\");\n            };\n            return Radio;\n        }(Button));\n        widget.Radio = Radio;\n        widget.register(Button, \"button\");\n        widget.register(Check, \"check\");\n        widget.register(Radio, \"radio\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"base.ts\" />\n/// <reference path=\"../time/time.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        function formatNumber(v, maxValue) {\n            if (v < 0)\n                v = 0;\n            if (v > maxValue)\n                v = maxValue;\n            if (v < 10)\n                return \"0\" + v;\n            else\n                return v + \"\";\n        }\n        function setText(tb, line, column, content) {\n            var cell = (tb.rows[line].cells[column]);\n            if (tui.ieVer > 0 && tui.ieVer < 9) {\n                cell.innerText = content;\n            }\n            else\n                cell.innerHTML = content;\n        }\n        var Calendar = (function (_super) {\n            __extends(Calendar, _super);\n            function Calendar() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            Calendar.prototype.initRestriction = function () {\n                var _this = this;\n                _super.prototype.initRestriction.call(this);\n                this.setRestrictions({\n                    \"time\": {\n                        \"set\": function (value) {\n                            if (value instanceof Date)\n                                _this._data[\"time\"] = value;\n                            else if (typeof value === \"string\") {\n                                value = tui.time.parseDate(value);\n                                _this._data[\"time\"] = value;\n                            }\n                        },\n                        \"get\": function () {\n                            var tm = _this._data[\"time\"];\n                            if (typeof tm === tui.UNDEFINED || tm === null) {\n                                return _this._data[\"time\"] = tui.time.now();\n                            }\n                            else\n                                return tm;\n                        }\n                    },\n                    \"value\": {\n                        \"set\": function (value) {\n                            _this._set(\"time\", value);\n                        },\n                        \"get\": function () {\n                            return _this.get(\"time\");\n                        }\n                    },\n                    \"year\": {\n                        \"set\": function (value) {\n                            if (typeof value === \"number\" && !isNaN(value))\n                                _this.get(\"time\").setFullYear(value);\n                        },\n                        \"get\": function () {\n                            return _this.get(\"time\").getFullYear();\n                        }\n                    },\n                    \"month\": {\n                        \"set\": function (value) {\n                            if (typeof value === \"number\" && !isNaN(value))\n                                _this.get(\"time\").setMonth(value - 1);\n                        },\n                        \"get\": function () {\n                            return _this.get(\"time\").getMonth() + 1;\n                        }\n                    },\n                    \"day\": {\n                        \"set\": function (value) {\n                            if (typeof value === \"number\" && !isNaN(value))\n                                _this.get(\"time\").setDate(value);\n                        },\n                        \"get\": function () {\n                            return _this.get(\"time\").getDate();\n                        }\n                    },\n                    \"hour\": {\n                        \"set\": function (value) {\n                            if (typeof value === \"number\" && !isNaN(value))\n                                _this.get(\"time\").setHours(value);\n                        },\n                        \"get\": function () {\n                            return _this.get(\"time\").getHours();\n                        }\n                    },\n                    \"minute\": {\n                        \"set\": function (value) {\n                            if (typeof value === \"number\" && !isNaN(value))\n                                _this.get(\"time\").setMinutes(value);\n                        },\n                        \"get\": function () {\n                            return _this.get(\"time\").getMinutes();\n                        }\n                    },\n                    \"second\": {\n                        \"set\": function (value) {\n                            if (typeof value === \"number\" && !isNaN(value))\n                                _this.get(\"time\").setSeconds(value);\n                        },\n                        \"get\": function () {\n                            return _this.get(\"time\").getSeconds();\n                        }\n                    }\n                });\n            };\n            Calendar.prototype.init = function () {\n                var _this = this;\n                $(this._).attr({ \"tabIndex\": \"0\", \"unselectable\": \"on\" });\n                var tb = this._components[\"table\"] = tui.browser.toElement(\"<table cellPadding='0' cellspacing='0' border='0'>\" +\n                    \"<tr class='tui-yearbar'><td class='tui-pm'></td><td class='tui-py'>\" +\n                    \"</td><td colspan='3' class='tui-ym'></td>\" +\n                    \"<td class='tui-ny'></td><td class='tui-nm'></td></tr></table>\");\n                var yearLine = tb.rows[0];\n                for (var i = 0; i < 7; i++) {\n                    var line = tb.insertRow(-1);\n                    for (var j = 0; j < 7; j++) {\n                        var cell = line.insertCell(-1);\n                        if (j === 0 || j === 6)\n                            cell.className = \"tui-week-end\";\n                        if (i === 0) {\n                            cell.className = \"tui-week\";\n                            setText(tb, i + 1, j, tui.str(tui.time.shortWeeks[j]));\n                        }\n                    }\n                }\n                this._.appendChild(tb);\n                var timebar = this._components[\"timeBar\"] = tui.browser.toElement(\"<div>\" + tui.str(\"Choose Time\") + \":<input name='hours' maxLength='2'>:<input name='minutes' maxLength='2'>:<input name='seconds' maxLength='2'>\" +\n                    \"<a class='tui-update'></a></div>\");\n                this._.appendChild(timebar);\n                function getMaxValue(name) {\n                    if (name === \"hours\")\n                        return 23;\n                    else\n                        return 59;\n                }\n                var getInputTime = function () {\n                    function getInput(index) {\n                        return $(timebar).children(\"input\")[index];\n                    }\n                    var tm = _this.get(\"time\");\n                    tm.setHours(parseInt(getInput(0).value));\n                    tm.setMinutes(parseInt(getInput(1).value));\n                    tm.setSeconds(parseInt(getInput(2).value));\n                    _this.set(\"time\", tm);\n                };\n                var timebar$ = $(timebar);\n                timebar$.keydown(function (e) {\n                    var o = (e.srcElement || e.target);\n                    var o$ = $(o);\n                    var k = e.keyCode;\n                    if (o.nodeName.toUpperCase() === \"INPUT\") {\n                        if (k === tui.browser.KeyCode.TAB)\n                            return;\n                        e.preventDefault();\n                        tui.browser.cancelBubble(e);\n                        var input = o;\n                        if (k === tui.browser.KeyCode.LEFT) {\n                            if (o$.attr(\"name\") === \"seconds\")\n                                timebar$.children(\"input[name=minutes]\").focus();\n                            else if (o$.attr(\"name\") === \"minutes\")\n                                timebar$.children(\"input[name=hours]\").focus();\n                        }\n                        else if (k === tui.browser.KeyCode.RIGHT) {\n                            if (o$.attr(\"name\") === \"hours\")\n                                timebar$.children(\"input[name=minutes]\").focus();\n                            else if (o$.attr(\"name\") === \"minutes\")\n                                timebar$.children(\"input[name=seconds]\").focus();\n                        }\n                        else if (k === tui.browser.KeyCode.UP) {\n                            var max = getMaxValue(o$.attr(\"name\"));\n                            var v = parseInt(input.value) + 1;\n                            if (v > max)\n                                v = 0;\n                            input.value = formatNumber(v, max);\n                            getInputTime();\n                            input.select();\n                        }\n                        else if (k === tui.browser.KeyCode.DOWN) {\n                            var max = getMaxValue(o$.attr(\"name\"));\n                            var v = parseInt(input.value) - 1;\n                            if (v < 0)\n                                v = max;\n                            input.value = formatNumber(v, max);\n                            getInputTime();\n                            input.select();\n                        }\n                        else if (k >= tui.browser.KeyCode.KEY_0 && k <= tui.browser.KeyCode.KEY_9) {\n                            var max = getMaxValue(o$.attr(\"name\"));\n                            var v = k - tui.browser.KeyCode.KEY_0;\n                            var now = tui.time.now().getTime();\n                            if (o._lastInputTime && (now - o._lastInputTime) < 1000)\n                                o.value = formatNumber(parseInt(o.value.substr(1, 1)) * 10 + v, max);\n                            else\n                                o.value = formatNumber(v, max);\n                            o._lastInputTime = now;\n                            getInputTime();\n                            o.select();\n                        }\n                        else if (k == 13)\n                            _this.fire(\"click\", { e: e, \"time\": _this.get(\"time\"), \"type\": \"pick\" });\n                    }\n                });\n                timebar$.children(\"input\").on(\"focus mousedown mouseup\", function (e) {\n                    var o = (e.srcElement || e.target);\n                    setTimeout(function () {\n                        o.select();\n                    }, 0);\n                }).on(\"contextmenu\", tui.browser.cancelDefault);\n                timebar$.children(\"a\").mousedown(function (e) {\n                    var now = tui.time.now();\n                    var newTime = new Date(_this.get(\"year\"), _this.get(\"month\") - 1, _this.get(\"day\"), now.getHours(), now.getMinutes(), now.getSeconds());\n                    _this.set(\"time\", newTime);\n                    setTimeout(function () { _this._.focus(); });\n                    return tui.browser.cancelBubble(e);\n                }).click(function (e) {\n                    _this.fire(\"click\", { e: e, \"time\": _this.get(\"time\"), \"type\": \"refresh\" });\n                });\n                $(tb).mousedown(function (e) {\n                    if (tui.ffVer > 0) {\n                        setTimeout(function () { _this._.focus(); });\n                    }\n                    var cell = (e.target || e.srcElement);\n                    if (cell.nodeName.toLowerCase() !== \"td\")\n                        return;\n                    if ($(cell).hasClass(\"tui-pm\")) {\n                        _this.prevMonth();\n                    }\n                    else if ($(cell).hasClass(\"tui-py\")) {\n                        _this.prevYear();\n                    }\n                    else if ($(cell).hasClass(\"tui-ny\")) {\n                        _this.nextYear();\n                    }\n                    else if ($(cell).hasClass(\"tui-nm\")) {\n                        _this.nextMonth();\n                    }\n                    else if (typeof cell[\"offsetMonth\"] === \"number\") {\n                        var d = parseInt(cell.innerHTML, 10);\n                        var y = _this.get(\"year\"), m = _this.get(\"month\");\n                        var offset = cell[\"offsetMonth\"];\n                        if (offset < 0) {\n                            if (m === 1) {\n                                y--;\n                                m = 12;\n                            }\n                            else {\n                                m--;\n                            }\n                            _this.onPicked(y, m, d);\n                        }\n                        else if (offset > 0) {\n                            if (m === 12) {\n                                y++;\n                                m = 1;\n                            }\n                            else {\n                                m++;\n                            }\n                            _this.onPicked(y, m, d);\n                        }\n                        else if (offset === 0) {\n                            _this.onPicked(y, m, d);\n                        }\n                    }\n                }).click(function (e) {\n                    var cell = (e.target || e.srcElement);\n                    if (cell.nodeName.toLowerCase() !== \"td\")\n                        return;\n                    if (typeof cell[\"offsetMonth\"] === \"number\")\n                        _this.fire(\"click\", { e: e, \"time\": _this.get(\"time\"), \"type\": \"pick\" });\n                    else if (/^(tui-pm|tui-py|tui-nm|tui-ny)$/.test(cell.className))\n                        _this.fire(\"click\", { e: e, \"time\": _this.get(\"time\"), \"type\": \"change\" });\n                }).dblclick(function (e) {\n                    var cell = (e.target || e.srcElement);\n                    if (cell.nodeName.toLowerCase() !== \"td\")\n                        return;\n                    if (typeof cell[\"offsetMonth\"] === \"number\")\n                        _this.fire(\"dblclick\", { e: e, \"time\": _this.get(\"time\") });\n                });\n                $(this._).keydown(function (e) {\n                    var k = e.keyCode;\n                    if ([13, 33, 34, 37, 38, 39, 40].indexOf(k) >= 0) {\n                        if (k === 37) {\n                            var tm = tui.time.dateAdd(_this.get(\"time\"), -1);\n                            _this.set(\"time\", tm);\n                        }\n                        else if (k === 38) {\n                            var tm = tui.time.dateAdd(_this.get(\"time\"), -7);\n                            _this.set(\"time\", tm);\n                        }\n                        else if (k === 39) {\n                            var tm = tui.time.dateAdd(_this.get(\"time\"), 1);\n                            _this.set(\"time\", tm);\n                        }\n                        else if (k === 40) {\n                            var tm = tui.time.dateAdd(_this.get(\"time\"), 7);\n                            _this.set(\"time\", tm);\n                        }\n                        else if (k === 33) {\n                            _this.prevMonth();\n                        }\n                        else if (k === 34) {\n                            _this.nextMonth();\n                        }\n                        else if (k === 13) {\n                            _this.fire(\"click\", { e: e, \"time\": _this.get(\"time\"), \"type\": \"pick\" });\n                        }\n                        return e.preventDefault();\n                    }\n                });\n            };\n            Calendar.prototype.onPicked = function (y, m, d) {\n                var oldTime = this.get(\"time\");\n                var newTime = new Date(y, m - 1, d, oldTime.getHours(), oldTime.getMinutes(), oldTime.getSeconds());\n                this.set(\"time\", newTime);\n            };\n            Calendar.prototype.makeTime = function (proc) {\n                var t = { y: this.get(\"year\"), m: this.get(\"month\"), d: this.get(\"day\") };\n                proc(t);\n                var newDate = new Date(t.y, t.m - 1, 1);\n                if (t.d > tui.time.totalDaysOfMonth(newDate))\n                    t.d = tui.time.totalDaysOfMonth(newDate);\n                this.onPicked(t.y, t.m, t.d);\n            };\n            Calendar.prototype.prevMonth = function () {\n                this.makeTime(function (t) {\n                    if (t.m === 1) {\n                        t.y--;\n                        t.m = 12;\n                    }\n                    else {\n                        t.m--;\n                    }\n                });\n            };\n            Calendar.prototype.nextMonth = function () {\n                this.makeTime(function (t) {\n                    if (t.m === 12) {\n                        t.y++;\n                        t.m = 1;\n                    }\n                    else {\n                        t.m++;\n                    }\n                });\n            };\n            Calendar.prototype.prevYear = function () {\n                this.makeTime(function (t) {\n                    t.y--;\n                });\n            };\n            Calendar.prototype.nextYear = function () {\n                this.makeTime(function (t) {\n                    t.y++;\n                });\n            };\n            Calendar.prototype.render = function () {\n                function firstDay(date) {\n                    var y = date.getFullYear();\n                    var m = date.getMonth();\n                    return new Date(y, m, 1);\n                }\n                var tb = this._components[\"table\"];\n                var tm = this.get(\"time\");\n                var today = tui.time.now();\n                var firstWeek = firstDay(tm).getDay();\n                var daysOfMonth = tui.time.totalDaysOfMonth(tm);\n                var day = 0;\n                tb.rows[0].cells[2].innerHTML = tm.getFullYear() + \" - \" + this.get(\"month\");\n                for (var i = 0; i < 6; i++) {\n                    for (var j = 0; j < 7; j++) {\n                        var cell = tb.rows[i + 2].cells[j];\n                        cell.className = \"\";\n                        if (day === 0) {\n                            if (j === firstWeek) {\n                                day = 1;\n                                cell.innerHTML = day + \"\";\n                                cell.offsetMonth = 0;\n                            }\n                            else {\n                                var preMonthDay = new Date(firstDay(tm).valueOf() - ((firstWeek - j) * 1000 * 24 * 60 * 60));\n                                cell.innerHTML = preMonthDay.getDate() + \"\";\n                                cell.offsetMonth = -1;\n                                $(cell).addClass(\"tui-before\");\n                            }\n                        }\n                        else {\n                            day++;\n                            if (day <= daysOfMonth) {\n                                cell.innerHTML = day + \"\";\n                                cell.offsetMonth = 0;\n                            }\n                            else {\n                                cell.innerHTML = (day - daysOfMonth) + \"\";\n                                cell.offsetMonth = 1;\n                                $(cell).addClass(\"tui-after\");\n                            }\n                        }\n                        if (day === this.get(\"day\"))\n                            $(cell).addClass(\"tui-actived\");\n                        if (j === 0 || j === 6)\n                            $(cell).addClass(\"tui-weekend\");\n                        if (this.get(\"year\") === today.getFullYear() && this.get(\"month\") === (today.getMonth() + 1) && day === today.getDate()) {\n                            $(cell).addClass(\"tui-today\");\n                        }\n                    }\n                }\n                var timebar = this._components[\"timeBar\"];\n                if (this.get(\"timeBar\")) {\n                    timebar.style.display = \"\";\n                    $(timebar).children(\"input[name=hours]\").val(formatNumber(tm.getHours(), 23));\n                    $(timebar).children(\"input[name=minutes]\").val(formatNumber(tm.getMinutes(), 59));\n                    $(timebar).children(\"input[name=seconds]\").val(formatNumber(tm.getSeconds(), 59));\n                }\n                else {\n                    timebar.style.display = \"none\";\n                }\n            };\n            return Calendar;\n        }(widget.Widget));\n        widget.Calendar = Calendar;\n        widget.register(Calendar, \"calendar\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"base.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        /**\n         * <group>\n         * Attributes: name, type(check,radio,toggle)\n         * Events:\n         */\n        var Group = (function (_super) {\n            __extends(Group, _super);\n            function Group() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            Group.prototype.initChildren = function (childNodes) {\n                for (var _i = 0, childNodes_3 = childNodes; _i < childNodes_3.length; _i++) {\n                    var node = childNodes_3[_i];\n                    this._.appendChild(node);\n                }\n            };\n            Group.prototype.initRestriction = function () {\n                var _this = this;\n                _super.prototype.initRestriction.call(this);\n                this.setRestrictions({\n                    \"value\": {\n                        \"set\": function (value) {\n                            if (typeof value === \"object\" && value !== null) {\n                                var children = widget.search(_this._);\n                                for (var _i = 0, children_2 = children; _i < children_2.length; _i++) {\n                                    var item = children_2[_i];\n                                    var key = item.get(\"name\");\n                                    if (key !== null) {\n                                        item.set(\"value\", value[key]);\n                                    }\n                                }\n                            }\n                        },\n                        \"get\": function () {\n                            var value = {};\n                            var children = widget.search(_this._);\n                            for (var _i = 0, children_3 = children; _i < children_3.length; _i++) {\n                                var item = children_3[_i];\n                                var key = item.get(\"name\");\n                                if (key !== null) {\n                                    value[key] = item.get(\"value\");\n                                }\n                            }\n                            return value;\n                        }\n                    }\n                });\n            };\n            Group.prototype.init = function () {\n                widget.init(this._);\n            };\n            Group.prototype.render = function () {\n                var root = this._;\n                var result = widget.search(root);\n                for (var _i = 0, result_2 = result; _i < result_2.length; _i++) {\n                    var child = result_2[_i];\n                    child.render();\n                }\n            };\n            return Group;\n        }(widget.Widget));\n        widget.Group = Group;\n        var ButtonGroup = (function (_super) {\n            __extends(ButtonGroup, _super);\n            function ButtonGroup() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            ButtonGroup.prototype.initRestriction = function () {\n                var _this = this;\n                _super.prototype.initRestriction.call(this);\n                this.setRestrictions({\n                    \"value\": {\n                        \"set\": function (value) {\n                            var children = widget.search(_this._, function (elem) {\n                                if (elem.get(\"parent\") === _this && elem instanceof widget.Button)\n                                    return true;\n                                else\n                                    return false;\n                            });\n                            function check(v) {\n                                if (value instanceof Array) {\n                                    return value.indexOf(v) >= 0;\n                                }\n                                else {\n                                    return value === v;\n                                }\n                            }\n                            for (var _i = 0, children_4 = children; _i < children_4.length; _i++) {\n                                var button = children_4[_i];\n                                if (check(button.get(\"value\"))) {\n                                    button.set(\"checked\", true);\n                                }\n                                else\n                                    button.set(\"checked\", false);\n                            }\n                        },\n                        \"get\": function () {\n                            var values = [];\n                            var children = widget.search(_this._, function (elem) {\n                                if (elem.get(\"parent\") === _this && elem instanceof widget.Button)\n                                    return true;\n                                else\n                                    return false;\n                            });\n                            for (var _i = 0, children_5 = children; _i < children_5.length; _i++) {\n                                var button = children_5[_i];\n                                if (button.get(\"checked\"))\n                                    values.push(button.get(\"value\"));\n                            }\n                            if (_this.get(\"type\") === \"radio\" || _this.get(\"type\") === \"toggle-radio\") {\n                                if (values.length > 0)\n                                    return values[0];\n                                else\n                                    return null;\n                            }\n                            else\n                                return values;\n                        }\n                    },\n                    \"text\": {\n                        \"get\": function () {\n                            var values = [];\n                            var children = widget.search(_this._, function (elem) {\n                                if (elem.get(\"parent\") === _this && elem instanceof widget.Button)\n                                    return true;\n                                else\n                                    return false;\n                            });\n                            for (var _i = 0, children_6 = children; _i < children_6.length; _i++) {\n                                var button = children_6[_i];\n                                if (button.get(\"checked\"))\n                                    values.push(button.get(\"text\"));\n                            }\n                            return values.join(\",\");\n                        }\n                    }\n                });\n            };\n            return ButtonGroup;\n        }(Group));\n        widget.ButtonGroup = ButtonGroup;\n        widget.register(Group, \"group\");\n        widget.register(ButtonGroup, \"button-group\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"base.ts\" />\n/// <reference path=\"group.ts\" />\n/// <reference path=\"../ajax/ajax.ts\" />\n/// <reference path=\"../service/service.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget_5) {\n        \"use strict\";\n        var Component = (function (_super) {\n            __extends(Component, _super);\n            function Component() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            Component.prototype.checkReady = function () {\n                var hasHandler = !!this.get(\"handler\");\n                var hasSrc = !!this.get(\"src\");\n                if ((!hasHandler || hasHandler && this._scriptReady)\n                    && (!hasSrc || hasSrc && this._htmlReady)\n                    && this._changed\n                    && this._childrenInit\n                    && this._noReadyCount <= 0) {\n                    this._changed = false;\n                    if (this._fn) {\n                        try {\n                            this._fn.call(this);\n                        }\n                        finally {\n                            this._fn = null;\n                        }\n                    }\n                    this.fire(\"load\");\n                    var parent = this.get(\"parent\");\n                    parent && parent.fire(\"componentReady\", { name: this.get(\"name\") });\n                }\n            };\n            Component.prototype.initRestriction = function () {\n                var _this = this;\n                this._fn = null;\n                this._changed = true;\n                this._noReadyCount = 0;\n                this._childrenInit = false;\n                this._scriptReady = false;\n                this._htmlReady = false;\n                this.on(\"componentReady\", function (e) {\n                    _this._noReadyCount--;\n                    _this.checkReady();\n                });\n                _super.prototype.initRestriction.call(this);\n                this.setRestrictions({\n                    \"handler\": {\n                        \"set\": function (value) {\n                            var oldValue = _this._data[\"handler\"];\n                            if (value && (value + \"\").trim().length > 0) {\n                                value = (value + \"\").trim();\n                                if (oldValue != value)\n                                    _this._changed = true;\n                                _this._data[\"handler\"] = value;\n                                _this._fn = null;\n                                _this._scriptReady = false;\n                                tui.ajax.getFunction(value).done(function (result) {\n                                    _this._fn = result;\n                                    _this._scriptReady = true;\n                                    _this.checkReady();\n                                }).fail(function () {\n                                    _this._scriptReady = true;\n                                    _this.checkReady();\n                                });\n                            }\n                            else {\n                                if (oldValue)\n                                    _this._changed = true;\n                                delete _this._data[\"handler\"];\n                                _this._scriptReady = true;\n                                _this._fn = null;\n                                _this.checkReady();\n                            }\n                        }\n                    }, \"src\": {\n                        \"set\": function (value) {\n                            var oldValue = _this._data[\"src\"];\n                            if (value == oldValue)\n                                return;\n                            if (value && (value + \"\").trim().length > 0) {\n                                value = (value + \"\").trim();\n                                _this._data[\"src\"] = value;\n                                _this._htmlReady = false;\n                                _this._childrenInit = false;\n                                tui.ajax.getComponent(_this.get(\"url\")).done(function (result, handler) {\n                                    _this._htmlReady = true;\n                                    tui.browser.setInnerHtml(_this._, result);\n                                    _this.loadComponents();\n                                    handler && _this.set(\"handler\", handler);\n                                    _this.render();\n                                    _this.checkReady();\n                                }).fail(function () {\n                                    _this._htmlReady = true;\n                                    _this.checkReady();\n                                });\n                            }\n                            else {\n                                if (oldValue) {\n                                    _this._changed = true;\n                                    _this._.innerHTML = \"\";\n                                }\n                                delete _this._data[\"src\"];\n                                _this._htmlReady = true;\n                                _this.checkReady();\n                            }\n                        }\n                    }, \"url\": {\n                        \"get\": function () {\n                            var parentUrl = _this.getParentUrl();\n                            var path = _this.get(\"src\");\n                            if (!path)\n                                return parentUrl;\n                            else {\n                                if (tui.text.isAbsUrl(path))\n                                    return path;\n                                else\n                                    return tui.text.joinUrl(tui.text.getBaseUrl(parentUrl), path);\n                            }\n                        }\n                    }\n                });\n            };\n            Component.prototype.getParentUrl = function () {\n                var elem = this._.parentNode;\n                while (elem) {\n                    if (elem.__widget__ && elem.__widget__.getNodeName() === \"component\") {\n                        return elem.__widget__.get(\"url\");\n                    }\n                    else {\n                        elem = elem.parentNode;\n                    }\n                }\n                return location.href;\n            };\n            Component.prototype.loadComponents = function () {\n                var _this = this;\n                var searchElem = function (parent) {\n                    for (var i = 0; i < parent.childNodes.length; i++) {\n                        var node = parent.childNodes[i];\n                        if (node.nodeType !== 1) {\n                            continue;\n                        }\n                        var elem = node;\n                        var widget_6 = elem.__widget__;\n                        var name_4 = void 0;\n                        var fullName = widget_5.getFullName(elem);\n                        if (fullName === \"tui:component\")\n                            _this._noReadyCount++;\n                        if (widget_6) {\n                            name_4 = tui.get(elem).get(\"name\");\n                            if (typeof name_4 === \"string\" && name_4.trim().length > 0)\n                                _this._components[name_4] = elem;\n                        }\n                        else {\n                            name_4 = elem.getAttribute(\"name\");\n                            if (typeof name_4 === \"string\" && name_4.trim().length > 0)\n                                _this._components[name_4] = elem;\n                            if (!fullName.match(/^tui:/i) || fullName.match(/^tui:(dialog-select|input-group|group|button-group)$/))\n                                searchElem(node);\n                        }\n                    }\n                };\n                this._components = { '': this._ };\n                this._noReadyCount = 0;\n                searchElem(this._);\n                this._childrenInit = true;\n            };\n            Component.prototype.initChildren = function (childNodes) {\n                var _this = this;\n                if (this.get(\"src\") == null) {\n                    childNodes.forEach(function (n) { return _this._.appendChild(n); });\n                    this.loadComponents();\n                    this.checkReady();\n                }\n            };\n            Component.prototype.use = function (fn, desc) {\n                var _this = this;\n                if (typeof fn === \"function\") {\n                    var params = tui.service.parseParameters(fn, desc);\n                    var argv = params.split(\",\").map(function (s) {\n                        if (!s)\n                            return null;\n                        else if (s[0] === '$') {\n                            return tui.service.get(s.substr(1));\n                        }\n                        else {\n                            var c = _this.getComponent(s.trim());\n                            if (c && c.__widget__)\n                                c = c.__widget__;\n                            return c;\n                        }\n                    });\n                    fn.apply(this, argv);\n                }\n            };\n            Component.prototype.render = function () {\n                widget_5.init(this._);\n            };\n            return Component;\n        }(widget_5.Group));\n        widget_5.Component = Component;\n        widget_5.register(Component, \"component\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"base.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        var VALIDATORS = {\n            \"*email\": \"^(\\\\w+([-+.]\\\\w+)*@\\\\w+([-.]\\\\w+)*\\\\.\\\\w+([-.]\\\\w+)*)?$\",\n            \"*chinese\": \"^[\\\\u4e00-\\\\u9fa5]*$\",\n            \"*url\": \"^(https?://([\\\\w-_]+:[^@/]+@)?[\\\\w-]+(\\\\.[\\\\w-]+)*(:[0-9]+)?(/[\\\\w-./?%&=]*)?)?$\",\n            \"*digital\": \"^\\\\d*$\",\n            \"*integer\": \"^([+\\\\-]?\\\\d+)?$\",\n            \"*float\": \"^([+\\\\-]?\\\\d*\\\\.\\\\d+)?$\",\n            \"*number\": \"^([+\\\\-]?\\\\d+|(\\\\d*\\\\.\\\\d+))?$\",\n            \"*currency\": \"^(-?\\\\d{1,3}(,\\\\d{3})*\\\\.\\\\d{2,3})?$\",\n            \"*date\": \"^([0-9]{4}-1[0-2]|0?[1-9]-0?[1-9]|[12][0-9]|3[01])?$\",\n            \"*key\": \"^([_a-zA-Z][a-zA-Z0-9_]*)?$\",\n            \"*any\": \"\\\\S+\"\n        };\n        var InputBase = (function (_super) {\n            __extends(InputBase, _super);\n            function InputBase() {\n                var _this = _super !== null && _super.apply(this, arguments) || this;\n                _this._valid = true;\n                _this._invalidMessage = null;\n                return _this;\n            }\n            InputBase.prototype.initChildren = function (childNodes) {\n                var validators = [];\n                for (var _i = 0, childNodes_4 = childNodes; _i < childNodes_4.length; _i++) {\n                    var node = childNodes_4[_i];\n                    if (widget.getFullName(node) === \"tui:verify\") {\n                        var format = node.getAttribute(\"format\");\n                        if (format) {\n                            var validator = { format: format, message: node.innerHTML };\n                            validators.push(validator);\n                        }\n                    }\n                }\n                this._set(\"validate\", validators);\n            };\n            InputBase.prototype.reset = function () {\n                if (this._valid !== true) {\n                    this._valid = true;\n                    this._invalidMessage = null;\n                    this.render();\n                }\n            };\n            InputBase.prototype.updateEmptyState = function (empty) {\n                if (this._isEmpty !== empty) {\n                    this._isEmpty = empty;\n                    if (this._valid === true)\n                        this.render();\n                }\n            };\n            InputBase.prototype.validate = function (e) {\n                var text = this.get(\"text\");\n                if (text === null)\n                    text = \"\";\n                this._valid = true;\n                var validator = this.get(\"validate\");\n                if (text === \"\" && this.get(\"allowEmpty\")) {\n                    return true;\n                }\n                if (!(validator instanceof Array))\n                    return true;\n                for (var _i = 0, validator_1 = validator; _i < validator_1.length; _i++) {\n                    var item = validator_1[_i];\n                    var k = item.format;\n                    if (k === \"*password\") {\n                        if (!/[a-z]/.test(text) ||\n                            !/[A-Z]/.test(text) ||\n                            !/[0-9]/.test(text) ||\n                            !/[\\~\\`\\!\\@\\#\\$\\%\\^\\&\\*\\(\\)\\_\\-\\+\\=\\\\\\]\\[\\{\\}\\:\\;\\\"\\'\\/\\?\\,\\.\\<\\>\\|]/.test(text) ||\n                            text.length < 6) {\n                            this._valid = false;\n                        }\n                    }\n                    else if (k.substr(0, 8) === \"*maxlen:\") {\n                        var imaxLen = parseFloat(k.substr(8));\n                        if (isNaN(imaxLen))\n                            throw new Error(\"Invalid validator: '*maxlen:...' must follow a number\");\n                        var ival = text.length;\n                        if (ival > imaxLen) {\n                            this._valid = false;\n                        }\n                    }\n                    else if (k.substr(0, 8) === \"*minlen:\") {\n                        var iminLen = parseFloat(k.substr(8));\n                        if (isNaN(iminLen))\n                            throw new Error(\"Invalid validator: '*minLen:...' must follow a number\");\n                        var ival = text.length;\n                        if (ival < iminLen) {\n                            this._valid = false;\n                        }\n                    }\n                    else if (k.substr(0, 5) === \"*max:\") {\n                        var imax = parseFloat(k.substr(5));\n                        if (isNaN(imax))\n                            throw new Error(\"Invalid validator: '*max:...' must follow a number\");\n                        var ival = parseFloat(text);\n                        if (isNaN(ival) || ival > imax) {\n                            this._valid = false;\n                        }\n                    }\n                    else if (k.substr(0, 5) === \"*min:\") {\n                        var imin = parseFloat(k.substr(5));\n                        if (isNaN(imin))\n                            throw new Error(\"Invalid validator: '*min:...' must follow a number\");\n                        var ival = parseFloat(text);\n                        if (isNaN(ival) || ival < imin) {\n                            this._valid = false;\n                        }\n                    }\n                    else if (k.substr(0, 6) === \"*same:\") {\n                        var other = k.substr(6);\n                        var o = widget.get(other);\n                        if (o) {\n                            var otherText = o.get(\"text\");\n                            if (otherText === null)\n                                otherText = \"\";\n                            if (text !== otherText)\n                                this._valid = false;\n                        }\n                        else {\n                            this._valid = false;\n                        }\n                    }\n                    else {\n                        var regexp;\n                        if (k.substr(0, 1) === \"*\") {\n                            var v = VALIDATORS[k];\n                            if (v)\n                                regexp = new RegExp(v);\n                            else\n                                throw new Error(\"Invalid validator: \" + k + \" is not a valid validator\");\n                        }\n                        else {\n                            regexp = new RegExp(k);\n                        }\n                        this._valid = regexp.test(text);\n                    }\n                    if (!this._valid) {\n                        this._invalidMessage = item.message;\n                        break;\n                    }\n                }\n                if (!this._valid && !this._invalidMessage) {\n                    this._invalidMessage = tui.str(\"Invalid input.\");\n                }\n                this.render();\n                if (e)\n                    this.fire(\"validate\", { e: e, valid: this._valid, message: this._invalidMessage });\n                return this._valid;\n            };\n            return InputBase;\n        }(widget.Widget));\n        widget.InputBase = InputBase;\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"inputBase.ts\" />\n/// <reference path=\"../browser/keyboard.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        var SelectBase = (function (_super) {\n            __extends(SelectBase, _super);\n            function SelectBase() {\n                var _this = _super !== null && _super.apply(this, arguments) || this;\n                _this._inSelection = false;\n                return _this;\n            }\n            SelectBase.prototype.closeSelect = function () {\n                var popup = widget.get(this._components[\"popup\"]);\n                popup && popup.close();\n            };\n            SelectBase.prototype.init = function () {\n                var _this = this;\n                var $root = $(this._);\n                var popup = this.createPopup();\n                this._components[\"popup\"] = popup._;\n                var label = this._components[\"label\"] = document.createElement(\"span\");\n                var iconRight = this._components[\"iconRight\"] = document.createElement(\"i\");\n                var iconInvalid = this._components[\"iconInvalid\"] = document.createElement(\"i\");\n                var clearButton = this._components[\"clearButton\"] = document.createElement(\"i\");\n                clearButton.className = \"tui-input-clear-button\";\n                iconInvalid.className = \"tui-invalid-icon\";\n                label.className = \"tui-input-label\";\n                label.setAttribute(\"unselectable\", \"on\");\n                this._.appendChild(label);\n                this._.appendChild(iconInvalid);\n                this._.appendChild(iconRight);\n                this._.appendChild(clearButton);\n                this._.setAttribute(\"tabIndex\", \"0\");\n                $(this._).focus(function () {\n                    $root.addClass(\"tui-active\");\n                });\n                $(this._).blur(function () {\n                    $root.removeClass(\"tui-active\");\n                    if (_this.get(\"disable\"))\n                        return;\n                    if (_this.get(\"autoValidate\")) {\n                        if (!_this._inSelection)\n                            _this.validate();\n                    }\n                });\n                $root.on(\"mousedown\", function (e) {\n                    if (_this.get(\"disable\"))\n                        return;\n                    _this._.focus();\n                    _this.reset();\n                    setTimeout(function () {\n                        _this._inSelection = true;\n                        _this.openSelect();\n                    }, 0);\n                });\n                $root.keypress(function (e) {\n                    if (_this.get(\"disable\"))\n                        return;\n                    if (e.charCode === tui.browser.KeyCode.SPACE) {\n                        e.preventDefault();\n                        _this.reset();\n                        setTimeout(function () {\n                            _this._inSelection = true;\n                            _this.openSelect();\n                        }, 0);\n                    }\n                });\n                $(clearButton).on(\"mousedown\", function (e) {\n                    _this.set(\"value\", null);\n                    _this.set(\"text\", \"\");\n                    _this.reset();\n                    _this.fire(\"change\", e);\n                    e.stopPropagation();\n                });\n                popup.on(\"close\", function () {\n                    _this._inSelection = false;\n                    if (_this.get(\"autoValidate\")) {\n                        setTimeout(function () {\n                            if (document.activeElement !== _this._)\n                                _this.validate();\n                        });\n                    }\n                });\n            };\n            SelectBase.prototype.render = function () {\n                this._.scrollLeft = 0;\n                var $root = $(this._);\n                var label = this._components[\"label\"];\n                var iconRight = this._components[\"iconRight\"];\n                var iconInvalid = this._components[\"iconInvalid\"];\n                var clearButton = this._components[\"clearButton\"];\n                if (this.get(\"disable\")) {\n                    $root.addClass(\"tui-disable\");\n                }\n                else {\n                    $root.removeClass(\"tui-disable\");\n                }\n                var text = this.get(\"text\");\n                var noValue = false;\n                if (text === null || text === \"\") {\n                    noValue = true;\n                    text = this.get(\"placeholder\");\n                    $(label).addClass(\"tui-placeholder\");\n                }\n                else {\n                    $(label).removeClass(\"tui-placeholder\");\n                }\n                if (text === null)\n                    text = \"\";\n                $(label).text(text);\n                iconRight.className = this.get(\"iconRight\");\n                iconRight.style.display = \"\";\n                iconRight.style.right = \"0\";\n                if (!this._valid) {\n                    $root.addClass(\"tui-invalid\");\n                    iconInvalid.style.display = \"\";\n                    iconInvalid.style.right = iconRight.offsetWidth + \"px\";\n                }\n                else {\n                    $root.removeClass(\"tui-invalid\");\n                    iconInvalid.style.display = \"none\";\n                }\n                if (this.get(\"clearable\") && (!noValue)) {\n                    clearButton.style.display = \"\";\n                    clearButton.style.right = iconRight.offsetWidth + iconInvalid.offsetWidth + \"px\";\n                }\n                else {\n                    clearButton.style.display = \"none\";\n                }\n                if (!this._valid && this._invalidMessage) {\n                    this._set(\"follow-tooltip\", this._invalidMessage);\n                }\n                else {\n                    this._set(\"follow-tooltip\", null);\n                }\n            };\n            return SelectBase;\n        }(widget.InputBase));\n        SelectBase.PADDING = 6;\n        widget.SelectBase = SelectBase;\n        var SelectPopupBase = (function (_super) {\n            __extends(SelectPopupBase, _super);\n            function SelectPopupBase() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            SelectPopupBase.prototype.createPopup = function () {\n                return widget.create(\"popup\");\n            };\n            return SelectPopupBase;\n        }(SelectBase));\n        widget.SelectPopupBase = SelectPopupBase;\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"selectBase.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        /**\n         * <tui:date-picker>\n         * Attributes: value, text(value to string), format, timeBar\n         * Method: openSelect\n         * Events: change\n         */\n        var DatePicker = (function (_super) {\n            __extends(DatePicker, _super);\n            function DatePicker() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            DatePicker.prototype.initRestriction = function () {\n                var _this = this;\n                var calendar = widget.create(\"calendar\");\n                this._components[\"calendar\"] = calendar._;\n                _super.prototype.initRestriction.call(this);\n                this.setRestrictions({\n                    \"timeBar\": {\n                        \"set\": function (value) {\n                            calendar._set(\"timeBar\", !!value);\n                        },\n                        \"get\": function () {\n                            return !!calendar.get(\"timeBar\");\n                        }\n                    },\n                    \"text\": {\n                        \"set\": function (value) { },\n                        \"get\": function () {\n                            var value = _this.get(\"value\");\n                            if (value === null)\n                                return \"\";\n                            return tui.time.formatDate(value, _this.get(\"format\"));\n                        }\n                    }\n                });\n            };\n            DatePicker.prototype.init = function () {\n                var _this = this;\n                _super.prototype.init.call(this);\n                this.setInit(\"format\", \"yyyy-MM-dd\");\n                this.setInit(\"iconRight\", \"fa-calendar\");\n                var calendar = widget.get(this._components[\"calendar\"]);\n                var container = document.createElement(\"div\");\n                var toolbar = container.appendChild(document.createElement(\"div\"));\n                toolbar.className = \"tui-select-toolbar\";\n                container.insertBefore(calendar._, container.firstChild);\n                var popup = widget.get(this._components[\"popup\"]);\n                popup._set(\"content\", container);\n                this._components[\"toolbar\"] = toolbar;\n                calendar._.style.display = \"block\";\n                calendar._.style.borderWidth = \"0\";\n                calendar.on(\"click\", function (e) {\n                    _this.set(\"value\", calendar.get(\"value\"));\n                    _this.fire(\"change\", { e: e, value: _this.get(\"value\"), text: _this.get(\"text\") });\n                    if (e.data.type === \"pick\") {\n                        _this.closeSelect();\n                        _this._.focus();\n                    }\n                });\n                $(toolbar).click(function (e) {\n                    var obj = (e.target || e.srcElement);\n                    var name = obj.getAttribute(\"name\");\n                    if (name === \"today\") {\n                        _this.set(\"value\", tui.time.now());\n                        _this.fire(\"change\", { e: e, value: _this.get(\"value\"), text: _this.get(\"text\") });\n                        _this.closeSelect();\n                        _this._.focus();\n                    }\n                    else if (name === \"clear\") {\n                        _this.set(\"value\", null);\n                        _this.fire(\"change\", { e: e, value: _this.get(\"value\"), text: _this.get(\"text\") });\n                        _this.closeSelect();\n                        _this._.focus();\n                    }\n                });\n            };\n            DatePicker.prototype.openSelect = function () {\n                var _this = this;\n                var calendar = widget.get(this._components[\"calendar\"]);\n                var popup = widget.get(this._components[\"popup\"]);\n                //popup._set(\"content\", list._);\n                var toolbar = this._components[\"toolbar\"];\n                var todayButton = \"<a name='today'>\" + tui.str(\"Today\") + \"</a>\";\n                var clearButton = \" | <a name='clear'><i class='fa fa-trash-o'></i> \" + tui.str(\"Clear\") + \"</a>\";\n                var clearable = this.get(\"clearable\");\n                calendar._.style.outline = \"none\";\n                toolbar.style.display = \"\";\n                if (clearable)\n                    toolbar.innerHTML = todayButton + clearButton;\n                else\n                    toolbar.innerHTML = todayButton;\n                popup.open(this._, \"Lb\");\n                setTimeout(function () {\n                    calendar._.focus();\n                    calendar.set(\"value\", _this.get(\"value\"));\n                });\n            };\n            return DatePicker;\n        }(widget.SelectPopupBase));\n        widget.DatePicker = DatePicker;\n        widget.register(DatePicker, \"date-picker\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"inputBase.ts\" />\n/// <reference path=\"../browser/upload.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        var File = (function (_super) {\n            __extends(File, _super);\n            function File() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            File.prototype.initRestriction = function () {\n                var _this = this;\n                _super.prototype.initRestriction.call(this);\n                this._uploader = tui.browser.createUploader(this._);\n                this.setRestrictions({\n                    \"action\": {\n                        \"set\": function (value) {\n                            _this._uploader.getOptions().action = value;\n                        },\n                        \"get\": function () {\n                            return _this._uploader.getOptions().action;\n                        }\n                    },\n                    \"accept\": {\n                        \"set\": function (value) {\n                            _this._uploader.getOptions().accept = value;\n                            if (_this._uploader.getInput()) {\n                                _this._uploader.deleteInput();\n                                _this._uploader.createInput();\n                            }\n                        },\n                        \"get\": function () {\n                            return _this._uploader.getOptions().accept;\n                        }\n                    },\n                    \"value\": {\n                        \"set\": function (value) {\n                            _this._data[\"value\"] = value;\n                            if (value === null || typeof value === tui.UNDEFINED) {\n                                _this._set(\"text\", \"\");\n                            }\n                        }\n                    }\n                });\n            };\n            File.prototype.init = function () {\n                var _this = this;\n                this.setInit(\"iconRight\", \"fa-file-text-o\");\n                var $root = $(this._);\n                var label = this._components[\"label\"] = document.createElement(\"span\");\n                var iconRight = this._components[\"iconRight\"] = document.createElement(\"i\");\n                var iconInvalid = this._components[\"iconInvalid\"] = document.createElement(\"i\");\n                iconInvalid.className = \"tui-invalid-icon\";\n                label.className = \"tui-input-label\";\n                label.setAttribute(\"unselectable\", \"on\");\n                this._.appendChild(label);\n                this._.appendChild(iconInvalid);\n                this._.appendChild(iconRight);\n                this._.setAttribute(\"tabIndex\", \"0\");\n                $(this._).focus(function () {\n                    $root.addClass(\"tui-active\");\n                });\n                var onblur = function () {\n                    if (document.activeElement === _this._ || document.activeElement === _this._uploader.getInput())\n                        return;\n                    $root.removeClass(\"tui-active\");\n                    if (_this.get(\"disable\"))\n                        return;\n                    if (_this.get(\"autoValidate\")) {\n                        _this.validate();\n                    }\n                };\n                $(this._).blur(function () {\n                    setTimeout(function () {\n                        onblur();\n                    });\n                });\n                this._uploader.on(\"focus\", function () {\n                    $root.addClass(\"tui-active\");\n                });\n                this._uploader.on(\"blur\", function () {\n                    setTimeout(function () {\n                        onblur();\n                    });\n                });\n                this._uploader.on(\"change\", function (e) {\n                    return _this.fire(\"change\", e);\n                });\n                this._uploader.on(\"success\", function (e) {\n                    _this._set(\"value\", e.data.response.fileId);\n                    _this.set(\"text\", e.data.response.fileName);\n                });\n                this._uploader.on(\"error\", function (e) {\n                    tui.errbox(e.data.response.error, tui.str(\"Error\"));\n                });\n            };\n            File.prototype.render = function () {\n                this._.scrollLeft = 0;\n                var $root = $(this._);\n                var label = this._components[\"label\"];\n                var iconRight = this._components[\"iconRight\"];\n                var iconInvalid = this._components[\"iconInvalid\"];\n                if (this.get(\"disable\")) {\n                    $root.addClass(\"tui-disable\");\n                    this._uploader.deleteInput();\n                    this._.setAttribute(\"tabIndex\", \"0\");\n                }\n                else {\n                    $root.removeClass(\"tui-disable\");\n                    this._uploader.createInput();\n                    this._.removeAttribute(\"tabIndex\");\n                }\n                var text = this.get(\"text\");\n                if (text === null || text === \"\") {\n                    text = this.get(\"placeholder\");\n                    $(label).addClass(\"tui-placeholder\");\n                }\n                else {\n                    $(label).removeClass(\"tui-placeholder\");\n                }\n                if (text === null)\n                    text = \"\";\n                $(label).text(text);\n                iconRight.className = this.get(\"iconRight\");\n                iconRight.style.display = \"\";\n                iconRight.style.right = \"0\";\n                if (!this._valid) {\n                    $root.addClass(\"tui-invalid\");\n                    iconInvalid.style.display = \"\";\n                    iconInvalid.style.right = iconRight.offsetWidth + \"px\";\n                }\n                else {\n                    $root.removeClass(\"tui-invalid\");\n                    iconInvalid.style.display = \"none\";\n                }\n                if (!this._valid && this._invalidMessage) {\n                    this._set(\"follow-tooltip\", this._invalidMessage);\n                }\n                else {\n                    this._set(\"follow-tooltip\", null);\n                }\n            };\n            return File;\n        }(widget.InputBase));\n        File.PADDING = 6;\n        widget.File = File;\n        widget.register(File, \"file\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"base.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        var Frame = (function (_super) {\n            __extends(Frame, _super);\n            function Frame() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            Frame.prototype.initRestriction = function () {\n                var _this = this;\n                this._cache = {};\n                _super.prototype.initRestriction.call(this);\n                this.setRestrictions({\n                    \"src\": {\n                        \"set\": function (value) {\n                            _this._go(value);\n                        }\n                    }\n                });\n            };\n            Frame.prototype._go = function (src, cache, name) {\n                var _this = this;\n                if (cache === void 0) { cache = true; }\n                this._data[\"src\"] = src;\n                if (typeof name === tui.UNDEFINED || name == null) {\n                    name = \"\";\n                }\n                var key = name + \":\" + src;\n                if (cache && this._cache.hasOwnProperty(key)) {\n                    if (tui.ieVer > 0)\n                        while (this._.children.length > 0) {\n                            this._.removeChild(this._.children[0]);\n                        }\n                    else\n                        this._.innerHTML = \"\";\n                    var page = this._cache[key];\n                    this._.appendChild(page);\n                }\n                else {\n                    tui.ajax.getBody(src).done(function (content) {\n                        var page = tui.browser.toElement(content, true);\n                        if (tui.ieVer > 0)\n                            while (_this._.children.length > 0) {\n                                _this._.removeChild(_this._.children[0]);\n                            }\n                        else\n                            _this._.innerHTML = \"\";\n                        _this._.appendChild(page);\n                        if (cache) {\n                            _this._cache[key] = page;\n                        }\n                        _this.render();\n                    });\n                }\n            };\n            Frame.prototype.go = function (src, cache, name) {\n                if (cache === void 0) { cache = true; }\n                this._go(src, cache, name);\n                this.render();\n            };\n            Frame.prototype.render = function () {\n                widget.init(this._);\n            };\n            return Frame;\n        }(widget.Widget));\n        widget.Frame = Frame;\n        widget.register(Frame, \"frame\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"base.ts\" />\n/// <reference path=\"../browser/keyboard.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        function vval(v) {\n            if (isNaN(v))\n                return 0;\n            else\n                return v;\n        }\n        /**\n         * <tui:gird>\n         * Attributes: data, list(array type data), tree(tree type data),\n         * columns, sortColumn, sortType, scrollTop, scrollLeft, activeRow,\n         * activeColumn\n         * Method: scrollTo, setSortFlag\n         * Events: sort, rowclick, rowdblclick, rowcheck, keyselect\n         */\n        var Grid = (function (_super) {\n            __extends(Grid, _super);\n            function Grid() {\n                var _this = _super !== null && _super.apply(this, arguments) || this;\n                _this._setupHeadMoveListener = false;\n                _this._columnWidths = [];\n                _this._vLines = [];\n                _this._handlers = [];\n                return _this;\n            }\n            Grid.prototype.initRestriction = function () {\n                var _this = this;\n                // Register update callback routine\n                var updateCallback = (function () {\n                    var me = _this;\n                    return function (data) {\n                        if (data.data[\"completely\"]) {\n                            me.render();\n                            me.fire(\"update\");\n                        }\n                        else {\n                            me.drawContent();\n                            me.fire(\"update\");\n                        }\n                    };\n                })();\n                _super.prototype.initRestriction.call(this);\n                this.setRestrictions({\n                    \"selectable\": {\n                        \"get\": function () {\n                            var val = _this._data[\"selectable\"];\n                            if (typeof val === tui.UNDEFINED || val === null)\n                                return true;\n                            else\n                                return !!val;\n                        }\n                    },\n                    \"lineHeight\": {\n                        \"get\": function () {\n                            var val = _this._data[\"lineHeight\"];\n                            if (typeof val !== \"number\" || isNaN(val))\n                                return Grid.LINE_HEIGHT;\n                            else\n                                return val;\n                        }\n                    },\n                    \"dataType\": {\n                        \"set\": function (value) { }\n                    },\n                    \"data\": {\n                        \"set\": function (value) {\n                            if (_this._data[\"data\"] && typeof _this._data[\"data\"].off === \"function\") {\n                                _this._data[\"data\"].off(\"update\", updateCallback);\n                            }\n                            if (value instanceof tui.ds.List ||\n                                value instanceof tui.ds.RemoteList) {\n                                _this._data[\"data\"] = value;\n                                _this._data[\"dataType\"] = \"list\";\n                            }\n                            else if (value instanceof tui.ds.Tree ||\n                                value instanceof tui.ds.RemoteTree) {\n                                _this._data[\"data\"] = value;\n                                _this._data[\"dataType\"] = \"tree\";\n                            }\n                            else if (value instanceof Array) {\n                                _this._data[\"data\"] = new tui.ds.List(value);\n                            }\n                            else if (value === null) {\n                                _this._data[\"data\"] = new tui.ds.List([]);\n                            }\n                            if (_this._data[\"data\"] && typeof _this._data[\"data\"].on === \"function\") {\n                                _this._data[\"data\"].on(\"update\", updateCallback);\n                            }\n                            _this._vbar && _this._vbar._set(\"value\", 0);\n                            _this._vbar && _this._hbar._set(\"value\", 0);\n                            _this._set(\"activeRow\", null);\n                        },\n                        \"get\": function () {\n                            var data = _this._data[\"data\"];\n                            if (data)\n                                return data;\n                            else\n                                return new tui.ds.List([]);\n                        }\n                    },\n                    \"list\": {\n                        \"set\": function (value) {\n                            if (value instanceof tui.ds.List ||\n                                value instanceof tui.ds.RemoteList)\n                                _this._set(\"data\", value);\n                            else if (value instanceof Array) {\n                                _this._set(\"data\", new tui.ds.List(value));\n                            }\n                            else if (value === null) {\n                                _this._set(\"data\", null);\n                            }\n                        },\n                        \"get\": function () { }\n                    },\n                    \"tree\": {\n                        \"set\": function (value) {\n                            if (value instanceof tui.ds.Tree ||\n                                value instanceof tui.ds.RemoteTree)\n                                _this._set(\"data\", value);\n                            else if (value instanceof Array) {\n                                _this._set(\"data\", new tui.ds.Tree(value));\n                            }\n                            else if (value === null) {\n                                _this._set(\"data\", null);\n                            }\n                        },\n                        \"get\": function () { }\n                    },\n                    \"columns\": {\n                        \"set\": function (value) {\n                            if (value instanceof Array) {\n                                _this._data[\"columns\"] = value;\n                                _this.clearBuffer();\n                                _this._columnWidths = [];\n                            }\n                        },\n                        \"get\": function () {\n                            if (_this._data[\"columns\"])\n                                return _this._data[\"columns\"];\n                            else\n                                return [];\n                        }\n                    },\n                    \"scrollTop\": {\n                        \"set\": function (value) {\n                            _this._vbar._set(\"value\", value);\n                        },\n                        \"get\": function () {\n                            return _this._vbar.get(\"value\");\n                        }\n                    },\n                    \"scrollLeft\": {\n                        \"set\": function (value) {\n                            _this._hbar._set(\"value\", value);\n                        },\n                        \"get\": function () {\n                            return _this._hbar.get(\"value\");\n                        }\n                    },\n                    \"activeRow\": {\n                        \"set\": function (value) {\n                            if (typeof value === \"number\" && !isNaN(value) || value === null) {\n                                if (value < 0)\n                                    value = 0;\n                                if (value > _this.get(\"data\").length() - 1)\n                                    value = _this.get(\"data\").length() - 1;\n                                if (_this._data[\"activeRow\"] != null && _this._buffer)\n                                    $(_this._buffer.lines[_this._data[\"activeRow\"] - _this._buffer.begin]).removeClass(\"tui-actived\");\n                                _this._data[\"activeRow\"] = value;\n                                if (value != null && _this._buffer)\n                                    $(_this._buffer.lines[value - _this._buffer.begin]).addClass(\"tui-actived\");\n                            }\n                        },\n                        \"get\": function () {\n                            var row = _this._data[\"activeRow\"];\n                            if (row === null)\n                                return null;\n                            if (row >= 0 && row < _this.get(\"data\").length())\n                                return row;\n                            else\n                                return null;\n                        }\n                    },\n                    \"activeRowData\": {\n                        \"set\": function (value) { },\n                        \"get\": function () {\n                            var r = _this.get(\"activeRow\");\n                            if (r != null) {\n                                return _this.get(\"data\").get(r);\n                            }\n                            else\n                                return r;\n                        }\n                    }\n                });\n            };\n            Grid.prototype.init = function () {\n                var _this = this;\n                this._tuid = tui.tuid();\n                $(this._).attr({ \"tabIndex\": 0, \"unselectable\": \"on\" });\n                tui.browser.setInnerHtml(this._, \"<div class='tui-grid-head'></div><div class='tui-content'></div>\");\n                var head = this._components[\"head\"] = $(this._).children(\".tui-grid-head\")[0];\n                var content = this._components[\"content\"] = $(this._).children(\".tui-content\")[0];\n                this._hbar = tui.create(\"scrollbar\", { direction: \"horizontal\" });\n                this._components[\"hScroll\"] = this._hbar.appendTo(this._, false)._;\n                this._vbar = tui.create(\"scrollbar\");\n                this._components[\"vScroll\"] = this._vbar.appendTo(this._, false)._;\n                //this._lineHeight = Grid.LINE_HEIGHT;\n                if (document.createStyleSheet) {\n                    this._gridStyle = document.createStyleSheet();\n                }\n                else {\n                    this._gridStyle = document.createElement(\"style\");\n                    document.head.appendChild(this._gridStyle);\n                }\n                this._buffer = { begin: 0, end: 0, lines: [] };\n                this.setInit(\"header\", true);\n                this.on(\"resize\", function () {\n                    _this.render();\n                });\n                this._vbar.on(\"scroll\", function () {\n                    _this.drawContent();\n                });\n                this._hbar.on(\"scroll\", function () {\n                    //this.drawContent();\n                    _this.computeHOffset();\n                });\n                var mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? \"DOMMouseScroll\" : \"mousewheel\";\n                $(this._).on(mousewheelevt, function (ev) {\n                    if (_this.get(\"autoHeight\"))\n                        return;\n                    var e = ev.originalEvent;\n                    var delta = e.detail ? e.detail * (-1) : e.wheelDelta;\n                    var step = _this.get(\"lineHeight\");\n                    //delta returns +120 when wheel is scrolled up, -120 when scrolled down\n                    var scrollSize = step > 1 ? step : 1;\n                    if (delta <= 0) {\n                        // console.log(this._vbar.get(\"value\") + \" : \" + this._vbar.get(\"totle\"));\n                        if (_this._vbar.get(\"value\") < _this._vbar.get(\"total\")) {\n                            ev.stopPropagation();\n                            ev.preventDefault();\n                            _this._vbar.set(\"value\", _this._vbar.get(\"value\") + scrollSize);\n                            _this.drawContent();\n                        }\n                        else if (_this.get(\"noMouseWheel\")) {\n                            ev.stopPropagation();\n                            ev.preventDefault();\n                        }\n                    }\n                    else {\n                        if (_this._vbar.get(\"value\") > 0) {\n                            ev.stopPropagation();\n                            ev.preventDefault();\n                            _this._vbar.set(\"value\", _this._vbar.get(\"value\") - scrollSize);\n                            _this.drawContent();\n                        }\n                        else if (_this.get(\"noMouseWheel\")) {\n                            ev.stopPropagation();\n                            ev.preventDefault();\n                        }\n                    }\n                });\n                var scrollX = function (distance) {\n                    var oldValue = _this._hbar.get(\"value\");\n                    _this._hbar.set(\"value\", oldValue - distance);\n                    _this.drawContent();\n                    _this.computeHOffset();\n                    if (_this._hbar.get(\"value\") !== oldValue && Math.abs(lastSpeed) > 0.02) {\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                };\n                var scrollY = function (distance) {\n                    var oldValue = _this._vbar.get(\"value\");\n                    _this._vbar.set(\"value\", oldValue - distance);\n                    _this.drawContent();\n                    if (_this._vbar.get(\"value\") !== oldValue && Math.abs(lastSpeed) > 0.02) {\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                };\n                var inTouched = false;\n                var lastSpeed = 0;\n                var lastPos;\n                var lastTime;\n                var direction = null;\n                $(this._).on(\"touchstart\", function (ev) {\n                    if (inTouched)\n                        return;\n                    var obj = (ev.target || ev.srcElement);\n                    if ($(obj).hasClass(\"tui-grid-handler\")) {\n                        return;\n                    }\n                    direction = null;\n                    inTouched = true;\n                    lastSpeed = 0;\n                    var e = ev.originalEvent;\n                    if (e.targetTouches.length != 1)\n                        return;\n                    var touch = e.targetTouches[0];\n                    lastPos = { x: touch.pageX, y: touch.pageY };\n                    lastTime = new Date().getMilliseconds();\n                });\n                $(this._).on(\"touchmove\", function (ev) {\n                    clearTimeout(hittestTimer);\n                    if (!inTouched)\n                        return;\n                    var e = ev.originalEvent;\n                    var touch = e.targetTouches[0];\n                    var movePos = { x: touch.pageX, y: touch.pageY };\n                    var moveX = movePos.x - lastPos.x;\n                    var moveY = movePos.y - lastPos.y;\n                    var currentTime = new Date().getMilliseconds();\n                    var spanTime = currentTime - lastTime;\n                    if (spanTime <= 0)\n                        return;\n                    lastPos = movePos;\n                    lastTime = currentTime;\n                    if (direction == null) {\n                        if (Math.abs(moveX) > 0 && Math.abs(moveY) > 0)\n                            direction = Math.abs(moveX) > Math.abs(moveY) ? \"x\" : \"y\";\n                        else if (Math.abs(moveX) > 0)\n                            direction = \"x\";\n                        else if (Math.abs(moveY) > 0)\n                            direction = \"y\";\n                    }\n                    if (direction === \"x\") {\n                        lastSpeed = moveX / spanTime;\n                        if (scrollX(moveX)) {\n                            ev.stopPropagation();\n                            ev.preventDefault();\n                        }\n                    }\n                    else if (direction === \"y\") {\n                        lastSpeed = moveY / spanTime;\n                        if (scrollY(moveY)) {\n                            ev.stopPropagation();\n                            ev.preventDefault();\n                        }\n                    }\n                });\n                $(this._).on(\"touchend\", function (ev) {\n                    clearTimeout(hittestTimer);\n                    requestAnimationFrame(function keepMove(timestamp) {\n                        if (Math.abs(lastSpeed) > 0.1) {\n                            if (direction === \"x\") {\n                                if (scrollX(lastSpeed * 20)) {\n                                    lastSpeed *= 0.95;\n                                    requestAnimationFrame(keepMove);\n                                }\n                            }\n                            else if (direction === \"y\") {\n                                if (scrollY(lastSpeed * 20)) {\n                                    lastSpeed *= 0.95;\n                                    requestAnimationFrame(keepMove);\n                                }\n                            }\n                            else {\n                                lastSpeed = 0;\n                            }\n                        }\n                    });\n                    inTouched = false;\n                    lastTime = null;\n                });\n                $(this._).on(\"mousedown touchstart\", function (ev) {\n                    var obj = (ev.target || ev.srcElement);\n                    if ($(obj).hasClass(\"tui-grid-handler\")) {\n                        ev.stopPropagation();\n                        ev.preventDefault();\n                        var idx = _this._handlers.indexOf(obj);\n                        var columns = _this.get(\"columns\");\n                        var l = obj.offsetLeft;\n                        var positions = tui.browser.getEventPosition(ev);\n                        var srcX = positions[0].x;\n                        obj.style.height = _this._.clientHeight + \"px\";\n                        $(obj).addClass(\"tui-handler-move\");\n                        var mask = widget.openDragMask(function (e) {\n                            var positions = tui.browser.getEventPosition(e);\n                            obj.style.left = l + positions[0].x - srcX + \"px\";\n                        }, function (e) {\n                            var positions = tui.browser.getEventPosition(e);\n                            obj.style.height = \"\";\n                            $(obj).removeClass(\"tui-handler-move\");\n                            columns[idx].width = columns[idx].width + positions[0].x - srcX;\n                            _this._columnWidths = [];\n                            _this.initColumnWidth();\n                            _this.computeScroll();\n                            _this.computeColumnWidth();\n                            _this.drawHeader();\n                            _this.computeHOffset();\n                        });\n                        mask.style.cursor = \"col-resize\";\n                    }\n                });\n                var hittest = function (obj) {\n                    var line = null;\n                    var col = null;\n                    var srcObj = obj;\n                    while (obj) {\n                        var parent = obj.parentNode;\n                        if (parent && $(parent).hasClass(\"tui-grid-line\")) {\n                            line = _this._buffer.begin + _this._buffer.lines.indexOf(parent);\n                            if (_this.get(\"selectable\") === true) {\n                                col = obj.col;\n                                _this._set(\"activeRow\", line);\n                                _this._set(\"activeColumn\", col);\n                            }\n                            break;\n                        }\n                        obj = parent;\n                    }\n                    return { line: line, col: col };\n                };\n                var hittestTimer = null;\n                var testLine = function (ev) {\n                    var obj = (ev.target || ev.srcElement);\n                    var target = hittest(obj);\n                    if (target.line === null)\n                        return;\n                    var data = _this.get(\"data\");\n                    if ($(obj).hasClass(\"tui-arrow-expand\")) {\n                        data.collapse(target.line);\n                        _this.render();\n                        ev.preventDefault();\n                        _this.fire(\"collapse\", { e: ev, line: target.line });\n                    }\n                    else if ($(obj).hasClass(\"tui-arrow-collapse\")) {\n                        data.expand(target.line);\n                        _this.render();\n                        ev.preventDefault();\n                        _this.fire(\"expand\", { e: ev, line: target.line });\n                    }\n                    else if ($(obj).hasClass(\"tui-grid-check\")) {\n                        var column = _this.get(\"columns\")[target.col];\n                        var checkKey = column.checkKey ? column.checkKey : \"checked\";\n                        var checked;\n                        if (_this.get(\"dataType\") === \"tree\") {\n                            checked = data.get(target.line).item[checkKey] = !data.get(target.line).item[checkKey];\n                        }\n                        else {\n                            checked = data.get(target.line)[checkKey] = !data.get(target.line)[checkKey];\n                        }\n                        _this.drawLine(_this._buffer.lines[target.line - _this._buffer.begin], target.line, _this.get(\"lineHeight\"), _this.get(\"columns\"), data.get(target.line));\n                        ev.preventDefault();\n                        _this.fire(\"rowcheck\", { e: ev, row: target.line, col: target.col, checked: checked });\n                    }\n                    else {\n                        _this.fire(\"rowmousedown\", { e: ev, row: target.line, col: target.col });\n                    }\n                };\n                $(this._).on(\"mousedown\", function (ev) {\n                    testLine(ev);\n                });\n                $(this._).on(\"mouseup\", function (ev) {\n                    var obj = (ev.target || ev.srcElement);\n                    var target = hittest(obj);\n                    if (target.line != null)\n                        _this.fire(\"rowmouseup\", { e: ev, row: target.line, col: target.col });\n                });\n                $(content).click(function (ev) {\n                    var obj = (ev.target || ev.srcElement);\n                    if ($(obj).hasClass(\"tui-arrow-expand\")) {\n                        return;\n                    }\n                    else if ($(obj).hasClass(\"tui-arrow-collapse\")) {\n                        return;\n                    }\n                    else if ($(obj).hasClass(\"tui-grid-check\")) {\n                        return;\n                    }\n                    var target = hittest(obj);\n                    if (target.line != null)\n                        _this.fire(\"rowclick\", { e: ev, row: target.line, col: target.col });\n                });\n                $(content).dblclick(function (ev) {\n                    var obj = (ev.target || ev.srcElement);\n                    if ($(obj).hasClass(\"tui-arrow-expand\")) {\n                        return;\n                    }\n                    else if ($(obj).hasClass(\"tui-arrow-collapse\")) {\n                        return;\n                    }\n                    else if ($(obj).hasClass(\"tui-grid-check\")) {\n                        return;\n                    }\n                    var target = hittest(obj);\n                    if (target.line != null)\n                        _this.fire(\"rowdblclick\", { e: ev, row: target.line, col: target.col });\n                });\n                $(this._).keyup(function (e) {\n                    var activeRow = _this.get(\"activeRow\");\n                    _this.fire(\"keyup\", { e: e, row: activeRow });\n                });\n                $(this._).keydown(function (e) {\n                    var k = e.keyCode;\n                    var activeRow = _this.get(\"activeRow\");\n                    _this.fire(\"keydown\", { e: e, row: activeRow });\n                    if (k >= 33 && k <= 40 || k == tui.browser.KeyCode.ENTER) {\n                        if (k === tui.browser.KeyCode.LEFT) {\n                            if (_this.get(\"dataType\") === \"tree\") {\n                                if (activeRow !== null) {\n                                    var node = _this.get(\"data\").get(activeRow);\n                                    if (node.hasChild && node.expand) {\n                                        _this.get(\"data\").collapse(activeRow);\n                                        _this.render();\n                                        _this.fire(\"collapse\", { e: e, line: activeRow });\n                                        return;\n                                    }\n                                }\n                            }\n                            if (!_this.get(\"autoWidth\")) {\n                                _this._hbar.set(\"value\", _this._hbar.get(\"value\") - 30);\n                                _this.computeHOffset();\n                            }\n                        }\n                        else if (k === tui.browser.KeyCode.UP) {\n                            if (!_this.get(\"selectable\")) {\n                                var t = _this.get(\"scrollTop\");\n                                _this._vbar.set(\"value\", t - 10);\n                                _this.drawContent();\n                            }\n                            else {\n                                if (_this.get(\"activeRow\") === null) {\n                                    _this._set(\"activeRow\", 0);\n                                }\n                                else {\n                                    _this._set(\"activeRow\", _this.get(\"activeRow\") - 1);\n                                }\n                                _this.scrollTo(_this.get(\"activeRow\"));\n                                _this.fire(\"keyselect\", { e: e, row: _this.get(\"activeRow\") });\n                            }\n                        }\n                        else if (k === tui.browser.KeyCode.RIGHT) {\n                            if (_this.get(\"dataType\") === \"tree\") {\n                                if (activeRow !== null) {\n                                    var node = _this.get(\"data\").get(activeRow);\n                                    if (node.hasChild && !node.expand) {\n                                        _this.get(\"data\").expand(activeRow);\n                                        _this.render();\n                                        _this.fire(\"collapse\", { e: e, line: activeRow });\n                                        return;\n                                    }\n                                }\n                            }\n                            if (!_this.get(\"autoWidth\")) {\n                                _this._hbar.set(\"value\", _this._hbar.get(\"value\") + 30);\n                                _this.computeHOffset();\n                            }\n                        }\n                        else if (k === tui.browser.KeyCode.DOWN) {\n                            if (!_this.get(\"selectable\")) {\n                                var t = _this.get(\"scrollTop\");\n                                _this._vbar.set(\"value\", t + 10);\n                                _this.drawContent();\n                            }\n                            else {\n                                if (_this.get(\"activeRow\") === null) {\n                                    _this._set(\"activeRow\", 0);\n                                }\n                                else {\n                                    _this._set(\"activeRow\", _this.get(\"activeRow\") + 1);\n                                }\n                                _this.scrollTo(_this.get(\"activeRow\"));\n                                _this.fire(\"keyselect\", { e: e, row: _this.get(\"activeRow\") });\n                            }\n                        }\n                        else if (k === tui.browser.KeyCode.PRIOR) {\n                            if (!_this.get(\"selectable\")) {\n                                var t = _this.get(\"scrollTop\");\n                                _this._vbar.set(\"value\", t - _this._vbar.get(\"page\"));\n                                _this.drawContent();\n                            }\n                            else {\n                                if (_this.get(\"activeRow\") === null) {\n                                    _this._set(\"activeRow\", 0);\n                                }\n                                else {\n                                    _this._set(\"activeRow\", _this.get(\"activeRow\") - _this._dispLines + 1);\n                                }\n                                _this.scrollTo(_this.get(\"activeRow\"));\n                                _this.fire(\"keyselect\", { e: e, row: _this.get(\"activeRow\") });\n                            }\n                        }\n                        else if (k === tui.browser.KeyCode.NEXT) {\n                            if (!_this.get(\"selectable\")) {\n                                var t = _this.get(\"scrollTop\");\n                                _this._vbar.set(\"value\", t + _this._vbar.get(\"page\"));\n                                _this.drawContent();\n                            }\n                            else {\n                                if (_this.get(\"activeRow\") === null) {\n                                    _this._set(\"activeRow\", 0);\n                                }\n                                else {\n                                    _this._set(\"activeRow\", _this.get(\"activeRow\") + _this._dispLines - 1);\n                                }\n                                _this.scrollTo(_this.get(\"activeRow\"));\n                                _this.fire(\"keyselect\", { e: e, row: _this.get(\"activeRow\") });\n                            }\n                        }\n                        else if (k === tui.browser.KeyCode.HOME) {\n                            if (!_this.get(\"selectable\")) {\n                                _this._vbar.set(\"value\", 0);\n                                _this.drawContent();\n                            }\n                            else {\n                                _this._set(\"activeRow\", 0);\n                                _this.scrollTo(_this.get(\"activeRow\"));\n                                _this.fire(\"keyselect\", { e: e, row: _this.get(\"activeRow\") });\n                            }\n                        }\n                        else if (k === tui.browser.KeyCode.END) {\n                            if (!_this.get(\"selectable\")) {\n                                _this._vbar.set(\"value\", _this._vbar.get(\"total\"));\n                                _this.drawContent();\n                            }\n                            else {\n                                var data = _this.get(\"data\");\n                                _this._set(\"activeRow\", data.length() - 1);\n                                _this.scrollTo(_this.get(\"activeRow\"));\n                                _this.fire(\"keyselect\", { e: e, row: _this.get(\"activeRow\") });\n                            }\n                        }\n                        else if (k === tui.browser.KeyCode.ENTER) {\n                            if (_this.get(\"selectable\")) {\n                                if (_this.get(\"activeRow\") != null) {\n                                    _this.fire(\"rowclick\", { e: e, row: _this.get(\"activeRow\"), col: _this.get(\"activeColumn\") });\n                                }\n                            }\n                        }\n                        e.preventDefault();\n                        e.stopPropagation();\n                    }\n                });\n                $(head).click(function (ev) {\n                    var obj = (ev.target || ev.srcElement);\n                    var columns = _this.get(\"columns\");\n                    while (obj) {\n                        if (obj.parentNode === head) {\n                            var col = obj.col;\n                            if (columns[col].sortable) {\n                                var sortType = \"asc\";\n                                if (_this.get(\"sortColumn\") == col) {\n                                    if (_this.get(\"sortType\") === \"asc\")\n                                        sortType = \"desc\";\n                                    else {\n                                        sortType = null;\n                                        col = null;\n                                    }\n                                }\n                                if (_this.fire(\"sort\", { e: ev, column: col === null ? null : columns[col], type: sortType }))\n                                    _this.setSortFlag(col, sortType);\n                                _this.drawHeader();\n                            }\n                            return;\n                        }\n                        else\n                            obj = obj.parentNode;\n                    }\n                });\n            };\n            Grid.prototype.setSortFlag = function (col, type) {\n                this._set(\"sortColumn\", col);\n                this._set(\"sortType\", type);\n                var columns = this.get(\"columns\");\n                var column = columns[col];\n                var ds = this.get(\"data\");\n                if (col === null || type === null)\n                    ds.setOrder(null);\n                else {\n                    ds.setOrder([\n                        {\n                            key: column.key,\n                            desc: (type === \"desc\")\n                        }\n                    ]);\n                }\n            };\n            Grid.prototype.scrollTo = function (index) {\n                if (typeof index !== \"number\" || isNaN(index) || index < 0 || index >= this.get(\"data\").length())\n                    return;\n                var v = this._vbar.get(\"value\");\n                var lineHeight = this.get(\"lineHeight\");\n                if (v > index * lineHeight) {\n                    this._vbar.set(\"value\", index * lineHeight);\n                    this.drawContent();\n                }\n                else {\n                    var h = (index - this._dispLines + 1) * lineHeight;\n                    var diff = (this._.clientHeight - this.getComponent(\"head\").offsetHeight\n                        - this._hbar._.offsetHeight - this._dispLines * lineHeight);\n                    if (v < h - diff) {\n                        this._vbar.set(\"value\", h - diff);\n                        this.drawContent();\n                    }\n                }\n            };\n            Grid.prototype.iterate = function (func) {\n                var data = this.get(\"data\");\n                var dataType = this.get(\"dataType\");\n                function iterateItem(treeItem, path) {\n                    if (func(treeItem, path, true) === false)\n                        return false;\n                    var children = treeItem[childrenKey];\n                    if (children) {\n                        for (var i = 0; i < children.length; i++) {\n                            if (iterateItem(children[i], path.concat(i)) === false)\n                                return false;\n                        }\n                    }\n                }\n                if (dataType === \"tree\" && data._finalData == null) {\n                    var tree = data;\n                    var childrenKey = tree.getConfig().children;\n                    var rawData = tree.getRawData();\n                    if (!rawData)\n                        return;\n                    for (var i = 0; i < rawData.length; i++) {\n                        if (iterateItem(rawData[i], [i]) === false)\n                            break;\n                    }\n                }\n                else {\n                    var list = data;\n                    for (var i = 0; i < list.length(); i++) {\n                        var listItem = dataType === \"tree\" ? list.get(i).item : list.get(i);\n                        if (func(listItem, [i], dataType === \"tree\") === false)\n                            break;\n                    }\n                }\n            };\n            /**\n             * Search a row by condition, get field value by 'dataKey' and compare to value, if match then active it.\n             * Should only used in local data type, e.g. List or Tree, if used in RemoteList or RemoteTree may not work correctly.\n             */\n            Grid.prototype.activeTo = function (dataKey, value) {\n                var data = this.get(\"data\");\n                var dataType = this.get(\"dataType\");\n                var path = [];\n                var childrenKey;\n                // If is a subset return 1, if equals return 2, otherwise return 0\n                function matchPath(p1, p2) {\n                    for (var i = 0; i < p1.length; i++) {\n                        if (i >= p2.length)\n                            return 0;\n                        else if (p1[i] !== p2[i])\n                            return 0;\n                    }\n                    return p1.length === p2.length ? 2 : 1;\n                }\n                if (dataType === \"tree\" && data._finalData == null) {\n                    var tree = data;\n                    this.iterate(function (item, p, treeNode) {\n                        if (item[dataKey] === value) {\n                            path = p;\n                            return false;\n                        }\n                    });\n                    if (path && path.length > 0) {\n                        var searchPath = [];\n                        var searchLevel = -1;\n                        var found = false;\n                        for (var i = 0; i < tree.length(); i++) {\n                            var node = tree.get(i);\n                            if (node.level === searchLevel) {\n                                searchPath[searchLevel]++;\n                            }\n                            else if (node.level < searchLevel) {\n                                for (var j = node.level; j < searchLevel; j++)\n                                    searchPath.pop();\n                                searchLevel = node.level;\n                                searchPath[searchLevel]++;\n                            }\n                            else {\n                                searchPath.push(0);\n                                searchLevel++;\n                            }\n                            var state = matchPath(searchPath, path);\n                            if (state === 2) {\n                                found = true;\n                                break;\n                            }\n                            else if (state === 1) {\n                                tree.expand(i);\n                            }\n                        }\n                        if (found) {\n                            this._set(\"activeRow\", i);\n                            this.computeScroll();\n                            this.scrollTo(i);\n                        }\n                    }\n                }\n                else if (dataType === \"tree\" && data._finalData) {\n                    var list = data;\n                    for (var i_1 = 0; i_1 < list.length(); i_1++) {\n                        if (list.get(i_1).item[dataKey] === value) {\n                            this._set(\"activeRow\", i_1);\n                            this.scrollTo(i_1);\n                            break;\n                        }\n                    }\n                }\n                else {\n                    var list = data;\n                    for (var i_2 = 0; i_2 < list.length(); i_2++) {\n                        if (list.get(i_2)[dataKey] === value) {\n                            this._set(\"activeRow\", i_2);\n                            this.scrollTo(i_2);\n                            break;\n                        }\n                    }\n                }\n            };\n            Grid.prototype.computeWidth = function () {\n                if (this.get(\"autoWidth\")) {\n                    return this._.clientWidth;\n                }\n                else {\n                    var contentWidth = 0;\n                    for (var i = 0; i < this._columnWidths.length; i++) {\n                        contentWidth += this._columnWidths[i] + Grid.CELL_SPACE * 2;\n                    }\n                    return contentWidth;\n                }\n            };\n            Grid.prototype.computeScroll = function () {\n                var _this = this;\n                var vScroll = this._vbar;\n                $(vScroll._).addClass(\"tui-hidden\");\n                var vEnable = false;\n                var hScroll = this._hbar;\n                $(hScroll._).addClass(\"tui-hidden\");\n                var hEnable = false;\n                var clientWidth = this._.clientWidth;\n                var clientHeight = this._.clientHeight;\n                var data = this.get(\"data\");\n                var lineHeight = this.get(\"lineHeight\");\n                this._contentHeight = (data.length() + (this.get(\"header\") ? 1 : 0)) * lineHeight;\n                this._contentWidth = this.computeWidth();\n                var head = this._components[\"head\"];\n                var content = this._components[\"content\"];\n                var computeV = function (first) {\n                    var realClientHeight = clientHeight - (hEnable ? hScroll._.offsetHeight : 0);\n                    var shouldEnable = (_this.get(\"autoHeight\") ? false : _this._contentHeight > realClientHeight);\n                    if (shouldEnable) {\n                        $(vScroll._).removeClass(\"tui-hidden\");\n                        vScroll._.style.height = realClientHeight + \"px\";\n                        vScroll._set(\"total\", _this._contentHeight - realClientHeight);\n                        if (_this._contentHeight > 0) {\n                            vScroll.set(\"page\", realClientHeight / _this._contentHeight * (_this._contentHeight - realClientHeight));\n                        }\n                        else\n                            vScroll.set(\"page\", 1);\n                    }\n                    else if (_this.get(\"autoHeight\")) {\n                        vScroll._set(\"value\", 0);\n                        vScroll._set(\"total\", 0);\n                        content.style.height = _this._contentHeight + \"px\";\n                        if (hEnable) {\n                            _this._.style.height = _this._contentHeight + hScroll._.offsetHeight + \"px\";\n                        }\n                        else {\n                            _this._.style.height = _this._contentHeight + \"px\";\n                        }\n                        clientHeight = _this._.clientHeight;\n                    }\n                    else {\n                        vScroll._set(\"value\", 0);\n                        vScroll._set(\"total\", 0);\n                    }\n                    if (vEnable !== shouldEnable) {\n                        vEnable = shouldEnable;\n                        if (!first)\n                            computeH();\n                    }\n                };\n                var computeH = function () {\n                    var realClientWidth = clientWidth - (vEnable ? vScroll._.offsetWidth : 0);\n                    var shouldEnable = (_this.get(\"autoWidth\") ? false : _this._contentWidth > realClientWidth);\n                    if (shouldEnable) {\n                        $(hScroll._).removeClass(\"tui-hidden\");\n                        hScroll._.style.width = realClientWidth + \"px\";\n                        hScroll._set(\"total\", _this._contentWidth - realClientWidth);\n                        if (_this._contentWidth > 0)\n                            hScroll.set(\"page\", realClientWidth / _this._contentWidth * (_this._contentWidth - realClientWidth));\n                        else\n                            hScroll.set(\"page\", 1);\n                    }\n                    else {\n                        hScroll._set(\"total\", 0);\n                        hScroll.set(\"value\", 0);\n                    }\n                    if (hEnable !== shouldEnable) {\n                        hEnable = shouldEnable;\n                        computeV(false);\n                    }\n                };\n                computeV(true);\n                computeH();\n                if (this.get(\"header\")) {\n                    head.style.display = \"block\";\n                    var width = (vEnable ? clientWidth - vScroll._.offsetWidth : clientWidth);\n                    width = (width >= 0 ? width : 0);\n                    head.style.width = width + \"px\";\n                }\n                else {\n                    head.style.display = \"none\";\n                }\n                var width = (vEnable ? clientWidth - vScroll._.offsetWidth : clientWidth);\n                width = (width >= 0 ? width : 0);\n                content.style.width = width + \"px\";\n                var dispHeight = (hEnable ? clientHeight - hScroll._.offsetHeight : clientHeight);\n                dispHeight = (dispHeight >= 0 ? dispHeight : 0);\n                content.style.height = dispHeight + \"px\";\n                this._dispLines = Math.ceil((dispHeight - (this.get(\"header\") ? lineHeight : 0)) / lineHeight);\n            };\n            Grid.prototype.drawLine = function (line, index, lineHeight, columns, lineData) {\n                var isTree = this.get(\"dataType\") === \"tree\";\n                var item = isTree ? lineData.item : lineData;\n                var tipKey = this.get(\"rowTooltipKey\");\n                if (item[tipKey]) {\n                    line.setAttribute(\"tooltip\", item[tipKey]);\n                }\n                line.style.height = lineHeight + \"px\";\n                line.style.lineHeight = lineHeight + \"px\";\n                if (line.childNodes.length != columns.length) {\n                    line.innerHTML = \"\";\n                    for (var i = 0; i < columns.length; i++) {\n                        var span = document.createElement(\"span\");\n                        span.className = \"tui-grid-\" + this._tuid + \"-\" + i;\n                        span.setAttribute(\"unselectable\", \"on\");\n                        span.col = i;\n                        line.appendChild(span);\n                    }\n                }\n                for (var i = 0; i < columns.length; i++) {\n                    var col = columns[i];\n                    var prefix = \"\";\n                    if (col.arrow === true && isTree) {\n                        for (var j = 0; j < lineData.level; j++) {\n                            prefix += \"<i class='tui-space'></i>\";\n                        }\n                        if (lineData.hasChild) {\n                            if (lineData.expand)\n                                prefix += \"<i class='tui-arrow-expand'></i>\";\n                            else\n                                prefix += \"<i class='tui-arrow-collapse'></i>\";\n                        }\n                        else {\n                            prefix += \"<i class='tui-arrow'></i>\";\n                        }\n                    }\n                    if (col.type === \"check\") {\n                        var k = (col.checkKey ? col.checkKey : \"checked\");\n                        if (item[k] === true)\n                            prefix += \"<i class='fa fa-check-square tui-grid-check'></i>\";\n                        else if (item[k] === false)\n                            prefix += \"<i class='fa fa-square-o tui-grid-check'></i>\";\n                        else\n                            prefix += \"<i class='tui-grid-no-check'></i>\";\n                    }\n                    else if (col.type === \"tristate\") {\n                        var k = (col.checkKey ? col.checkKey : \"checked\");\n                        if (item[k] === true)\n                            prefix += \"<i class='fa-check-square tui-grid-check'></i>\";\n                        else if (item[k] === false)\n                            prefix += \"<i class='fa-square-o tui-grid-check'></i>\";\n                        else if (item[k] === \"tristate\")\n                            prefix += \"<i class='fa-check-square tui-grid-check'></i>\";\n                        else\n                            prefix += \"<i class='tui-grid-no-check'></i>\";\n                    }\n                    else if (col.type === \"select\") {\n                        prefix += \"<i class='fa fa-caret-down tui-grid-select'></i>\";\n                    }\n                    else if (col.type === \"edit\") {\n                        prefix += \"<i class='fa fa-edit tui-grid-edit'></i>\";\n                    }\n                    if (col.iconKey && item[col.iconKey]) {\n                        prefix += \"<i class='fa \" + item[col.iconKey] + \" tui-grid-icon'></i>\";\n                    }\n                    var cell = line.childNodes[i];\n                    cell.style.height = lineHeight + \"px\";\n                    cell.style.lineHeight = lineHeight + \"px\";\n                    tui.browser.setInnerHtml(cell, prefix);\n                    var prefixContent = columns[i].prefixKey !== null ? item[columns[i].prefixKey] : null;\n                    if (prefixContent) {\n                        var prefixSpan = document.createElement(\"span\");\n                        tui.browser.setInnerHtml(prefixSpan, prefixContent);\n                        cell.appendChild(prefixSpan);\n                    }\n                    cell.appendChild(document.createTextNode(item[columns[i].key]));\n                    var suffixContent = columns[i].suffixKey !== null ? item[columns[i].suffixKey] : null;\n                    if (suffixContent) {\n                        var suffixSpan = document.createElement(\"span\");\n                        tui.browser.setInnerHtml(suffixSpan, suffixContent);\n                        cell.appendChild(suffixSpan);\n                    }\n                }\n            };\n            Grid.prototype.moveLine = function (line, index, base, lineHeight) {\n                line.style.top = (base + index * lineHeight) + \"px\";\n                line.style.width = this._contentWidth + \"px\";\n            };\n            Grid.prototype.createLine = function (parent) {\n                var columns = this.get(\"columns\");\n                var line = document.createElement(\"div\");\n                line.className = \"tui-grid-line\";\n                line.setAttribute(\"unselectable\", \"on\");\n                return parent.appendChild(line);\n            };\n            Grid.prototype.clearBuffer = function () {\n                if (!this._buffer) {\n                    return;\n                }\n                var content = this._components[\"content\"];\n                for (var i = 0; i < this._buffer.lines.length; i++) {\n                    content.removeChild(this._buffer.lines[i]);\n                }\n                this._buffer.begin = 0;\n                this._buffer.end = 0;\n                this._buffer.lines = [];\n            };\n            Grid.prototype.drawHeader = function () {\n                if (!this.get(\"header\"))\n                    return;\n                var head = this._components[\"head\"];\n                head.innerHTML = \"\";\n                var columns = this.get(\"columns\");\n                for (var i = 0; i < columns.length; i++) {\n                    var prefix = \"<i class='tui-grid-no-sort'></i>\";\n                    if (columns[i].sortable && this.get(\"sortColumn\") == i) {\n                        if (this.get(\"sortType\") === \"desc\") {\n                            prefix = \"<i class='tui-grid-desc'></i>\";\n                        }\n                        else {\n                            prefix = \"<i class='tui-grid-asc'></i>\";\n                        }\n                    }\n                    var sortClass = \"\";\n                    if (columns[i].sortable)\n                        sortClass = \"tui-sortable\";\n                    var span = document.createElement(\"span\");\n                    span.setAttribute(\"unselectable\", \"on\");\n                    span.className = \"tui-grid-\" + this._tuid + \"-\" + i + \" \" + sortClass;\n                    span.col = i;\n                    head.appendChild(span);\n                    tui.browser.setInnerHtml(span, prefix);\n                    span.appendChild(document.createTextNode(columns[i].name));\n                }\n            };\n            Grid.prototype.drawContent = function () {\n                var _this = this;\n                var vbar = widget.get(this._components[\"vScroll\"]);\n                var content = this._components[\"content\"];\n                var lineHeight = this.get(\"lineHeight\");\n                var base = (this.get(\"header\") ? lineHeight : 0) - vbar.get(\"value\") % lineHeight;\n                var begin = Math.floor(vbar.get(\"value\") / lineHeight);\n                var end = begin + this._dispLines + 1;\n                var data = this.get(\"data\");\n                var columns = this.get(\"columns\");\n                var length = data.length();\n                var newBuffer = [];\n                var reusable = [];\n                for (var i = this._buffer.begin; i < this._buffer.end; i++) {\n                    if (i < begin || i >= end || i >= length) {\n                        reusable.push(this._buffer.lines[i - this._buffer.begin]);\n                    }\n                }\n                for (var i = begin; i < end && i < length; i++) {\n                    var line;\n                    if (i >= this._buffer.begin && i < this._buffer.end) {\n                        line = this._buffer.lines[i - this._buffer.begin];\n                    }\n                    else {\n                        if (reusable.length > 0) {\n                            line = reusable.pop();\n                            line.innerHTML = \"\";\n                            line.removeAttribute(\"tooltip\");\n                        }\n                        else {\n                            line = this.createLine(content);\n                        }\n                        if (i === this.get(\"activeRow\")) {\n                            $(line).addClass(\"tui-actived\");\n                        }\n                        else {\n                            $(line).removeClass(\"tui-actived\");\n                        }\n                    }\n                    this.moveLine(line, i - begin, base, lineHeight);\n                    newBuffer.push(line);\n                }\n                clearTimeout(this._drawTimer);\n                this._drawTimer = setTimeout(function () {\n                    var begin = Math.floor(vbar.get(\"value\") / lineHeight);\n                    var end = begin + _this._dispLines + 1;\n                    for (var i = _this._buffer.begin; i < _this._buffer.end; i++) {\n                        if (i >= begin && i < end)\n                            _this.drawLine(_this._buffer.lines[i - _this._buffer.begin], i, _this.get(\"lineHeight\"), columns, data.get(i));\n                    }\n                }, 32);\n                for (var i = 0; i < reusable.length; i++) {\n                    content.removeChild(reusable[i]);\n                }\n                this._buffer.lines = newBuffer;\n                this._buffer.begin = begin;\n                this._buffer.end = this._buffer.begin + this._buffer.lines.length;\n            };\n            Grid.prototype.initColumnWidth = function () {\n                var columns = this.get(\"columns\");\n                for (var i = 0; i < columns.length; i++) {\n                    if (typeof this._columnWidths[i] !== \"number\" || isNaN(this._columnWidths[i])) {\n                        if (typeof columns[i].width === \"number\" && !isNaN(columns[i].width))\n                            this._columnWidths[i] = columns[i].width;\n                        else\n                            this._columnWidths[i] = 150;\n                    }\n                    if (this._columnWidths[i] < 0)\n                        this._columnWidths[i] = 0;\n                }\n            };\n            Grid.prototype.computeHOffset = function () {\n                //var widths: number[] = [];\n                var head = this._components[\"head\"];\n                var content = this._components[\"content\"];\n                var scrollLeft = this._hbar.get(\"value\");\n                var columns = this.get(\"columns\");\n                head.scrollLeft = scrollLeft;\n                content.scrollLeft = scrollLeft;\n                var used = 0;\n                for (var i = 0; i < columns.length; i++) {\n                    this._vLines[i].style.left = used + vval(columns[i].width) +\n                        (Grid.CELL_SPACE * 2) - scrollLeft + \"px\";\n                    used += vval(columns[i].width) + (Grid.CELL_SPACE * 2);\n                }\n                if (this.get(\"header\")) {\n                    used = 0;\n                    for (var i = 0; i < columns.length; i++) {\n                        this._handlers[i].style.left = used + vval(columns[i].width) +\n                            (Grid.CELL_SPACE) - this._hbar.get(\"value\") + \"px\";\n                        used += vval(columns[i].width) + (Grid.CELL_SPACE * 2);\n                    }\n                }\n            };\n            Grid.prototype.computeColumnWidth = function () {\n                //var widths: number[] = [];\n                var columns = this.get(\"columns\");\n                if (this.get(\"autoWidth\")) {\n                    var total = this._contentWidth;\n                    var totalNoBorder = total - (Grid.CELL_SPACE * 2) * columns.length;\n                    var totalNoFixed = totalNoBorder;\n                    var totalCompute = 0;\n                    // Exclude all fixed columns\n                    for (var i = 0; i < columns.length; i++) {\n                        if (columns[i].fixed) {\n                            totalNoFixed -= this._columnWidths[i];\n                        }\n                        else {\n                            totalCompute += this._columnWidths[i];\n                        }\n                    }\n                    for (var i = 0; i < columns.length; i++) {\n                        if (!columns[i].fixed) {\n                            if (totalCompute <= 0)\n                                this._columnWidths[i] = NaN;\n                            else\n                                this._columnWidths[i] = (this._columnWidths[i] * 1.0) / totalCompute * totalNoFixed;\n                        }\n                    }\n                }\n                for (var i = 0; i < this._columnWidths.length; i++) {\n                    var val = Math.round(this._columnWidths[i]);\n                    //widths.push(val);\n                    columns[i].width = val;\n                }\n                // Add V lines\n                for (var i = 0; i < this._vLines.length; i++) {\n                    if (this._vLines[i].parentNode)\n                        this._.removeChild(this._vLines[i]);\n                }\n                var used = 0;\n                for (var i = 0; i < columns.length; i++) {\n                    if (i >= this._vLines.length) {\n                        this._vLines[i] = document.createElement(\"div\");\n                        this._vLines[i].className = \"tui-grid-vline\";\n                    }\n                    this._vLines[i].style.left = used + vval(columns[i].width) + (Grid.CELL_SPACE * 2) - this._hbar.get(\"value\") + \"px\";\n                    used += vval(columns[i].width) + (Grid.CELL_SPACE * 2);\n                    this._vLines[i].style.height = Math.min(this._contentHeight, this._.clientHeight) + \"px\";\n                    this._.appendChild(this._vLines[i]);\n                }\n                // Add Handlers\n                for (var i = 0; i < this._handlers.length; i++) {\n                    if (this._handlers[i].parentNode)\n                        this._.removeChild(this._handlers[i]);\n                }\n                if (this.get(\"header\")) {\n                    used = 0;\n                    for (var i = 0; i < columns.length; i++) {\n                        if (i >= this._handlers.length) {\n                            this._handlers[i] = document.createElement(\"div\");\n                            this._handlers[i].className = \"tui-grid-handler\";\n                        }\n                        this._handlers[i].style.left = used + vval(columns[i].width) + (Grid.CELL_SPACE) - this._hbar.get(\"value\") + \"px\";\n                        used += vval(columns[i].width) + (Grid.CELL_SPACE * 2);\n                        this._.appendChild(this._handlers[i]);\n                    }\n                }\n                var cssText = \"\";\n                for (var i_3 = 0; i_3 < columns.length; i_3++) {\n                    cssText += (\".tui-grid-\" + this._tuid + \"-\" + i_3 + \"{width:\" + vval(columns[i_3].width) + \"px;}\");\n                }\n                if (document.createStyleSheet)\n                    this._gridStyle.cssText = cssText;\n                else\n                    this._gridStyle.innerHTML = cssText;\n                for (var i_4 = 0; i_4 < this._buffer.lines.length; i_4++) {\n                    var line = this._buffer.lines[i_4];\n                    line.style.width = this._contentWidth + \"px\";\n                }\n            };\n            Grid.prototype.render = function () {\n                this.initColumnWidth();\n                this.computeScroll();\n                this.computeColumnWidth();\n                this.drawHeader();\n                this.drawContent();\n                this.computeHOffset();\n            };\n            return Grid;\n        }(widget.Widget));\n        Grid.CELL_SPACE = 4;\n        Grid.LINE_HEIGHT = 31;\n        widget.Grid = Grid;\n        widget.register(Grid, \"grid\");\n        widget.registerResize(\"grid\");\n        /**\n         * <tui:list>\n         */\n        var List = (function (_super) {\n            __extends(List, _super);\n            function List() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            List.prototype.initRestriction = function () {\n                var _this = this;\n                _super.prototype.initRestriction.call(this);\n                this._column = {\n                    name: \"\",\n                    key: \"name\",\n                    checkKey: \"check\",\n                    iconKey: \"icon\",\n                    prefixKey: \"prefix\",\n                    suffixKey: \"suffix\",\n                    arrow: true\n                };\n                this.setRestrictions({\n                    \"lineHeight\": {\n                        \"get\": function () {\n                            var val = _this._data[\"lineHeight\"];\n                            if (typeof val !== \"number\" || isNaN(val))\n                                return List.LINE_HEIGHT;\n                            else\n                                return val;\n                        }\n                    },\n                    \"columns\": {\n                        \"set\": function (value) { },\n                        \"get\": function () {\n                            return [_this._column];\n                        }\n                    },\n                    \"checkKey\": {\n                        \"set\": function (value) {\n                            _this._column.checkKey = value;\n                            _this.clearBuffer();\n                        },\n                        \"get\": function () {\n                            return _this._column.checkKey;\n                        }\n                    },\n                    \"nameKey\": {\n                        \"set\": function (value) {\n                            _this._column.key = value;\n                            _this.clearBuffer();\n                        },\n                        \"get\": function () {\n                            return _this._column.key;\n                        }\n                    },\n                    \"iconKey\": {\n                        \"set\": function (value) {\n                            _this._column.iconKey = value;\n                            _this.clearBuffer();\n                        },\n                        \"get\": function () {\n                            return _this._column.iconKey;\n                        }\n                    },\n                    \"prefixKey\": {\n                        \"set\": function (value) {\n                            _this._column.prefixKey = value;\n                            _this.clearBuffer();\n                        },\n                        \"get\": function () {\n                            return _this._column.prefixKey;\n                        }\n                    },\n                    \"suffixKey\": {\n                        \"set\": function (value) {\n                            _this._column.suffixKey = value;\n                            _this.clearBuffer();\n                        },\n                        \"get\": function () {\n                            return _this._column.suffixKey;\n                        }\n                    },\n                    \"checkable\": {\n                        \"set\": function (value) {\n                            _this._column.type = value ? \"check\" : null;\n                            _this.clearBuffer();\n                        },\n                        \"get\": function () {\n                            return _this._column.type === \"check\";\n                        }\n                    },\n                    \"checkedValues\": {\n                        \"set\": function (value) {\n                            var valueKey = _this.get(\"valueKey\");\n                            var checkKey = _this.get(\"checkKey\");\n                            if (value === null)\n                                value = [];\n                            if (!(value instanceof Array))\n                                value = [value];\n                            _this.iterate(function (item, path, treeNode) {\n                                if (typeof item[checkKey] === \"boolean\") {\n                                    if (value.indexOf(item[valueKey]) >= 0)\n                                        item[checkKey] = true;\n                                    else\n                                        item[checkKey] = false;\n                                }\n                                return true;\n                            });\n                        },\n                        \"get\": function () {\n                            var value = [];\n                            var valueKey = _this.get(\"valueKey\");\n                            var checkKey = _this.get(\"checkKey\");\n                            _this.iterate(function (item, path) {\n                                if (item[checkKey] === true)\n                                    value.push(item[valueKey]);\n                                return true;\n                            });\n                            return value;\n                        }\n                    },\n                    \"checkedNames\": {\n                        \"set\": function (value) { },\n                        \"get\": function () {\n                            var names = [];\n                            var nameKey = _this.get(\"nameKey\");\n                            var checkKey = _this.get(\"checkKey\");\n                            _this.iterate(function (item, path) {\n                                if (item[checkKey] === true)\n                                    names.push(item[nameKey]);\n                                return true;\n                            });\n                            return names;\n                        }\n                    }\n                });\n            };\n            List.prototype.init = function () {\n                _super.prototype.init.call(this);\n                this._set(\"header\", false);\n                this.setInit(\"autoWidth\", true);\n                this.setInit(\"valueKey\", \"value\");\n            };\n            List.prototype.selectAll = function () {\n                var checkKey = this.get(\"checkKey\");\n                this.iterate(function (item, path) {\n                    if (typeof item[checkKey] === \"boolean\") {\n                        item[checkKey] = true;\n                    }\n                    return true;\n                });\n                this.render();\n            };\n            List.prototype.deselectAll = function () {\n                var checkKey = this.get(\"checkKey\");\n                this.iterate(function (item, path) {\n                    if (typeof item[checkKey] === \"boolean\") {\n                        item[checkKey] = false;\n                    }\n                    return true;\n                });\n                this.render();\n            };\n            return List;\n        }(Grid));\n        List.LINE_HEIGHT = 30;\n        widget.List = List;\n        widget.register(List, \"list\");\n        widget.registerResize(\"list\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"inputBase.ts\" />\n/// <reference path=\"../browser/keyboard.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        /**\n         * <input>\n         * Attributes: value, text, type, iconLeft, iconRight, autoValidate\n         * Events: input, change, left-icon-mousedown, right-icon-mousedown, left-icon-click, right-icon-click\n         */\n        var Input = (function (_super) {\n            __extends(Input, _super);\n            function Input() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            Input.prototype.initRestriction = function () {\n                var _this = this;\n                _super.prototype.initRestriction.call(this);\n                var textbox = this._components[\"textbox\"] = document.createElement(\"input\");\n                this.setRestrictions({\n                    \"value\": {\n                        \"set\": function (value) {\n                            textbox.value = value;\n                            _this._isEmpty = (textbox.value === \"\");\n                        },\n                        \"get\": function () {\n                            return textbox.value;\n                        }\n                    },\n                    \"text\": {\n                        \"set\": function (value) {\n                            _this._set(\"value\", value);\n                        },\n                        \"get\": function () {\n                            return _this.get(\"value\");\n                        }\n                    },\n                    \"type\": {\n                        \"set\": function (value) {\n                            value = value.toLowerCase();\n                            if ([\"text\", \"password\", \"email\", \"url\", \"number\"].indexOf(value) < 0)\n                                return;\n                            textbox.setAttribute(\"type\", value);\n                        },\n                        \"get\": function () {\n                            return textbox.getAttribute(\"type\");\n                        }\n                    }\n                });\n            };\n            Input.prototype.onInput = function (textbox, e) {\n                this.updateEmptyState(textbox.value === \"\");\n                this.reset();\n                this.fire(\"input\", e);\n            };\n            Input.prototype.init = function () {\n                var _this = this;\n                var $root = $(this._);\n                var placeholder = this._components[\"placeholder\"] = document.createElement(\"span\");\n                var textbox = this._components[\"textbox\"];\n                var iconLeft = this._components[\"iconLeft\"] = document.createElement(\"i\");\n                var iconRight = this._components[\"iconRight\"] = document.createElement(\"i\");\n                var iconInvalid = this._components[\"iconInvalid\"] = document.createElement(\"i\");\n                var clearButton = this._components[\"clearButton\"] = document.createElement(\"i\");\n                iconInvalid.className = \"tui-invalid-icon\";\n                clearButton.className = \"tui-input-clear-button\";\n                placeholder.className = \"tui-placeholder\";\n                placeholder.setAttribute(\"unselectable\", \"on\");\n                this._.appendChild(placeholder);\n                this._.appendChild(iconLeft);\n                this._.appendChild(textbox);\n                this._.appendChild(iconInvalid);\n                this._.appendChild(iconRight);\n                this._.appendChild(clearButton);\n                $(textbox).focus(function () {\n                    $root.addClass(\"tui-active\");\n                });\n                $(textbox).blur(function () {\n                    $root.removeClass(\"tui-active\");\n                    if (_this.get(\"disable\"))\n                        return;\n                    if (_this.get(\"autoValidate\")) {\n                        _this.validate();\n                    }\n                });\n                if (tui.ieVer > 0 && tui.ieVer < 9) {\n                    $(textbox).on(\"propertychange\", function (e) {\n                        if (e.originalEvent.propertyName !== 'value')\n                            return;\n                        _this.onInput(textbox, e);\n                    });\n                }\n                else {\n                    if (tui.ieVer === 9) {\n                        $(textbox).on(\"keyup\", function (e) {\n                            if (e.keyCode = tui.browser.KeyCode.BACK)\n                                _this.onInput(textbox, e);\n                        });\n                    }\n                    $(textbox).on(\"input\", function (e) {\n                        _this.onInput(textbox, e);\n                    });\n                }\n                $(textbox).on(\"keydown\", function (e) {\n                    if (e.keyCode === tui.browser.KeyCode.ENTER) {\n                        _this.fire(\"enter\", e);\n                    }\n                });\n                $(textbox).on(\"change\", function (e) {\n                    _this.fire(\"change\", e);\n                });\n                $(clearButton).on(\"mousedown\", function (e) {\n                    _this.set(\"value\", \"\");\n                    _this.reset();\n                    _this.fire(\"change\", e);\n                    e.stopPropagation();\n                });\n                $root.mousedown(function (e) {\n                    if (_this.get(\"disable\"))\n                        return;\n                    var obj = e.target || e.srcElement;\n                    if (obj === textbox) {\n                        return;\n                    }\n                    setTimeout(function () {\n                        textbox.focus();\n                        if (obj === iconLeft) {\n                            _this.fire(\"left-icon-mousedown\", e);\n                        }\n                        if (obj === iconRight) {\n                            _this.fire(\"right-icon-mousedown\", e);\n                        }\n                    }, 0);\n                });\n                $root.click(function (e) {\n                    if (_this.get(\"disable\"))\n                        return;\n                    var obj = e.target || e.srcElement;\n                    if (obj === textbox) {\n                        return;\n                    }\n                    if (obj === iconLeft) {\n                        _this.fire(\"left-icon-click\", e);\n                    }\n                    if (obj === iconRight) {\n                        _this.fire(\"right-icon-click\", e);\n                    }\n                });\n                this.on(\"resize\", function () {\n                    _this.render();\n                });\n            };\n            Input.prototype.focus = function () {\n                var textbox = this._components[\"textbox\"];\n                textbox.focus();\n            };\n            Input.prototype.render = function () {\n                this._.scrollLeft = 0;\n                var $root = $(this._);\n                var textbox = this._components[\"textbox\"];\n                var iconLeft = this._components[\"iconLeft\"];\n                var iconRight = this._components[\"iconRight\"];\n                var iconInvalid = this._components[\"iconInvalid\"];\n                var placeholder = this._components[\"placeholder\"];\n                var clearButton = this._components[\"clearButton\"];\n                if (this.get(\"disable\")) {\n                    $root.addClass(\"tui-disable\");\n                    textbox.setAttribute(\"readonly\", \"readonly\");\n                }\n                else {\n                    $root.removeClass(\"tui-disable\");\n                    textbox.removeAttribute(\"readonly\");\n                }\n                var marginLeft = 0;\n                if (this.get(\"iconLeft\")) {\n                    iconLeft.className = this.get(\"iconLeft\");\n                    iconLeft.style.display = \"\";\n                    iconLeft.style.left = \"0\";\n                }\n                else {\n                    iconLeft.className = \"\";\n                    iconLeft.style.display = \"none\";\n                    marginLeft = Input.PADDING;\n                }\n                var marginRight = 0;\n                if (this.get(\"iconRight\")) {\n                    iconRight.className = this.get(\"iconRight\");\n                    iconRight.style.display = \"\";\n                    iconRight.style.right = \"0\";\n                }\n                else {\n                    iconRight.className = \"\";\n                    iconRight.style.display = \"none\";\n                    marginRight = Input.PADDING;\n                }\n                if (!this._valid) {\n                    $root.addClass(\"tui-invalid\");\n                    iconInvalid.style.display = \"\";\n                    iconInvalid.style.right = iconRight.offsetWidth + \"px\";\n                }\n                else {\n                    $root.removeClass(\"tui-invalid\");\n                    iconInvalid.style.display = \"none\";\n                    if (marginRight === 0)\n                        marginRight = Input.PADDING;\n                }\n                if (this.get(\"clearable\") && this.get(\"value\").length > 0) {\n                    clearButton.style.display = \"\";\n                    clearButton.style.right = iconRight.offsetWidth + iconInvalid.offsetWidth + \"px\";\n                }\n                else {\n                    clearButton.style.display = \"none\";\n                }\n                textbox.style.left = iconLeft.offsetWidth + marginLeft + \"px\";\n                var width = this._.clientWidth -\n                    iconLeft.offsetWidth -\n                    iconInvalid.offsetWidth -\n                    iconRight.offsetWidth -\n                    clearButton.offsetWidth -\n                    marginLeft - marginRight;\n                if (width < 0)\n                    width = 0;\n                textbox.style.width = width + \"px\";\n                var phText = this.get(\"placeholder\");\n                var showPh = phText && !this.get(\"value\");\n                if (showPh) {\n                    $(placeholder).text(phText);\n                    placeholder.style.left = iconLeft.offsetWidth + marginLeft + \"px\";\n                    placeholder.style.width = textbox.style.width;\n                    placeholder.style.display = \"\";\n                }\n                else {\n                    placeholder.style.display = \"none\";\n                }\n                if (!this._valid && this._invalidMessage) {\n                    this._set(\"follow-tooltip\", this._invalidMessage);\n                }\n                else {\n                    this._set(\"follow-tooltip\", null);\n                }\n            };\n            return Input;\n        }(widget.InputBase));\n        Input.PADDING = 6;\n        widget.Input = Input;\n        widget.register(Input, \"input\");\n        widget.registerResize(\"input\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"base.ts\" />\n/// <reference path=\"../browser/keyboard.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        widget.popStack = [];\n        function findPopupToClose(bindElem) {\n            var index = 0;\n            if (bindElem && bindElem.nodeName) {\n                for (var i = 0; i < widget.popStack.length; i++) {\n                    var item = widget.popStack[i];\n                    if (tui.browser.isAncestry(bindElem, item._)) {\n                        index = i + 1;\n                        break;\n                    }\n                }\n            }\n            if (index < widget.popStack.length)\n                widget.popStack[index].close();\n        }\n        setInterval(function () {\n            findPopupToClose(document.activeElement);\n        }, 50);\n        /**\n         * <popup>\n         * Attributes: content, direction, referPos, referElement, opened\n         * Method: open(), close()\n         * Events: open, close\n         */\n        var Popup = (function (_super) {\n            __extends(Popup, _super);\n            function Popup() {\n                var _this = _super !== null && _super.apply(this, arguments) || this;\n                _this.popIndex = null;\n                _this.referRect = null;\n                _this.checkInterval = null;\n                _this.refProc = function () {\n                    _this.render();\n                };\n                return _this;\n            }\n            Popup.prototype.initRestriction = function () {\n                var _this = this;\n                _super.prototype.initRestriction.call(this);\n                this.setRestrictions({\n                    \"content\": {\n                        \"set\": function (value) {\n                            _this._data[\"content\"] = value;\n                            if (typeof value === \"string\")\n                                _this._.innerHTML = value;\n                            else if (value && value.nodeName)\n                                _this._.appendChild(value);\n                        }\n                    }\n                });\n            };\n            Popup.prototype.initChildren = function (childNodes) {\n                if (childNodes.length > 0) {\n                    var div = document.createElement(\"div\");\n                    for (var _i = 0, childNodes_5 = childNodes; _i < childNodes_5.length; _i++) {\n                        var node = childNodes_5[_i];\n                        div.appendChild(node);\n                    }\n                    this._set(\"content\", div);\n                }\n            };\n            Popup.prototype.init = function () {\n                var _this = this;\n                var $root = $(this._);\n                $root.attr(\"tabIndex\", \"-1\");\n                $root.css(\"display\", \"none\");\n                var content = this.get(\"content\");\n                if (typeof content === \"string\")\n                    $root.html(content);\n                else if (content && content.nodeName)\n                    $root.append(content);\n                widget.init(this._);\n                tui.browser.removeNode(this._);\n                $root.keydown(function (e) {\n                    var c = e.keyCode;\n                    if (c === tui.browser.KeyCode.ESCAPE) {\n                        _this.close();\n                        if (_this.get(\"referElement\")) {\n                            _this.get(\"referElement\").focus();\n                        }\n                    }\n                });\n            };\n            Popup.prototype.open = function (refer, direction) {\n                var _this = this;\n                if (this.get(\"opened\"))\n                    return;\n                if (typeof refer === \"string\")\n                    refer = document.getElementById(refer);\n                if (typeof direction === tui.UNDEFINED)\n                    direction = \"Lb\";\n                if (typeof direction !== \"string\" || !/^[lLrR][tTbB]$/.test(direction)) {\n                    throw new SyntaxError(\"Invalid popup direction value\");\n                }\n                if (typeof refer === \"object\" && refer.nodeName) {\n                    this._set(\"referElement\", refer);\n                    findPopupToClose(refer);\n                    this.referRect = tui.browser.getRectOfScreen(refer);\n                    this.checkInterval = setInterval(function () {\n                        var newRect = tui.browser.getRectOfScreen(refer);\n                        if (newRect.left !== _this.referRect.left ||\n                            newRect.top !== _this.referRect.top ||\n                            newRect.width !== _this.referRect.width ||\n                            newRect.height !== _this.referRect.height) {\n                            _this.referRect = newRect;\n                            _this.render();\n                        }\n                    }, 16);\n                    $(window).on(\"resize scroll\", this.refProc);\n                }\n                else if (typeof refer === \"object\" && typeof refer.left === \"number\" && typeof refer.top === \"number\") {\n                    this._set(\"referPos\", refer);\n                    findPopupToClose();\n                }\n                else\n                    throw new SyntaxError(\"Invalid popup refer value, must be an element or position\");\n                this.popIndex = widget.popStack.push(this) - 1;\n                this._set(\"direction\", direction);\n                this._set(\"opened\", true);\n                $(this._).css({\n                    \"display\": \"block\",\n                    \"position\": \"fixed\"\n                });\n                this.appendTo(document.body); // Will cause refresh\n                widget.init(this._); // refresh children\n                this.render(); // refresh self again\n                this._.focus();\n                this.fire(\"open\");\n            };\n            Popup.prototype.closeSelf = function () {\n                tui.browser.removeNode(this._);\n                this._set(\"opened\", false);\n                if (this.checkInterval != null) {\n                    clearInterval(this.checkInterval);\n                    this.checkInterval = null;\n                }\n                $(window).off(\"resize scroll\", this.refProc);\n                this.fire(\"close\");\n            };\n            Popup.prototype.close = function () {\n                if (!this.get(\"opened\"))\n                    return;\n                for (var i = this.popIndex; i < widget.popStack.length; i++) {\n                    var item = widget.popStack[i];\n                    item.closeSelf();\n                }\n                widget.popStack.splice(this.popIndex, widget.popStack.length - this.popIndex + 1);\n            };\n            Popup.prototype.render = function () {\n                if (!this.get(\"opened\"))\n                    return;\n                var root = this._;\n                var ww = $(window).width();\n                var wh = $(window).height();\n                root.style.left = \"0px\";\n                root.style.top = \"0px\";\n                root.style.width = \"\";\n                //root.style.width = browser.getCurrentStyle(root).width;\n                var ew = root.offsetWidth;\n                var eh = root.offsetHeight;\n                var box = { left: 0, top: 0, width: 0, height: 0 };\n                var pos = { left: 0, top: 0 };\n                if (this.get(\"referPos\")) {\n                    box = this.get(\"referPos\");\n                    box.width = 0;\n                    box.height = 0;\n                }\n                else if (this.get(\"referElement\")) {\n                    box = tui.browser.getRectOfScreen(this.get(\"referElement\"));\n                }\n                // lower case letter means 'next to', upper case letter means 'align to'\n                var compute = {\n                    \"l\": function () {\n                        pos.left = box.left - ew;\n                        if (pos.left < 2)\n                            pos.left = box.left + box.width;\n                    },\n                    \"r\": function () {\n                        pos.left = box.left + box.width;\n                        if (pos.left + ew > ww - 2)\n                            pos.left = box.left - ew;\n                    },\n                    \"t\": function () {\n                        pos.top = box.top - eh;\n                        if (pos.top < 2)\n                            pos.top = box.top + box.height;\n                    },\n                    \"b\": function () {\n                        pos.top = box.top + box.height;\n                        if (pos.top + eh > wh - 2)\n                            pos.top = box.top - eh;\n                    },\n                    \"L\": function () {\n                        pos.left = box.left;\n                        if (pos.left + ew > ww - 2)\n                            pos.left = box.left + box.width - ew;\n                    },\n                    \"R\": function () {\n                        pos.left = box.left + box.width - ew;\n                        if (pos.left < 2)\n                            pos.left = box.left;\n                    },\n                    \"T\": function () {\n                        pos.top = box.top;\n                        if (pos.top + eh > wh - 2)\n                            pos.top = box.top + box.height - eh;\n                    },\n                    \"B\": function () {\n                        pos.top = box.top + box.height - eh;\n                        if (pos.top < 2)\n                            pos.top = box.top;\n                    }\n                };\n                var direction = this.get(\"direction\");\n                compute[direction.substring(0, 1)](); // parse left\n                compute[direction.substring(1, 2)](); // parse top\n                if (pos.left > ww - 2)\n                    pos.left = ww - 2;\n                if (pos.left < 2)\n                    pos.left = 2;\n                if (pos.top > wh - 2)\n                    pos.top = wh - 2;\n                if (pos.top < 2)\n                    pos.top = 2;\n                root.style.left = pos.left + \"px\";\n                root.style.top = pos.top + \"px\";\n            };\n            return Popup;\n        }(widget.Widget));\n        widget.Popup = Popup;\n        widget.register(Popup, \"popup\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"popup.ts\" />\n/// <reference path=\"../browser/keyboard.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        /**\n         * <menu>\n         * Attributes: content, direction, referPos, referElement, opened\n         * Method: open(), close()\n         * Events: open, close, click\n         */\n        var Menu = (function (_super) {\n            __extends(Menu, _super);\n            function Menu() {\n                var _this = _super !== null && _super.apply(this, arguments) || this;\n                _this.activeItem = null;\n                return _this;\n            }\n            Menu.prototype.initChildren = function (childNodes) {\n                var data = [];\n                function hasChildItem(node) {\n                    for (var i = 0; i < node.childNodes.length; i++) {\n                        var child = node.childNodes[i];\n                        if (widget.getFullName(child) === \"tui:item\")\n                            return true;\n                    }\n                    return false;\n                }\n                function addChild(node, items) {\n                    var item = new widget.Item(node);\n                    var text = item.get(\"text\");\n                    if (text === null)\n                        text = $.trim(tui.browser.getNodeOwnText(node));\n                    var menuItem = {\n                        \"text\": text\n                    };\n                    var type = item.get(\"type\");\n                    if (type && /^(button|check|radio|menu|line)$/.test(type))\n                        menuItem.type = type;\n                    if (hasChildItem(node) && (typeof menuItem.type === tui.UNDEFINED || menuItem.type === null))\n                        menuItem.type = \"menu\";\n                    var icon = item.get(\"icon\");\n                    if (typeof icon === \"string\" && icon.trim().length > 0)\n                        menuItem.icon = icon;\n                    var shortcut = item.get(\"shortcut\");\n                    if (typeof shortcut === \"string\" && shortcut.trim().length > 0)\n                        menuItem.shortcut = shortcut;\n                    var checked = item.get(\"checked\");\n                    if (typeof checked === \"boolean\")\n                        menuItem.checked = checked;\n                    var disable = item.get(\"disable\");\n                    if (typeof disable === \"boolean\")\n                        menuItem.disable = disable;\n                    if (menuItem.type === \"radio\") {\n                        var group = item.get(\"group\");\n                        if (typeof group === \"string\" && group.length > 0)\n                            menuItem.group = group;\n                        else\n                            menuItem.group = \"\";\n                    }\n                    var value = item.get(\"value\");\n                    if (value !== null && typeof value !== tui.UNDEFINED)\n                        menuItem.value = value;\n                    if (menuItem.type === \"menu\") {\n                        menuItem.children = [];\n                        addChildren(node.childNodes, menuItem.children);\n                    }\n                    items.push(menuItem);\n                }\n                function addChildren(childNodes, items) {\n                    for (var i = 0; i < childNodes.length; i++) {\n                        var node = childNodes[i];\n                        if (widget.getFullName(node) === \"tui:item\") {\n                            addChild(node, items);\n                        }\n                    }\n                }\n                addChildren(childNodes, data);\n                if (data.length > 0)\n                    this._set(\"items\", data);\n            };\n            Menu.prototype.open = function (refer, direction) {\n                var data = this.get(\"items\");\n                if (data == null)\n                    data = [];\n                this._.innerHTML = \"\";\n                for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {\n                    var item = data_1[_i];\n                    var div = void 0;\n                    if (item.type !== \"line\") {\n                        div = tui.browser.toElement(\"<div tabIndex='-1' unselectable='on'><span class='tui-icon'></span>\" +\n                            \"<span class='tui-arrow'></span><span class='tui-label'></span><span class='tui-shortcut'></span></div>\");\n                        if (item.disable) {\n                            $(div).addClass(\"tui-disabled\");\n                        }\n                        if (item.type === \"check\" || item.type === \"radio\") {\n                            if (item.checked) {\n                                $(div).children(\".tui-icon\").addClass(\"fa-check\");\n                            }\n                        }\n                        else if (item.icon) {\n                            $(div).children(\".tui-icon\").addClass(item.icon);\n                        }\n                        $(div).children(\".tui-label\").html(item.text);\n                        if (typeof item.shortcut === \"string\")\n                            $(div).children(\".tui-shortcut\").html(item.shortcut);\n                        if (item.type === \"menu\")\n                            $(div).children(\".tui-arrow\").addClass(\"fa-caret-right\");\n                        if (item.disable)\n                            $(div).addClass(\"tui-disabled\");\n                    }\n                    else\n                        div = tui.browser.toElement(\"<div class='tui-line'></div>\");\n                    this._.appendChild(div);\n                }\n                _super.prototype.open.call(this, refer, direction);\n                if (this.activeItem != null) {\n                    $(this._).children(\"div\").removeClass(\"tui-active\");\n                    this.activeItem = null;\n                }\n            };\n            Menu.prototype.init = function () {\n                var _this = this;\n                var $root = $(this._);\n                $root.attr(\"tabIndex\", \"-1\");\n                $root.css(\"display\", \"none\");\n                tui.browser.removeNode(this._);\n                function findMenuItemDiv(elem) {\n                    var children = $root.children(\"div\");\n                    for (var i = 0; i < children.length; i++) {\n                        var div = children[i];\n                        if ((typeof elem === \"number\" && elem === i) ||\n                            (typeof elem === \"object\" && tui.browser.isAncestry(elem, div))) {\n                            return div;\n                        }\n                    }\n                    return null;\n                }\n                ;\n                function findDivIndex(elem) {\n                    var children = $root.children(\"div\");\n                    for (var i = 0; i < children.length; i++) {\n                        var div = children[i];\n                        if (div === elem) {\n                            return i;\n                        }\n                    }\n                    return null;\n                }\n                ;\n                var ie8hack = function (div, index) {\n                    if (tui.ieVer >= 7 && tui.ieVer < 9) {\n                        var data = _this.get(\"items\");\n                        var item = data[index];\n                        var icon = $(div).children(\".tui-icon\")[0];\n                        if (item.type === \"check\" || item.type === \"radio\") {\n                            if (item.checked) {\n                                $(icon).removeClass(\"fa-check\");\n                                setTimeout(function () {\n                                    $(icon).addClass(\"fa-check\");\n                                });\n                            }\n                        }\n                        else if (item.icon) {\n                            $(icon).removeClass(item.icon);\n                            setTimeout(function () {\n                                $(icon).addClass(item.icon);\n                            });\n                        }\n                        if (item.type === \"menu\") {\n                            var arrow = $(div).children(\".tui-arrow\")[0];\n                            $(arrow).removeClass(\"fa-caret-right\");\n                            setTimeout(function () {\n                                $(arrow).addClass(\"fa-caret-right\");\n                            });\n                        }\n                    }\n                };\n                function activeLine(index) {\n                    var div = findMenuItemDiv(index);\n                    $(div).addClass(\"tui-actived\");\n                    ie8hack(div, index);\n                }\n                ;\n                function deactiveLine(index) {\n                    var div = findMenuItemDiv(index);\n                    $(div).removeClass(\"tui-actived\");\n                    ie8hack(div, index);\n                }\n                ;\n                $root.mousemove(function (e) {\n                    var elem = e.target || e.srcElement;\n                    var div = findMenuItemDiv(elem);\n                    if (div !== null) {\n                        var found = findDivIndex(div);\n                        if (found !== _this.activeItem) {\n                            if (_this.activeItem !== null) {\n                                deactiveLine(_this.activeItem);\n                            }\n                            if ($(div).hasClass(\"tui-disabled\")) {\n                                clearTimeout(openSubMenuTimer);\n                                _this.activeItem = null;\n                                _this._.focus();\n                                return;\n                            }\n                            _this.activeItem = found;\n                            activeLine(_this.activeItem);\n                            if (!$(div).hasClass(\"tui-sub\")) {\n                                _this._.focus();\n                                openSubMenu();\n                            }\n                        }\n                    }\n                });\n                $root.on(\"touchstart\", function (e) {\n                    var elem = e.target || e.srcElement;\n                    var div = findMenuItemDiv(elem);\n                    if (div !== null) {\n                        var found = findDivIndex(div);\n                        if (found !== _this.activeItem) {\n                            if (_this.activeItem !== null) {\n                                deactiveLine(_this.activeItem);\n                            }\n                            if ($(div).hasClass(\"tui-disabled\")) {\n                                clearTimeout(openSubMenuTimer);\n                                _this.activeItem = null;\n                                _this._.focus();\n                                return;\n                            }\n                            _this.activeItem = found;\n                            activeLine(_this.activeItem);\n                            if (_this.activeItem !== null) {\n                                var data = _this.get(\"items\");\n                                var item = data[_this.activeItem];\n                                if (item.children && item.children.length > 0) {\n                                    _this._.focus();\n                                    openSubMenu();\n                                    e.preventDefault();\n                                }\n                            }\n                        }\n                    }\n                });\n                $root.mouseleave(function (e) {\n                    if (_this.activeItem != null) {\n                        deactiveLine(_this.activeItem);\n                        _this.activeItem = null;\n                    }\n                    clearTimeout(openSubMenuTimer);\n                });\n                $root.click(function (e) {\n                    if (_this.activeItem != null) {\n                        var data = _this.get(\"items\");\n                        var item = data[_this.activeItem];\n                        if (item.type === \"check\") {\n                            item.checked = !item.checked;\n                        }\n                        else if (item.type === \"radio\") {\n                            if (typeof item.group === \"string\") {\n                                for (var _i = 0, data_2 = data; _i < data_2.length; _i++) {\n                                    var it = data_2[_i];\n                                    if (it.type === \"radio\" && it.group == item.group) {\n                                        it.checked = false;\n                                    }\n                                }\n                            }\n                            item.checked = true;\n                        }\n                        _this.fire(\"click\", { e: e, item: item });\n                        _this.close();\n                    }\n                });\n                var findItem = function (from, step) {\n                    var data = _this.get(\"items\");\n                    for (var i = from; i < data.length && i >= 0; i = i + step) {\n                        if (data[i].type !== \"line\" && !data[i].disable)\n                            return i;\n                    }\n                    return null;\n                };\n                $root.keydown(function (e) {\n                    var c = e.keyCode;\n                    var data = _this.get(\"items\");\n                    function stopEvent() {\n                        e.stopPropagation();\n                        e.preventDefault();\n                    }\n                    if (c === tui.browser.KeyCode.ESCAPE) {\n                        stopEvent();\n                        _this.close();\n                        if (_this.get(\"referElement\")) {\n                            _this.get(\"referElement\").focus();\n                        }\n                    }\n                    else if (c === tui.browser.KeyCode.LEFT) {\n                        stopEvent();\n                        if (widget.popStack.length < 2 || !(widget.popStack[widget.popStack.length - 2] instanceof Menu))\n                            return;\n                        widget.popStack[widget.popStack.length - 2]._.focus();\n                    }\n                    if (data.length === 0) {\n                        _this.activeItem = null;\n                        return;\n                    }\n                    if (c === tui.browser.KeyCode.DOWN || c === tui.browser.KeyCode.TAB) {\n                        stopEvent();\n                        if (_this.activeItem === null) {\n                            _this.activeItem = findItem(0, 1);\n                        }\n                        else {\n                            deactiveLine(_this.activeItem);\n                            _this.activeItem = findItem(_this.activeItem + 1, 1);\n                            if (_this.activeItem === null)\n                                _this.activeItem = 0;\n                        }\n                        activeLine(_this.activeItem);\n                    }\n                    else if (c === tui.browser.KeyCode.UP) {\n                        stopEvent();\n                        if (_this.activeItem === null) {\n                            _this.activeItem = findItem(data.length - 1, -1);\n                        }\n                        else {\n                            deactiveLine(_this.activeItem);\n                            _this.activeItem = findItem(_this.activeItem - 1, -1);\n                            if (_this.activeItem === null)\n                                _this.activeItem = data.length - 1;\n                        }\n                        activeLine(_this.activeItem);\n                    }\n                    else if (c === tui.browser.KeyCode.RIGHT) {\n                        stopEvent();\n                        openSubMenu();\n                    }\n                    else if (c === tui.browser.KeyCode.ENTER) {\n                        stopEvent();\n                        if (_this.activeItem !== null) {\n                            var item = data[_this.activeItem];\n                            _this.fire(\"click\", { e: e, item: item });\n                            _this.close();\n                        }\n                    }\n                });\n                var openSubMenuTimer = null;\n                var openSubMenu = function () {\n                    var data = _this.get(\"items\");\n                    if (_this.activeItem !== null) {\n                        clearTimeout(openSubMenuTimer);\n                        var item = data[_this.activeItem];\n                        if (item.type !== \"menu\")\n                            return;\n                        var div_1 = findMenuItemDiv(_this.activeItem);\n                        if ($(div_1).hasClass(\"tui-sub\"))\n                            return;\n                        var itemIndex_1 = _this.activeItem;\n                        openSubMenuTimer = setTimeout(function () {\n                            var childItems = item.children;\n                            var subMenu = widget.create(\"menu\", { \"items\": childItems });\n                            if ($(_this._).hasClass(\"tui-big\"))\n                                $(subMenu._).addClass(\"tui-big\");\n                            $(div_1).addClass(\"tui-sub\");\n                            ie8hack(div_1, itemIndex_1);\n                            subMenu.open(div_1, \"rT\");\n                            subMenu.on(\"close\", function () {\n                                $(div_1).removeClass(\"tui-sub\");\n                                ie8hack(div_1, itemIndex_1);\n                            });\n                            subMenu.on(\"click\", function (e) {\n                                _this.fire(\"click\", e.data);\n                                _this.close();\n                            });\n                        }, 200);\n                    }\n                };\n            };\n            return Menu;\n        }(widget.Popup));\n        widget.Menu = Menu;\n        widget.register(Menu, \"menu\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        var Navigator = (function (_super) {\n            __extends(Navigator, _super);\n            function Navigator() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            Navigator.prototype.initRestriction = function () {\n                var _this = this;\n                _super.prototype.initRestriction.call(this);\n                this.setRestrictions({\n                    \"items\": {\n                        \"get\": function () {\n                            var items = _this._data[\"items\"];\n                            return items ? items : [];\n                        }\n                    },\n                    \"activeItem\": {\n                        \"set\": function (value) { },\n                        \"get\": function () {\n                            if (_this._activeItem != null) {\n                                return _this._activeItem.item;\n                            }\n                        }\n                    }\n                });\n            };\n            Navigator.prototype.initChildren = function (childNodes) {\n                var data = [];\n                function addChild(node, items) {\n                    var item = new widget.Item(node);\n                    var text = item.get(\"text\");\n                    if (text === null)\n                        text = $.trim(tui.browser.getNodeOwnText(node));\n                    var naviItem = {\n                        \"text\": text\n                    };\n                    naviItem.name = item.get(\"name\");\n                    naviItem.path = item.get(\"path\");\n                    naviItem.icon = item.get(\"icon\");\n                    naviItem.expand = item.get(\"expand\");\n                    var children = [];\n                    addChildren(node.childNodes, children);\n                    if (children.length > 0)\n                        naviItem.children = children;\n                    items.push(naviItem);\n                }\n                function addChildren(childNodes, data) {\n                    for (var i = 0; i < childNodes.length; i++) {\n                        var node = childNodes[i];\n                        if (widget.getFullName(node) === \"tui:item\") {\n                            addChild(node, data);\n                        }\n                    }\n                }\n                addChildren(childNodes, data);\n                if (data.length > 0)\n                    this._set(\"items\", data);\n            };\n            Navigator.prototype.checkScroll = function () {\n                var container = this._components[\"container\"];\n                var up = this._components[\"up\"];\n                var down = this._components[\"down\"];\n                if (container.scrollTop == 0) {\n                    up.style.display = \"none\";\n                }\n                else {\n                    up.style.display = \"block\";\n                }\n                if (container.scrollTop == container.scrollHeight - container.clientHeight) {\n                    down.style.display = \"none\";\n                }\n                else {\n                    down.style.display = \"block\";\n                }\n            };\n            Navigator.prototype.init = function () {\n                var _this = this;\n                var container = this._components[\"container\"] = document.createElement(\"div\");\n                var up = this._components[\"up\"] = document.createElement(\"div\");\n                var down = this._components[\"down\"] = document.createElement(\"div\");\n                container.className = \"tui-container\";\n                up.className = \"tui-up\";\n                down.className = \"tui-down\";\n                this._.appendChild(container);\n                this._.appendChild(up);\n                this._.appendChild(down);\n                var mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? \"DOMMouseScroll\" : \"mousewheel\";\n                $(this._).on(mousewheelevt, function (ev) {\n                    var e = ev.originalEvent;\n                    var delta = e.detail ? e.detail * (-1) : e.wheelDelta;\n                    if (delta <= 0) {\n                        if (container.scrollTop + container.clientHeight >= container.scrollHeight) {\n                            ev.preventDefault();\n                        }\n                    }\n                    else {\n                        if (container.scrollTop <= 0) {\n                            ev.preventDefault();\n                        }\n                    }\n                    ev.stopPropagation();\n                    ev.stopImmediatePropagation();\n                });\n                this.on(\"resize\", function () {\n                    var scrollbarWidth = container.offsetWidth - container.clientWidth;\n                    container.style.width = _this._.offsetWidth + scrollbarWidth + \"px\";\n                    _this.checkScroll();\n                });\n                container.onscroll = function (e) {\n                    _this.checkScroll();\n                };\n                function findLine(elem) {\n                    if (!elem)\n                        return null;\n                    if ($(elem).hasClass(\"tui-line\"))\n                        return elem;\n                    else\n                        return findLine(elem.parentElement);\n                }\n                $(container).on(\"mousedown keydown\", function (e) {\n                    var elem = e.target || e.srcElement;\n                    elem = findLine(elem);\n                    if (e.type === \"keydown\" && e.keyCode != tui.browser.KeyCode.ENTER)\n                        return;\n                    if (elem) {\n                        var $elem = $(elem);\n                        if ($elem.hasClass(\"tui-expand\")) {\n                            _this.collapse(elem);\n                        }\n                        else if ($elem.hasClass(\"tui-collapse\")) {\n                            _this.expand(elem);\n                        }\n                        else {\n                            _this.active(elem);\n                            if (_this.fire(\"select\", elem.item) === false)\n                                return;\n                            if (_this.get(\"openPath\")) {\n                                var item = elem.item;\n                                if (item && item.path) {\n                                    window.location.href = item.path;\n                                }\n                            }\n                        }\n                    }\n                });\n            };\n            Navigator.prototype.collapse = function (elem) {\n                var _this = this;\n                var $elem = $(elem);\n                elem.item.expand = false;\n                if (!$elem.hasClass(\"tui-collapse\")) {\n                    $elem.removeClass(\"tui-expand\");\n                    $elem.addClass(\"tui-collapse\");\n                    $elem.next().animate({ height: \"toggle\" }, function () {\n                        _this.checkScroll();\n                    });\n                }\n            };\n            Navigator.prototype.expand = function (elem) {\n                var _this = this;\n                var $elem = $(elem);\n                elem.item.expand = true;\n                if (!$elem.hasClass(\"tui-expand\")) {\n                    $elem.removeClass(\"tui-collapse\");\n                    $elem.addClass(\"tui-expand\");\n                    $elem.next().animate({ height: \"toggle\" }, function () {\n                        _this.checkScroll();\n                    });\n                }\n            };\n            Navigator.prototype.active = function (elem) {\n                elem.focus();\n                if (this._activeItem)\n                    $(this._activeItem).removeClass(\"tui-active\");\n                if (this.get(\"selectable\")) {\n                    $(elem).addClass(\"tui-active\");\n                    this._activeItem = elem;\n                }\n            };\n            Navigator.prototype.drawItems = function (parent, items, level) {\n                for (var _i = 0, items_3 = items; _i < items_3.length; _i++) {\n                    var item = items_3[_i];\n                    var line = document.createElement(\"div\");\n                    line.item = item;\n                    var $line = $(line);\n                    $line.attr(\"unselectable\", \"on\");\n                    $line.attr(\"tabIndex\", \"0\");\n                    $line.addClass(\"tui-line\");\n                    $line.text(item.text);\n                    if (level > 0)\n                        $line.addClass(\"tui-child\");\n                    if (item.icon) {\n                        var icon = document.createElement(\"i\");\n                        icon.className = item.icon;\n                        line.insertBefore(icon, line.firstChild);\n                    }\n                    if (item.path)\n                        line.setAttribute(\"path\", item.path);\n                    if (item.name)\n                        line.setAttribute(\"name\", item.name);\n                    var space = document.createElement(\"span\");\n                    space.style.display = \"inline-block\";\n                    space.style.width = 20 * level + \"px\";\n                    line.insertBefore(space, line.firstChild);\n                    parent.appendChild(line);\n                    if (item.children && item.children.length > 0) {\n                        var subArea = document.createElement(\"div\");\n                        subArea.className = \"tui-sub\";\n                        if (item.expand) {\n                            $line.addClass(\"tui-expand\");\n                            subArea.style.display = \"block\";\n                        }\n                        else {\n                            $line.addClass(\"tui-collapse\");\n                            subArea.style.display = \"none\";\n                        }\n                        this.drawItems(subArea, item.children, level + 1);\n                        parent.appendChild(subArea);\n                    }\n                }\n            };\n            Navigator.prototype._activeBy = function (parent, key, value) {\n                for (var i = 0; i < parent.children.length; i++) {\n                    var node = parent.children[i];\n                    if ($(node).hasClass(\"tui-line\")) {\n                        if (node.item[key] === value) {\n                            this.active(node);\n                            return true;\n                        }\n                    }\n                    else if ($(node).hasClass(\"tui-sub\")) {\n                        if (this._activeBy(node, key, value)) {\n                            this.expand($(node).prev()[0]);\n                            return true;\n                        }\n                    }\n                }\n                return false;\n            };\n            Navigator.prototype.activeBy = function (key, value) {\n                var container = this._components[\"container\"];\n                this._activeBy(container, key, value);\n            };\n            Navigator.prototype.render = function () {\n                var items = this.get(\"items\");\n                var container = this._components[\"container\"];\n                container.innerHTML = \"\";\n                this.drawItems(container, items, 0);\n                this.checkScroll();\n            };\n            return Navigator;\n        }(widget.Widget));\n        widget.Navigator = Navigator;\n        widget.register(Navigator, \"navigator\");\n        widget.registerResize(\"navigator\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"base.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        var Scrollbar = (function (_super) {\n            __extends(Scrollbar, _super);\n            function Scrollbar() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            Scrollbar.prototype.initRestriction = function () {\n                var _this = this;\n                _super.prototype.initRestriction.call(this);\n                this.setRestrictions({\n                    \"total\": {\n                        \"get\": function () {\n                            var value = _this._data[\"total\"];\n                            if (typeof value !== \"number\" || isNaN(value) || value < 0)\n                                return 0;\n                            else\n                                return value;\n                        },\n                        \"set\": function (value) {\n                            if (typeof value !== \"number\" || isNaN(value))\n                                value = 0;\n                            if (value < 0)\n                                value = 0;\n                            value = Math.round(value);\n                            _this._data[\"total\"] = value;\n                            if (_this.get(\"value\") > value)\n                                _this._set(\"value\", value);\n                            if (_this.get(\"page\") > value)\n                                _this._set(\"page\", value);\n                        }\n                    },\n                    \"page\": {\n                        \"get\": function () {\n                            var value = _this._data[\"page\"];\n                            if (typeof value !== \"number\" || isNaN(value) || value < 1)\n                                return 1;\n                            else\n                                return value;\n                        },\n                        \"set\": function (value) {\n                            if (typeof value !== \"number\" || isNaN(value))\n                                value = 1;\n                            value = Math.round(value);\n                            if (value < 1)\n                                value = 1;\n                            if (value > _this.get(\"total\"))\n                                value = _this.get(\"total\");\n                            _this._data[\"page\"] = value;\n                        }\n                    },\n                    \"value\": {\n                        \"get\": function () {\n                            var value = _this._data[\"value\"];\n                            if (typeof value !== \"number\" || isNaN(value) || value < 0)\n                                return 0;\n                            else\n                                return value;\n                        },\n                        \"set\": function (value) {\n                            if (typeof value !== \"number\" || isNaN(value))\n                                value = 0;\n                            value = Math.round(value);\n                            if (value < 0)\n                                value = 0;\n                            if (value > _this.get(\"total\"))\n                                value = _this.get(\"total\");\n                            _this._data[\"value\"] = value;\n                        }\n                    },\n                    \"direction\": {\n                        \"get\": function () {\n                            var dir = _this._data[\"direction\"];\n                            if (dir !== \"vertical\" && dir !== \"horizontal\")\n                                return \"vertical\";\n                            else\n                                return dir;\n                        },\n                        \"set\": function (value) {\n                            if (value !== \"vertical\" && value !== \"horizontal\")\n                                return;\n                            _this._data[\"direction\"] = value;\n                        }\n                    }\n                });\n            };\n            Scrollbar.prototype.init = function () {\n                var _this = this;\n                var root$ = $(this._);\n                this._.innerHTML = \"<span class='tui-scroll-thumb'></span>\";\n                var btnThumb = this._components[\"thumb\"] = root$.children(\".tui-scroll-thumb\")[0];\n                root$.attr(\"unselectable\", \"on\");\n                $(this._).mousedown(function (e) {\n                    e.stopPropagation();\n                    e.preventDefault();\n                    var obj = e.target || e.srcElement;\n                    if (obj !== _this._) {\n                        return;\n                    }\n                    if (_this.get(\"total\") <= 0)\n                        return;\n                    var dir = _this.get(\"direction\");\n                    var pos, thumbLen;\n                    if (dir === \"vertical\") {\n                        pos = (typeof e.offsetY === \"number\" ? e.offsetY : e[\"originalEvent\"].layerY);\n                        thumbLen = btnThumb.offsetHeight;\n                    }\n                    else {\n                        pos = (typeof e.offsetX === \"number\" ? e.offsetX : e[\"originalEvent\"].layerX);\n                        thumbLen = btnThumb.offsetWidth;\n                    }\n                    var v = _this.posToValue(pos - thumbLen / 2);\n                    _this.set(\"value\", v);\n                    _this.fire(\"scroll\", { e: e, value: _this.get(\"value\"), type: \"mousedown\" });\n                    return false;\n                });\n                var mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? \"DOMMouseScroll\" : \"mousewheel\";\n                $(this._).on(mousewheelevt, function (e) {\n                    var ev = e.originalEvent;\n                    var delta = ev.detail ? ev.detail * (-1) : ev.wheelDelta;\n                    var page = _this.get(\"page\");\n                    //delta returns +120 when wheel is scrolled up, -120 when scrolled down\n                    var scrollSize = (Math.round(page / 2) > 1 ? Math.round(page / 2) : 1);\n                    var oldValue = _this.get(\"value\");\n                    if (delta <= -0) {\n                        _this.set(\"value\", oldValue + scrollSize);\n                    }\n                    else {\n                        _this.set(\"value\", oldValue - scrollSize);\n                    }\n                    if (oldValue !== _this.get(\"value\"))\n                        _this.fire(\"scroll\", { e: e, value: _this.get(\"value\"), type: \"mousewheel\" });\n                    e.stopPropagation();\n                    e.preventDefault();\n                });\n                var beginX = 0, beginY = 0, beginLeft = 0, beginTop = 0;\n                var dragThumb = function (e) {\n                    var diff = 0;\n                    var oldValue = _this.get(\"value\");\n                    var pos;\n                    var positions = tui.browser.getEventPosition(e);\n                    if (_this.get(\"direction\") === \"vertical\") {\n                        diff = positions[0].y - beginY;\n                        pos = beginTop + diff;\n                    }\n                    else {\n                        diff = positions[0].x - beginX;\n                        pos = beginLeft + diff;\n                    }\n                    _this.set(\"value\", _this.posToValue(pos));\n                    if (oldValue !== _this.get(\"value\")) {\n                        _this.fire(\"scroll\", { e: e, value: _this.get(\"value\"), type: \"drag\" });\n                    }\n                };\n                var dragEnd = function (e) {\n                    $(_this._).removeClass(\"tui-actived\");\n                    _this.fire(\"dragend\", { e: e, value: _this.get(\"value\") });\n                };\n                $(btnThumb).on(\"mousedown touchstart\", function (e) {\n                    if (e.which !== 1 && e.type !== \"touchstart\")\n                        return;\n                    var positions = tui.browser.getEventPosition(e);\n                    if (positions.length > 1)\n                        return;\n                    e.preventDefault();\n                    beginX = positions[0].x;\n                    beginY = positions[0].y;\n                    beginLeft = btnThumb.offsetLeft;\n                    beginTop = btnThumb.offsetTop;\n                    $(_this._).addClass(\"tui-actived\");\n                    widget.openDragMask(dragThumb, dragEnd);\n                    _this.fire(\"dragstart\", { e: e, value: _this.get(\"value\") });\n                });\n                this.on(\"resize\", function () {\n                    _this.render();\n                });\n                this.refresh();\n            };\n            Scrollbar.prototype.posToValue = function (pos) {\n                var btnThumb = this._components[\"thumb\"];\n                var total = this.get(\"total\");\n                if (total <= 0) {\n                    return 0;\n                }\n                var len = 0;\n                var val = 0;\n                if (this.get(\"direction\") === \"vertical\") {\n                    len = this._.clientHeight - btnThumb.offsetHeight;\n                    if (len <= 0)\n                        val = 0;\n                    else\n                        val = pos / len * total;\n                }\n                else {\n                    len = this._.clientWidth - btnThumb.offsetWidth;\n                    if (len <= 0)\n                        val = 0;\n                    else\n                        val = pos / len * total;\n                }\n                val = Math.round(val);\n                return val;\n            };\n            Scrollbar.prototype.valueToPos = function (value) {\n                var minSize = 20;\n                var total = this.get(\"total\");\n                var page = this.get(\"page\");\n                var vertical = (this.get(\"direction\") === \"vertical\");\n                if (total <= 0) {\n                    return { pos: 0, thumbLen: 0 };\n                }\n                var len = (vertical ? this._.clientHeight : this._.clientWidth);\n                var thumbLen = Math.round(page / total * len);\n                if (thumbLen < minSize)\n                    thumbLen = minSize;\n                if (thumbLen > len - 10)\n                    thumbLen = len - 10;\n                var scale = (value / total);\n                if (scale < 0)\n                    scale = 0;\n                if (scale > 1)\n                    scale = 1;\n                var pos = Math.round(scale * (len - thumbLen));\n                return {\n                    \"pos\": pos, \"thumbLen\": thumbLen\n                };\n            };\n            Scrollbar.prototype.render = function () {\n                var pos = this.valueToPos(this.get(\"value\"));\n                var vertical = (this.get(\"direction\") === \"vertical\");\n                var btnThumb = this._components[\"thumb\"];\n                if (vertical) {\n                    $(this._).removeClass(\"tui-horizontal\");\n                    $(this._).addClass(\"tui-vertical\");\n                    btnThumb.style.height = (pos.thumbLen > 0 ? pos.thumbLen : 0) + \"px\";\n                    btnThumb.style.top = pos.pos + \"px\";\n                    btnThumb.style.left = \"\";\n                    btnThumb.style.width = \"\";\n                }\n                else {\n                    $(this._).addClass(\"tui-horizontal\");\n                    $(this._).removeClass(\"tui-vertical\");\n                    btnThumb.style.width = (pos.thumbLen > 0 ? pos.thumbLen : 0) + \"px\";\n                    btnThumb.style.left = pos.pos + \"px\";\n                    btnThumb.style.top = \"\";\n                    btnThumb.style.height = \"\";\n                }\n            };\n            return Scrollbar;\n        }(widget.Widget));\n        widget.Scrollbar = Scrollbar;\n        widget.register(Scrollbar, \"scrollbar\");\n        widget.registerResize(\"scrollbar\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"selectBase.ts\" />\n/// <reference path=\"dialog.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        /**\n         * <tui:select>\n         * Attributes: data, list, tree, multiSelect, checkKey, nameKey, canSearch, search\n         * iconKey, valueKey\n         * Method: openSelect\n         * Events: change, click\n         */\n        var Select = (function (_super) {\n            __extends(Select, _super);\n            function Select() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            Select.prototype.initRestriction = function () {\n                var _this = this;\n                var list = widget.create(\"list\");\n                list._set(\"noMouseWheel\", true);\n                list.set(\"lineHeight\", Select.LIST_LINE_HEIGHT);\n                this._components[\"list\"] = list._;\n                _super.prototype.initRestriction.call(this);\n                this.setRestrictions({\n                    \"value\": {\n                        \"set\": function (value) {\n                            _this._data[\"value\"] = value;\n                            _this.updateTextByValue(list);\n                        }\n                    },\n                    \"data\": {\n                        \"set\": function (value) {\n                            list._set(\"data\", value);\n                            _this.updateTextByValue(list);\n                        },\n                        \"get\": function () {\n                            return list.get(\"data\");\n                        }\n                    },\n                    \"list\": {\n                        \"set\": function (value) {\n                            list._set(\"list\", value);\n                            _this.updateTextByValue(list);\n                        },\n                        \"get\": function () {\n                            return list.get(\"list\");\n                        }\n                    },\n                    \"tree\": {\n                        \"set\": function (value) {\n                            list._set(\"tree\", value);\n                            _this.updateTextByValue(list);\n                        },\n                        \"get\": function () {\n                            return list.get(\"tree\");\n                        }\n                    },\n                    \"activeRow\": {\n                        \"set\": function (value) {\n                            list.set(\"activeRow\", value);\n                            _this.updateTextByValue(list);\n                        },\n                        \"get\": function () {\n                            return list.get(\"activeRow\");\n                        }\n                    },\n                    \"selection\": {\n                        \"set\": function (value) { },\n                        \"get\": function () {\n                            return _this.getSelection(list);\n                        }\n                    },\n                    \"activeRowData\": {\n                        \"set\": function (value) { },\n                        \"get\": function () {\n                            return list.get(\"activeRowData\");\n                        }\n                    },\n                    \"multiSelect\": {\n                        \"set\": function (value) {\n                            list._set(\"checkable\", value);\n                        },\n                        \"get\": function () {\n                            return list.get(\"checkable\");\n                        }\n                    },\n                    \"checkKey\": {\n                        \"set\": function (value) {\n                            list._set(\"checkKey\", value);\n                        },\n                        \"get\": function () {\n                            return list.get(\"checkKey\");\n                        }\n                    },\n                    \"nameKey\": {\n                        \"set\": function (value) {\n                            list._set(\"nameKey\", value);\n                        },\n                        \"get\": function () {\n                            return list.get(\"nameKey\");\n                        }\n                    },\n                    \"iconKey\": {\n                        \"set\": function (value) {\n                            list._set(\"iconKey\", value);\n                        },\n                        \"get\": function () {\n                            return list.get(\"iconKey\");\n                        }\n                    },\n                    \"valueKey\": {\n                        \"set\": function (value) {\n                            list._set(\"valueKey\", value);\n                        },\n                        \"get\": function () {\n                            return list.get(\"valueKey\");\n                        }\n                    },\n                    \"showCount\": {\n                        \"get\": function () {\n                            var count = _this._data[\"showCount\"];\n                            if (typeof count === \"number\" && !isNaN(count))\n                                return count;\n                            else\n                                return 8;\n                        }\n                    },\n                    \"canSearch\": {\n                        \"get\": function () {\n                            var value = _this._data[\"canSearch\"];\n                            if (typeof value === tui.UNDEFINED || value === null)\n                                return false;\n                            else\n                                return !!value;\n                        },\n                        \"set\": function (value) {\n                            _this._data[\"canSearch\"] = !!value;\n                        }\n                    }\n                });\n            };\n            Select.prototype.changeSize = function () {\n                var list = widget.get(this._components[\"list\"]);\n                var popup = widget.get(this._components[\"popup\"]);\n                var count = list.get(\"data\").length();\n                if (count > this.get(\"showCount\"))\n                    count = this.get(\"showCount\");\n                list._.style.height = count * Select.LIST_LINE_HEIGHT + \"px\";\n                popup.render();\n            };\n            ;\n            Select.prototype.getSelection = function (list) {\n                var textKey = this.get(\"textKey\");\n                if (textKey === null)\n                    textKey = this.get(\"nameKey\");\n                var valueKey = this.get(\"valueKey\");\n                var val = this.get(\"value\");\n                if (val === null)\n                    return null;\n                if (!this.get(\"multiSelect\")) {\n                    var selectedItem_1 = null;\n                    list.iterate(function (item, path, treeNode) {\n                        var nodeValue = item[valueKey];\n                        if (nodeValue === val) {\n                            selectedItem_1 = item;\n                            return false;\n                        }\n                        return true;\n                    });\n                    return selectedItem_1;\n                }\n                else {\n                    if (!(val instanceof Array))\n                        val = [val];\n                    var selectedItems_1 = [];\n                    list.iterate(function (item, path, treeNode) {\n                        var nodeValue = item[valueKey];\n                        if (val.indexOf(nodeValue) >= 0) {\n                            selectedItems_1.push(item);\n                        }\n                        return true;\n                    });\n                    return selectedItems_1;\n                }\n            };\n            Select.prototype.updateTextByValue = function (list) {\n                var textKey = this.get(\"textKey\");\n                if (textKey === null)\n                    textKey = this.get(\"nameKey\");\n                var selected = this.getSelection(list);\n                if (selected == null)\n                    this._set(\"text\", null);\n                else if (selected instanceof Array)\n                    this._set(\"text\", selected.reduce(function (s, v, i) {\n                        return i > 0 ? s + \", \" + v[textKey] : v[textKey];\n                    }, \"\"));\n                else\n                    this._set(\"text\", selected[textKey]);\n            };\n            Select.prototype.init = function () {\n                var _this = this;\n                _super.prototype.init.call(this);\n                this.setInit(\"iconRight\", \"fa-caret-down\");\n                var list = widget.get(this._components[\"list\"]);\n                var container = document.createElement(\"div\");\n                var searchbar = container.appendChild(document.createElement(\"div\"));\n                searchbar.className = \"tui-select-searchbar\";\n                var searchBox = widget.create(\"input\");\n                searchBox._set(\"clearable\", true);\n                searchBox._set(\"iconLeft\", \"fa-search\");\n                searchbar.appendChild(searchBox._);\n                container.appendChild(list._);\n                var toolbar = container.appendChild(document.createElement(\"div\"));\n                toolbar.className = \"tui-select-toolbar\";\n                var popup = widget.get(this._components[\"popup\"]);\n                popup._set(\"content\", container);\n                this._components[\"searchbar\"] = searchbar;\n                this._components[\"toolbar\"] = toolbar;\n                this._components[\"searchBox\"] = searchBox._;\n                list._.style.width = \"inherit\";\n                list._.style.display = \"block\";\n                list._.style.borderWidth = \"0\";\n                list.on(\"expand collapse update\", function () {\n                    _this.changeSize();\n                });\n                list.on(\"rowclick keyselect\", function (e) {\n                    var rowData = list.get(\"activeRowData\");\n                    if (!_this.get(\"multiSelect\")) {\n                        var item;\n                        if (list.get(\"dataType\") === \"tree\")\n                            item = rowData.item;\n                        else\n                            item = rowData;\n                        // this._set(\"text\", item[list.get(\"nameKey\")]);\n                        _this.set(\"value\", item[list.get(\"valueKey\")]);\n                        _this.fire(\"change\", { e: e, value: _this.get(\"value\"), text: _this.get(\"text\") });\n                        if (e.event === \"rowclick\") {\n                            _this.closeSelect();\n                            _this._.focus();\n                            _this.fire(\"click\", { e: e, value: _this.get(\"value\"), text: _this.get(\"text\") });\n                        }\n                    }\n                });\n                searchBox.on(\"enter change\", function (e) {\n                    var searchValue = searchBox.get(\"value\");\n                    if (searchValue == null || searchValue.length == 0) {\n                        list.get(\"data\").setFilter(null);\n                    }\n                    else {\n                        list.get(\"data\").setFilter([{\n                                key: _this.get(\"nameKey\"),\n                                value: searchValue\n                            }]);\n                    }\n                    list._set(\"activeRow\", null);\n                    list.scrollTo(0);\n                    if (!_this.get(\"multiSelect\") && _this.get(\"value\") !== null) {\n                        list.activeTo(_this.get(\"valueKey\"), _this.get(\"value\"));\n                    }\n                });\n                $(toolbar).click(function (e) {\n                    var obj = (e.target || e.srcElement);\n                    var name = obj.getAttribute(\"name\");\n                    if (name === \"selectAll\") {\n                        list.selectAll();\n                    }\n                    else if (name === \"deselectAll\") {\n                        list.deselectAll();\n                    }\n                    else if (name === \"ok\") {\n                        _this.set(\"value\", list.get(\"checkedValues\"));\n                        // this.set(\"text\", list.get(\"checkedNames\").join(\", \"));\n                        _this.fire(\"change\", { e: e, value: _this.get(\"value\"), text: _this.get(\"text\") });\n                        _this.closeSelect();\n                        _this._.focus();\n                        _this.fire(\"click\", { e: e, value: _this.get(\"value\"), text: _this.get(\"text\") });\n                    }\n                    else if (name === \"clear\") {\n                        // this._set(\"text\", null);\n                        _this.set(\"value\", null);\n                        _this.fire(\"change\", { e: e, value: _this.get(\"value\"), text: _this.get(\"text\") });\n                        _this.closeSelect();\n                        _this._.focus();\n                        _this.fire(\"click\", { e: e, value: _this.get(\"value\"), text: _this.get(\"text\") });\n                    }\n                });\n            };\n            Select.prototype.openSelect = function () {\n                var _this = this;\n                var list = widget.get(this._components[\"list\"]);\n                var popup = widget.get(this._components[\"popup\"]);\n                var minWidth = this._.offsetWidth - 2;\n                if (minWidth < 250)\n                    minWidth = 250;\n                popup._.style.minWidth = minWidth + \"px\";\n                //popup._set(\"content\", list._);\n                var toolbar = this._components[\"toolbar\"];\n                var searchbar = this._components[\"searchbar\"];\n                var searchBox = widget.get(this._components[\"searchBox\"]);\n                if (this.get(\"canSearch\")) {\n                    searchbar.style.display = \"block\";\n                }\n                else\n                    searchbar.style.display = \"none\";\n                var checkButtons = \"<a name='selectAll'>\" + tui.str(\"Select all\") + \"</a> | \" +\n                    \"<a name='deselectAll'>\" + tui.str(\"Deselect all\") +\n                    \"</a> | <a name='ok'><i class='fa fa-check'></i> \" + tui.str(\"OK\") + \"</a>\";\n                var clearButton = \"<a name='clear'><i class='fa fa-trash-o'></i> \" + tui.str(\"Clear\") + \"</a>\";\n                var multiSelect = this.get(\"multiSelect\");\n                var clearable = !multiSelect && this.get(\"clearable\");\n                toolbar.style.display = \"\";\n                if (multiSelect)\n                    toolbar.innerHTML = checkButtons;\n                else if (clearable)\n                    toolbar.innerHTML = clearButton;\n                else\n                    toolbar.style.display = \"none\";\n                popup.open(this._);\n                setTimeout(function () {\n                    if (_this.get(\"canSearch\"))\n                        searchBox.render();\n                    list._.focus();\n                    list.render();\n                    if (tui.ieVer > 0 && tui.ieVer <= 9) {\n                        // FIX ie bug.\n                        setTimeout(function () {\n                            list.render();\n                        });\n                    }\n                    if (!_this.get(\"multiSelect\")) {\n                        if (_this.get(\"value\") !== null) {\n                            list.activeTo(_this.get(\"valueKey\"), _this.get(\"value\"));\n                        }\n                        else {\n                            list._set(\"activeRow\", null);\n                            list.scrollTo(0);\n                        }\n                    }\n                    else {\n                        var value = _this.get(\"value\");\n                        list.set(\"checkedValues\", value);\n                    }\n                    _this.changeSize();\n                });\n            };\n            return Select;\n        }(widget.SelectPopupBase));\n        Select.LIST_LINE_HEIGHT = 28;\n        widget.Select = Select;\n        widget.register(Select, \"select\");\n        var DialogSelect = (function (_super) {\n            __extends(DialogSelect, _super);\n            function DialogSelect() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            DialogSelect.prototype.openSelect = function () {\n                this.fire(\"open\", this.dialog);\n                this.dialog.set(\"title\", this.get(\"title\"));\n                this.dialog.open(\"ok#tui-primary\");\n            };\n            DialogSelect.prototype.initChildren = function (childNodes) {\n                var _this = this;\n                _super.prototype.initChildren.call(this, childNodes);\n                this.dialog = widget.create(\"dialog\");\n                this.content = document.createElement(\"div\");\n                childNodes.forEach(function (n) {\n                    if (widget.getFullName(n) !== \"tui:verify\")\n                        _this.content.appendChild(n);\n                });\n                this.dialog.setContent(this.content);\n                widget.init(this.content);\n            };\n            DialogSelect.prototype.createPopup = function () {\n                var _this = this;\n                this.dialog.on(\"btnclick\", function () {\n                    _this.fire(\"close\");\n                    _this.dialog.close();\n                });\n                return this.dialog;\n            };\n            DialogSelect.prototype.init = function () {\n                _super.prototype.init.call(this);\n                this.setInit(\"iconRight\", \"fa-pencil\");\n            };\n            return DialogSelect;\n        }(widget.SelectBase));\n        widget.DialogSelect = DialogSelect;\n        widget.register(DialogSelect, \"dialog-select\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"inputBase.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        /**\n         * <input>\n         * Attributes: value, text, type, iconLeft, iconRight, autoValidate\n         * Events: input, change, left-icon-mousedown, right-icon-mousedown, left-icon-click, right-icon-click\n         */\n        var Textarea = (function (_super) {\n            __extends(Textarea, _super);\n            function Textarea() {\n                return _super !== null && _super.apply(this, arguments) || this;\n            }\n            Textarea.prototype.initRestriction = function () {\n                var _this = this;\n                _super.prototype.initRestriction.call(this);\n                var textbox = this._components[\"textbox\"] = document.createElement(\"textarea\");\n                textbox.setAttribute(\"wrap\", \"physical\");\n                this.setRestrictions({\n                    \"value\": {\n                        \"set\": function (value) {\n                            textbox.value = value;\n                            _this._isEmpty = (textbox.value === \"\");\n                        },\n                        \"get\": function () {\n                            return textbox.value;\n                        }\n                    },\n                    \"text\": {\n                        \"set\": function (value) {\n                            _this._set(\"value\", value);\n                        },\n                        \"get\": function () {\n                            return _this.get(\"value\");\n                        }\n                    }\n                });\n            };\n            Textarea.prototype.onInput = function (textbox, e) {\n                this.updateEmptyState(textbox.value === \"\");\n                var oldHeight = tui.browser.getCurrentStyle(textbox).height;\n                textbox.style.height = \"\";\n                if (this._valid && textbox.scrollHeight !== this._lastTextHeight)\n                    this.render();\n                else\n                    textbox.style.height = oldHeight;\n                this.reset();\n                this.fire(\"input\", e);\n            };\n            Textarea.prototype.init = function () {\n                var _this = this;\n                var $root = $(this._);\n                var placeholder = this._components[\"placeholder\"] = document.createElement(\"span\");\n                var textbox = this._components[\"textbox\"];\n                var iconInvalid = this._components[\"iconInvalid\"] = document.createElement(\"i\");\n                iconInvalid.className = \"tui-invalid-icon\";\n                placeholder.className = \"tui-placeholder\";\n                placeholder.setAttribute(\"unselectable\", \"on\");\n                this._.appendChild(placeholder);\n                this._.appendChild(textbox);\n                this._.appendChild(iconInvalid);\n                $(textbox).focus(function () {\n                    $root.addClass(\"tui-active\");\n                });\n                $(textbox).blur(function () {\n                    $root.removeClass(\"tui-active\");\n                    if (_this.get(\"disable\"))\n                        return;\n                    if (_this.get(\"autoValidate\")) {\n                        _this.validate();\n                    }\n                });\n                if (tui.ieVer > 0 && tui.ieVer < 9) {\n                    $(textbox).on(\"propertychange\", function (e) {\n                        if (e.originalEvent.propertyName !== 'value')\n                            return;\n                        _this.onInput(textbox, e);\n                    });\n                }\n                else {\n                    if (tui.ieVer === 9) {\n                        $(textbox).on(\"keyup\", function (e) {\n                            if (e.keyCode = tui.browser.KeyCode.BACK)\n                                _this.onInput(textbox, e);\n                        });\n                    }\n                    $(textbox).on(\"input\", function (e) {\n                        _this.onInput(textbox, e);\n                    });\n                }\n                $(textbox).on(\"change\", function (e) {\n                    _this.fire(\"change\", e);\n                });\n                $root.mousedown(function (e) {\n                    if (_this.get(\"disable\"))\n                        return;\n                    var obj = e.target || e.srcElement;\n                    if (obj === textbox) {\n                        return;\n                    }\n                    setTimeout(function () {\n                        textbox.focus();\n                    }, 0);\n                });\n                $root.click(function (e) {\n                    if (_this.get(\"disable\"))\n                        return;\n                    var obj = e.target || e.srcElement;\n                    if (obj === textbox) {\n                        return;\n                    }\n                });\n                this.on(\"resize\", function () {\n                    _this.render();\n                });\n            };\n            Textarea.prototype.focus = function () {\n                var textbox = this._components[\"textbox\"];\n                textbox.focus();\n            };\n            Textarea.prototype.render = function () {\n                this._.scrollLeft = 0;\n                var $root = $(this._);\n                var textbox = this._components[\"textbox\"];\n                var iconInvalid = this._components[\"iconInvalid\"];\n                var placeholder = this._components[\"placeholder\"];\n                if (this.get(\"disable\")) {\n                    $root.addClass(\"tui-disable\");\n                    textbox.setAttribute(\"readonly\", \"readonly\");\n                }\n                else {\n                    $root.removeClass(\"tui-disable\");\n                    textbox.removeAttribute(\"readonly\");\n                }\n                var marginLeft = widget.Input.PADDING;\n                var marginRight = widget.Input.PADDING;\n                if (!this._valid) {\n                    $root.addClass(\"tui-invalid\");\n                    iconInvalid.style.display = \"\";\n                    iconInvalid.style.right = \"0px\";\n                }\n                else {\n                    $root.removeClass(\"tui-invalid\");\n                    iconInvalid.style.display = \"none\";\n                }\n                textbox.style.height = \"\";\n                this._lastTextHeight = textbox.scrollHeight;\n                if (this._lastTextHeight < 46)\n                    this._lastTextHeight = 46;\n                textbox.style.height = this._lastTextHeight + 2 + \"px\";\n                this._.style.height = this._lastTextHeight + 4 + \"px\";\n                textbox.style.left = marginLeft + \"px\";\n                var width = this._.clientWidth - iconInvalid.offsetWidth - marginLeft - marginRight;\n                if (width < 0)\n                    width = 0;\n                textbox.style.width = width + \"px\";\n                var phText = this.get(\"placeholder\");\n                var showPh = phText && !this.get(\"value\");\n                if (showPh) {\n                    $(placeholder).text(phText);\n                    placeholder.style.left = marginLeft + \"px\";\n                    placeholder.style.width = textbox.style.width;\n                    placeholder.style.display = \"\";\n                }\n                else {\n                    placeholder.style.display = \"none\";\n                }\n                if (!this._valid && this._invalidMessage) {\n                    this._set(\"follow-tooltip\", this._invalidMessage);\n                }\n                else {\n                    this._set(\"follow-tooltip\", null);\n                }\n            };\n            return Textarea;\n        }(widget.InputBase));\n        widget.Textarea = Textarea;\n        widget.register(Textarea, \"textarea\");\n        widget.registerResize(\"textarea\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"../core.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        var _tooltip = document.createElement(\"span\");\n        _tooltip.className = \"tui-tooltip\";\n        _tooltip.setAttribute(\"unselectable\", \"on\");\n        var _tooltipTarget = null;\n        function showTooltip(target, tooltip, pos, update) {\n            function show() {\n                if (pos.x + _tooltip.offsetWidth > $(window).width()) {\n                    pos.x = $(window).width() - _tooltip.offsetWidth;\n                }\n                _tooltip.style.left = pos.x + \"px\";\n                _tooltip.style.top = pos.y + 25 + \"px\";\n            }\n            if (target === _tooltipTarget || target === _tooltip) {\n                if (update) {\n                    show();\n                }\n                return;\n            }\n            _tooltip.style.width = \"\";\n            _tooltip.style.whiteSpace = \"nowrap\";\n            if (target.hasAttribute(\"html-tooltip\"))\n                _tooltip.innerHTML = tooltip;\n            else\n                $(_tooltip).text(tooltip);\n            document.body.appendChild(_tooltip);\n            _tooltipTarget = target;\n            if (_tooltip.scrollWidth > _tooltip.clientWidth) {\n                _tooltip.style.whiteSpace = \"normal\";\n            }\n            else\n                _tooltip.style.whiteSpace = \"nowrap\";\n            _tooltip.style.width = $(_tooltip).width() + \"px\";\n            show();\n        }\n        widget.showTooltip = showTooltip;\n        function closeTooltip() {\n            if (_tooltip.parentNode)\n                _tooltip.parentNode.removeChild(_tooltip);\n            _tooltip.innerHTML = \"\";\n            _tooltip.style.width = \"\";\n            _tooltipTarget = null;\n        }\n        widget.closeTooltip = closeTooltip;\n        var _tooltipTimer = null;\n        function whetherShowTooltip(target, e) {\n            if (tui.browser.isAncestry(target, _tooltip))\n                return;\n            var obj = target;\n            while (obj) {\n                if (!obj.getAttribute) {\n                    obj = null;\n                    break;\n                }\n                var tooltip = obj.getAttribute(\"follow-tooltip\"); // high priority\n                if (tooltip) {\n                    showTooltip(obj, tooltip, { x: e.clientX, y: e.clientY }, true);\n                    return;\n                }\n                else {\n                    tooltip = obj.getAttribute(\"tooltip\");\n                    if (tooltip) {\n                        closeTooltip();\n                        _tooltipTimer = setTimeout(function () {\n                            showTooltip(obj, tooltip, { x: e.clientX, y: e.clientY }, false);\n                        }, 500);\n                        return;\n                    }\n                    else\n                        obj = obj.parentElement;\n                }\n            }\n            if (!obj)\n                closeTooltip();\n        }\n        widget.whetherShowTooltip = whetherShowTooltip;\n        function whetherCloseTooltip(target) {\n            if (target !== _tooltipTarget && target !== _tooltip) {\n                closeTooltip();\n            }\n        }\n        widget.whetherCloseTooltip = whetherCloseTooltip;\n        var _hoverElement;\n        $(window.document).mousemove(function (e) {\n            clearTimeout(_tooltipTimer);\n            _hoverElement = e.target || e.toElement;\n            if (e.button === 0 && (e.which === 1 || e.which === 0)) {\n                whetherShowTooltip(_hoverElement, e);\n            }\n        });\n        $(window).scroll(function () { closeTooltip(); });\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n\n//# sourceMappingURL=tui2.js.map\n"]}