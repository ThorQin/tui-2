{"version":3,"sources":["tui2.js"],"names":["__extends","this","d","b","__","constructor","p","hasOwnProperty","prototype","Object","create","lastTime","vendors","x","length","window","requestAnimationFrame","cancelAnimationFrame","callback","currTime","Date","getTime","timeToCall","Math","max","id","setTimeout","clearTimeout","tui","dict","lang","dictionary","replace","toLowerCase","translator","_dict","Translator","k","str","translate","cloneInternal","obj","excludeProperties","UNDEFINED","Array","newArray","idx","indexOf","push","newObj","clone","$","trim","JSON","parse","stringify","undefined","navigator","language","browserLanguage","userLanguage","tuid","EventObject","_events","bind","eventName","handler","atFirst","handlers","i","splice","unbind","on","envs","split","v","once","isOnce","off","offAll","key","fire","data","wildcardHandlers","concat","eventInfo","event","removeArray","val","call","ieVer","rv","appName","ua","userAgent","re","RegExp","exec","parseFloat","$1","ffVer","success","notmodified","error","timeout","abort","parsererror","ok","close","cancel","accept","agree","reject","yes","no","text","parseBoolean","value","isNaN","String","format","token","params","_i","arguments","formatrg","toDashSplit","word","buffer","c","charAt","code","charCodeAt","toCamel","strict","upperFlag","toUpperCase","paddingNumber","min","alignLeft","result","abs","substr","getUrlParam","url","regex","results","decodeURIComponent","getUrlAnchor","anchor","match","isAbsUrl","getBaseUrl","matcher","prefix","pos","substring","lastIndexOf","joinUrl","urls","_a","urls_1","u","service","service_1","parseParameters","fn","desc","matched","toString","use","argv","map","s","get","apply","getName","path","begin","end","load","services","names","_serviceReady","tasks","name","ajax","getFunction","when","done","register","ready","fail","Service","_constructor","_services","name_1","service_2","_readyCallbacks_1","_readyCallbacks","cb","onReady","_super","widget","getEventPosition","e","positions","originalEvent","changedTouches","touch","clientX","y","clientY","openDragMask","onMove","onClose","closeDragMask","_maskOpened","_mask","setCapture","document","browser","removeNode","preventDefault","innerHTML","className","style","cursor","removeAttribute","body","appendChild","createElement","setAttribute","onselectstart","mousewheelevt","test","ev","stopPropagation","widget_1","parseValue","eval","console","nodeName","widgetRegistration","getClassName","__widget__","elem","getElementById","namedWidgets","type","initParam","TypeError","Error","element","set","func","getFullName","targetElem","scopeName","init","parent","initFunc","searchInitCtrls","childNodes","node","nodeType","item","initSet","initSet_1","widget_3","refresh","widget_2","search","p1","p2","searchElem","widget_4","filter","searchArea","registerResize","resizeRegistration","WidgetBase","_data","_rs","setRestriction","propCtrl","setRestrictions","restrictions","render","getComponent","dataStr","getAttribute","tmpData","_set","attributes","attr","names_1","name_2","removeNamedItem","defaultValue","setInit","Widget","root","_lastWidth","_lastHeight","_components","_","initRestriction","childNodes_1","initChildren","appendTo","detach","_this","oldId","parentNode","disable","parent_1","group","Group","tooltip","follow-tooltip","testResize","isInDoc","offsetWidth","offsetHeight","focus","Item","detectResize","nodes","getElementsByTagName","j","reorder","dialogStack","insertBefore","dlg","remove","index","removeChild","getParent","disableSelect","Dialog","_sizeTimer","_contentSize","_moved","_init","div","childNodes_2","root$","html","titleBar","children","contentDiv","buttonBar","closeIcon","content","onclick","o","target","srcElement","dialogX","offsetLeft","dialogY","offsetTop","beginX","beginY","winSize","width","height","l","t","left","top","setContent","display","setButtons","buttonDef","_loop_1","name_3","pair","btn","button","names_2","open","css","position","setInterval","scrollHeight","scrollWidth","clearInterval","titleText","maxHeight","maxWidth","outerHeight","box","centX","centY","keyCode","KeyCode","ESCAPE","TAB","isPosterity","activeElement","resize","makeContent","message","makeDialog","title","esc","addClass","msgbox","infobox","okbox","errbox","warnbox","askbox","buttonName","waitbox","waitDlg","refCount","waitMsg","closed","setMessage","progressbox","cancelProc","send","method","options","deffered","Deferred","ajaxData","contentType","complete","jqXHR","status","respJson","getResponseHeader","respVal","responseJSON","responseText","resolve","respText","plainType","processData","post","post_","silent","get_","getScript","xhr","XMLHttpRequest","onreadystatechange","readyState","getHtmlBody","TAG","lastIndex","m","bodyStart","bodyEnd","tag","SCRIPT_END","scriptEnd","getBody","child","param","ajaxSetup","xhrFields","withCredentials","$ajax","$post","$post_","$get","$get_","backupScrollPosition","BackupedScrollPosition","focusWithoutScroll","setActive","backup","restore","scrollToElement","distance","useAnimation","param_1","getWindowScrollElement","animate","scrollTop","offset","toElement","withParentDiv","el","firstChild","toHTML","toSafeText","args","nodeText","createTextNode","buf","nodeValue","getNodeText","setNodeText","getNodeOwnText","getRectOfParent","getRectOfPage","getRectOfScreen","$doc","scrollLeft","getTopBody","getWindow","ownerDocument","defaultView","parentWindow","documentElement","keepTopProc","scrollWindow","keepTopList_1","keepTopList","rect","oldPosition","oldTop","oldLeft","oldWidth","oldZIndex","zIndex","clientWidth","itemLeft","keepTop","keepToTop","cancelKeepToTop","newList","keepTopList_2","getCurrentStyle","currentStyle","getComputedStyle","isLButton","which","banBackspace","ban","vReadOnly","readOnly","vDisabled","disabled","flag1","flag2","cancelDefault","returnValue","cancelBubble","isAncestry","isFireInside","parentElement","saveCookie","expires","domain","secure","today","setTime","expires_date","cookie","encodeURIComponent","toUTCString","loadCookie","arr","deleteCookie","saveData","sessionOnly","storage","sessionStorage","localStorage","setItem","loadData","getItem","deleteData","removeItem","accelerate","ctrlKey","altKey","shiftKey","metaKey","_accMap","addAccelerate","actionId","deleteAccelerate","reg","r","location","allFingers","touches","touchList","identifier","setInnerHtml","backupInfo","scroll","keydown","$text","hashChange","hash","state","_rules","matchRule","_rules_1","_rules_2","_handler","startRouter","rules","stopRouter","fileFromPath","file","getExt","createUploader","container","Uploader","_settings","action","multiple","autoSubmit","_container","_input","setOptions","getOptions","createIframe","iframe","doc","contentDocument","frames","charset","createForm","settings","form","createInput","input","right","margin","padding","opacity","fontSize","fontFamily","fileExt","ext","clearInput","submit","overflow","blur","deleteInput","getInput","processResponse","toDeleteFlag","src","response","normalize","responseObj","fireError","fileId","fileName","fireInvalidError","errorMessage","submitV5","extraData","fd","FormData","files","append","upload","addEventListener","lengthComputable","percentComplete","round","loaded","total","statusText","submitV4","prop","ds","filter_1","f","sort","order","treeData","a","order_1","aVal","bVal","DSBase","_finalData","_order","_filter","setOrder","build","getOrder","setFilter","getFilter","List","array","completely","RemoteList","cacheSize","_cache1","_cache2","_length","_cacheSize","reset","size","getFromCache","page","getIndexPage","_fillCache","rder","ceil","cache","update","TreeBase","_index","_rawData","getConfig","_config","getRawData","findNodeIndex","expandItems","items","level","items_1","expand","hasChild","getExpandCount","delCount","children_1","appendNodes","collapse","Tree","config","iterate_1","items_2","RemoteTree","_querying","time","now","timespan","seconds","beg","floor","h","dateDiff","dt1","dt2","unit","d1","d2","diff","symbol","toLocaleLowerCase","NaN","dateAdd","dt","tm","getFullYear","getMonth","getDate","getHours","mi","getMinutes","getSeconds","ms","getMilliseconds","totalMonth","newDate","totalDaysOfMonth","dayOfYear","parseDateInternal","dtStr","matchEnum","enumArray","join","values","matchNumber","len","num","parseInt","mapping","gcount","isUTC","rule","y+","M+","shortMonths","months","d+","D+","h+","H+","m+","s+","[qQ]+","S+","E+","shortWeeks","weeks","a|A","z+","tz","Z","\"[^\"]*\"|'[^']*'","[^yMmdDhHsSqEaAzZ'\"]+","parseCount","hour","year","getUTCFullYear","month","getUTCMonth","date","getUTCDate","ampm","h12","minute","second","millisecond","getTimezoneOffset","setUTCFullYear","setUTCMonth","setUTCDate","setUTCHours","setUTCMinutes","setUTCSeconds","setUTCMilliseconds","parseDate","formatDate","dateFmt","fullYear","hours","getUTCHours","minutes","getUTCMinutes","getUTCSeconds","milliseconds","getUTCMilliseconds","day","getUTCDay","getDay","q+","A","regexp","source","z","Button","checked","tristate","$root","unselectable","mousedown","mouseup","keyup","onClick","groupName","result_1","click","removeClass","removeAttr","Check","Radio","formatNumber","maxValue","setText","tb","line","column","cell","rows","cells","innerText","Calendar","setFullYear","setMonth","setDate","setHours","setMinutes","setSeconds","getMaxValue","tabIndex","insertRow","insertCell","timebar","getInputTime","timebar$","o$","LEFT","RIGHT","UP","select","DOWN","KEY_0","KEY_9","_lastInputTime","newTime","hasClass","prevMonth","prevYear","nextYear","nextMonth","onPicked","dblclick","oldTime","makeTime","proc","firstDay","firstWeek","daysOfMonth","offsetMonth","preMonthDay","valueOf","childNodes_3","children_2","children_3","result_2","ButtonGroup","check","children_4","children_5","children_6","widget_5","Component","checkReady","hasHandler","hasSrc","_scriptReady","_htmlReady","_changed","_childrenInit","_noReadyCount","_fn","oldValue","loadComponents","parentUrl","getParentUrl","getNodeName","href","widget_6","name_4","fullName","","forEach","n","VALIDATORS","*email","*chinese","*url","*digital","*integer","*float","*number","*currency","*date","*key","*any","InputBase","_valid","_invalidMessage","validators","childNodes_4","validator","updateEmptyState","empty","_isEmpty","validate","validator_1","imaxLen","ival","iminLen","imax","imin","other","otherText","valid","SelectBase","_inSelection","closeSelect","popup","createPopup","label","iconRight","iconInvalid","clearButton","openSelect","keypress","charCode","SPACE","noValue","PADDING","SelectPopupBase","DatePicker","calendar","timeBar","toolbar","borderWidth","todayButton","clearable","outline","File","_uploader","onblur","Frame","_cache","_go","go","vval","Grid","_setupHeadMoveListener","_columnWidths","_vLines","_handlers","updateCallback","me","drawContent","selectable","lineHeight","LINE_HEIGHT","dataType","_vbar","_hbar","list","tree","columns","clearBuffer","activeRow","_buffer","lines","row","activeRowData","_tuid","head","direction","createStyleSheet","_gridStyle","computeHOffset","delta","detail","wheelDelta","step","scrollSize","lastPos","scrollX","lastSpeed","scrollY","inTouched","targetTouches","pageX","pageY","hittestTimer","movePos","moveX","moveY","currentTime","spanTime","keepMove","timestamp","srcX","clientHeight","mask","initColumnWidth","computeScroll","computeColumnWidth","drawHeader","hittest","col","testLine","checkKey","drawLine","ENTER","scrollTo","PRIOR","_dispLines","NEXT","HOME","END","sortable","sortType","setSortFlag","iterate","iterateItem","treeItem","childrenKey","rawData","listItem","activeTo","dataKey","matchPath","treeNode","searchPath","searchLevel","found","pop","i_1","i_2","computeWidth","contentWidth","CELL_SPACE","vScroll","vEnable","hScroll","hEnable","_contentHeight","_contentWidth","computeV","first","realClientHeight","shouldEnable","computeH","realClientWidth","dispHeight","lineData","isTree","tipKey","span","arrow","iconKey","prefixContent","prefixKey","prefixSpan","suffixContent","suffixKey","suffixSpan","moveLine","base","createLine","sortClass","vbar","newBuffer","reusable","_drawTimer","used","totalNoBorder","totalNoFixed","totalCompute","fixed","cssText","i_3","i_4","_column","nameKey","checkable","checkedValues","valueKey","checkedNames","selectAll","deselectAll","Input","textbox","onInput","placeholder","iconLeft","propertyName","BACK","marginLeft","marginRight","phText","showPh","findPopupToClose","bindElem","popStack","Popup","popIndex","referRect","checkInterval","refProc","childNodes_5","stopImmediatePropagation","refer","SyntaxError","newRect","closeSelf","ww","wh","ew","eh","compute","L","R","T","B","Menu","activeItem","hasChildItem","addChild","menuItem","icon","shortcut","addChildren","data_1","findMenuItemDiv","findDivIndex","activeLine","ie8hack","deactiveLine","mousemove","openSubMenuTimer","openSubMenu","mouseleave","data_2","it","findItem","from","stopEvent","div_1","itemIndex_1","childItems","subMenu","Navigator","_activeItem","naviItem","checkScroll","up","down","findLine","scrollbarWidth","onscroll","$elem","active","next","rc","drawItems","items_3","$line","space","subArea","_activeBy","prev","activeBy","Scrollbar","dir","btnThumb","thumbLen","offsetY","layerY","offsetX","layerX","posToValue","beginLeft","beginTop","dragThumb","dragEnd","valueToPos","minSize","vertical","scale","Select","LIST_LINE_HEIGHT","updateTextByValue","selection","getSelection","multiSelect","showCount","count","canSearch","changeSize","textKey","selectedItems_1","selectedItem_1","selected","reduce","searchbar","searchBox","rowData","searchValue","minWidth","checkButtons","DialogSelect","dialog","Textarea","oldHeight","_lastTextHeight","showTooltip","show","_tooltip","_tooltipTarget","whiteSpace","hasAttribute","closeTooltip","whetherShowTooltip","_tooltipTimer","whetherCloseTooltip","_hoverElement"],"mappings":"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","file":"tui2.min.js","sourcesContent":["var __extends = (this && this.__extends) || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n    function __() { this.constructor = d; }\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n};\n(function () {\n    var lastTime = 0;\n    var vendors = ['ms', 'moz', 'webkit', 'o'];\n    for (var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x) {\n        window.requestAnimationFrame = window[vendors[x] + 'RequestAnimationFrame'];\n        window.cancelAnimationFrame = window[vendors[x] + 'CancelAnimationFrame'] ||\n            window[vendors[x] + 'CancelRequestAnimationFrame'];\n    }\n    if (!window.requestAnimationFrame)\n        window.requestAnimationFrame = function (callback) {\n            var currTime = new Date().getTime();\n            var timeToCall = Math.max(0, 16 - (currTime - lastTime));\n            var id = window.setTimeout(function () {\n                callback(currTime + timeToCall);\n            }, timeToCall);\n            lastTime = currTime + timeToCall;\n            return id;\n        };\n    if (!window.cancelAnimationFrame)\n        window.cancelAnimationFrame = function (id) {\n            clearTimeout(id);\n        };\n}());\n/// <reference path=\"jquery.d.ts\" />\n/// <reference path=\"animation.ts\" />\nvar tui;\n(function (tui) {\n    \"use strict\";\n    tui.UNDEFINED = (function (undefined) {\n        return typeof undefined;\n    })();\n    // Used to decide which language should be used to display UI control\n    tui.lang = (function () {\n        return (navigator.language || navigator.browserLanguage || navigator.userLanguage).toLowerCase();\n    })();\n    var Translator = (function () {\n        function Translator() {\n            this.dictionary = {};\n        }\n        Translator.prototype.translate = function (str) {\n            return (this.dictionary && this.dictionary[(str + \"\").toLowerCase()]) || str;\n        };\n        return Translator;\n    }());\n    var _dict = {};\n    /**\n     * Register a translation dictionary.\n     */\n    function dict(lang, dictionary, replace) {\n        if (replace === void 0) { replace = false; }\n        if (!lang)\n            return;\n        if (typeof lang === \"string\")\n            lang = lang.toLowerCase();\n        if (typeof dictionary === \"object\" && dictionary !== null) {\n            var translator = _dict[lang];\n            if (!translator) {\n                translator = _dict[lang] = new Translator();\n            }\n            if (replace) {\n                translator.dictionary = dictionary;\n            }\n            else {\n                for (var k in dictionary) {\n                    if (dictionary.hasOwnProperty(k))\n                        translator.dictionary[k] = dictionary[k];\n                }\n            }\n        }\n    }\n    tui.dict = dict;\n    /**\n     * Multi-language support, translate source text to specified language(default use tui.lang setting)\n     * @param str {string} source text\n     * @param lang {string} if specified then use this parameter as objective language otherwise use tui.lang as objective language\n     */\n    function str(str, lang) {\n        if (!lang) {\n            if (!tui.lang)\n                lang = \"en-us\";\n            else\n                lang = tui.lang.toLowerCase();\n        }\n        var translator = _dict[lang];\n        if (translator) {\n            return translator.translate(str);\n        }\n        else {\n            translator = _dict[\"en-us\"];\n            if (translator) {\n                return translator.translate(str);\n            }\n            else {\n                return str;\n            }\n        }\n    }\n    tui.str = str;\n    tui.tuid = (function () {\n        var id = 0;\n        return function () {\n            return ('tuid-' + id++);\n        };\n    })();\n    /**\n     * Base object, all other control extended from this base class.\n     */\n    var EventObject = (function () {\n        function EventObject() {\n            this._events = {};\n        }\n        /**\n         * Register event handler.\n         * @param {string} eventName\n         * @param {EventHandler} handler Which handler to be registered\n         * @param {boolean} atFirst If true then handler will be triggered firstly\n         */\n        EventObject.prototype.bind = function (eventName, handler, atFirst) {\n            if (!eventName)\n                return this;\n            if (!this._events[eventName]) {\n                this._events[eventName] = [];\n            }\n            var handlers = this._events[eventName];\n            for (var i = 0; i < handlers.length; i++) {\n                if (handlers[i] === handler)\n                    return this;\n            }\n            if (atFirst)\n                handlers.splice(0, 0, handler);\n            else\n                handlers.push(handler);\n            return this;\n        };\n        /**\n         * Unregister event handler.\n         * @param eventName\n         * @param handler Which handler to be unregistered if don't specified then unregister all handler\n         */\n        EventObject.prototype.unbind = function (eventName, handler) {\n            if (!eventName)\n                return this;\n            var handlers = this._events[eventName];\n            if (handler) {\n                for (var i = 0; i < handlers.length; i++) {\n                    if (handler === handlers[i]) {\n                        handlers.splice(i, 1);\n                        return this;\n                    }\n                }\n            }\n            else {\n                handlers.length = 0;\n            }\n            return this;\n        };\n        /**\n         * Register event handler.\n         * @param {string} eventName\n         * @param {callback} callback Which handler to be registered\n         * @param {boolean} atFirst If true then handler will be triggered firstly\n         */\n        EventObject.prototype.on = function (eventName, callback, atFirst) {\n            if (atFirst === void 0) { atFirst = false; }\n            var envs = eventName.split(/\\s+/);\n            for (var i = 0; i < envs.length; i++) {\n                var v = envs[i];\n                this.bind(v, callback, atFirst);\n            }\n            return this;\n        };\n        /**\n         * Register event handler.\n         * @param eventName\n         * @param callback Which handler to be registered but event only can be trigered once\n         * @param atFirst If true then handler will be triggered firstly\n         */\n        EventObject.prototype.once = function (eventName, callback, atFirst) {\n            if (atFirst === void 0) { atFirst = false; }\n            callback.isOnce = true;\n            return this.on(eventName, callback, atFirst);\n        };\n        /**\n         * Unregister event handler.\n         * @param eventName\n         * @param callback Which handler to be unregistered if don't specified then unregister all handler\n         */\n        EventObject.prototype.off = function (eventName, callback) {\n            var envs = eventName.split(/\\s+/);\n            for (var i = 0; i < envs.length; i++) {\n                var v = envs[i];\n                this.unbind(v, callback);\n            }\n            return this;\n        };\n        EventObject.prototype.offAll = function () {\n            for (var key in this._events) {\n                this.off(key);\n            }\n        };\n        /**\n         * Fire event. If some handler process return false then cancel the event channe and return false either\n         * @param {string} eventName\n         * @param {any[]} param\n         * @return {boolean} If any handler return false then stop other processing and return false either, otherwise return true\n         */\n        EventObject.prototype.fire = function (eventName, data) {\n            var handlers = this._events[eventName];\n            if (!(handlers instanceof Array)) {\n                handlers = [];\n            }\n            var wildcardHandlers = this._events['*'];\n            if (wildcardHandlers instanceof Array)\n                handlers = handlers.concat(wildcardHandlers);\n            if (handlers.length === 0)\n                return true;\n            var eventInfo = {\n                \"event\": eventName,\n                \"data\": data\n            };\n            var removeArray = [];\n            for (var i = 0; i < handlers.length; i++) {\n                var handler = handlers[i];\n                if (handler.isOnce)\n                    removeArray.push(handler);\n                var val = handler.call(this, eventInfo);\n                if (typeof val === \"boolean\" && !val)\n                    return false;\n            }\n            for (var i = 0; i < removeArray.length; i++) {\n                this.off(eventName, removeArray[i]);\n            }\n            return true;\n        };\n        return EventObject;\n    }());\n    tui.EventObject = EventObject;\n    tui.event = new EventObject();\n    function cloneInternal(obj, excludeProperties) {\n        if (obj === null)\n            return null;\n        else if (typeof obj === tui.UNDEFINED)\n            return undefined;\n        else if (obj instanceof Array) {\n            var newArray = [];\n            for (var idx in obj) {\n                if (obj.hasOwnProperty(idx) && excludeProperties.indexOf(idx) < 0) {\n                    newArray.push(cloneInternal(obj[idx], excludeProperties));\n                }\n            }\n            return newArray;\n        }\n        else if (typeof obj === \"number\")\n            return obj;\n        else if (typeof obj === \"string\")\n            return obj;\n        else if (typeof obj === \"boolean\")\n            return obj;\n        else if (typeof obj === \"function\")\n            return obj;\n        else {\n            var newObj = {};\n            for (var idx in obj) {\n                if (obj.hasOwnProperty(idx) && excludeProperties.indexOf(idx) < 0) {\n                    newObj[idx] = cloneInternal(obj[idx], excludeProperties);\n                }\n            }\n            return newObj;\n        }\n    }\n    /**\n     * Deeply copy an object to an other object, but only contain properties without methods\n     */\n    function clone(obj, excludeProperties) {\n        if (typeof excludeProperties === \"string\" && $.trim(excludeProperties).length > 0) {\n            return cloneInternal(obj, [excludeProperties]);\n        }\n        else if (excludeProperties instanceof Array) {\n            return cloneInternal(obj, excludeProperties);\n        }\n        else\n            return JSON.parse(JSON.stringify(obj));\n    }\n    tui.clone = clone;\n    /**\n     * Get IE version\n     * @return {Number}\n     */\n    tui.ieVer = (function () {\n        var rv = -1; // Return value assumes failure.\n        if (navigator.appName === \"Microsoft Internet Explorer\" ||\n            navigator.appName === \"Netscape\") {\n            var ua = navigator.userAgent;\n            var re = new RegExp(\"MSIE ([0-9]{1,}[\\.0-9]{0,})\");\n            if (re.exec(ua) !== null)\n                rv = parseFloat(RegExp.$1);\n        }\n        if (rv === -1 && navigator.appName === \"Netscape\") {\n            var ua = navigator.userAgent;\n            var re = new RegExp(\"Trident/([0-9]{1,}[\\.0-9]{0,})\");\n            if (re.exec(ua) !== null)\n                rv = parseFloat(RegExp.$1);\n            if (rv >= 7.0)\n                rv = 11.0;\n        }\n        return rv;\n    })();\n    /**\n     * Get Firefox version\n     * @return {Number}\n     */\n    tui.ffVer = (function () {\n        var rv = -1; // Return value assumes failure.\n        if (navigator.appName === \"Netscape\") {\n            var ua = navigator.userAgent;\n            var re = new RegExp(\"Firefox/([0-9]{1,}[\\.0-9]{0,})\");\n            if (re.exec(ua) !== null)\n                rv = parseFloat(RegExp.$1);\n        }\n        return rv;\n    })();\n})(tui || (tui = {}));\n/// <reference path=\"core.ts\" />\ntui.dict(\"en-us\", {\n    \"success\": \"SUCCESS\",\n    \"notmodified\": \"Request's content has not been modified!\",\n    \"error\": \"ERROR\",\n    \"timeout\": \"Request timeout!\",\n    \"abort\": \"Operating has been aborted!\",\n    \"parsererror\": \"Server response invalid content!\",\n    \"ok\": \"OK\",\n    \"close\": \"CLOSE\",\n    \"cancel\": \"CANCEL\",\n    \"accept\": \"ACCEPT\",\n    \"agree\": \"AGREE\",\n    \"reject\": \"REJECT\",\n    \"yes\": \"YES\",\n    \"no\": \"NO\"\n});\n/// <reference path=\"../core.ts\" />\nvar tui;\n(function (tui) {\n    var text;\n    (function (text) {\n        \"use strict\";\n        /**\n         * Convert anything to boolean\n         */\n        function parseBoolean(value) {\n            if (typeof value === tui.UNDEFINED)\n                return false;\n            if (typeof value === \"number\")\n                return isNaN(value) && value != 0;\n            switch (String(tui.str).toLowerCase()) {\n                case \"true\":\n                case \"1\":\n                case \"yes\":\n                case \"y\":\n                    return true;\n                default:\n                    return false;\n            }\n        }\n        text.parseBoolean = parseBoolean;\n        /**\n         * Format a string use a set of parameters\n         */\n        function format(token) {\n            var params = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                params[_i - 1] = arguments[_i];\n            }\n            var formatrg = /\\{(\\d+)\\}/g;\n            token && (typeof token === \"string\") && params.length && (token = token.replace(formatrg, function (str, i) {\n                return params[i] === null ? \"\" : params[i];\n            }));\n            return token ? token : \"\";\n        }\n        text.format = format;\n        /**\n         * Convert 'aaaBbbCcc' to 'aaa-bbb-ccc'\n         */\n        function toDashSplit(word) {\n            var buffer = '';\n            for (var i = 0; i < word.length; i++) {\n                var c = word.charAt(i);\n                var code = c.charCodeAt(0);\n                if (code >= 65 && code <= 90) {\n                    if (i > 0)\n                        buffer += '-';\n                    buffer += c.toLowerCase();\n                }\n                else\n                    buffer += c;\n            }\n            return buffer;\n        }\n        text.toDashSplit = toDashSplit;\n        /**\n         * Convert 'aaa-bbb-ccc' or 'aaa_bbb_ccc' to 'aaaBbbCcc'\n         */\n        function toCamel(word, strict) {\n            if (strict === void 0) { strict = false; }\n            var buffer = '';\n            if (strict)\n                word = word.toLowerCase();\n            var upperFlag = false;\n            for (var i = 0; i < word.length; i++) {\n                var c = word.charAt(i);\n                if (c === '-' || c === '_') {\n                    upperFlag = true;\n                }\n                else {\n                    buffer += upperFlag ? c.toUpperCase() : c;\n                    upperFlag = false;\n                }\n            }\n            return buffer;\n        }\n        text.toCamel = toCamel;\n        /**\n         * Format a number that padding it with '0'\n         */\n        function paddingNumber(v, min, max, alignLeft) {\n            if (alignLeft === void 0) { alignLeft = false; }\n            var result = Math.abs(v) + \"\";\n            while (result.length < min) {\n                result = \"0\" + result;\n            }\n            if (typeof max === \"number\" && result.length > max) {\n                if (alignLeft)\n                    result = result.substr(0, max);\n                else\n                    result = result.substr(result.length - max, max);\n            }\n            if (v < 0)\n                result = \"-\" + result;\n            return result;\n        }\n        text.paddingNumber = paddingNumber;\n        /**\n         * Get the parameter of the URL query string.\n         * @param {String} url\n         * @param {String} key Parameter name\n         */\n        function getUrlParam(url, key) {\n            key = key.replace(/[\\[]/, \"\\\\\\[\").replace(/[\\]]/, \"\\\\\\]\");\n            var regex = new RegExp(\"[\\\\?&]\" + key + \"=([^&#]*)\"), results = regex.exec(url);\n            return results === null ? null : decodeURIComponent(results[1].replace(/\\+/g, \" \"));\n        }\n        text.getUrlParam = getUrlParam;\n        /**\n         * Get the anchor of the URL query string.\n         * @param {String} url\n         */\n        function getUrlAnchor(url) {\n            var anchor = url.match(\"(#.+)(?:\\\\?.*)?\");\n            if (anchor)\n                anchor = anchor[1];\n            return anchor;\n        }\n        text.getUrlAnchor = getUrlAnchor;\n        function isAbsUrl(url) {\n            if (!url)\n                return false;\n            return !!url.match(/^(([a-z0-9]+:)?\\/\\/|\\/)/i);\n        }\n        text.isAbsUrl = isAbsUrl;\n        function getBaseUrl(url) {\n            var matcher = url.match(/^(?:[a-z0-9]+:)?\\/\\//i);\n            var prefix = \"\";\n            if (matcher) {\n                prefix = matcher[0];\n                url = url.substr(matcher[0].length);\n            }\n            var pos = url.indexOf(\"#\");\n            if (pos >= 0) {\n                url = url.substring(0, pos);\n            }\n            var pos = url.lastIndexOf(\"/\");\n            if (pos >= 0) {\n                url = url.substring(0, pos + 1);\n            }\n            return prefix + url;\n        }\n        text.getBaseUrl = getBaseUrl;\n        function joinUrl() {\n            var urls = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                urls[_i - 0] = arguments[_i];\n            }\n            var result = null;\n            for (var _a = 0, urls_1 = urls; _a < urls_1.length; _a++) {\n                var u = urls_1[_a];\n                if (!result)\n                    result = u;\n                else {\n                    if (u[0] == \"/\")\n                        u = u.substr(1);\n                    if (result[result.length - 1] == \"/\") {\n                        result += u;\n                    }\n                    else\n                        result += \"/\" + u;\n                }\n            }\n            return result;\n        }\n        text.joinUrl = joinUrl;\n    })(text = tui.text || (tui.text = {}));\n})(tui || (tui = {}));\n/// <reference path=\"../core.ts\" />\n/// <reference path=\"../ajax/ajax.ts\" />\nvar tui;\n(function (tui) {\n    var service;\n    (function (service_1) {\n        \"use strict\";\n        function parseParameters(fn, desc) {\n            var params = \"\";\n            if (desc)\n                params = desc + \"\";\n            else {\n                var matched = fn.toString().match(/^\\s*function\\s*[a-zA-Z0-9_]*\\s*\\(([\\sa-zA-Z0-9,_\\$]*)\\)/);\n                if (matched) {\n                    params = matched[1];\n                }\n                else {\n                    matched = fn.toString().match(/^\\s*\\(([\\sa-zA-Z0-9,_\\$]*)\\)\\s*=>/);\n                    if (matched)\n                        params = matched[1];\n                }\n            }\n            return (params || \"\");\n        }\n        service_1.parseParameters = parseParameters;\n        var Service = (function (_super) {\n            __extends(Service, _super);\n            function Service() {\n                _super.apply(this, arguments);\n            }\n            Service.prototype.use = function (fn, desc) {\n                service.use.call(this, fn, desc);\n            };\n            return Service;\n        }(tui.EventObject));\n        var _services = {};\n        var _serviceReady = true;\n        var _readyCallbacks = [];\n        function use(fn, desc) {\n            if (typeof fn === \"function\") {\n                var params = parseParameters(fn, desc);\n                var argv = params.split(\",\").map(function (s) {\n                    if (!s)\n                        return null;\n                    else if (s[0] === '$') {\n                        return tui.service.get(s.substr(1));\n                    }\n                    else {\n                        return null;\n                    }\n                });\n                fn.apply(this, argv);\n            }\n        }\n        service_1.use = use;\n        function getName(path) {\n            var begin = path.lastIndexOf(\"/\");\n            if (begin >= 0)\n                path = path.substr(begin + 1);\n            var end = path.lastIndexOf(\".\");\n            if (end >= 0)\n                path = path.substring(0, end);\n            return tui.text.toCamel(path.replace(/[\\-\\s\\.\\/]/g, \"_\"));\n        }\n        function load(services, names) {\n            _serviceReady = false;\n            var tasks = [];\n            for (var i = 0; i < services.length; i++) {\n                var s = services[i];\n                var name = names && names[i] || getName(s);\n                tasks.push(tui.ajax.getFunction(s, name));\n            }\n            $.when.apply(null, tasks).done(function () {\n                for (var i = 0; i < arguments.length; i++) {\n                    var p = arguments[i];\n                    register(p[1], p[0]);\n                }\n                ready();\n            }).fail(function () {\n                _serviceReady = true;\n            });\n        }\n        service_1.load = load;\n        function register(name, fn) {\n            var service = new Service();\n            service._constructor = fn;\n            _services[name] = service;\n        }\n        service_1.register = register;\n        function ready() {\n            for (var name_1 in _services) {\n                if (_services.hasOwnProperty(name_1)) {\n                    var service_2 = _services[name_1];\n                    service_2._constructor.call(service_2);\n                }\n            }\n            _serviceReady = true;\n            for (var _i = 0, _readyCallbacks_1 = _readyCallbacks; _i < _readyCallbacks_1.length; _i++) {\n                var cb = _readyCallbacks_1[_i];\n                cb();\n            }\n        }\n        service_1.ready = ready;\n        function get(name) {\n            return _services[name];\n        }\n        service_1.get = get;\n        function onReady(fn) {\n            if (_serviceReady) {\n                fn();\n            }\n            else {\n                _readyCallbacks.push(fn);\n            }\n        }\n        service_1.onReady = onReady;\n    })(service = tui.service || (tui.service = {}));\n})(tui || (tui = {}));\n/// <reference path=\"../core.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        var _maskOpened = false;\n        var _mask = document.createElement(\"div\");\n        _mask.setAttribute(\"unselectable\", \"on\");\n        _mask.onselectstart = function () { return false; };\n        var mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? \"DOMMouseScroll\" : \"mousewheel\";\n        $(_mask).on(mousewheelevt, function (ev) {\n            ev.stopPropagation();\n            ev.preventDefault();\n        });\n        function getEventPosition(e) {\n            var positions = [];\n            var event = e.originalEvent || e;\n            if (event.changedTouches) {\n                for (var i = 0; i < event.changedTouches.length; i++) {\n                    var touch = event.changedTouches[i];\n                    positions.push({ x: touch.clientX, y: touch.clientY });\n                }\n            }\n            else {\n                positions.push({ x: event.clientX, y: event.clientY });\n            }\n            return positions;\n        }\n        widget.getEventPosition = getEventPosition;\n        /**\n         * Show a mask layer to prevent user drag or select document elements which don't want to be affected.\n         * It's very useful when user perform a dragging operation.\n         */\n        function openDragMask(onMove, onClose) {\n            if (onClose === void 0) { onClose = null; }\n            if (_maskOpened)\n                return null;\n            _mask.innerHTML = \"\";\n            _mask.className = \"tui-mask\";\n            _mask.style.cursor = \"\";\n            _mask.removeAttribute(\"tabIndex\");\n            _mask.removeAttribute(\"tooltip\");\n            _mask.removeAttribute(\"fixed-tooltip\");\n            document.body.appendChild(_mask);\n            // _dragMoveFunc = onMove;\n            function closeDragMask(e) {\n                _maskOpened = false;\n                if (_mask.setCapture)\n                    $(_mask).off();\n                else {\n                    $(document).off(\"mousemove touchmove\", onMove);\n                    $(document).off(\"mouseup touchend\", closeDragMask);\n                }\n                tui.browser.removeNode(_mask);\n                if (typeof onClose === \"function\") {\n                    onClose(e);\n                }\n                e.preventDefault();\n            }\n            if (_mask.setCapture) {\n                _mask.setCapture();\n                $(_mask).on(\"mousemove touchmove\", onMove);\n                $(_mask).on(\"mouseup touchend\", closeDragMask);\n            }\n            else {\n                $(document).on(\"mousemove touchmove\", onMove);\n                $(document).on(\"mouseup touchend\", closeDragMask);\n            }\n            _maskOpened = true;\n            return _mask;\n        }\n        widget.openDragMask = openDragMask;\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"../core.ts\" />\n/// <reference path=\"../text/text.ts\" />\n/// <reference path=\"../ajax/ajax.ts\" />\n/// <reference path=\"../service/service.ts\" />\n/// <reference path=\"mask.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget_1) {\n        \"use strict\";\n        function parseValue(value) {\n            if (value === null || value.length === 0)\n                return null;\n            if (/^\\{(.|\\r|\\n)+\\}$/m.test(value)) {\n                value = value.substring(1, value.length - 1);\n                try {\n                    return eval(\"(\" + value + \")\");\n                }\n                catch (e) {\n                    console && console.error(\"Bad attribute: \" + e);\n                    return null;\n                }\n            }\n            else\n                return value;\n        }\n        var WidgetBase = (function (_super) {\n            __extends(WidgetBase, _super);\n            function WidgetBase() {\n                _super.apply(this, arguments);\n                this._data = undefined;\n                this._rs = {};\n            }\n            //restrict\n            WidgetBase.prototype.setRestriction = function (key, propCtrl) {\n                if (propCtrl === null)\n                    delete this._rs[key];\n                else\n                    this._rs[key] = propCtrl;\n            };\n            WidgetBase.prototype.setRestrictions = function (restrictions) {\n                for (var key in restrictions) {\n                    this.setRestriction(key, restrictions[key]);\n                }\n            };\n            WidgetBase.prototype.refresh = function () {\n                if (this.get(\"autoRefresh\") === true) {\n                    this.render();\n                }\n                return this;\n            };\n            WidgetBase.prototype.load = function () {\n                if (typeof this._data !== tui.UNDEFINED) {\n                    return;\n                }\n                this._data = {};\n                var elem = this.getComponent();\n                if (elem != null) {\n                    var dataStr = elem.getAttribute(\"props\");\n                    try {\n                        var tmpData = eval(\"(\" + dataStr + \")\");\n                        if (tmpData instanceof Object) {\n                            for (var key in tmpData) {\n                                if (tmpData.hasOwnProperty(key)) {\n                                    this._set(key, tmpData[key]);\n                                }\n                            }\n                        }\n                    }\n                    catch (e) {\n                        console && console.error(\"Bad props: \" + e);\n                    }\n                    var names = [];\n                    for (var i = 0; i < elem.attributes.length; i++) {\n                        var attr = elem.attributes[i];\n                        if (/^(style|class|tooltip|follow-tooltip|__widget__|jquery[\\d]+)$/.test(attr.name.toLowerCase()))\n                            continue;\n                        var v = parseValue(attr.value);\n                        if (v !== null)\n                            this._set(tui.text.toCamel(attr.name), v);\n                        if (!/^(id|name)$/i.test(attr.name.toLowerCase()))\n                            names.push(attr.name);\n                    }\n                    for (var _i = 0, names_1 = names; _i < names_1.length; _i++) {\n                        var name_2 = names_1[_i];\n                        elem.attributes.removeNamedItem(name_2);\n                        if (/^(onclick|onmousedown|onmouseup|onmousemove|ondblclick|onkeydown|onkeyup|onkeypress)$/i.test(name_2))\n                            elem[name_2.toLowerCase()] = null;\n                    }\n                }\n            };\n            WidgetBase.prototype.get = function (key, defaultValue) {\n                var value;\n                if (typeof key === tui.UNDEFINED || key === null) {\n                    value = this._data;\n                }\n                else if (typeof key === \"string\") {\n                    if (this._rs[key] && typeof this._rs[key].get === \"function\") {\n                        value = this._rs[key].get();\n                    }\n                    else {\n                        if (typeof this._data === \"object\")\n                            value = this._data[key];\n                        else\n                            value = null;\n                    }\n                }\n                if (typeof value === tui.UNDEFINED)\n                    value = null;\n                if (value === null && typeof defaultValue !== tui.UNDEFINED)\n                    return defaultValue;\n                else\n                    return value;\n            };\n            WidgetBase.prototype.set = function (p1, p2) {\n                this._set(p1, p2);\n                this.refresh();\n                return this;\n            };\n            WidgetBase.prototype._set = function (p1, p2) {\n                if (typeof p2 === tui.UNDEFINED && p1 instanceof Object) {\n                    for (var key in p1) {\n                        if (p1.hasOwnProperty(key))\n                            this._set(key, p1[key]);\n                    }\n                }\n                else if (typeof p1 === \"string\" && typeof p2 !== tui.UNDEFINED) {\n                    if (this._rs[p1] && typeof this._rs[p1].set === \"function\") {\n                        this._rs[p1].set(p2);\n                    }\n                    else {\n                        if (p2 === null) {\n                            this._data && delete this._data[p1];\n                        }\n                        else {\n                            if (typeof this._data === \"object\")\n                                this._data[p1] = p2;\n                        }\n                    }\n                }\n                return this;\n            };\n            WidgetBase.prototype.setInit = function (p1, p2) {\n                if (typeof p2 === tui.UNDEFINED) {\n                    if (p1 instanceof Object) {\n                        for (var key in p1) {\n                            if (p1.hasOwnProperty(key) && this.get(key) === null)\n                                this._set(key, p1[key]);\n                        }\n                    }\n                }\n                else {\n                    if (this.get(p1) === null)\n                        this._set(p1, p2);\n                }\n                return this;\n            };\n            return WidgetBase;\n        }(tui.EventObject));\n        widget_1.WidgetBase = WidgetBase; // End of class WidgetBase\n        var namedWidgets = {};\n        var Widget = (function (_super) {\n            __extends(Widget, _super);\n            function Widget(root, initParam) {\n                _super.call(this);\n                this._lastWidth = null;\n                this._lastHeight = null;\n                this._components = {};\n                // if (getFullName(root) !== \"tui:\" + this.getNodeName()) {\n                // \tthrow new TypeError(\"Node type unmatched!\");\n                // }\n                this._components[''] = root;\n                this._ = root;\n                root.__widget__ = this;\n                this.initRestriction(); // install restrictor\n                this.load(); // load initial properties\n                // Obtain all child nodes\n                var childNodes = [];\n                for (var i = 0; i < root.childNodes.length; i++) {\n                    var node = root.childNodes[i];\n                    childNodes.push(node);\n                }\n                for (var _i = 0, childNodes_1 = childNodes; _i < childNodes_1.length; _i++) {\n                    var removeNode = childNodes_1[_i];\n                    tui.browser.removeNode(removeNode);\n                }\n                this.initChildren(childNodes);\n                if (typeof initParam !== tui.UNDEFINED) {\n                    this._set(initParam);\n                }\n                this.init();\n                // Any widget which has ID property will be registered in namedWidgets\n                var id = this.get(\"id\");\n                if (typeof id === \"string\" && id.length > 0)\n                    namedWidgets[id] = this;\n            }\n            Widget.prototype.init = function () { };\n            ;\n            Widget.prototype.appendTo = function (parent, refresh) {\n                if (refresh === void 0) { refresh = true; }\n                if (typeof parent === \"string\") {\n                    parent = document.getElementById(parent);\n                }\n                if (parent && typeof parent === \"object\" && parent.appendChild) {\n                    parent.appendChild(this._);\n                    refresh && this.set(\"autoRefresh\", true);\n                }\n                return this;\n            };\n            Widget.prototype.detach = function () {\n                tui.browser.removeNode(this._);\n            };\n            Widget.prototype.initChildren = function (childNodes) {\n                // Default do nothing ...\n            };\n            Widget.prototype.initRestriction = function () {\n                var _this = this;\n                this.setRestrictions({\n                    \"id\": {\n                        \"set\": function (value) {\n                            var oldId = _this._.getAttribute(\"id\");\n                            if (oldId) {\n                                delete namedWidgets[oldId];\n                            }\n                            if (typeof value === \"string\" && value.length > 0) {\n                                namedWidgets[value] = _this;\n                                _this._.setAttribute(\"id\", value);\n                            }\n                            else\n                                _this._.removeAttribute(\"id\");\n                        },\n                        \"get\": function () {\n                            return _this._.getAttribute(\"id\");\n                        }\n                    },\n                    \"name\": {\n                        \"set\": function (value) {\n                            if (typeof value === \"string\" && value.length > 0) {\n                                _this._.setAttribute(\"name\", value);\n                            }\n                            else\n                                _this._.removeAttribute(\"name\");\n                        },\n                        \"get\": function () {\n                            return _this._.getAttribute(\"name\");\n                        }\n                    },\n                    \"parent\": {\n                        \"get\": function () {\n                            var elem = _this._.parentNode;\n                            while (elem) {\n                                if (elem.__widget__) {\n                                    return elem.__widget__;\n                                }\n                                else {\n                                    elem = elem.parentNode;\n                                }\n                            }\n                            return null;\n                        },\n                        \"set\": function (value) { }\n                    },\n                    \"disable\": {\n                        \"get\": function () {\n                            var v = _this._data[\"disable\"];\n                            if (v === null || typeof v === tui.UNDEFINED) {\n                                var parent_1 = _this.get(\"parent\");\n                                if (parent_1)\n                                    v = parent_1.get(\"disable\");\n                                return v === null ? false : !!v;\n                            }\n                            else\n                                return v;\n                        }\n                    },\n                    \"group\": {\n                        \"get\": function () {\n                            if (_this.get(\"inner\") === true)\n                                return null;\n                            if (_this._data[\"group\"])\n                                return _this._data[\"group\"];\n                            var parent = _this.get(\"parent\");\n                            if (parent && parent instanceof widget_1.Group && parent.get(\"name\"))\n                                return parent.get(\"name\");\n                            return null;\n                        }\n                    },\n                    \"tooltip\": {\n                        \"set\": function (value) {\n                            if (value)\n                                _this._.setAttribute(\"tooltip\", value);\n                            else\n                                _this._.removeAttribute(\"tooltip\");\n                        },\n                        \"get\": function () {\n                            return _this._.getAttribute(\"tooltip\");\n                        }\n                    },\n                    \"follow-tooltip\": {\n                        \"set\": function (value) {\n                            if (value)\n                                _this._.setAttribute(\"follow-tooltip\", value);\n                            else\n                                _this._.removeAttribute(\"follow-tooltip\");\n                        },\n                        \"get\": function () {\n                            return _this._.getAttribute(\"follow-tooltip\");\n                        }\n                    }\n                });\n            };\n            Widget.prototype.testResize = function () {\n                if (!tui.browser.isInDoc(this._))\n                    return;\n                if (this._.offsetWidth != this._lastWidth) {\n                    this._lastWidth = this._.offsetWidth;\n                    this.fire(\"resize\");\n                }\n                else if (this._.offsetHeight != this._lastHeight) {\n                    this._lastHeight = this._.offsetHeight;\n                    this.fire(\"resize\");\n                }\n            };\n            Widget.prototype.getComponent = function (name) {\n                if (arguments.length > 0) {\n                    return this._components[name];\n                }\n                else {\n                    return this._components[''];\n                }\n            };\n            // getNodeName(): string {\n            // \treturn text.toDashSplit(getClassName(this.constructor));\n            // }\n            Widget.prototype.focus = function () {\n                this._.focus();\n            };\n            return Widget;\n        }(WidgetBase));\n        widget_1.Widget = Widget; // End of class Widget\n        /**\n         * Any config element can extends from this class.\n         */\n        var Item = (function (_super) {\n            __extends(Item, _super);\n            function Item(root) {\n                _super.call(this);\n                this._ = root;\n                this.load();\n            }\n            Item.prototype.getComponent = function (name) {\n                if (arguments.length > 0) {\n                    return null;\n                }\n                else {\n                    return this._;\n                }\n            };\n            Item.prototype.render = function () { };\n            return Item;\n        }(WidgetBase));\n        widget_1.Item = Item; // End of ConfigNode\n        var widgetRegistration = {};\n        function register(constructor, nodeName) {\n            if (typeof nodeName === \"string\")\n                widgetRegistration[\"tui:\" + nodeName.toLowerCase()] = constructor;\n            else {\n                widgetRegistration[\"tui:\" + tui.text.toDashSplit(getClassName(constructor))] = constructor;\n            }\n        }\n        widget_1.register = register;\n        function get(id) {\n            if (typeof id === \"object\" && id.nodeName) {\n                if (id.__widget__)\n                    return id.__widget__;\n                else\n                    return null;\n            }\n            var elem = document.getElementById(id);\n            if (elem === null) {\n                if (namedWidgets[id])\n                    return namedWidgets[id];\n                else\n                    return null;\n            }\n            if (elem.__widget__)\n                return elem.__widget__;\n            else\n                return null;\n        }\n        widget_1.get = get;\n        window[\"$$\"] = get;\n        function create(type, initParam) {\n            if (typeof type !== \"string\")\n                throw new TypeError(\"Invalid parameters.\");\n            var constructor = widgetRegistration[\"tui:\" + type.toLowerCase()];\n            if (typeof constructor !== \"function\")\n                throw new Error(\"Undefined type: \" + type);\n            var element = document.createElement(\"tui:\" + type);\n            var obj;\n            if (typeof initParam !== tui.UNDEFINED)\n                obj = new constructor(element, initParam);\n            else\n                obj = new constructor(element);\n            obj.set(\"autoRefresh\", true);\n            return obj;\n        }\n        widget_1.create = create;\n        window[\"$new\"] = create;\n        function getClassName(func) {\n            var results = /function\\s+([^\\s]+)\\s*\\(/.exec(func.toString());\n            return (results && results.length > 1) ? results[1] : \"\";\n        }\n        widget_1.getClassName = getClassName;\n        function getFullName(targetElem) {\n            if (targetElem.scopeName && targetElem.scopeName.toLowerCase() === \"tui\") {\n                if (targetElem.nodeName.toLowerCase().match(\"^\" + targetElem.scopeName + \":\") !== null)\n                    return targetElem.nodeName.toLowerCase();\n                else\n                    return targetElem.scopeName + \":\" + targetElem.nodeName.toLowerCase();\n            }\n            else {\n                return targetElem.nodeName.toLowerCase();\n            }\n        }\n        widget_1.getFullName = getFullName;\n        function init(parent, initFunc) {\n            var initSet = [];\n            function searchInitCtrls(parent) {\n                for (var i = 0; i < parent.childNodes.length; i++) {\n                    var node = parent.childNodes[i];\n                    if (node.nodeType === 1) {\n                        var elem = node;\n                        var constructor = widgetRegistration[getFullName(elem)];\n                        if (constructor) {\n                            var item = [elem, constructor];\n                            initSet.push(item);\n                        }\n                        else\n                            searchInitCtrls(elem);\n                    }\n                }\n            }\n            searchInitCtrls(parent);\n            for (var _i = 0, initSet_1 = initSet; _i < initSet_1.length; _i++) {\n                var item = initSet_1[_i];\n                var elem = item[0];\n                var constructor = item[1];\n                // try {\n                if (!elem.__widget__) {\n                    var widget_2 = new constructor(elem);\n                    if (typeof initFunc === \"function\") {\n                        if (initFunc(widget_2))\n                            widget_2.set(\"autoRefresh\", true);\n                    }\n                    else\n                        widget_2.set(\"autoRefresh\", true);\n                }\n                else {\n                    var widget_3 = elem.__widget__;\n                    widget_3.refresh();\n                }\n            }\n        }\n        widget_1.init = init;\n        function search(p1, p2) {\n            var searchArea = null;\n            var filter = null;\n            if (typeof p2 === tui.UNDEFINED) {\n                if (typeof p1 === \"function\")\n                    filter = p1;\n                else if (typeof p1 === \"object\" && p1.nodeName)\n                    searchArea = p1;\n            }\n            else if (typeof p2 === \"function\") {\n                searchArea = p1;\n                filter = p2;\n            }\n            var result = [];\n            if (searchArea === null) {\n                searchArea = document.body;\n            }\n            function searchElem(parent) {\n                for (var i = 0; i < parent.childNodes.length; i++) {\n                    var node = parent.childNodes[i];\n                    if (node.nodeType !== 1) {\n                        continue;\n                    }\n                    var widget_4 = node.__widget__;\n                    if (widget_4 && (filter && filter(widget_4) || filter === null)) {\n                        result.push(widget_4);\n                    }\n                    else\n                        searchElem(node);\n                }\n            }\n            searchElem(searchArea);\n            return result;\n        }\n        widget_1.search = search;\n        // Detecting which widgets was resied.\n        var resizeRegistration = [];\n        function registerResize(nodeName) {\n            resizeRegistration.push(\"tui:\" + nodeName);\n        }\n        widget_1.registerResize = registerResize;\n        var detectResize;\n        $(window.document).ready(function () {\n            tui.service.onReady(function () {\n                init(document.body);\n                tui.event.fire(\"initialized\");\n            });\n            if (typeof document.body.scopeName === \"string\" && tui.ieVer < 9) {\n                detectResize = function () {\n                    for (var i = 0; i < resizeRegistration.length; i++) {\n                        var nodes = document.getElementsByTagName(resizeRegistration[i].substr(4));\n                        for (var j = 0; j < nodes.length; j++) {\n                            var node = nodes[j];\n                            if (node.scopeName.toUpperCase() === \"TUI\" && node.__widget__) {\n                                node.__widget__.testResize();\n                            }\n                        }\n                    }\n                    requestAnimationFrame(detectResize);\n                };\n            }\n            else {\n                detectResize = function () {\n                    for (var i = 0; i < resizeRegistration.length; i++) {\n                        var nodes = document.getElementsByTagName(resizeRegistration[i]);\n                        for (var j = 0; j < nodes.length; j++) {\n                            var node = nodes[j];\n                            if (node.__widget__) {\n                                node.__widget__.testResize();\n                            }\n                        }\n                    }\n                    requestAnimationFrame(detectResize);\n                };\n            }\n            requestAnimationFrame(detectResize);\n        });\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\nvar tui;\n(function (tui) {\n    tui.get = tui.widget.get;\n    tui.create = tui.widget.create;\n    tui.search = tui.widget.search;\n})(tui || (tui = {}));\n/// <reference path=\"base.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        widget.dialogStack = [];\n        var _mask = document.createElement(\"div\");\n        _mask.className = \"tui-dialog-mask\";\n        _mask.setAttribute(\"unselectable\", \"on\");\n        var mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? \"DOMMouseScroll\" : \"mousewheel\";\n        $(_mask).on(mousewheelevt + \" selectstart\", function (ev) {\n            ev.stopPropagation();\n            ev.preventDefault();\n        });\n        function reorder() {\n            tui.browser.removeNode(_mask);\n            if (widget.dialogStack.length > 0) {\n                document.body.insertBefore(_mask, widget.dialogStack[widget.dialogStack.length - 1]._);\n            }\n        }\n        function push(dlg) {\n            widget.dialogStack.push(dlg);\n            document.body.appendChild(dlg._);\n            reorder();\n        }\n        function remove(dlg) {\n            var index = widget.dialogStack.indexOf(dlg);\n            if (index >= 0) {\n                widget.dialogStack.splice(index, 1);\n            }\n            document.body.removeChild(dlg._);\n            reorder();\n        }\n        function getParent(dlg) {\n            var index = widget.dialogStack.indexOf(dlg);\n            if (index > 0) {\n                widget.dialogStack[index - 1];\n            }\n            else\n                return null;\n        }\n        function disableSelect() {\n            return false;\n        }\n        /**\n         * <dialog>\n         * Attributes: content(element or html), opened(boolean), title, buttons(button array), esc(boolean)\n         * Method: open(buttonDef: string = null), close()\n         * Events: open, close, click-<button name>\n         */\n        var Dialog = (function (_super) {\n            __extends(Dialog, _super);\n            function Dialog() {\n                _super.apply(this, arguments);\n                this._sizeTimer = null;\n                this._contentSize = null;\n                this._moved = false;\n                this._init = true;\n            }\n            Dialog.prototype.initChildren = function (childNodes) {\n                if (childNodes.length > 0) {\n                    var div = document.createElement(\"div\");\n                    for (var _i = 0, childNodes_2 = childNodes; _i < childNodes_2.length; _i++) {\n                        var node = childNodes_2[_i];\n                        div.appendChild(node);\n                    }\n                    this._set(\"content\", div);\n                }\n            };\n            Dialog.prototype.init = function () {\n                var _this = this;\n                var root$ = $(this._);\n                root$.attr(\"tabIndex\", \"-1\");\n                root$.html(\"<div class='tui-title-bar' unselectable='on'><span class='tui-text'></span><span class='tui-close'></span></div>\" +\n                    \"<div class='tui-content'></div><div class='tui-button-bar'></div>\");\n                var titleBar = this._components[\"titleBar\"] = root$.children(\".tui-title-bar\")[0];\n                var contentDiv = this._components[\"content\"] = root$.children(\".tui-content\")[0];\n                var buttonBar = this._components[\"buttonBar\"] = root$.children(\".tui-button-bar\")[0];\n                var closeIcon = this._components[\"closeIcon\"] = $(titleBar).children(\".tui-close\")[0];\n                titleBar.onselectstart = disableSelect;\n                buttonBar.onselectstart = disableSelect;\n                var content = this.get(\"content\");\n                if (typeof content === \"object\" && content && content.nodeName)\n                    contentDiv.appendChild(content);\n                else if (typeof content === \"string\") {\n                    contentDiv.innerHTML = content;\n                }\n                this.setInit(\"esc\", true);\n                widget.init(contentDiv); // Convert all child elements into tui controls\n                closeIcon.onclick = function () {\n                    _this.close();\n                };\n                tui.browser.removeNode(this._);\n                $(titleBar).on(\"mousedown\", function (e) {\n                    var o = (e.target || e.srcElement);\n                    if (o === closeIcon)\n                        return;\n                    var dialogX = _this._.offsetLeft;\n                    var dialogY = _this._.offsetTop;\n                    var beginX = e.clientX;\n                    var beginY = e.clientY;\n                    var winSize = { width: _mask.offsetWidth, height: _mask.offsetHeight };\n                    var mask = tui.widget.openDragMask(function (e) {\n                        var l = dialogX + e.clientX - beginX;\n                        var t = dialogY + e.clientY - beginY;\n                        if (l > winSize.width - _this._.offsetWidth)\n                            l = winSize.width - _this._.offsetWidth;\n                        if (l < 0)\n                            l = 0;\n                        if (t > winSize.height - _this._.offsetHeight)\n                            t = winSize.height - _this._.offsetHeight;\n                        if (t < 0)\n                            t = 0;\n                        _this._.style.left = l + \"px\";\n                        _this._.style.top = t + \"px\";\n                        _this._moved = true;\n                    }, function (e) {\n                        _this.render();\n                    });\n                });\n                root$.on(mousewheelevt, function (ev) {\n                    ev.stopPropagation();\n                });\n            };\n            Dialog.prototype.setContent = function (content) {\n                var contentDiv = this._components[\"content\"];\n                contentDiv.innerHTML = \"\";\n                if (typeof content === \"object\" && content.nodeName) {\n                    content.style.display = \"block\";\n                    contentDiv.appendChild(content);\n                }\n                else if (typeof content === \"string\") {\n                    contentDiv.innerHTML = content;\n                }\n                this.render();\n            };\n            Dialog.prototype.setButtons = function (buttonDef) {\n                var _this = this;\n                if (buttonDef === void 0) { buttonDef = null; }\n                var buttonBar = this._components[\"buttonBar\"];\n                buttonBar.innerHTML = \"\";\n                if (typeof buttonDef === \"string\" && buttonDef.length > 0) {\n                    var names = buttonDef.split(\",\");\n                    var _loop_1 = function(name_3) {\n                        var pair = name_3.split(\"#\");\n                        var btn = widget.create(\"button\", { text: tui.str($.trim(pair[0])) });\n                        if (pair.length > 1 && $.trim(pair[1]).length > 0)\n                            btn._.className = pair[1];\n                        btn.on(\"click\", function (e) {\n                            _this.fire(\"btnclick\", { e: e, button: $.trim(pair[0]) });\n                        });\n                        btn.appendTo(buttonBar);\n                    };\n                    for (var _i = 0, names_2 = names; _i < names_2.length; _i++) {\n                        var name_3 = names_2[_i];\n                        _loop_1(name_3);\n                    }\n                    buttonBar.style.display = \"block\";\n                }\n                else {\n                    buttonBar.style.display = \"none\";\n                }\n                this.render();\n            };\n            Dialog.prototype.open = function (buttonDef) {\n                var _this = this;\n                if (buttonDef === void 0) { buttonDef = null; }\n                if (this.get(\"opened\"))\n                    return;\n                var contentDiv = this._components[\"content\"];\n                widget.init(contentDiv);\n                this._init = true;\n                this._moved = false;\n                $(this._).css({\n                    \"display\": \"block\",\n                    \"position\": \"fixed\"\n                });\n                this._set(\"opened\", true);\n                push(this);\n                this.setButtons(buttonDef);\n                this._.focus();\n                this.fire(\"open\");\n                this._sizeTimer = setInterval(function () {\n                    if (_this._contentSize == null)\n                        return;\n                    if (contentDiv.scrollHeight !== _this._contentSize.height ||\n                        contentDiv.scrollWidth !== _this._contentSize.width) {\n                        _this.refresh();\n                    }\n                }, 50);\n            };\n            Dialog.prototype.close = function () {\n                if (!this.get(\"opened\"))\n                    return;\n                clearInterval(this._sizeTimer);\n                this._sizeTimer = null;\n                this._moved = false;\n                this._contentSize = null;\n                remove(this);\n                this._set(\"opened\", false);\n                this.fire(\"close\");\n            };\n            Dialog.prototype.render = function () {\n                if (!this.get(\"opened\"))\n                    return;\n                var titleBar = this._components[\"titleBar\"];\n                var buttonBar = this._components[\"buttonBar\"];\n                var contentDiv = this._components[\"content\"];\n                var closeIcon = this._components[\"closeIcon\"];\n                // Adjust title bar\n                if (this.get(\"title\") === null && !this.get(\"esc\")) {\n                    titleBar.style.display = \"none\";\n                }\n                else {\n                    titleBar.style.display = \"block\";\n                    if (this.get(\"esc\")) {\n                        closeIcon.style.display = \"inline-block\";\n                    }\n                    else\n                        closeIcon.style.display = \"none\";\n                    var titleText = $(titleBar).children(\".tui-text\")[0];\n                    titleText.innerHTML = this.get(\"title\") !== null ? this.get(\"title\") : \"\";\n                    if (tui.ieVer >= 7 && tui.ieVer < 9) {\n                        titleText.style.width = \"\";\n                        titleText.style.width = titleText.offsetWidth + \"px\";\n                    }\n                }\n                // Change position\n                var winSize = { width: _mask.offsetWidth, height: _mask.offsetHeight };\n                var root = this._;\n                var root$ = $(root);\n                // Limit content size\n                contentDiv.style.maxHeight = \"\";\n                root$.css({\n                    \"maxWidth\": winSize.width + \"px\",\n                    \"maxHeight\": winSize.height + \"px\"\n                });\n                $(contentDiv).css({\n                    //\"maxWidth\": winSize.width - $(contentDiv).outerWidth() + $(contentDiv).width() + \"px\",\n                    \"maxWidth\": winSize.width - 80 + \"px\",\n                    \"maxHeight\": winSize.height - titleBar.offsetHeight - buttonBar.offsetHeight - $(contentDiv).outerHeight() + $(contentDiv).height() + \"px\"\n                });\n                var box = {\n                    left: root.offsetLeft,\n                    top: root.offsetTop,\n                    width: root.offsetWidth,\n                    height: root.offsetHeight\n                };\n                if (this._init) {\n                    var parent = getParent(this);\n                    var centX, centY;\n                    if (parent) {\n                        var e = parent._;\n                        centX = e.offsetLeft + e.offsetWidth / 2;\n                        centY = e.offsetTop + e.offsetHeight / 2;\n                        this._moved = true;\n                    }\n                    else {\n                        centX = winSize.width / 2;\n                        centY = winSize.height / 2;\n                        this._moved = false;\n                    }\n                    box.left = centX - box.width / 2;\n                    box.top = centY - box.height / 2;\n                    this._init = false;\n                }\n                else {\n                    if (!this._moved) {\n                        box.left = (winSize.width - box.width) / 2;\n                        box.top = (winSize.height - box.height) / 2;\n                    }\n                }\n                if (box.left + box.width > winSize.width)\n                    box.left = winSize.width - box.width;\n                if (box.top + box.height > winSize.height)\n                    box.top = winSize.height - box.height;\n                if (box.left < 0)\n                    box.left = 0;\n                if (box.top < 0)\n                    box.top = 0;\n                this._.style.left = box.left + \"px\";\n                this._.style.top = box.top + \"px\";\n                this._contentSize = { width: contentDiv.scrollWidth, height: contentDiv.scrollHeight };\n            };\n            return Dialog;\n        }(widget.Widget));\n        widget.Dialog = Dialog; // End of Dialog class\n        widget.register(Dialog, \"dialog\");\n        $(document).on(\"keydown\", function (e) {\n            var k = e.keyCode;\n            if (widget.dialogStack.length <= 0)\n                return;\n            var dlg = widget.dialogStack[widget.dialogStack.length - 1];\n            if (k === tui.browser.KeyCode.ESCAPE) {\n                dlg.get(\"esc\") && dlg.close();\n            }\n            else if (k === tui.browser.KeyCode.TAB) {\n                setTimeout(function () {\n                    if (!tui.browser.isPosterity(dlg._, document.activeElement)) {\n                        dlg._.focus();\n                    }\n                });\n            }\n        });\n        $(window).resize(function () {\n            for (var i = 0; i < widget.dialogStack.length; i++) {\n                widget.dialogStack[i].refresh();\n            }\n        });\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\nvar tui;\n(function (tui) {\n    \"use strict\";\n    function makeContent(message) {\n        // return text.format( \n        // \t\"<table align='center' class='tui-msg-container'><tr><td class='{1}'><span></span></td><td>{0}</td></tr></table>\", \n        // \tmessage, className);\n        if (message) {\n            return tui.text.format(\"<div class='tui-msg-container'><span></span><div>{0}</div></div>\", message);\n        }\n        else {\n            return tui.text.format(\"<div class='tui-msg-container'><span></span></div>\");\n        }\n    }\n    function makeDialog(message, className, title, btn, callback, esc) {\n        if (btn === void 0) { btn = \"ok#tui-primary\"; }\n        if (callback === void 0) { callback = null; }\n        if (esc === void 0) { esc = true; }\n        var dlg = tui.widget.create(\"dialog\", {\n            \"content\": makeContent(message),\n            \"title\": title,\n            \"esc\": esc\n        });\n        $(dlg._).addClass(className);\n        dlg.on(\"btnclick\", function (e) {\n            dlg.close();\n            if (callback)\n                callback(e.data.button);\n        });\n        dlg.open(btn);\n        return dlg;\n    }\n    function msgbox(message, title) {\n        if (title === void 0) { title = null; }\n        return makeDialog(message, \"tui-msg-box\", title);\n    }\n    tui.msgbox = msgbox;\n    function infobox(message, title) {\n        if (title === void 0) { title = \"\"; }\n        var titleText = \"<i class='tui-dialog-title-info'></i>\";\n        if (title)\n            titleText += title;\n        return makeDialog(message, \"tui-info-box\", titleText);\n    }\n    tui.infobox = infobox;\n    function okbox(message, title) {\n        if (title === void 0) { title = \"\"; }\n        var titleText = \"<i class='tui-dialog-title-ok'></i>\";\n        if (title)\n            titleText += title;\n        return makeDialog(message, \"tui-ok-box\", titleText);\n    }\n    tui.okbox = okbox;\n    function errbox(message, title) {\n        if (title === void 0) { title = \"\"; }\n        var titleText = \"<i class='tui-dialog-title-error'></i>\";\n        if (title)\n            titleText += title;\n        return makeDialog(message, \"tui-err-box\", titleText);\n    }\n    tui.errbox = errbox;\n    function warnbox(message, title) {\n        if (title === void 0) { title = \"\"; }\n        var titleText = \"<i class='tui-dialog-title-warning'></i>\";\n        if (title)\n            titleText += title;\n        return makeDialog(message, \"tui-warn-box\", titleText);\n    }\n    tui.warnbox = warnbox;\n    function askbox(message, title, callback) {\n        if (title === void 0) { title = \"\"; }\n        if (typeof title === \"function\") {\n            callback = title;\n            title = null;\n        }\n        var titleText = \"<i class='tui-dialog-title-ask'></i>\";\n        if (title)\n            titleText += title;\n        return makeDialog(message, \"tui-ask-box\", titleText, \"cancel#tui-flat,ok#tui-primary\", function (buttonName) {\n            if (typeof callback === \"function\")\n                callback(buttonName === \"ok\");\n        });\n    }\n    tui.askbox = askbox;\n    var refCount = 0;\n    var waitDlg = null;\n    var waitMsg = null;\n    function waitbox(message) {\n        if (waitDlg == null) {\n            refCount = 0;\n            waitMsg = [message];\n            waitDlg = makeDialog(message, \"tui-wait-box\", null, null, null, false);\n        }\n        else {\n            waitMsg.push(message);\n            waitDlg.setContent(makeContent(message));\n            setTimeout(function () {\n                waitDlg.refresh();\n            });\n        }\n        var index = waitMsg.length - 1;\n        refCount++;\n        var closed = false;\n        return {\n            close: function () {\n                if (!closed) {\n                    refCount--;\n                    closed = true;\n                    waitMsg[index] = null;\n                    for (var i = index - 1; i >= 0; i--) {\n                        if (waitMsg[i] != null) {\n                            waitDlg.setContent(makeContent(waitMsg[i]));\n                            break;\n                        }\n                    }\n                    if (refCount === 0) {\n                        waitDlg.close();\n                        waitDlg = null;\n                        waitMsg = null;\n                    }\n                }\n            },\n            setMessage: function (message) {\n                if (!closed) {\n                    waitMsg[index] = message;\n                    if (index === waitMsg.length - 1)\n                        waitDlg.setContent(makeContent(message));\n                }\n            }\n        };\n    }\n    tui.waitbox = waitbox;\n    function progressbox(message, cancelProc) {\n        if (cancelProc === void 0) { cancelProc = null; }\n        // TODO: NOT FINISHED\n        return null;\n    }\n    tui.progressbox = progressbox;\n})(tui || (tui = {}));\n/// <reference path=\"../core.ts\" />\n/// <reference path=\"../widget/dialog.ts\" />\nvar tui;\n(function (tui) {\n    var ajax;\n    (function (ajax) {\n        $.ajaxSetup({\n            \"timeout\": 30000,\n            \"xhrFields\": {\n                'withCredentials': true\n            }\n        });\n        function send(url, method, data, options) {\n            var deffered = $.Deferred();\n            var waitbox = null;\n            if (!options || !options[\"silent\"])\n                waitbox = tui.waitbox(tui.str(\"Processing...\"));\n            var ajaxData = {\n                \"type\": method.toUpperCase(),\n                \"url\": url,\n                \"contentType\": \"application/json\",\n                \"data\": (method.toUpperCase() === \"GET\" ? data : JSON.stringify(data)),\n                \"complete\": function (jqXHR, status) {\n                    waitbox && waitbox.close();\n                    if (status === \"success\") {\n                        var respJson = /^\\s*application\\/json\\s*(;.+)?/i.test(jqXHR.getResponseHeader(\"content-type\"));\n                        var respVal = (respJson ? jqXHR.responseJSON : jqXHR.responseText);\n                        deffered.resolve(respVal, jqXHR);\n                    }\n                    else {\n                        var plainType = /^\\s*text\\/plain\\s*(;.+)?/i.test(jqXHR.getResponseHeader(\"content-type\"));\n                        var respText;\n                        if (plainType && jqXHR.responseText)\n                            respText = tui.str(jqXHR.responseText);\n                        else {\n                            if (jqXHR.status != 0)\n                                respText = tui.str(status) + \" (\" + jqXHR.status + \")\";\n                            else\n                                respText = \"Operation was canceled!\";\n                        }\n                        if ((!options || !options[\"silent\"]) && jqXHR.status != 0)\n                            tui.errbox(respText);\n                        deffered.reject(jqXHR.status, respText, jqXHR);\n                    }\n                },\n                \"processData\": false\n            };\n            if (options) {\n                for (var k in options) {\n                    if (options.hasOwnProperty(k)) {\n                        ajaxData[k] = options[k];\n                    }\n                }\n            }\n            $.ajax(ajaxData);\n            return deffered;\n        }\n        ajax.send = send;\n        function post(url, data, options) {\n            return send(url, \"post\", data, options);\n        }\n        ajax.post = post;\n        function post_(url, data, options) {\n            if (!options)\n                options = { \"silent\": true };\n            else\n                options[\"silent\"] = true;\n            return send(url, \"post\", data, options);\n        }\n        ajax.post_ = post_;\n        function get(url, options) {\n            return send(url, \"get\", null, options);\n        }\n        ajax.get = get;\n        function get_(url, options) {\n            if (!options)\n                options = { \"silent\": true };\n            else\n                options[\"silent\"] = true;\n            return send(url, \"get\", null, options);\n        }\n        ajax.get_ = get_;\n        function getScript(url) {\n            var deffered = $.Deferred();\n            var xhr = new XMLHttpRequest();\n            xhr.onreadystatechange = function () {\n                if (xhr.readyState == 4) {\n                    if (xhr.status == 200)\n                        deffered.resolve(xhr.responseText, xhr);\n                    else\n                        deffered.reject(xhr.status, xhr.responseText, xhr);\n                }\n            };\n            xhr.open(\"GET\", url, true);\n            xhr.send(null);\n            return deffered;\n        }\n        ajax.getScript = getScript;\n        var TAG = /<(\\/?[a-z0-9_\\-:]+)(\\s+[a-z0-9_\\-]+(\\s*=('[^']*'|\"[^\"]*\"|[^\\s>]+)))*\\/?>/img;\n        var SCRIPT_END = /<\\/\\s*script(\\s+[a-z0-9_\\-]+(\\s*=('[^']*'|\"[^\"]*\"|[^\\s>]+)))*>/img;\n        function getHtmlBody(result) {\n            // To compatible IE 8~9 I must parse html by myself!\n            if (result == null || result.length == 0)\n                return document.createElement(\"body\");\n            TAG.lastIndex = 0;\n            var len = result.length;\n            var m;\n            var bodyStart = null;\n            var bodyEnd = null;\n            while ((m = TAG.exec(result)) != null) {\n                var tag = m[1].toLowerCase();\n                if (tag === \"script\") {\n                    SCRIPT_END.lastIndex = TAG.lastIndex;\n                    var scriptEnd = SCRIPT_END.exec(result);\n                    if (scriptEnd == null)\n                        break;\n                    TAG.lastIndex = SCRIPT_END.lastIndex;\n                }\n                else if (tag === \"body\") {\n                    bodyStart = TAG.lastIndex;\n                }\n                else if (tag === \"/body\") {\n                    bodyEnd = m.index;\n                }\n                else if (tag === \"/html\") {\n                    if (bodyEnd == null)\n                        bodyEnd = m.index;\n                }\n            }\n            if (bodyStart != null) {\n                if (bodyEnd != null && bodyEnd >= bodyStart) {\n                    result = result.substring(bodyStart, bodyEnd);\n                }\n                else {\n                    result = result.substring(bodyStart);\n                }\n            }\n            var body = document.createElement(\"body\");\n            body.innerHTML = result;\n            return body;\n        }\n        function getBody(url) {\n            var deffered = $.Deferred();\n            getScript(url).done(function (result) {\n                deffered.resolve(getHtmlBody(result).innerHTML);\n            }).fail(function (status, responseText, xhr) {\n                deffered.reject(status, responseText, xhr);\n            });\n            return deffered;\n        }\n        ajax.getBody = getBody;\n        function getComponent(url) {\n            var deffered = $.Deferred();\n            getScript(url).done(function (result) {\n                var body = getHtmlBody(result);\n                for (var i = 0; i < body.children.length; i++) {\n                    var child = body.children[i];\n                    if (tui.widget.getFullName(child) === \"tui:component\") {\n                        var handler = child.getAttribute(\"handler\");\n                        if (handler && handler.trim()) {\n                            if (!tui.text.isAbsUrl(handler)) {\n                                handler = tui.text.joinUrl(tui.text.getBaseUrl(url), handler);\n                            }\n                        }\n                        deffered.resolve(child.innerHTML, handler ? handler : null);\n                        return;\n                    }\n                }\n                deffered.resolve(body.innerHTML);\n            }).fail(function (status, responseText, xhr) {\n                deffered.reject(status, responseText, xhr);\n            });\n            return deffered;\n        }\n        ajax.getComponent = getComponent;\n        function getFunction(url, param) {\n            var deffered = $.Deferred();\n            getScript(url).done(function (result) {\n                var fn = eval(\"(0,function(){\\n\" + result + \"})\"\n                    + \"\\n//# sourceURL=\" + url);\n                deffered.resolve(fn, param);\n            }).fail(function (status, responseText, xhr) {\n                deffered.reject(status, responseText, xhr);\n            });\n            return deffered;\n        }\n        ajax.getFunction = getFunction;\n        window.$ajax = send;\n        window.$post = post;\n        window.$post_ = post_; // silent mode\n        window.$get = get;\n        window.$get_ = get_; // silent mode\n    })(ajax = tui.ajax || (tui.ajax = {}));\n})(tui || (tui = {}));\n/// <reference path=\"../core.ts\" />\nvar tui;\n(function (tui) {\n    var browser;\n    (function (browser) {\n        \"use strict\";\n        var BackupedScrollPosition = (function () {\n            function BackupedScrollPosition(target) {\n                this.backupInfo = [];\n                var obj = target;\n                while (obj && obj !== document.body) {\n                    obj = obj.parentElement;\n                    if (obj)\n                        this.backupInfo.push({ obj: obj, left: obj.scrollLeft, top: obj.scrollTop });\n                }\n            }\n            BackupedScrollPosition.prototype.restore = function () {\n                for (var i = 0; i < this.backupInfo.length; i++) {\n                    var item = this.backupInfo[i];\n                    item.obj.scrollLeft = item.left;\n                    item.obj.scrollTop = item.top;\n                }\n            };\n            return BackupedScrollPosition;\n        }());\n        browser.BackupedScrollPosition = BackupedScrollPosition;\n        function backupScrollPosition(target) {\n            return new BackupedScrollPosition(target);\n        }\n        browser.backupScrollPosition = backupScrollPosition;\n        function focusWithoutScroll(target) {\n            setTimeout(function () {\n                if (tui.ieVer > 0) {\n                    target.setActive();\n                }\n                else if (tui.ffVer > 0)\n                    target.focus();\n                else {\n                    var backup = tui.browser.backupScrollPosition(target);\n                    target.focus();\n                    backup.restore();\n                }\n            }, 0);\n        }\n        browser.focusWithoutScroll = focusWithoutScroll;\n        function scrollToElement(elem) {\n            var param = [];\n            for (var _i = 1; _i < arguments.length; _i++) {\n                param[_i - 1] = arguments[_i];\n            }\n            var distance = 0;\n            var cb = null;\n            var useAnimation = true;\n            for (var _a = 0, param_1 = param; _a < param_1.length; _a++) {\n                var p = param_1[_a];\n                if (typeof p === \"number\")\n                    distance = p;\n                else if (typeof p === \"boolean\")\n                    useAnimation = p;\n                else if (typeof p === \"function\")\n                    cb = p;\n            }\n            if (useAnimation) {\n                $(getWindowScrollElement()).animate({ scrollTop: $(elem).offset().top - distance }, 150, cb);\n            }\n            else {\n                getWindowScrollElement().scrollTop = $(elem).offset().top - distance;\n                cb && cb();\n            }\n        }\n        browser.scrollToElement = scrollToElement;\n        function toElement(html, withParentDiv) {\n            if (withParentDiv === void 0) { withParentDiv = false; }\n            var div = document.createElement(\"div\");\n            div.innerHTML = $.trim(html);\n            if (withParentDiv)\n                return div;\n            var el = div.firstChild;\n            return div.removeChild(el);\n        }\n        browser.toElement = toElement;\n        function toHTML(node) {\n            var elem = document.createElement(\"span\");\n            if (typeof node.nodeName === \"string\") {\n                elem.appendChild(node);\n            }\n            else if (typeof node.length === \"number\") {\n                for (var i = 0; i < node.length; i++) {\n                    elem.appendChild(node[i]);\n                }\n            }\n            return elem.innerHTML;\n        }\n        browser.toHTML = toHTML;\n        function removeNode(node) {\n            node.parentNode && node.parentNode.removeChild(node);\n        }\n        browser.removeNode = removeNode;\n        function toSafeText(text) {\n            return text.replace(/<|>|&/g, function (str) {\n                var args = [];\n                for (var _i = 1; _i < arguments.length; _i++) {\n                    args[_i - 1] = arguments[_i];\n                }\n                if (str === \"<\")\n                    return \"&lt;\";\n                else if (str === \"<\")\n                    return \"&gt;\";\n                else if (str === \"&\")\n                    return \"&amp;\";\n                else\n                    return str;\n            });\n        }\n        browser.toSafeText = toSafeText;\n        /**\n         * Get or set a HTMLElement's text content, return Element's text content.\n         * @param elem {HTMLElement or ID of the element} Objective element\n         * @param text {string or boolean}\n         */\n        function nodeText(elem, text) {\n            if (typeof elem === \"string\")\n                elem = document.getElementById(elem);\n            if (elem) {\n                if (typeof text === \"string\") {\n                    elem.innerHTML = \"\";\n                    elem.appendChild(document.createTextNode(text));\n                    return text;\n                }\n                if (typeof text !== \"boolean\")\n                    text = true;\n                var buf = \"\";\n                for (var i = 0; i < elem.childNodes.length; i++) {\n                    var c = elem.childNodes[i];\n                    if (c.nodeName.toLowerCase() === \"#text\") {\n                        buf += c.nodeValue;\n                    }\n                    else if (text)\n                        buf += nodeText(c);\n                }\n                return buf;\n            }\n            else\n                return null;\n        }\n        function getNodeText(elem) {\n            return nodeText(elem);\n        }\n        browser.getNodeText = getNodeText;\n        function setNodeText(elem, text) {\n            nodeText(elem, text);\n        }\n        browser.setNodeText = setNodeText;\n        function getNodeOwnText(elem) {\n            return nodeText(elem, false);\n        }\n        browser.getNodeOwnText = getNodeOwnText;\n        function getRectOfParent(elem) {\n            if (elem === null)\n                return null;\n            return {\n                left: elem.offsetLeft,\n                top: elem.offsetTop,\n                width: elem.offsetWidth,\n                height: elem.offsetHeight\n            };\n        }\n        browser.getRectOfParent = getRectOfParent;\n        function getRectOfPage(elem) {\n            if (elem === null)\n                return null;\n            var offset = $(elem).offset();\n            return {\n                left: offset.left,\n                top: offset.top,\n                width: elem.offsetWidth,\n                height: elem.offsetHeight\n            };\n        }\n        browser.getRectOfPage = getRectOfPage;\n        function getRectOfScreen(elem) {\n            if (elem === null)\n                return null;\n            var offset = $(elem).offset();\n            var $doc = $(document);\n            return {\n                left: offset.left - $doc.scrollLeft(),\n                top: offset.top - $doc.scrollTop(),\n                width: elem.offsetWidth,\n                height: elem.offsetHeight\n            };\n        }\n        browser.getRectOfScreen = getRectOfScreen;\n        /**\n         * Get top window's body element\n         */\n        function getTopBody() {\n            return top.document.body || top.document.getElementsByTagName(\"BODY\")[0];\n        }\n        browser.getTopBody = getTopBody;\n        /**\n         * Get element's owner window\n         */\n        function getWindow(elem) {\n            return elem.ownerDocument.defaultView || elem.ownerDocument.parentWindow;\n        }\n        browser.getWindow = getWindow;\n        function getWindowScrollElement() {\n            if (tui.ieVer > 0 || tui.ffVer > 0) {\n                return window.document.documentElement;\n            }\n            else {\n                return window.document.body;\n            }\n        }\n        browser.getWindowScrollElement = getWindowScrollElement;\n        var keepTopList = [];\n        function keepTopProc() {\n            var scrollWindow = browser.getWindowScrollElement();\n            for (var _i = 0, keepTopList_1 = keepTopList; _i < keepTopList_1.length; _i++) {\n                var item = keepTopList_1[_i];\n                var rect = browser.getRectOfScreen(item.elem);\n                if (rect.top < item.top) {\n                    item.oldPosition = item.elem.style.position;\n                    item.oldTop = item.elem.style.top;\n                    item.oldLeft = item.elem.style.left;\n                    item.oldWidth = item.elem.style.width;\n                    item.oldZIndex = item.elem.style.zIndex;\n                    item.scrollTop = scrollWindow.scrollTop;\n                    item.scrollLeft = scrollWindow.scrollLeft;\n                    item.elem.style.zIndex = \"1000\";\n                    item.elem.style.width = item.elem.clientWidth + \"px\";\n                    item.elem.style.position = \"fixed\";\n                    item.elem.style.top = item.top + \"px\";\n                    item.elem.style.left = rect.left + \"px\";\n                    item.itemLeft = rect.left;\n                    item.keepTop = true;\n                }\n                else if (scrollWindow.scrollTop < item.scrollTop) {\n                    item.elem.style.position = item.oldPosition;\n                    item.elem.style.top = item.oldTop;\n                    item.elem.style.left = item.oldLeft;\n                    item.elem.style.width = item.oldWidth;\n                    item.keepTop = false;\n                }\n                else if (item.keepTop) {\n                    item.elem.style.left = (item.itemLeft - scrollWindow.scrollLeft + item.scrollLeft) + \"px\";\n                }\n            }\n        }\n        $(window).scroll(keepTopProc);\n        function keepToTop(elem, top) {\n            if (top === void 0) { top = 0; }\n            keepTopList.push({ keepTop: false, elem: elem, top: top });\n        }\n        browser.keepToTop = keepToTop;\n        function cancelKeepToTop(elem) {\n            var newList = [];\n            for (var _i = 0, keepTopList_2 = keepTopList; _i < keepTopList_2.length; _i++) {\n                var item = keepTopList_2[_i];\n                if (item.elem !== elem) {\n                    newList.push(item);\n                }\n                else {\n                    item.elem.style.position = item.oldPosition;\n                    item.elem.style.top = item.oldTop;\n                    item.elem.style.left = item.oldLeft;\n                    item.elem.style.width = item.oldWidth;\n                    item.keepTop = false;\n                }\n            }\n            keepTopList = newList;\n        }\n        browser.cancelKeepToTop = cancelKeepToTop;\n        function getCurrentStyle(elem) {\n            if (elem.currentStyle)\n                return elem.currentStyle;\n            else if (window.getComputedStyle) {\n                return window.getComputedStyle(elem);\n            }\n            else\n                return elem.style;\n        }\n        browser.getCurrentStyle = getCurrentStyle;\n        /**\n         * Test whether the button code is indecated that the event is triggered by a left mouse button.\n         */\n        function isLButton(e) {\n            var button = (typeof e.which !== \"undefined\") ? e.which : e.button;\n            if (button == 1) {\n                return true;\n            }\n            else\n                return false;\n        }\n        browser.isLButton = isLButton;\n        /**\n         * Prevent user press backspace key to go back to previous page\n         */\n        function banBackspace() {\n            function ban(e) {\n                var ev = e || window.event;\n                var obj = ev.target || ev.srcElement;\n                var t = obj.type || obj.getAttribute('type');\n                var vReadOnly = obj.readOnly;\n                var vDisabled = obj.disabled;\n                vReadOnly = (typeof vReadOnly === tui.UNDEFINED) ? false : vReadOnly;\n                vDisabled = (typeof vDisabled === tui.UNDEFINED) ? true : vDisabled;\n                var flag1 = ev.keyCode === 8 && (t === \"password\" || t === \"text\" || t === \"textarea\") && (vReadOnly || vDisabled);\n                var flag2 = ev.keyCode === 8 && t !== \"password\" && t !== \"text\" && t !== \"textarea\";\n                if (flag2 || flag1)\n                    return false;\n            }\n            $(document).bind(\"keypress\", ban);\n            $(document).bind(\"keydown\", ban);\n        }\n        browser.banBackspace = banBackspace;\n        function cancelDefault(event) {\n            if (event.preventDefault) {\n                event.preventDefault();\n            }\n            else {\n                event.returnValue = false;\n            }\n            return false;\n        }\n        browser.cancelDefault = cancelDefault;\n        function cancelBubble(event) {\n            if (event && event.stopPropagation)\n                event.stopPropagation();\n            else\n                window.event.cancelBubble = true;\n            return false;\n        }\n        browser.cancelBubble = cancelBubble;\n        /**\n         * Detect whether the given parent element is the real ancestry element\n         * @param elem\n         * @param parent\n         */\n        function isAncestry(elem, parent) {\n            while (elem) {\n                if (elem === parent)\n                    return true;\n                else\n                    elem = elem.parentNode;\n            }\n            return false;\n        }\n        browser.isAncestry = isAncestry;\n        /**\n         * Detect whether the given child element is the real posterity element\n         * @param elem\n         * @param child\n         */\n        function isPosterity(elem, child) {\n            return isAncestry(child, elem);\n        }\n        browser.isPosterity = isPosterity;\n        function isFireInside(elem, event) {\n            var target = event.target || event.srcElement;\n            return isPosterity(elem, target);\n        }\n        browser.isFireInside = isFireInside;\n        /**\n         * Detect whether the element is inside the document\n         * @param {type} elem\n         */\n        function isInDoc(elem) {\n            var obj = elem;\n            while (obj) {\n                if (obj.nodeName.toUpperCase() === \"HTML\")\n                    return true;\n                obj = obj.parentElement;\n            }\n            return false;\n        }\n        browser.isInDoc = isInDoc;\n        /**\n         * Set cookie value\n         * @param name\n         * @param value\n         * @param expires valid days\n         */\n        function saveCookie(name, value, expires, path, domain, secure) {\n            if (secure === void 0) { secure = false; }\n            // set time, it's in milliseconds\n            var today = new Date();\n            today.setTime(today.getTime());\n            /*\n            if the expires variable is set, make the correct\n            expires time, the current script below will set\n            it for x number of days, to make it for hours,\n            delete * 24, for minutes, delete * 60 * 24\n            */\n            if (expires) {\n                expires = expires * 1000 * 60 * 60 * 24;\n            }\n            var expires_date = new Date(today.getTime() + (expires));\n            document.cookie = name + \"=\" + encodeURIComponent(JSON.stringify(value)) +\n                ((expires) ? \";expires=\" + expires_date.toUTCString() : \"\") +\n                ((path) ? \";path=\" + path : \"\") +\n                ((domain) ? \";domain=\" + domain : \"\") +\n                ((secure) ? \";secure\" : \"\");\n        }\n        browser.saveCookie = saveCookie;\n        /**\n         * Get cookie value\n         * @param name\n         */\n        function loadCookie(name) {\n            var arr = document.cookie.match(new RegExp(\"(^| )\" + name + \"=([^;]*)(;|$)\"));\n            if (arr !== null)\n                return JSON.parse(decodeURIComponent(arr[2]));\n            else\n                return null;\n        }\n        browser.loadCookie = loadCookie;\n        /**\n         * Delete cookie\n         * @param name\n         */\n        function deleteCookie(name, path, domain) {\n            if (loadCookie(name))\n                document.cookie = name + \"=\" +\n                    ((path) ? \";path=\" + path : \"\") +\n                    ((domain) ? \";domain=\" + domain : \"\") +\n                    \";expires=Thu, 01-Jan-1970 00:00:01 GMT\";\n        }\n        browser.deleteCookie = deleteCookie;\n        /**\n         * Save key value into local storage, if local storage doesn't usable then use local cookie instead.\n         * @param {String} key\n         * @param {String} value\n         * @param {Boolean} sessionOnly If true data only be keeped in this session\n         */\n        function saveData(key, value, sessionOnly) {\n            if (sessionOnly === void 0) { sessionOnly = false; }\n            try {\n                var storage = (sessionOnly === true ? window.sessionStorage : window.localStorage);\n                if (storage) {\n                    storage.setItem(key, JSON.stringify(value));\n                }\n                else\n                    saveCookie(key, value, 365);\n            }\n            catch (e) {\n            }\n        }\n        browser.saveData = saveData;\n        /**\n         * Load value from local storage, if local storage doesn't usable then use local cookie instead.\n         * @param {String} key\n         * @param {Boolean} sessionOnly If true data only be keeped in this session\n         */\n        function loadData(key, sessionOnly) {\n            if (sessionOnly === void 0) { sessionOnly = false; }\n            try {\n                var storage = (sessionOnly === true ? window.sessionStorage : window.localStorage);\n                if (storage)\n                    return JSON.parse(storage.getItem(key));\n                else\n                    return loadCookie(key);\n            }\n            catch (e) {\n                return null;\n            }\n        }\n        browser.loadData = loadData;\n        /**\n         * Remove value from local storage, if local storage doesn't usable then use local cookie instead.\n         * @param key\n         * @param {Boolean} sessionOnly If true data only be keeped in this session\n         */\n        function deleteData(key, sessionOnly) {\n            if (sessionOnly === void 0) { sessionOnly = false; }\n            try {\n                var storage = (sessionOnly === true ? window.sessionStorage : window.localStorage);\n                if (storage)\n                    storage.removeItem(key);\n                else\n                    deleteCookie(key);\n            }\n            catch (e) {\n            }\n        }\n        browser.deleteData = deleteData;\n        var _accMap = {};\n        function accelerate(e) {\n            var k = browser.KeyCode[e.keyCode];\n            if (!k) {\n                return;\n            }\n            k = k.toUpperCase();\n            var key = (e.ctrlKey ? \"CTRL\" : \"\");\n            if (e.altKey) {\n                if (key.length > 0)\n                    key += \"+\";\n                key += \"ALT\";\n            }\n            if (e.shiftKey) {\n                if (key.length > 0)\n                    key += \"+\";\n                key += \"SHIFT\";\n            }\n            if (e.metaKey) {\n                if (key.length > 0)\n                    key += \"+\";\n                key += \"META\";\n            }\n            if (key.length > 0)\n                key += \"+\";\n            key += k;\n            var l = _accMap[key];\n            if (l) {\n                for (var i = 0; i < l.length; i++) {\n                    if (tui.event.fire(\"accelerate\", { name: l[i], event: e }) === false)\n                        return;\n                }\n            }\n        }\n        function addAccelerate(key, actionId) {\n            key = key.toUpperCase();\n            var l = null;\n            if (_accMap.hasOwnProperty(key))\n                l = _accMap[key];\n            else {\n                l = [];\n                _accMap[key] = l;\n            }\n            if (l.indexOf(actionId) < 0)\n                l.push(actionId);\n        }\n        browser.addAccelerate = addAccelerate;\n        function deleteAccelerate(key, actionId) {\n            key = key.toUpperCase();\n            if (!_accMap.hasOwnProperty(key))\n                return;\n            var l = _accMap[key];\n            var pos = l.indexOf(actionId);\n            if (pos >= 0) {\n                l.splice(pos, 1);\n                if (l.length <= 0)\n                    delete _accMap[key];\n            }\n        }\n        browser.deleteAccelerate = deleteAccelerate;\n        $(document).keydown(accelerate);\n        function getUrlParam(key) {\n            var reg = new RegExp(\"(^|&)\" + key + \"=([^&]*)(&|$)\");\n            var r = window.location.search.substr(1).match(reg);\n            if (r != null)\n                return decodeURIComponent(r[2]);\n            return null;\n        }\n        browser.getUrlParam = getUrlParam;\n        function getEventPosition(e, allFingers) {\n            if (allFingers === void 0) { allFingers = false; }\n            var positions = [];\n            var event = e.originalEvent || e;\n            if (event.touches) {\n                var touchList = (allFingers ? event.touches : event.changedTouches);\n                for (var i = 0; i < touchList.length; i++) {\n                    var touch = touchList[i];\n                    positions.push({ x: touch.clientX, y: touch.clientY, id: touch.identifier });\n                }\n            }\n            else {\n                positions.push({ x: event.clientX, y: event.clientY });\n            }\n            return positions;\n        }\n        browser.getEventPosition = getEventPosition;\n        function setInnerHtml(elem, content) {\n            if (tui.ieVer > 0 && tui.ieVer < 9) {\n                elem.innerHTML = \"\";\n                var d = document.createElement(\"div\");\n                d.innerHTML = content;\n                while (d.children.length > 0)\n                    elem.appendChild(d.children[0]);\n            }\n            else {\n                elem && (elem.innerHTML = content);\n            }\n        }\n        browser.setInnerHtml = setInnerHtml;\n        window.$text = toSafeText;\n    })(browser = tui.browser || (tui.browser = {}));\n})(tui || (tui = {}));\nvar tui;\n(function (tui) {\n    var browser;\n    (function (browser) {\n        \"use strict\";\n        (function (KeyCode) {\n            KeyCode[KeyCode[\"BACK\"] = 8] = \"BACK\";\n            KeyCode[KeyCode[\"TAB\"] = 9] = \"TAB\";\n            KeyCode[KeyCode[\"ENTER\"] = 13] = \"ENTER\";\n            KeyCode[KeyCode[\"SHIFT\"] = 16] = \"SHIFT\";\n            KeyCode[KeyCode[\"CTRL\"] = 17] = \"CTRL\";\n            KeyCode[KeyCode[\"ALT\"] = 18] = \"ALT\";\n            KeyCode[KeyCode[\"PAUSE\"] = 19] = \"PAUSE\";\n            KeyCode[KeyCode[\"CAPS\"] = 20] = \"CAPS\";\n            KeyCode[KeyCode[\"ESCAPE\"] = 27] = \"ESCAPE\";\n            KeyCode[KeyCode[\"SPACE\"] = 32] = \"SPACE\";\n            KeyCode[KeyCode[\"PRIOR\"] = 33] = \"PRIOR\";\n            KeyCode[KeyCode[\"NEXT\"] = 34] = \"NEXT\";\n            KeyCode[KeyCode[\"END\"] = 35] = \"END\";\n            KeyCode[KeyCode[\"HOME\"] = 36] = \"HOME\";\n            KeyCode[KeyCode[\"LEFT\"] = 37] = \"LEFT\";\n            KeyCode[KeyCode[\"UP\"] = 38] = \"UP\";\n            KeyCode[KeyCode[\"RIGHT\"] = 39] = \"RIGHT\";\n            KeyCode[KeyCode[\"DOWN\"] = 40] = \"DOWN\";\n            KeyCode[KeyCode[\"PRINT\"] = 44] = \"PRINT\";\n            KeyCode[KeyCode[\"INSERT\"] = 45] = \"INSERT\";\n            KeyCode[KeyCode[\"DELETE\"] = 46] = \"DELETE\";\n            KeyCode[KeyCode[\"KEY_0\"] = 48] = \"KEY_0\";\n            KeyCode[KeyCode[\"KEY_1\"] = 49] = \"KEY_1\";\n            KeyCode[KeyCode[\"KEY_2\"] = 50] = \"KEY_2\";\n            KeyCode[KeyCode[\"KEY_3\"] = 51] = \"KEY_3\";\n            KeyCode[KeyCode[\"KEY_4\"] = 52] = \"KEY_4\";\n            KeyCode[KeyCode[\"KEY_5\"] = 53] = \"KEY_5\";\n            KeyCode[KeyCode[\"KEY_6\"] = 54] = \"KEY_6\";\n            KeyCode[KeyCode[\"KEY_7\"] = 55] = \"KEY_7\";\n            KeyCode[KeyCode[\"KEY_8\"] = 56] = \"KEY_8\";\n            KeyCode[KeyCode[\"KEY_9\"] = 57] = \"KEY_9\";\n            KeyCode[KeyCode[\"SEMICOLON\"] = 59] = \"SEMICOLON\";\n            KeyCode[KeyCode[\"EQUALS\"] = 61] = \"EQUALS\";\n            KeyCode[KeyCode[\"A\"] = 65] = \"A\";\n            KeyCode[KeyCode[\"B\"] = 66] = \"B\";\n            KeyCode[KeyCode[\"C\"] = 67] = \"C\";\n            KeyCode[KeyCode[\"D\"] = 68] = \"D\";\n            KeyCode[KeyCode[\"E\"] = 69] = \"E\";\n            KeyCode[KeyCode[\"F\"] = 70] = \"F\";\n            KeyCode[KeyCode[\"G\"] = 71] = \"G\";\n            KeyCode[KeyCode[\"H\"] = 72] = \"H\";\n            KeyCode[KeyCode[\"I\"] = 73] = \"I\";\n            KeyCode[KeyCode[\"J\"] = 74] = \"J\";\n            KeyCode[KeyCode[\"K\"] = 75] = \"K\";\n            KeyCode[KeyCode[\"L\"] = 76] = \"L\";\n            KeyCode[KeyCode[\"M\"] = 77] = \"M\";\n            KeyCode[KeyCode[\"N\"] = 78] = \"N\";\n            KeyCode[KeyCode[\"O\"] = 79] = \"O\";\n            KeyCode[KeyCode[\"P\"] = 80] = \"P\";\n            KeyCode[KeyCode[\"Q\"] = 81] = \"Q\";\n            KeyCode[KeyCode[\"R\"] = 82] = \"R\";\n            KeyCode[KeyCode[\"S\"] = 83] = \"S\";\n            KeyCode[KeyCode[\"T\"] = 84] = \"T\";\n            KeyCode[KeyCode[\"U\"] = 85] = \"U\";\n            KeyCode[KeyCode[\"V\"] = 86] = \"V\";\n            KeyCode[KeyCode[\"W\"] = 87] = \"W\";\n            KeyCode[KeyCode[\"X\"] = 88] = \"X\";\n            KeyCode[KeyCode[\"Y\"] = 89] = \"Y\";\n            KeyCode[KeyCode[\"Z\"] = 90] = \"Z\";\n            KeyCode[KeyCode[\"WINDOWS\"] = 91] = \"WINDOWS\";\n            KeyCode[KeyCode[\"NUM_0\"] = 96] = \"NUM_0\";\n            KeyCode[KeyCode[\"NUM_1\"] = 97] = \"NUM_1\";\n            KeyCode[KeyCode[\"NUM_2\"] = 98] = \"NUM_2\";\n            KeyCode[KeyCode[\"NUM_3\"] = 99] = \"NUM_3\";\n            KeyCode[KeyCode[\"NUM_4\"] = 100] = \"NUM_4\";\n            KeyCode[KeyCode[\"NUM_5\"] = 101] = \"NUM_5\";\n            KeyCode[KeyCode[\"NUM_6\"] = 102] = \"NUM_6\";\n            KeyCode[KeyCode[\"NUM_7\"] = 103] = \"NUM_7\";\n            KeyCode[KeyCode[\"NUM_8\"] = 104] = \"NUM_8\";\n            KeyCode[KeyCode[\"NUM_9\"] = 105] = \"NUM_9\";\n            KeyCode[KeyCode[\"NUM_MUL\"] = 106] = \"NUM_MUL\";\n            KeyCode[KeyCode[\"NUM_PLUS\"] = 107] = \"NUM_PLUS\";\n            KeyCode[KeyCode[\"NUM_MINUS\"] = 109] = \"NUM_MINUS\";\n            KeyCode[KeyCode[\"NUM_DOT\"] = 110] = \"NUM_DOT\";\n            KeyCode[KeyCode[\"NUM_DIV\"] = 111] = \"NUM_DIV\";\n            KeyCode[KeyCode[\"F1\"] = 112] = \"F1\";\n            KeyCode[KeyCode[\"F2\"] = 113] = \"F2\";\n            KeyCode[KeyCode[\"F3\"] = 114] = \"F3\";\n            KeyCode[KeyCode[\"F4\"] = 115] = \"F4\";\n            KeyCode[KeyCode[\"F5\"] = 116] = \"F5\";\n            KeyCode[KeyCode[\"F6\"] = 117] = \"F6\";\n            KeyCode[KeyCode[\"F7\"] = 118] = \"F7\";\n            KeyCode[KeyCode[\"F8\"] = 119] = \"F8\";\n            KeyCode[KeyCode[\"F9\"] = 120] = \"F9\";\n            KeyCode[KeyCode[\"F10\"] = 121] = \"F10\";\n            KeyCode[KeyCode[\"F11\"] = 122] = \"F11\";\n            KeyCode[KeyCode[\"F12\"] = 123] = \"F12\";\n            KeyCode[KeyCode[\"DASH\"] = 173] = \"DASH\";\n            KeyCode[KeyCode[\"COMMA\"] = 188] = \"COMMA\";\n            KeyCode[KeyCode[\"PERIOD\"] = 190] = \"PERIOD\";\n            KeyCode[KeyCode[\"SLASH\"] = 191] = \"SLASH\";\n            KeyCode[KeyCode[\"GRAVE\"] = 192] = \"GRAVE\";\n            KeyCode[KeyCode[\"LEFT_BRACKET\"] = 219] = \"LEFT_BRACKET\";\n            KeyCode[KeyCode[\"BACKSLASH\"] = 220] = \"BACKSLASH\";\n            KeyCode[KeyCode[\"RIGHT_BRACKET\"] = 221] = \"RIGHT_BRACKET\";\n            KeyCode[KeyCode[\"QUOTE\"] = 222] = \"QUOTE\";\n        })(browser.KeyCode || (browser.KeyCode = {}));\n        var KeyCode = browser.KeyCode;\n    })(browser = tui.browser || (tui.browser = {}));\n})(tui || (tui = {}));\n/// <reference path=\"../core.ts\" />\n/// <reference path=\"browser.ts\" />\nvar tui;\n(function (tui) {\n    var browser;\n    (function (browser) {\n        \"use strict\";\n        var _rules;\n        var _handler;\n        function hashChange() {\n            var hash = location.hash;\n            var state = null;\n            if (hash) {\n                var p = hash.indexOf(\"?\");\n                if (p >= 0)\n                    state = hash.substring(1, p);\n                else\n                    state = hash.substring(1);\n            }\n            if (_rules) {\n                var matchRule = null;\n                for (var _i = 0, _rules_1 = _rules; _i < _rules_1.length; _i++) {\n                    var r = _rules_1[_i];\n                    if (r.state === state) {\n                        matchRule = r;\n                        break;\n                    }\n                }\n                if (matchRule == null) {\n                    for (var _a = 0, _rules_2 = _rules; _a < _rules_2.length; _a++) {\n                        var r = _rules_2[_a];\n                        if (r.state === \"/\") {\n                            matchRule = r;\n                            break;\n                        }\n                    }\n                }\n                if (matchRule) {\n                    if (matchRule.handler && matchRule.handler(matchRule.state, hash, matchRule.url) === false) {\n                        return;\n                    }\n                    _handler && _handler(matchRule.state, hash, matchRule.url);\n                }\n            }\n        }\n        function startRouter(rules, handler) {\n            _rules = rules;\n            _handler = handler;\n            $(window).on(\"hashchange\", hashChange);\n            tui.event.on(\"initialized\", function () {\n                hashChange();\n            });\n        }\n        browser.startRouter = startRouter;\n        function stopRouter() {\n            $(window).off(\"hashchange\", hashChange);\n        }\n        browser.stopRouter = stopRouter;\n    })(browser = tui.browser || (tui.browser = {}));\n})(tui || (tui = {}));\n/// <reference path=\"../core.ts\" />\n/// <reference path=\"browser.ts\" />\nvar tui;\n(function (tui) {\n    var browser;\n    (function (browser) {\n        \"use strict\";\n        function fileFromPath(file) {\n            return file.replace(/.*(\\/|\\\\)/, \"\");\n        }\n        function getExt(file) {\n            return (-1 !== file.indexOf('.')) ? file.replace(/.*[.]/, '') : '';\n        }\n        function preventDefault(e) {\n            return e.preventDefault();\n        }\n        var Uploader = (function (_super) {\n            __extends(Uploader, _super);\n            function Uploader(container, options) {\n                _super.call(this);\n                this._settings = {\n                    action: \"upload\",\n                    name: \"file\",\n                    multiple: false,\n                    autoSubmit: true\n                };\n                this._container = null;\n                this._input = null;\n                this.setOptions(options);\n                if (!container || container.nodeType !== 1) {\n                    throw new Error(\"Please make sure that you're passing a valid element\");\n                }\n                if (container.nodeName.toLowerCase() === 'a') {\n                    // disable link\n                    $(container).on('click', function (e) { e.preventDefault(); });\n                }\n                // DOM element\n                this._container = container;\n                // DOM element                 \n                this._input = null;\n            }\n            Uploader.prototype.setOptions = function (options) {\n                if (options) {\n                    for (var i in options) {\n                        if (options.hasOwnProperty(i)) {\n                            this._settings[i] = options[i];\n                        }\n                    }\n                }\n            };\n            Uploader.prototype.getOptions = function () {\n                return this._settings;\n            };\n            Uploader.prototype.createIframe = function () {\n                var id = tui.tuid();\n                var iframe = browser.toElement('<iframe src=\"javascript:false;\" name=\"' + id + '\" />');\n                iframe.setAttribute('id', id);\n                iframe.style.display = 'none';\n                document.body.appendChild(iframe);\n                var doc = iframe.contentDocument ? iframe.contentDocument : window.frames[iframe.id].document;\n                try {\n                    doc.charset = \"utf-8\";\n                }\n                catch (e) { }\n                return iframe;\n            };\n            Uploader.prototype.createForm = function (iframe) {\n                var settings = this._settings;\n                var form = browser.toElement('<form method=\"post\" enctype=\"multipart/form-data\" accept-charset=\"UTF-8\"></form>');\n                form.setAttribute('accept-charset', 'UTF-8');\n                if (settings.action)\n                    form.setAttribute('action', settings.action);\n                form.setAttribute('target', iframe.name);\n                form.style.display = 'none';\n                document.body.appendChild(form);\n                // Create hidden input element for each data key\n                return form;\n            };\n            Uploader.prototype.createInput = function () {\n                var _this = this;\n                if (this._input) {\n                    return;\n                }\n                var input = document.createElement(\"input\");\n                input.setAttribute('type', 'file');\n                if (this._settings.accept)\n                    input.setAttribute('accept', this._settings.accept);\n                input.setAttribute('name', this._settings.name);\n                if (this._settings.multiple)\n                    input.setAttribute('multiple', 'multiple');\n                if (tui.ieVer > 0)\n                    input.title = \"\";\n                else\n                    input.title = \" \";\n                $(input).css({\n                    'position': 'absolute',\n                    'right': 0,\n                    'top': 0,\n                    'height': '1000px',\n                    'width': '2000px',\n                    'margin': 0,\n                    'padding': 0,\n                    'opacity': 0,\n                    'filter': 'alpha(opacity=0)',\n                    'fontSize': '10000px',\n                    'fontFamily': 'sans-serif',\n                    'cursor': 'pointer'\n                });\n                $(input).on('change', function (e) {\n                    if (!input || input.value === '') {\n                        return;\n                    }\n                    // Get filename from input, required                \n                    // as some browsers have path instead of it\n                    var file = fileFromPath(input.value);\n                    var fileExt = getExt(file);\n                    if (_this.fire(\"change\", { e: e, \"file\": file, \"ext\": fileExt }) === false) {\n                        _this.clearInput();\n                        return;\n                    }\n                    // Submit form when value is changed\n                    if (_this._settings.autoSubmit) {\n                        _this.submit();\n                    }\n                });\n                var style = browser.getCurrentStyle(this._container);\n                if (style.position === \"static\") {\n                    this._container.style.position = \"relative\";\n                }\n                this._container.style.overflow = \"hidden\";\n                this._container.appendChild(input);\n                this._input = input;\n                $(this._input).focus(function () {\n                    _this.fire(\"focus\");\n                });\n                $(this._input).blur(function () {\n                    _this.fire(\"blur\");\n                });\n            };\n            Uploader.prototype.deleteInput = function () {\n                if (!this._input) {\n                    return;\n                }\n                browser.removeNode(this._input);\n                this._input = null;\n            };\n            Uploader.prototype.getInput = function () {\n                return this._input;\n            };\n            Uploader.prototype.clearInput = function () {\n                this.deleteInput();\n                this.createInput();\n            };\n            /**\n            * Gets response from iframe and fires onComplete event when ready\n            * @param iframe\n            * @param file Filename to use in onComplete callback\n            */\n            Uploader.prototype.processResponse = function (iframe, file) {\n                var _this = this;\n                // getting response\n                var waitbox = tui.waitbox(tui.str(\"Uploading...\"));\n                var toDeleteFlag = false, settings = this._settings;\n                $(iframe).on('load', function () {\n                    if (iframe.src === \"javascript:'%3Chtml%3E%3C/html%3E';\" ||\n                        // For FF, IE\n                        iframe.src === \"javascript:'<html></html>';\") {\n                        // First time around, do not delete.\n                        // We reload to blank page, so that reloading main page\n                        // does not re-submit the post.\n                        if (toDeleteFlag) {\n                            // Fix busy state in FF3\n                            setTimeout(function () {\n                                browser.removeNode(iframe);\n                            }, 0);\n                        }\n                        return;\n                    }\n                    var doc = iframe.contentDocument ? iframe.contentDocument : window.frames[iframe.id].document;\n                    // fixing Opera 9.26,10.00\n                    if (doc.readyState && doc.readyState !== 'complete') {\n                        waitbox.close();\n                        return;\n                    }\n                    // fixing Opera 9.64\n                    if (doc.body && doc.body.innerHTML === \"false\") {\n                        waitbox.close();\n                        return;\n                    }\n                    waitbox.close();\n                    var response;\n                    if (doc.body) {\n                        // response is html document or plain text\n                        response = doc.body.innerHTML;\n                        try {\n                            if (doc.body.firstChild && doc.body.firstChild.nodeName.toUpperCase() === 'PRE') {\n                                doc.normalize && doc.normalize();\n                                response = doc.body.firstChild.firstChild.nodeValue;\n                            }\n                            if (response) {\n                                var responseObj = eval(\"(\" + response + \")\");\n                                if (!responseObj) {\n                                    _this.fireError();\n                                }\n                                else if (responseObj.error) {\n                                    _this.fireError(responseObj.error);\n                                }\n                                else if (responseObj.fileId && responseObj.fileName)\n                                    _this.fire(\"success\", { \"file\": file, \"ext\": getExt(file), \"response\": responseObj });\n                                else\n                                    _this.fireError();\n                            }\n                            else {\n                                _this.fireError();\n                            }\n                        }\n                        catch (e) {\n                            _this.fireError();\n                        }\n                    }\n                    else {\n                        _this.fireError();\n                    }\n                    // Reload blank page, so that reloading main page\n                    // does not re-submit the post. Also, remember to\n                    // delete the frame\n                    toDeleteFlag = true;\n                    // Fix IE mixed content issue\n                    iframe.src = \"javascript:'<html></html>';\";\n                    browser.removeNode(iframe);\n                });\n            };\n            Uploader.prototype.fireInvalidError = function () {\n                this.fire(\"error\", { \"response\": { error: tui.str(\"Upload failed: invalid response content!\") } });\n            };\n            Uploader.prototype.fireError = function (errorMessage) {\n                this.fire(\"error\", { \"response\": {\n                        error: tui.str(\"Upload failed!\") + (errorMessage ? errorMessage : \"\")\n                    } });\n            };\n            Uploader.prototype.submitV5 = function (file, extraData) {\n                var _this = this;\n                var waitbox = tui.waitbox(tui.str(\"Uploading...\"));\n                var fd = new FormData();\n                for (var i = 0; i < this._input.files.length; i++)\n                    fd.append(this._settings.name, this._input.files[i]);\n                var xhr = new XMLHttpRequest();\n                xhr.upload.addEventListener(\"progress\", function (e) {\n                    if (e.lengthComputable) {\n                        var percentComplete = Math.round(e.loaded * 100 / e.total);\n                        waitbox.setMessage(tui.str(\"Uploading... \") + percentComplete.toString() + '%');\n                    }\n                }, false);\n                xhr.addEventListener(\"load\", function (e) {\n                    waitbox.close();\n                    if (e.target.status != 200) {\n                        _this.fire(\"error\", { \"file\": file, \"ext\": getExt(file), \"response\": {\n                                error: tui.str(e.target.response || e.target.statusText || e.target.status)\n                            } });\n                    }\n                    else {\n                        try {\n                            var result = JSON.parse(e.target.responseText);\n                            if (result.fileId && result.fileName)\n                                _this.fire(\"success\", { \"file\": file, \"ext\": getExt(file), \"response\": result });\n                            else\n                                _this.fireError();\n                        }\n                        catch (e) {\n                            _this.fireInvalidError();\n                        }\n                    }\n                }, false);\n                xhr.addEventListener(\"error\", function (e) {\n                    waitbox.close();\n                    _this.fireError();\n                }, false);\n                xhr.addEventListener(\"abort\", function (e) {\n                    waitbox.close();\n                    _this.fireError();\n                }, false);\n                xhr.open(\"POST\", this._settings.action);\n                xhr.send(fd);\n                this.clearInput();\n            };\n            Uploader.prototype.submitV4 = function (file, extraData) {\n                // sending request    \n                var iframe = this.createIframe();\n                var form = this.createForm(iframe);\n                // assuming following structure\n                // div -> input type='file'\n                form.appendChild(this._input);\n                if (extraData) {\n                    for (var prop in extraData) {\n                        if (extraData.hasOwnProperty(prop)) {\n                            var el = document.createElement(\"input\");\n                            el.setAttribute('type', 'hidden');\n                            el.setAttribute('name', prop);\n                            el.setAttribute('value', extraData[prop]);\n                            form.appendChild(el);\n                        }\n                    }\n                }\n                this.processResponse(iframe, file);\n                form.submit();\n                // request set, clean up\n                browser.removeNode(form);\n                form = null;\n                this.clearInput();\n            };\n            Uploader.prototype.submit = function (extraData) {\n                if (!this._input || this._input.value === '') {\n                    return;\n                }\n                var file = fileFromPath(this._input.value);\n                // user returned false to cancel upload\n                if (this.fire(\"submit\", { \"file\": file, \"ext\": getExt(file) }) === false) {\n                    this.clearInput();\n                    this.fire(\"blur\");\n                    return;\n                }\n                this.fire(\"blur\");\n                if (typeof FormData === \"function\") {\n                    this.submitV5(file, extraData);\n                }\n                else\n                    this.submitV4(file, extraData);\n            };\n            return Uploader;\n        }(tui.EventObject));\n        browser.Uploader = Uploader;\n        function createUploader(container, options) {\n            return new Uploader(container, options);\n        }\n        browser.createUploader = createUploader;\n    })(browser = tui.browser || (tui.browser = {}));\n})(tui || (tui = {}));\n/// <reference path=\"../core.ts\" />\nvar tui;\n(function (tui) {\n    var ds;\n    (function (ds) {\n        \"use strict\";\n        var DSBase = (function (_super) {\n            __extends(DSBase, _super);\n            function DSBase() {\n                _super.apply(this, arguments);\n                this._finalData = null;\n                this._order = null;\n                this._filter = null;\n            }\n            DSBase.prototype.setOrder = function (order) {\n                this._order = order;\n                this.build();\n            };\n            DSBase.prototype.getOrder = function () {\n                return this._order;\n            };\n            DSBase.prototype.setFilter = function (filter) {\n                this._filter = filter;\n                this.build();\n            };\n            DSBase.prototype.getFilter = function () {\n                return this._filter;\n            };\n            return DSBase;\n        }(tui.EventObject));\n        ds.DSBase = DSBase;\n        function filter(value, filter) {\n            if (filter) {\n                for (var _i = 0, filter_1 = filter; _i < filter_1.length; _i++) {\n                    var f = filter_1[_i];\n                    var v = value[f.key];\n                    if (v == null) {\n                        if (f.value == null)\n                            continue;\n                        else\n                            return false;\n                    }\n                    try {\n                        var regex = new RegExp(f.value);\n                        if (v.toString().match(regex) == null)\n                            return false;\n                    }\n                    catch (e) {\n                        if (v.indexOf(f.value) < 0)\n                            return false;\n                    }\n                }\n            }\n            return true;\n        }\n        function sort(data, order, treeData) {\n            if (order && order.length > 0) {\n                data.sort(function (a, b) {\n                    for (var _i = 0, order_1 = order; _i < order_1.length; _i++) {\n                        var s = order_1[_i];\n                        var aVal = treeData ? a.item[s.key] : a[s.key];\n                        var bVal = treeData ? b.item[s.key] : b[s.key];\n                        if (aVal == bVal)\n                            continue;\n                        if (s.desc) {\n                            return aVal > bVal ? -1 : 1;\n                        }\n                        else\n                            return aVal < bVal ? -1 : 1;\n                    }\n                    return 0;\n                });\n            }\n        }\n        var List = (function (_super) {\n            __extends(List, _super);\n            function List(data, filter, order) {\n                if (filter === void 0) { filter = null; }\n                if (order === void 0) { order = null; }\n                _super.call(this);\n                this._data = data;\n                this._filter = filter;\n                this._order = order;\n                this.build();\n            }\n            List.prototype.length = function () {\n                if (this._finalData == null)\n                    return this._data.length;\n                else\n                    return this._finalData.length;\n            };\n            List.prototype.get = function (index) {\n                if (this._finalData == null)\n                    return this._data[index];\n                else\n                    return this._finalData[index];\n            };\n            List.prototype.build = function () {\n                var _this = this;\n                if (this._data == null) {\n                    this._finalData = null;\n                    return;\n                }\n                if ((this._filter == null || this._filter.length == 0) &&\n                    (this._order == null || this._order.length == 0))\n                    this._finalData = null;\n                else {\n                    this._finalData = this._data.filter(function (value, index, array) {\n                        return filter(value, _this._filter);\n                    });\n                    sort(this._finalData, this._order, false);\n                }\n                this.fire(\"update\", { \"completely\": true });\n            };\n            return List;\n        }(DSBase));\n        ds.List = List;\n        var RemoteList = (function (_super) {\n            __extends(RemoteList, _super);\n            function RemoteList(cacheSize, filter, order) {\n                if (cacheSize === void 0) { cacheSize = 50; }\n                if (filter === void 0) { filter = null; }\n                if (order === void 0) { order = null; }\n                _super.call(this);\n                this._cache1 = null;\n                this._cache2 = null;\n                this._length = null;\n                this._cacheSize = cacheSize;\n                this.reset();\n                this._filter = filter;\n                this._order = order;\n            }\n            RemoteList.prototype.length = function () {\n                if (this._length === null) {\n                    this.fire(\"query\", {\n                        begin: 0,\n                        size: this._cacheSize,\n                        filter: this._filter,\n                        order: this._order\n                    });\n                    return 0;\n                }\n                else\n                    return this._length;\n            };\n            RemoteList.prototype.get = function (index) {\n                if (index >= 0 && index < this.length()) {\n                    var item = this.getFromCache(index, this._cache1);\n                    if (item === null)\n                        item = this.getFromCache(index, this._cache2);\n                    if (item === null) {\n                        var page = this.getIndexPage(index);\n                        if (this._cache1 === null) {\n                            this._fillCache = 1;\n                        }\n                        else if (this._cache2 === null)\n                            this._fillCache = 2;\n                        else {\n                            this._fillCache = Math.abs(page - this._cache1.page) > Math.abs(page - this._cache2.page) ? 1 : 2;\n                        }\n                        this.fire(\"query\", {\n                            begin: page * this._cacheSize,\n                            size: this._cacheSize,\n                            filter: this._filter,\n                            rder: this._order\n                        });\n                    }\n                }\n                else\n                    return null;\n            };\n            RemoteList.prototype.getIndexPage = function (index) {\n                return Math.ceil((index + 1) / this._cacheSize - 1);\n            };\n            RemoteList.prototype.getFromCache = function (index, cache) {\n                if (cache === null)\n                    return null;\n                var begin = cache.page * this._cacheSize;\n                var end = begin + cache.data.length;\n                if (index >= begin && index < end)\n                    return cache.data[index - begin];\n                else\n                    return null;\n            };\n            RemoteList.prototype.update = function (result) {\n                var completely = this._length != result.length;\n                this._length = result.length;\n                if (this._fillCache === 1) {\n                    this._cache1 = { page: this.getIndexPage(result.begin), data: result.data };\n                }\n                else if (this._fillCache === 2) {\n                    this._cache2 = { page: this.getIndexPage(result.begin), data: result.data };\n                }\n                this.fire(\"update\", { \"completely\": completely });\n            };\n            RemoteList.prototype.reset = function () {\n                this._length = null;\n                this._cache1 = this._cache2 = null;\n                this._fillCache = 1;\n            };\n            RemoteList.prototype.build = function () {\n                this.reset();\n                this.fire(\"query\", {\n                    begin: 0,\n                    size: this._cacheSize,\n                    filter: this._filter,\n                    order: this._order\n                });\n            };\n            return RemoteList;\n        }(DSBase));\n        ds.RemoteList = RemoteList; // End of RemoteListSource\n        var TreeBase = (function (_super) {\n            __extends(TreeBase, _super);\n            function TreeBase() {\n                _super.apply(this, arguments);\n                this._index = null;\n                this._rawData = null;\n            }\n            TreeBase.prototype.getConfig = function () {\n                return this._config;\n            };\n            TreeBase.prototype.length = function () {\n                if (this._finalData)\n                    return this._finalData.length;\n                else if (this._index)\n                    return this._index.length;\n                else\n                    return 0;\n            };\n            TreeBase.prototype.getRawData = function () {\n                return this._rawData;\n            };\n            TreeBase.prototype.get = function (index) {\n                if (this._finalData) {\n                    if (index >= 0 && index < this._finalData.length)\n                        return this._finalData[index];\n                    else\n                        return null;\n                }\n                else if (index >= 0 && index < this.length()) {\n                    return this._index[index];\n                }\n                else\n                    return null;\n            };\n            TreeBase.prototype.findNodeIndex = function (node) {\n                for (var i = 0; i < this._index.length; i++) {\n                    if (this._index[i] === node)\n                        return i;\n                }\n                return -1;\n            };\n            TreeBase.prototype.expandItems = function (parent, items, index, level, init) {\n                if (init === void 0) { init = false; }\n                if (typeof items === tui.UNDEFINED || items === null)\n                    items = [];\n                for (var _i = 0, items_1 = items; _i < items_1.length; _i++) {\n                    var item = items_1[_i];\n                    var children = item[this._config.children];\n                    var expand = void 0;\n                    if (init) {\n                        expand = false;\n                        item[this._config.expand] = false;\n                    }\n                    else\n                        expand = item[this._config.expand] && children && children.length > 0;\n                    var hasChild = void 0;\n                    if (children && children.length > 0)\n                        hasChild = true;\n                    else\n                        hasChild = !!item[this._config.hasChild];\n                    var node = {\n                        parent: parent,\n                        hasChild: hasChild,\n                        item: item,\n                        level: level,\n                        expand: expand\n                    };\n                    index && index.push(node);\n                    if (expand) {\n                        this.expandItems(node, children, index, level + 1);\n                    }\n                }\n            };\n            TreeBase.prototype.getExpandCount = function (children) {\n                if (!children)\n                    return 0;\n                var delCount = children.length;\n                for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\n                    var child = children_1[_i];\n                    if (child.children && child.children.length > 0 && child[this._config.expand]) {\n                        delCount += this.getExpandCount(child.children);\n                    }\n                }\n                return delCount;\n            };\n            TreeBase.prototype.expand = function (index) {\n                if (index >= 0 && index < this._index.length) {\n                    var node = this._index[index];\n                    if (node.hasChild && !node.expand) {\n                        node.expand = true;\n                        node.item[this._config.expand] = true;\n                        var appendNodes = [];\n                        this.expandItems(node, node.item[this._config.children], appendNodes, node.level + 1);\n                        (_a = this._index).splice.apply(_a, [index + 1, 0].concat(appendNodes));\n                    }\n                }\n                var _a;\n            };\n            TreeBase.prototype.collapse = function (index) {\n                if (index >= 0 && index < this._index.length) {\n                    var node = this._index[index];\n                    if (node.hasChild && node.expand) {\n                        node.expand = false;\n                        node.item[this._config.expand] = false;\n                        var delCount = this.getExpandCount(node.item[this._config.children]);\n                        this._index.splice(index + 1, delCount);\n                    }\n                }\n            };\n            return TreeBase;\n        }(DSBase));\n        ds.TreeBase = TreeBase;\n        var Tree = (function (_super) {\n            __extends(Tree, _super);\n            function Tree(data, config, filter, order) {\n                if (config === void 0) { config = { children: \"children\", expand: \"expand\" }; }\n                if (filter === void 0) { filter = null; }\n                if (order === void 0) { order = null; }\n                _super.call(this);\n                this._config = config;\n                this._filter = filter;\n                this._order = order;\n                this.update(data);\n            }\n            Tree.prototype.update = function (data) {\n                var config = this._config;\n                this._index = [];\n                this._rawData = data;\n                this.expandItems(null, data, this._index, 0);\n                this.build();\n            };\n            Tree.prototype.build = function () {\n                var _this = this;\n                if (this._rawData == null) {\n                    this._finalData = null;\n                    return;\n                }\n                if ((this._filter == null || this._filter.length == 0) &&\n                    (this._order == null || this._order.length == 0))\n                    this._finalData = null;\n                else {\n                    this._finalData = [];\n                    var iterate_1 = function (items) {\n                        if (typeof items === tui.UNDEFINED || items === null)\n                            items = [];\n                        for (var _i = 0, items_2 = items; _i < items_2.length; _i++) {\n                            var item = items_2[_i];\n                            if (filter(item, _this._filter)) {\n                                var node = {\n                                    parent: null,\n                                    hasChild: false,\n                                    item: item,\n                                    level: 0,\n                                    expand: false\n                                };\n                                _this._finalData.push(node);\n                            }\n                            var children = item[_this._config.children];\n                            children && iterate_1(children);\n                        }\n                    };\n                    iterate_1(this._rawData);\n                    sort(this._finalData, this._order, true);\n                }\n                this.fire(\"update\", { \"completely\": true });\n            };\n            return Tree;\n        }(TreeBase));\n        ds.Tree = Tree;\n        var RemoteTree = (function (_super) {\n            __extends(RemoteTree, _super);\n            function RemoteTree(config, filter, order) {\n                if (config === void 0) { config = { children: \"children\", expand: \"expand\", hasChild: \"hasChild\" }; }\n                if (filter === void 0) { filter = null; }\n                if (order === void 0) { order = null; }\n                _super.call(this);\n                this._querying = false;\n                this._config = config;\n                this._filter = filter;\n                this._order = order;\n            }\n            RemoteTree.prototype.length = function () {\n                if (this._index)\n                    return this._index.length;\n                else {\n                    if (!this._querying) {\n                        this._querying = true;\n                        this.fire(\"query\", { parent: null, filter: this._filter, order: this._order });\n                    }\n                    return 0;\n                }\n            };\n            RemoteTree.prototype.expand = function (index) {\n                if (index >= 0 && index < this._index.length) {\n                    var node = this._index[index];\n                    if (node.hasChild && !node.expand) {\n                        node.expand = true;\n                        node.item[this._config.expand] = true;\n                        var children = node.item[this._config.children];\n                        if (children) {\n                            var appendNodes = [];\n                            this.expandItems(node, children, appendNodes, node.level + 1);\n                            (_a = this._index).splice.apply(_a, [index + 1, 0].concat(appendNodes));\n                        }\n                        else {\n                            this.fire(\"query\", { parent: node, filter: this._filter, order: this._order });\n                            this._querying = true;\n                        }\n                    }\n                }\n                var _a;\n            };\n            RemoteTree.prototype.update = function (result) {\n                this._querying = false;\n                if (result.parent === null) {\n                    this._index = [];\n                    this._rawData = result.data;\n                    this.expandItems(null, result.data, this._index, 0, true);\n                }\n                else {\n                    var index = this.findNodeIndex(result.parent);\n                    if (index >= 0) {\n                        this.collapse(index);\n                    }\n                    result.parent.item[this._config.children] = result.data;\n                    if (index >= 0) {\n                        this.expand(index);\n                    }\n                }\n                this.fire(\"update\", { \"completely\": true });\n            };\n            RemoteTree.prototype.build = function () {\n                this._index = null;\n                this._rawData = null;\n                this._finalData = null;\n                this.fire(\"query\", { parent: null, filter: this._filter, order: this._order });\n            };\n            return RemoteTree;\n        }(TreeBase));\n        ds.RemoteTree = RemoteTree;\n    })(ds = tui.ds || (tui.ds = {}));\n})(tui || (tui = {}));\n/// <reference path=\"../core.ts\" />\n/// <reference path=\"../text/text.ts\" />\nvar tui;\n(function (tui) {\n    var time;\n    (function (time) {\n        time.shortWeeks = [\"Sun\", \"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\"];\n        time.weeks = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n        time.shortMonths = [\"Jan\", \"Feb\", \"Mar\", \"Apr\", \"May\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\n        time.months = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\"];\n        /**\n         * Get today\n         */\n        function now() {\n            return new Date();\n        }\n        time.now = now;\n        /**\n         * Input seconds and get a time description\n         * @param seconds Tims distance of seconds\n         * @param lang Display language\n         */\n        function timespan(seconds, lang) {\n            var desc = [\"day\", \"hour\", \"minute\", \"second\"];\n            var val = [];\n            var beg = \"\", end = \"\";\n            var d = Math.floor(seconds / 86400);\n            val.push(d);\n            seconds = seconds % 86400;\n            var h = Math.floor(seconds / 3600);\n            val.push(h);\n            seconds = seconds % 3600;\n            var m = Math.floor(seconds / 60);\n            val.push(m);\n            val.push(seconds % 60);\n            var i = 0, j = 3;\n            while (i < 4) {\n                if (val[i] > 0) {\n                    beg.length && (beg += \" \");\n                    beg += val[i] + \" \" + tui.str(val[i] > 1 ? desc[i] + \"s\" : desc[i], lang);\n                    break;\n                }\n                i++;\n            }\n            while (i < j) {\n                if (val[j] > 0) {\n                    end.length && (end += \" \");\n                    end += val[j] + \" \" + tui.str(val[j] > 1 ? desc[j] + \"s\" : desc[j], lang);\n                    break;\n                }\n                j--;\n            }\n            i++;\n            while (i < j) {\n                beg.length && (beg += \" \");\n                beg += val[i] + \" \" + tui.str(val[i] > 1 ? desc[i] + \"s\" : desc[i], lang);\n                i++;\n            }\n            return beg + (beg.length ? \" \" : \"\") + end;\n        }\n        time.timespan = timespan;\n        /**\n         * Get the distance of dt2 compare to dt1 (dt2 - dt1) return in specified unit (d: day, h: hours, m: minutes, s: seconds, ms: milliseconds)\n         * @param dt1\n         * @param dt2\n         * @param unit \"d\", \"h\", \"m\", \"s\" or \"ms\"\n         */\n        function dateDiff(dt1, dt2, unit) {\n            if (unit === void 0) { unit = \"d\"; }\n            var d1 = dt1.getTime();\n            var d2 = dt2.getTime();\n            var diff = d2 - d1;\n            var symbol = diff < 0 ? -1 : 1;\n            diff = Math.abs(diff);\n            unit = unit.toLocaleLowerCase();\n            if (unit === \"d\") {\n                return Math.floor(diff / 86400000) * symbol;\n            }\n            else if (unit === \"h\") {\n                return Math.floor(diff / 3600000) * symbol;\n            }\n            else if (unit === \"m\") {\n                return Math.floor(diff / 60000) * symbol;\n            }\n            else if (unit === \"s\") {\n                return Math.floor(diff / 1000) * symbol;\n            }\n            else if (unit === \"ms\") {\n                return diff * symbol;\n            }\n            else\n                return NaN;\n        }\n        time.dateDiff = dateDiff;\n        /**\n         * Get new date of dt add specified unit of values.\n         * @param dt The day of the target\n         * @param val Increased value\n         * @param unit \"y\", \"M\", \"d\", \"h\", \"m\", \"s\" or \"ms\"\n         */\n        function dateAdd(dt, val, unit) {\n            if (unit === void 0) { unit = \"d\"; }\n            var tm = dt.getTime();\n            if (unit === \"y\") {\n                var y = dt.getFullYear(), m = dt.getMonth(), d = dt.getDate();\n                var h = dt.getHours(), mi = dt.getMinutes(), s = dt.getSeconds(), ms = dt.getMilliseconds();\n                var totalMonth = y * 12 + m + (val * 12);\n                y = Math.floor(totalMonth / 12);\n                m = totalMonth % 12;\n                var newDate = new Date(y, m, 1);\n                if (d > totalDaysOfMonth(newDate))\n                    d = totalDaysOfMonth(newDate);\n                return new Date(y, m, d, h, mi, s, ms);\n            }\n            else if (unit === \"M\") {\n                var y = dt.getFullYear(), m = dt.getMonth(), d = dt.getDate();\n                var h = dt.getHours(), mi = dt.getMinutes(), s = dt.getSeconds(), ms = dt.getMilliseconds();\n                var totalMonth = y * 12 + m + val;\n                y = Math.floor(totalMonth / 12);\n                m = totalMonth % 12;\n                var newDate = new Date(y, m, 1);\n                if (d > totalDaysOfMonth(newDate))\n                    d = totalDaysOfMonth(newDate);\n                return new Date(y, m, d, h, mi, s, ms);\n            }\n            else if (unit === \"d\") {\n                return new Date(tm + val * 86400000);\n            }\n            else if (unit === \"h\") {\n                return new Date(tm + val * 3600000);\n            }\n            else if (unit === \"m\") {\n                return new Date(tm + val * 60000);\n            }\n            else if (unit === \"s\") {\n                return new Date(tm + val * 1000);\n            }\n            else if (unit === \"ms\") {\n                return new Date(tm + val);\n            }\n            else\n                return null;\n        }\n        time.dateAdd = dateAdd;\n        /**\n         * Get day in year\n         * @param dt The day of the target\n         */\n        function dayOfYear(dt) {\n            var y = dt.getFullYear();\n            var d1 = new Date(y, 0, 1);\n            return dateDiff(d1, dt, \"d\");\n        }\n        time.dayOfYear = dayOfYear;\n        /**\n         * Get total days of month\n         * @param dt The day of the target\n         */\n        function totalDaysOfMonth(dt) {\n            var y = dt.getFullYear();\n            var m = dt.getMonth();\n            var d1 = new Date(y, m, 1);\n            if (m === 11) {\n                y++;\n                m = 0;\n            }\n            else {\n                m++;\n            }\n            var d2 = new Date(y, m, 1);\n            return dateDiff(d1, d2, \"d\");\n        }\n        time.totalDaysOfMonth = totalDaysOfMonth;\n        function parseDateInternal(dtStr, format) {\n            if (!dtStr || !format)\n                return null;\n            var mapping = {};\n            var gcount = 0;\n            var isUTC = false;\n            var values = {};\n            function matchEnum(v, key, enumArray) {\n                var m = dtStr.match(new RegExp(\"^\" + enumArray.join(\"|\"), \"i\"));\n                if (m === null)\n                    return false;\n                v = m[0].toLowerCase();\n                v = v.substr(0, 1).toUpperCase() + v.substr(1);\n                values[key] = enumArray.indexOf(v);\n                dtStr = dtStr.substr(v.length);\n                return true;\n            }\n            function matchNumber(v, key, min, max) {\n                var len = v.length;\n                var m = dtStr.match(\"^[0-9]{1,\" + len + \"}\");\n                if (m === null)\n                    return false;\n                v = m[0];\n                var num = parseInt(v);\n                if (num < min || num > max)\n                    return false;\n                key && (values[key] = num);\n                dtStr = dtStr.substr(v.length);\n                return true;\n            }\n            var rule = {\n                \"y+\": function (v) {\n                    if (!matchNumber(v, \"year\"))\n                        return false;\n                    if (values[\"year\"] < 100)\n                        values[\"year\"] += 1900;\n                    return true;\n                },\n                \"M+\": function (v) {\n                    var len = v.length;\n                    if (len < 3) {\n                        if (!matchNumber(v, \"month\", 1, 12))\n                            return false;\n                        values[\"month\"] -= 1;\n                        return true;\n                    }\n                    else if (len === 3) {\n                        return matchEnum(v, \"month\", time.shortMonths);\n                    }\n                    else {\n                        return matchEnum(v, \"month\", time.months);\n                    }\n                },\n                \"d+\": function (v) {\n                    return matchNumber(v, \"date\", 1, 31);\n                },\n                \"D+\": matchNumber,\n                \"h+\": function (v) {\n                    return matchNumber(v, \"12hour\", 1, 12);\n                },\n                \"H+\": function (v) {\n                    return matchNumber(v, \"hour\", 0, 24);\n                },\n                \"m+\": function (v) {\n                    return matchNumber(v, \"minute\", 0, 59);\n                },\n                \"s+\": function (v) {\n                    return matchNumber(v, \"second\", 0, 59);\n                },\n                \"[qQ]+\": function (v) {\n                    return matchNumber(v, null, 1, 4);\n                },\n                \"S+\": function (v) {\n                    return matchNumber(v, \"millisecond\", 0, 999);\n                },\n                \"E+\": function (v) {\n                    var len = v.length;\n                    if (len < 3) {\n                        if (!matchNumber(v, null, 0, 6))\n                            return false;\n                        return true;\n                    }\n                    else if (len === 3) {\n                        return matchEnum(v, null, time.shortWeeks);\n                    }\n                    else {\n                        return matchEnum(v, null, time.weeks);\n                    }\n                },\n                \"a|A\": function matchNumber(v) {\n                    var len = v.length;\n                    var m = dtStr.match(/^(am|pm)/i);\n                    if (m === null)\n                        return false;\n                    v = m[0];\n                    values[\"ampm\"] = v.toLowerCase();\n                    dtStr = dtStr.substr(v.length);\n                    return true;\n                },\n                \"z+\": function (v) {\n                    var len = v.length;\n                    var m;\n                    if (len <= 2)\n                        m = dtStr.match(/^([\\-+][0-9]{2})/i);\n                    else if (len === 3)\n                        m = dtStr.match(/^([\\-+][0-9]{2})([0-9]{2})/i);\n                    else\n                        m = dtStr.match(/^([\\-+][0-9]{2}):([0-9]{2})/i);\n                    if (m === null)\n                        return false;\n                    v = m[0];\n                    var tz = parseInt(m[1]);\n                    if (Math.abs(tz) < -11 || Math.abs(tz) > 11)\n                        return false;\n                    tz *= 60;\n                    if (typeof m[2] !== tui.UNDEFINED) {\n                        if (tz > 0)\n                            tz += parseInt(m[2]);\n                        else\n                            tz -= parseInt(m[2]);\n                    }\n                    values[\"tz\"] = -tz;\n                    dtStr = dtStr.substr(v.length);\n                    return true;\n                },\n                \"Z\": function (v) {\n                    if (dtStr.substr(0, 1) !== \"Z\")\n                        return false;\n                    isUTC = true;\n                    dtStr = dtStr.substr(1);\n                    return true;\n                },\n                \"\\\"[^\\\"]*\\\"|'[^']*'\": function (v) {\n                    v = v.substr(1, v.length - 2);\n                    if (dtStr.substr(0, v.length).toLowerCase() !== v.toLowerCase())\n                        return false;\n                    dtStr = dtStr.substr(v.length);\n                    return true;\n                },\n                \"[^yMmdDhHsSqEaAzZ'\\\"]+\": function (v) {\n                    v = v.replace(/(.)/g, '\\\\$1');\n                    var m = dtStr.match(new RegExp(\"^\" + v));\n                    if (m === null)\n                        return false;\n                    v = m[0];\n                    dtStr = dtStr.substr(v.length);\n                    return true;\n                }\n            };\n            var regex = \"\";\n            for (var k in rule) {\n                if (!rule.hasOwnProperty(k))\n                    continue;\n                if (regex.length > 0)\n                    regex += \"|\";\n                regex += \"(^\" + k + \")\";\n                mapping[k] = ++gcount;\n            }\n            var result;\n            while ((result = format.match(regex)) !== null) {\n                for (var k in mapping) {\n                    var v = result[mapping[k]];\n                    if (typeof v !== tui.UNDEFINED) {\n                        if (rule[k](v) === false)\n                            return null;\n                        break;\n                    }\n                }\n                format = format.substr(result[0].length);\n            }\n            if (format.length > 0 || dtStr.length > 0)\n                return null;\n            var parseCount = 0;\n            for (var k in values) {\n                if (!values.hasOwnProperty(k))\n                    continue;\n                parseCount++;\n            }\n            if (parseCount <= 0)\n                return null;\n            var now = new Date();\n            var year = values.hasOwnProperty(\"year\") ? values[\"year\"] : (isUTC ? now.getUTCFullYear() : now.getFullYear());\n            var month = values.hasOwnProperty(\"month\") ? values[\"month\"] : (isUTC ? now.getUTCMonth() : now.getMonth());\n            var date = values.hasOwnProperty(\"date\") ? values[\"date\"] : (isUTC ? now.getUTCDate() : now.getDate());\n            var ampm = values.hasOwnProperty(\"ampm\") ? values[\"ampm\"] : \"am\";\n            var hour;\n            if (values.hasOwnProperty(\"hour\"))\n                hour = values[\"hour\"];\n            else if (values.hasOwnProperty(\"12hour\")) {\n                var h12 = values[\"12hour\"];\n                if (ampm === \"am\") {\n                    if (h12 >= 1 && h12 <= 11) {\n                        hour = h12;\n                    }\n                    else if (h12 === 12) {\n                        hour = h12 - 12;\n                    }\n                    else\n                        return null;\n                }\n                else {\n                    if (h12 === 12)\n                        hour = h12;\n                    else if (h12 >= 1 && h12 <= 11)\n                        hour = h12 + 12;\n                    else\n                        return null;\n                }\n            }\n            else\n                hour = 0;\n            var minute = values.hasOwnProperty(\"minute\") ? values[\"minute\"] : 0;\n            var second = values.hasOwnProperty(\"second\") ? values[\"second\"] : 0;\n            var millisecond = values.hasOwnProperty(\"millisecond\") ? values[\"millisecond\"] : 0;\n            var tz = values.hasOwnProperty(\"tz\") ? values[\"tz\"] : now.getTimezoneOffset();\n            now.setUTCFullYear(year);\n            now.setUTCMonth(month);\n            now.setUTCDate(date);\n            now.setUTCHours(hour);\n            now.setUTCMinutes(minute);\n            now.setUTCSeconds(second);\n            now.setUTCMilliseconds(millisecond);\n            if (!isUTC) {\n                now.setTime(now.getTime() + tz * 60 * 1000);\n            }\n            return now;\n        }\n        /**\n         * Parse string get date instance (\n         * try to parse format:\n         *\t\tyyyy-MM-dd HH:mm:ss\n         *\t\tyyyy-MM-dd,\n         *\t\tdd MMM yyyy,\n         *\t\tMMM dd, yyyy,\n         *\t\tISO8601 format)\n         * @param {String} dtStr Data string\n         */\n        function parseDate(dtStr, format) {\n            if (typeof format === \"string\")\n                return parseDateInternal(dtStr, format);\n            else if (typeof format === tui.UNDEFINED) {\n                var dt = new Date(dtStr);\n                if (!isNaN(dt.getTime()))\n                    return dt;\n                dt = parseDateInternal(dtStr, \"yyyy-MM-dd\");\n                if (dt !== null)\n                    return dt;\n                dt = parseDateInternal(dtStr, \"yyyy-MM-dd HH:mm:ss\");\n                if (dt !== null)\n                    return dt;\n                dt = parseDateInternal(dtStr, \"MMM dd, yyyy HH:mm:ss\");\n                if (dt !== null)\n                    return dt;\n                dt = parseDateInternal(dtStr, \"MMM dd, yyyy\");\n                if (dt !== null)\n                    return dt;\n                dt = parseDateInternal(dtStr, \"dd MMM yyyy HH:mm:ss\");\n                if (dt !== null)\n                    return dt;\n                dt = parseDateInternal(dtStr, \"dd MMM yyyy\");\n                if (dt !== null)\n                    return dt;\n            }\n            return null;\n        }\n        time.parseDate = parseDate;\n        /**\n         * Convert date to string and output can be formated to ISO8601, RFC2822, RFC3339 or other customized format\n         * @param dt {Date} Date object to be convert\n         * @param dateFmt {String} which format should be apply, default use ISO8601 standard format\n         */\n        function formatDate(dt, dateFmt) {\n            if (dateFmt === void 0) { dateFmt = \"yyyy-MM-ddTHH:mm:sszzz\"; }\n            var isUTC = (dateFmt.indexOf(\"Z\") >= 0 ? true : false);\n            var fullYear = isUTC ? dt.getUTCFullYear() : dt.getFullYear();\n            var month = isUTC ? dt.getUTCMonth() : dt.getMonth();\n            var date = isUTC ? dt.getUTCDate() : dt.getDate();\n            var hours = isUTC ? dt.getUTCHours() : dt.getHours();\n            var minutes = isUTC ? dt.getUTCMinutes() : dt.getMinutes();\n            var seconds = isUTC ? dt.getUTCSeconds() : dt.getSeconds();\n            var milliseconds = isUTC ? dt.getUTCMilliseconds() : dt.getMilliseconds();\n            var day = isUTC ? dt.getUTCDay() : dt.getDay();\n            var rule = {\n                \"y+\": fullYear,\n                \"M+\": month + 1,\n                \"d+\": date,\n                \"D+\": dayOfYear(dt) + 1,\n                \"h+\": (function (h) {\n                    if (h === 0)\n                        return h + 12;\n                    else if (h >= 1 && h <= 12)\n                        return h;\n                    else if (h >= 13 && h <= 23)\n                        return h - 12;\n                })(hours),\n                \"H+\": hours,\n                \"m+\": minutes,\n                \"s+\": seconds,\n                \"q+\": Math.floor((month + 3) / 3),\n                \"S+\": milliseconds,\n                \"E+\": day,\n                \"a\": (function (h) {\n                    if (h >= 0 && h <= 11)\n                        return \"am\";\n                    else\n                        return \"pm\";\n                })(isUTC ? dt.getUTCHours() : dt.getHours()),\n                \"A\": (function (h) {\n                    if (h >= 0 && h <= 11)\n                        return \"AM\";\n                    else\n                        return \"PM\";\n                })(hours),\n                \"z+\": dt.getTimezoneOffset()\n            };\n            var regex = \"\";\n            for (var k in rule) {\n                if (!rule.hasOwnProperty(k))\n                    continue;\n                if (regex.length > 0)\n                    regex += \"|\";\n                regex += k;\n            }\n            var regexp = new RegExp(regex, \"g\");\n            return dateFmt.replace(regexp, function (str, pos, source) {\n                for (var k in rule) {\n                    if (str.match(k) !== null) {\n                        if (k === \"y+\") {\n                            return tui.text.paddingNumber(rule[k], str.length, str.length);\n                        }\n                        else if (k === \"a\" || k === \"A\") {\n                            return rule[k];\n                        }\n                        else if (k === \"z+\") {\n                            var z = \"\";\n                            if (rule[k] >= 0) {\n                                z += \"-\";\n                            }\n                            else {\n                                z += \"+\";\n                            }\n                            if (str.length < 2)\n                                z += Math.abs(Math.floor(rule[k] / 60));\n                            else\n                                z += tui.text.paddingNumber(Math.abs(Math.floor(rule[k] / 60)), 2);\n                            if (str.length === 3)\n                                z += tui.text.paddingNumber(Math.abs(Math.floor(rule[k] % 60)), 2);\n                            else if (str.length > 3)\n                                z += (\":\" + tui.text.paddingNumber(Math.abs(Math.floor(rule[k] % 60)), 2));\n                            return z;\n                        }\n                        else if (k === \"E+\") {\n                            if (str.length < 3)\n                                return tui.text.paddingNumber(rule[k], str.length);\n                            else if (str.length === 3)\n                                return time.shortWeeks[rule[k]];\n                            else\n                                return time.weeks[rule[k]];\n                        }\n                        else if (k === \"M+\") {\n                            if (str.length < 3)\n                                return tui.text.paddingNumber(rule[k], str.length);\n                            else if (str.length === 3)\n                                return time.shortMonths[rule[k] - 1];\n                            else\n                                return time.months[rule[k] - 1];\n                        }\n                        else if (k === \"S+\") {\n                            return tui.text.paddingNumber(rule[k], str.length, str.length, true);\n                        }\n                        else {\n                            return tui.text.paddingNumber(rule[k], str.length);\n                        }\n                    }\n                }\n                return str;\n            });\n        }\n        time.formatDate = formatDate;\n    })(time = tui.time || (tui.time = {}));\n})(tui || (tui = {}));\n/// <reference path=\"base.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        /**\n         * <button>\n         * Attributes: value, text, type, checked, group, disable\n         * Events: click, mousedown, mouseup, keydown, keyup\n         */\n        var Button = (function (_super) {\n            __extends(Button, _super);\n            function Button() {\n                _super.apply(this, arguments);\n            }\n            Button.prototype.initChildren = function (childNodes) {\n                if (childNodes && childNodes.length > 0)\n                    this._set(\"text\", tui.browser.toHTML(childNodes));\n            };\n            Button.prototype.initRestriction = function () {\n                var _this = this;\n                _super.prototype.initRestriction.call(this);\n                this.setRestrictions({\n                    \"type\": {\n                        \"get\": function () {\n                            if (_this._data[\"type\"])\n                                return _this._data[\"type\"];\n                            var parent = _this.get(\"parent\");\n                            if (parent && parent instanceof widget.Group && parent.get(\"type\"))\n                                return parent.get(\"type\");\n                            return null;\n                        }\n                    },\n                    \"value\": {\n                        \"get\": function () {\n                            if (_this._data[\"value\"])\n                                return _this._data[\"value\"];\n                            return _this.get(\"text\");\n                        }\n                    },\n                    \"checked\": {\n                        \"set\": function (value) {\n                            _this._data[\"checked\"] = !!value;\n                            if (!value)\n                                _this._data[\"tristate\"] = false;\n                        }\n                    },\n                    \"tristate\": {\n                        \"set\": function (value) {\n                            _this._data[\"tristate\"] = !!value;\n                            if (value)\n                                _this._data[\"checked\"] = true;\n                        }\n                    }\n                });\n            };\n            Button.prototype.init = function () {\n                var _this = this;\n                var $root = $(this._);\n                $root.attr({\n                    \"unselectable\": \"on\"\n                });\n                $root.mousedown(function (e) {\n                    if (_this.get(\"disable\"))\n                        return;\n                    $root.focus();\n                    _this.fire(\"mousedown\", e);\n                });\n                $root.mouseup(function (e) {\n                    if (_this.get(\"disable\"))\n                        return;\n                    _this.fire(\"mouseup\", e);\n                });\n                $root.keydown(function (e) {\n                    if (_this.get(\"disable\"))\n                        return;\n                    _this.fire(\"keydown\", e);\n                });\n                $root.keyup(function (e) {\n                    if (_this.get(\"disable\"))\n                        return;\n                    _this.fire(\"keyup\", e);\n                });\n                var onClick = function (e) {\n                    if (_this.get(\"disable\"))\n                        return;\n                    if (_this.get(\"type\") === \"toggle\" || _this.get(\"type\") === \"toggle-radio\") {\n                        _this.set(\"checked\", !_this.get(\"checked\"));\n                    }\n                    else if (_this.get(\"type\") === \"radio\")\n                        _this.set(\"checked\", true);\n                    var parent = _this.get(\"parent\");\n                    var groupName = _this.get(\"group\");\n                    if (_this.get(\"type\") === \"radio\" ||\n                        _this.get(\"type\") === \"toggle-radio\" && _this.get(\"checked\")) {\n                        var result = void 0;\n                        if (parent && parent instanceof widget.Group) {\n                            result = widget.search(parent._, function (elem) {\n                                if ((elem.get(\"type\") === \"radio\" || elem.get(\"type\") === \"toggle-radio\")\n                                    && elem !== _this)\n                                    return true;\n                                else\n                                    return false;\n                            });\n                        }\n                        else {\n                            result = widget.search(function (elem) {\n                                if (groupName && elem.get(\"group\") === groupName\n                                    && (elem.get(\"type\") === \"radio\" || elem.get(\"type\") === \"toggle-radio\")\n                                    && elem !== _this)\n                                    return true;\n                                else\n                                    return false;\n                            });\n                        }\n                        for (var _i = 0, result_1 = result; _i < result_1.length; _i++) {\n                            var elem = result_1[_i];\n                            elem.set(\"checked\", false);\n                        }\n                    }\n                    var onclick = _this.get(\"onclick\");\n                    if (onclick) {\n                        eval.call(window, onclick);\n                    }\n                    _this.fire(\"click\", e);\n                    if (parent && parent instanceof widget.Group)\n                        parent.fire(\"click\", { e: e, button: _this });\n                };\n                $root.click(onClick);\n                $root.keydown(function (e) {\n                    if (e.keyCode === 13 || e.keyCode === 32) {\n                        e.preventDefault();\n                        onClick(e);\n                    }\n                });\n            };\n            Button.prototype.render = function () {\n                var $root = $(this._);\n                if (this.get(\"checked\")) {\n                    $root.addClass(\"tui-checked\");\n                }\n                else {\n                    $root.removeClass(\"tui-checked\");\n                }\n                if (this.get(\"disable\")) {\n                    $root.addClass(\"tui-disable\");\n                    $root.removeAttr(\"tabIndex\");\n                }\n                else {\n                    $root.removeClass(\"tui-disable\");\n                    $root.attr(\"tabIndex\", \"0\");\n                }\n                if (this.get(\"checked\") && this.get(\"tristate\")) {\n                    $root.addClass(\"tui-tristate\");\n                }\n                else\n                    $root.removeClass(\"tui-tristate\");\n                var text = this.get(\"text\");\n                if (typeof text !== \"string\")\n                    text = \"\";\n                $root.html(text);\n            };\n            return Button;\n        }(widget.Widget));\n        widget.Button = Button;\n        var Check = (function (_super) {\n            __extends(Check, _super);\n            function Check() {\n                _super.apply(this, arguments);\n            }\n            Check.prototype.init = function () {\n                _super.prototype.init.call(this);\n                this._set(\"type\", \"toggle\");\n            };\n            return Check;\n        }(Button));\n        widget.Check = Check;\n        var Radio = (function (_super) {\n            __extends(Radio, _super);\n            function Radio() {\n                _super.apply(this, arguments);\n            }\n            Radio.prototype.init = function () {\n                _super.prototype.init.call(this);\n                this._set(\"type\", \"radio\");\n            };\n            return Radio;\n        }(Button));\n        widget.Radio = Radio;\n        widget.register(Button, \"button\");\n        widget.register(Check, \"check\");\n        widget.register(Radio, \"radio\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"base.ts\" />\n/// <reference path=\"../time/time.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        function formatNumber(v, maxValue) {\n            if (v < 0)\n                v = 0;\n            if (v > maxValue)\n                v = maxValue;\n            if (v < 10)\n                return \"0\" + v;\n            else\n                return v + \"\";\n        }\n        function setText(tb, line, column, content) {\n            var cell = (tb.rows[line].cells[column]);\n            if (tui.ieVer > 0 && tui.ieVer < 9) {\n                cell.innerText = content;\n            }\n            else\n                cell.innerHTML = content;\n        }\n        var Calendar = (function (_super) {\n            __extends(Calendar, _super);\n            function Calendar() {\n                _super.apply(this, arguments);\n            }\n            Calendar.prototype.initRestriction = function () {\n                var _this = this;\n                _super.prototype.initRestriction.call(this);\n                this.setRestrictions({\n                    \"time\": {\n                        \"set\": function (value) {\n                            if (value instanceof Date)\n                                _this._data[\"time\"] = value;\n                            else if (typeof value === \"string\") {\n                                value = tui.time.parseDate(value);\n                                _this._data[\"time\"] = value;\n                            }\n                        },\n                        \"get\": function () {\n                            var tm = _this._data[\"time\"];\n                            if (typeof tm === tui.UNDEFINED || tm === null) {\n                                return _this._data[\"time\"] = tui.time.now();\n                            }\n                            else\n                                return tm;\n                        }\n                    },\n                    \"value\": {\n                        \"set\": function (value) {\n                            _this._set(\"time\", value);\n                        },\n                        \"get\": function () {\n                            return _this.get(\"time\");\n                        }\n                    },\n                    \"year\": {\n                        \"set\": function (value) {\n                            if (typeof value === \"number\" && !isNaN(value))\n                                _this.get(\"time\").setFullYear(value);\n                        },\n                        \"get\": function () {\n                            return _this.get(\"time\").getFullYear();\n                        }\n                    },\n                    \"month\": {\n                        \"set\": function (value) {\n                            if (typeof value === \"number\" && !isNaN(value))\n                                _this.get(\"time\").setMonth(value - 1);\n                        },\n                        \"get\": function () {\n                            return _this.get(\"time\").getMonth() + 1;\n                        }\n                    },\n                    \"day\": {\n                        \"set\": function (value) {\n                            if (typeof value === \"number\" && !isNaN(value))\n                                _this.get(\"time\").setDate(value);\n                        },\n                        \"get\": function () {\n                            return _this.get(\"time\").getDate();\n                        }\n                    },\n                    \"hour\": {\n                        \"set\": function (value) {\n                            if (typeof value === \"number\" && !isNaN(value))\n                                _this.get(\"time\").setHours(value);\n                        },\n                        \"get\": function () {\n                            return _this.get(\"time\").getHours();\n                        }\n                    },\n                    \"minute\": {\n                        \"set\": function (value) {\n                            if (typeof value === \"number\" && !isNaN(value))\n                                _this.get(\"time\").setMinutes(value);\n                        },\n                        \"get\": function () {\n                            return _this.get(\"time\").getMinutes();\n                        }\n                    },\n                    \"second\": {\n                        \"set\": function (value) {\n                            if (typeof value === \"number\" && !isNaN(value))\n                                _this.get(\"time\").setSeconds(value);\n                        },\n                        \"get\": function () {\n                            return _this.get(\"time\").getSeconds();\n                        }\n                    }\n                });\n            };\n            Calendar.prototype.init = function () {\n                var _this = this;\n                $(this._).attr({ \"tabIndex\": \"0\", \"unselectable\": \"on\" });\n                var tb = this._components[\"table\"] = tui.browser.toElement(\"<table cellPadding='0' cellspacing='0' border='0'>\" +\n                    \"<tr class='tui-yearbar'><td class='tui-pm'></td><td class='tui-py'>\" +\n                    \"</td><td colspan='3' class='tui-ym'></td>\" +\n                    \"<td class='tui-ny'></td><td class='tui-nm'></td></tr></table>\");\n                var yearLine = tb.rows[0];\n                for (var i = 0; i < 7; i++) {\n                    var line = tb.insertRow(-1);\n                    for (var j = 0; j < 7; j++) {\n                        var cell = line.insertCell(-1);\n                        if (j === 0 || j === 6)\n                            cell.className = \"tui-week-end\";\n                        if (i === 0) {\n                            cell.className = \"tui-week\";\n                            setText(tb, i + 1, j, tui.str(tui.time.shortWeeks[j]));\n                        }\n                    }\n                }\n                this._.appendChild(tb);\n                var timebar = this._components[\"timeBar\"] = tui.browser.toElement(\"<div>\" + tui.str(\"Choose Time\") + \":<input name='hours' maxLength='2'>:<input name='minutes' maxLength='2'>:<input name='seconds' maxLength='2'>\" +\n                    \"<a class='tui-update'></a></div>\");\n                this._.appendChild(timebar);\n                function getMaxValue(name) {\n                    if (name === \"hours\")\n                        return 23;\n                    else\n                        return 59;\n                }\n                var getInputTime = function () {\n                    function getInput(index) {\n                        return $(timebar).children(\"input\")[index];\n                    }\n                    var tm = _this.get(\"time\");\n                    tm.setHours(parseInt(getInput(0).value));\n                    tm.setMinutes(parseInt(getInput(1).value));\n                    tm.setSeconds(parseInt(getInput(2).value));\n                    _this.set(\"time\", tm);\n                };\n                var timebar$ = $(timebar);\n                timebar$.keydown(function (e) {\n                    var o = (e.srcElement || e.target);\n                    var o$ = $(o);\n                    var k = e.keyCode;\n                    if (o.nodeName.toUpperCase() === \"INPUT\") {\n                        if (k === tui.browser.KeyCode.TAB)\n                            return;\n                        e.preventDefault();\n                        tui.browser.cancelBubble(e);\n                        var input = o;\n                        if (k === tui.browser.KeyCode.LEFT) {\n                            if (o$.attr(\"name\") === \"seconds\")\n                                timebar$.children(\"input[name=minutes]\").focus();\n                            else if (o$.attr(\"name\") === \"minutes\")\n                                timebar$.children(\"input[name=hours]\").focus();\n                        }\n                        else if (k === tui.browser.KeyCode.RIGHT) {\n                            if (o$.attr(\"name\") === \"hours\")\n                                timebar$.children(\"input[name=minutes]\").focus();\n                            else if (o$.attr(\"name\") === \"minutes\")\n                                timebar$.children(\"input[name=seconds]\").focus();\n                        }\n                        else if (k === tui.browser.KeyCode.UP) {\n                            var max = getMaxValue(o$.attr(\"name\"));\n                            var v = parseInt(input.value) + 1;\n                            if (v > max)\n                                v = 0;\n                            input.value = formatNumber(v, max);\n                            getInputTime();\n                            input.select();\n                        }\n                        else if (k === tui.browser.KeyCode.DOWN) {\n                            var max = getMaxValue(o$.attr(\"name\"));\n                            var v = parseInt(input.value) - 1;\n                            if (v < 0)\n                                v = max;\n                            input.value = formatNumber(v, max);\n                            getInputTime();\n                            input.select();\n                        }\n                        else if (k >= tui.browser.KeyCode.KEY_0 && k <= tui.browser.KeyCode.KEY_9) {\n                            var max = getMaxValue(o$.attr(\"name\"));\n                            var v = k - tui.browser.KeyCode.KEY_0;\n                            var now = tui.time.now().getTime();\n                            if (o._lastInputTime && (now - o._lastInputTime) < 1000)\n                                o.value = formatNumber(parseInt(o.value.substr(1, 1)) * 10 + v, max);\n                            else\n                                o.value = formatNumber(v, max);\n                            o._lastInputTime = now;\n                            getInputTime();\n                            o.select();\n                        }\n                        else if (k == 13)\n                            _this.fire(\"click\", { e: e, \"time\": _this.get(\"time\"), \"type\": \"pick\" });\n                    }\n                });\n                timebar$.children(\"input\").on(\"focus mousedown mouseup\", function (e) {\n                    var o = (e.srcElement || e.target);\n                    setTimeout(function () {\n                        o.select();\n                    }, 0);\n                }).on(\"contextmenu\", tui.browser.cancelDefault);\n                timebar$.children(\"a\").mousedown(function (e) {\n                    var now = tui.time.now();\n                    var newTime = new Date(_this.get(\"year\"), _this.get(\"month\") - 1, _this.get(\"day\"), now.getHours(), now.getMinutes(), now.getSeconds());\n                    _this.set(\"time\", newTime);\n                    setTimeout(function () { _this._.focus(); });\n                    return tui.browser.cancelBubble(e);\n                }).click(function (e) {\n                    _this.fire(\"click\", { e: e, \"time\": _this.get(\"time\"), \"type\": \"refresh\" });\n                });\n                $(tb).mousedown(function (e) {\n                    if (tui.ffVer > 0) {\n                        setTimeout(function () { _this._.focus(); });\n                    }\n                    var cell = (e.target || e.srcElement);\n                    if (cell.nodeName.toLowerCase() !== \"td\")\n                        return;\n                    if ($(cell).hasClass(\"tui-pm\")) {\n                        _this.prevMonth();\n                    }\n                    else if ($(cell).hasClass(\"tui-py\")) {\n                        _this.prevYear();\n                    }\n                    else if ($(cell).hasClass(\"tui-ny\")) {\n                        _this.nextYear();\n                    }\n                    else if ($(cell).hasClass(\"tui-nm\")) {\n                        _this.nextMonth();\n                    }\n                    else if (typeof cell[\"offsetMonth\"] === \"number\") {\n                        var d = parseInt(cell.innerHTML, 10);\n                        var y = _this.get(\"year\"), m = _this.get(\"month\");\n                        var offset = cell[\"offsetMonth\"];\n                        if (offset < 0) {\n                            if (m === 1) {\n                                y--;\n                                m = 12;\n                            }\n                            else {\n                                m--;\n                            }\n                            _this.onPicked(y, m, d);\n                        }\n                        else if (offset > 0) {\n                            if (m === 12) {\n                                y++;\n                                m = 1;\n                            }\n                            else {\n                                m++;\n                            }\n                            _this.onPicked(y, m, d);\n                        }\n                        else if (offset === 0) {\n                            _this.onPicked(y, m, d);\n                        }\n                    }\n                }).click(function (e) {\n                    var cell = (e.target || e.srcElement);\n                    if (cell.nodeName.toLowerCase() !== \"td\")\n                        return;\n                    if (typeof cell[\"offsetMonth\"] === \"number\")\n                        _this.fire(\"click\", { e: e, \"time\": _this.get(\"time\"), \"type\": \"pick\" });\n                    else if (/^(tui-pm|tui-py|tui-nm|tui-ny)$/.test(cell.className))\n                        _this.fire(\"click\", { e: e, \"time\": _this.get(\"time\"), \"type\": \"change\" });\n                }).dblclick(function (e) {\n                    var cell = (e.target || e.srcElement);\n                    if (cell.nodeName.toLowerCase() !== \"td\")\n                        return;\n                    if (typeof cell[\"offsetMonth\"] === \"number\")\n                        _this.fire(\"dblclick\", { e: e, \"time\": _this.get(\"time\") });\n                });\n                $(this._).keydown(function (e) {\n                    var k = e.keyCode;\n                    if ([13, 33, 34, 37, 38, 39, 40].indexOf(k) >= 0) {\n                        if (k === 37) {\n                            var tm = tui.time.dateAdd(_this.get(\"time\"), -1);\n                            _this.set(\"time\", tm);\n                        }\n                        else if (k === 38) {\n                            var tm = tui.time.dateAdd(_this.get(\"time\"), -7);\n                            _this.set(\"time\", tm);\n                        }\n                        else if (k === 39) {\n                            var tm = tui.time.dateAdd(_this.get(\"time\"), 1);\n                            _this.set(\"time\", tm);\n                        }\n                        else if (k === 40) {\n                            var tm = tui.time.dateAdd(_this.get(\"time\"), 7);\n                            _this.set(\"time\", tm);\n                        }\n                        else if (k === 33) {\n                            _this.prevMonth();\n                        }\n                        else if (k === 34) {\n                            _this.nextMonth();\n                        }\n                        else if (k === 13) {\n                            _this.fire(\"click\", { e: e, \"time\": _this.get(\"time\"), \"type\": \"pick\" });\n                        }\n                        return e.preventDefault();\n                    }\n                });\n            };\n            Calendar.prototype.onPicked = function (y, m, d) {\n                var oldTime = this.get(\"time\");\n                var newTime = new Date(y, m - 1, d, oldTime.getHours(), oldTime.getMinutes(), oldTime.getSeconds());\n                this.set(\"time\", newTime);\n            };\n            Calendar.prototype.makeTime = function (proc) {\n                var t = { y: this.get(\"year\"), m: this.get(\"month\"), d: this.get(\"day\") };\n                proc(t);\n                var newDate = new Date(t.y, t.m - 1, 1);\n                if (t.d > tui.time.totalDaysOfMonth(newDate))\n                    t.d = tui.time.totalDaysOfMonth(newDate);\n                this.onPicked(t.y, t.m, t.d);\n            };\n            Calendar.prototype.prevMonth = function () {\n                this.makeTime(function (t) {\n                    if (t.m === 1) {\n                        t.y--;\n                        t.m = 12;\n                    }\n                    else {\n                        t.m--;\n                    }\n                });\n            };\n            Calendar.prototype.nextMonth = function () {\n                this.makeTime(function (t) {\n                    if (t.m === 12) {\n                        t.y++;\n                        t.m = 1;\n                    }\n                    else {\n                        t.m++;\n                    }\n                });\n            };\n            Calendar.prototype.prevYear = function () {\n                this.makeTime(function (t) {\n                    t.y--;\n                });\n            };\n            Calendar.prototype.nextYear = function () {\n                this.makeTime(function (t) {\n                    t.y++;\n                });\n            };\n            Calendar.prototype.render = function () {\n                function firstDay(date) {\n                    var y = date.getFullYear();\n                    var m = date.getMonth();\n                    return new Date(y, m, 1);\n                }\n                var tb = this._components[\"table\"];\n                var tm = this.get(\"time\");\n                var today = tui.time.now();\n                var firstWeek = firstDay(tm).getDay();\n                var daysOfMonth = tui.time.totalDaysOfMonth(tm);\n                var day = 0;\n                tb.rows[0].cells[2].innerHTML = tm.getFullYear() + \" - \" + this.get(\"month\");\n                for (var i = 0; i < 6; i++) {\n                    for (var j = 0; j < 7; j++) {\n                        var cell = tb.rows[i + 2].cells[j];\n                        cell.className = \"\";\n                        if (day === 0) {\n                            if (j === firstWeek) {\n                                day = 1;\n                                cell.innerHTML = day + \"\";\n                                cell.offsetMonth = 0;\n                            }\n                            else {\n                                var preMonthDay = new Date(firstDay(tm).valueOf() - ((firstWeek - j) * 1000 * 24 * 60 * 60));\n                                cell.innerHTML = preMonthDay.getDate() + \"\";\n                                cell.offsetMonth = -1;\n                                $(cell).addClass(\"tui-before\");\n                            }\n                        }\n                        else {\n                            day++;\n                            if (day <= daysOfMonth) {\n                                cell.innerHTML = day + \"\";\n                                cell.offsetMonth = 0;\n                            }\n                            else {\n                                cell.innerHTML = (day - daysOfMonth) + \"\";\n                                cell.offsetMonth = 1;\n                                $(cell).addClass(\"tui-after\");\n                            }\n                        }\n                        if (day === this.get(\"day\"))\n                            $(cell).addClass(\"tui-actived\");\n                        if (j === 0 || j === 6)\n                            $(cell).addClass(\"tui-weekend\");\n                        if (this.get(\"year\") === today.getFullYear() && this.get(\"month\") === (today.getMonth() + 1) && day === today.getDate()) {\n                            $(cell).addClass(\"tui-today\");\n                        }\n                    }\n                }\n                var timebar = this._components[\"timeBar\"];\n                if (this.get(\"timeBar\")) {\n                    timebar.style.display = \"\";\n                    $(timebar).children(\"input[name=hours]\").val(formatNumber(tm.getHours(), 23));\n                    $(timebar).children(\"input[name=minutes]\").val(formatNumber(tm.getMinutes(), 59));\n                    $(timebar).children(\"input[name=seconds]\").val(formatNumber(tm.getSeconds(), 59));\n                }\n                else {\n                    timebar.style.display = \"none\";\n                }\n            };\n            return Calendar;\n        }(widget.Widget));\n        widget.Calendar = Calendar;\n        widget.register(Calendar, \"calendar\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"base.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        /**\n         * <group>\n         * Attributes: name, type(check,radio,toggle)\n         * Events:\n         */\n        var Group = (function (_super) {\n            __extends(Group, _super);\n            function Group() {\n                _super.apply(this, arguments);\n            }\n            Group.prototype.initChildren = function (childNodes) {\n                for (var _i = 0, childNodes_3 = childNodes; _i < childNodes_3.length; _i++) {\n                    var node = childNodes_3[_i];\n                    this._.appendChild(node);\n                }\n            };\n            Group.prototype.initRestriction = function () {\n                var _this = this;\n                _super.prototype.initRestriction.call(this);\n                this.setRestrictions({\n                    \"value\": {\n                        \"set\": function (value) {\n                            if (typeof value === \"object\" && value !== null) {\n                                var children = widget.search(_this._);\n                                for (var _i = 0, children_2 = children; _i < children_2.length; _i++) {\n                                    var item = children_2[_i];\n                                    var key = item.get(\"name\");\n                                    if (key !== null) {\n                                        item.set(\"value\", value[key]);\n                                    }\n                                }\n                            }\n                        },\n                        \"get\": function () {\n                            var value = {};\n                            var children = widget.search(_this._);\n                            for (var _i = 0, children_3 = children; _i < children_3.length; _i++) {\n                                var item = children_3[_i];\n                                var key = item.get(\"name\");\n                                if (key !== null) {\n                                    value[key] = item.get(\"value\");\n                                }\n                            }\n                            return value;\n                        }\n                    }\n                });\n            };\n            Group.prototype.init = function () {\n                widget.init(this._);\n            };\n            Group.prototype.render = function () {\n                var root = this._;\n                var result = widget.search(root);\n                for (var _i = 0, result_2 = result; _i < result_2.length; _i++) {\n                    var child = result_2[_i];\n                    child.render();\n                }\n            };\n            return Group;\n        }(widget.Widget));\n        widget.Group = Group;\n        var ButtonGroup = (function (_super) {\n            __extends(ButtonGroup, _super);\n            function ButtonGroup() {\n                _super.apply(this, arguments);\n            }\n            ButtonGroup.prototype.initRestriction = function () {\n                var _this = this;\n                _super.prototype.initRestriction.call(this);\n                this.setRestrictions({\n                    \"value\": {\n                        \"set\": function (value) {\n                            var children = widget.search(_this._, function (elem) {\n                                if (elem.get(\"parent\") === _this && elem instanceof widget.Button)\n                                    return true;\n                                else\n                                    return false;\n                            });\n                            function check(v) {\n                                if (value instanceof Array) {\n                                    return value.indexOf(v) >= 0;\n                                }\n                                else {\n                                    return value === v;\n                                }\n                            }\n                            for (var _i = 0, children_4 = children; _i < children_4.length; _i++) {\n                                var button = children_4[_i];\n                                if (check(button.get(\"value\"))) {\n                                    button.set(\"checked\", true);\n                                }\n                                else\n                                    button.set(\"checked\", false);\n                            }\n                        },\n                        \"get\": function () {\n                            var values = [];\n                            var children = widget.search(_this._, function (elem) {\n                                if (elem.get(\"parent\") === _this && elem instanceof widget.Button)\n                                    return true;\n                                else\n                                    return false;\n                            });\n                            for (var _i = 0, children_5 = children; _i < children_5.length; _i++) {\n                                var button = children_5[_i];\n                                if (button.get(\"checked\"))\n                                    values.push(button.get(\"value\"));\n                            }\n                            if (_this.get(\"type\") === \"radio\" || _this.get(\"type\") === \"toggle-radio\") {\n                                if (values.length > 0)\n                                    return values[0];\n                                else\n                                    return null;\n                            }\n                            else\n                                return values;\n                        }\n                    },\n                    \"text\": {\n                        \"get\": function () {\n                            var values = [];\n                            var children = widget.search(_this._, function (elem) {\n                                if (elem.get(\"parent\") === _this && elem instanceof widget.Button)\n                                    return true;\n                                else\n                                    return false;\n                            });\n                            for (var _i = 0, children_6 = children; _i < children_6.length; _i++) {\n                                var button = children_6[_i];\n                                if (button.get(\"checked\"))\n                                    values.push(button.get(\"text\"));\n                            }\n                            return values.join(\",\");\n                        }\n                    }\n                });\n            };\n            return ButtonGroup;\n        }(Group));\n        widget.ButtonGroup = ButtonGroup;\n        widget.register(Group, \"group\");\n        widget.register(ButtonGroup, \"button-group\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"base.ts\" />\n/// <reference path=\"group.ts\" />\n/// <reference path=\"../ajax/ajax.ts\" />\n/// <reference path=\"../service/service.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget_5) {\n        \"use strict\";\n        var Component = (function (_super) {\n            __extends(Component, _super);\n            function Component() {\n                _super.apply(this, arguments);\n            }\n            Component.prototype.checkReady = function () {\n                var hasHandler = !!this.get(\"handler\");\n                var hasSrc = !!this.get(\"src\");\n                if ((!hasHandler || hasHandler && this._scriptReady)\n                    && (!hasSrc || hasSrc && this._htmlReady)\n                    && this._changed\n                    && this._childrenInit\n                    && this._noReadyCount <= 0) {\n                    this._changed = false;\n                    if (this._fn) {\n                        try {\n                            this._fn.call(this);\n                        }\n                        finally {\n                            this._fn = null;\n                        }\n                    }\n                    this.fire(\"load\");\n                    var parent = this.get(\"parent\");\n                    parent && parent.fire(\"componentReady\", { name: this.get(\"name\") });\n                }\n            };\n            Component.prototype.initRestriction = function () {\n                var _this = this;\n                this._fn = null;\n                this._changed = true;\n                this._noReadyCount = 0;\n                this._childrenInit = false;\n                this._scriptReady = false;\n                this._htmlReady = false;\n                this.on(\"componentReady\", function (e) {\n                    _this._noReadyCount--;\n                    _this.checkReady();\n                });\n                _super.prototype.initRestriction.call(this);\n                this.setRestrictions({\n                    \"handler\": {\n                        \"set\": function (value) {\n                            var oldValue = _this._data[\"handler\"];\n                            if (value && (value + \"\").trim().length > 0) {\n                                value = (value + \"\").trim();\n                                if (oldValue != value)\n                                    _this._changed = true;\n                                _this._data[\"handler\"] = value;\n                                _this._fn = null;\n                                _this._scriptReady = false;\n                                tui.ajax.getFunction(value).done(function (result) {\n                                    _this._fn = result;\n                                    _this._scriptReady = true;\n                                    _this.checkReady();\n                                }).fail(function () {\n                                    _this._scriptReady = true;\n                                    _this.checkReady();\n                                });\n                            }\n                            else {\n                                if (oldValue)\n                                    _this._changed = true;\n                                delete _this._data[\"handler\"];\n                                _this._scriptReady = true;\n                                _this._fn = null;\n                                _this.checkReady();\n                            }\n                        }\n                    }, \"src\": {\n                        \"set\": function (value) {\n                            var oldValue = _this._data[\"src\"];\n                            if (value == oldValue)\n                                return;\n                            if (value && (value + \"\").trim().length > 0) {\n                                value = (value + \"\").trim();\n                                _this._data[\"src\"] = value;\n                                _this._htmlReady = false;\n                                _this._childrenInit = false;\n                                tui.ajax.getComponent(_this.get(\"url\")).done(function (result, handler) {\n                                    _this._htmlReady = true;\n                                    tui.browser.setInnerHtml(_this._, result);\n                                    _this.loadComponents();\n                                    handler && _this.set(\"handler\", handler);\n                                    _this.render();\n                                    _this.checkReady();\n                                }).fail(function () {\n                                    _this._htmlReady = true;\n                                    _this.checkReady();\n                                });\n                            }\n                            else {\n                                if (oldValue) {\n                                    _this._changed = true;\n                                    _this._.innerHTML = \"\";\n                                }\n                                delete _this._data[\"src\"];\n                                _this._htmlReady = true;\n                                _this.checkReady();\n                            }\n                        }\n                    }, \"url\": {\n                        \"get\": function () {\n                            var parentUrl = _this.getParentUrl();\n                            var path = _this.get(\"src\");\n                            if (!path)\n                                return parentUrl;\n                            else {\n                                if (tui.text.isAbsUrl(path))\n                                    return path;\n                                else\n                                    return tui.text.joinUrl(tui.text.getBaseUrl(parentUrl), path);\n                            }\n                        }\n                    }\n                });\n            };\n            Component.prototype.getParentUrl = function () {\n                var elem = this._.parentNode;\n                while (elem) {\n                    if (elem.__widget__ && elem.__widget__.getNodeName() === \"component\") {\n                        return elem.__widget__.get(\"url\");\n                    }\n                    else {\n                        elem = elem.parentNode;\n                    }\n                }\n                return location.href;\n            };\n            Component.prototype.loadComponents = function () {\n                var _this = this;\n                var searchElem = function (parent) {\n                    for (var i = 0; i < parent.childNodes.length; i++) {\n                        var node = parent.childNodes[i];\n                        if (node.nodeType !== 1) {\n                            continue;\n                        }\n                        var elem = node;\n                        var widget_6 = elem.__widget__;\n                        var name_4 = void 0;\n                        var fullName = widget_5.getFullName(elem);\n                        if (fullName === \"tui:component\")\n                            _this._noReadyCount++;\n                        if (widget_6) {\n                            name_4 = tui.get(elem).get(\"name\");\n                            if (typeof name_4 === \"string\" && name_4.trim().length > 0)\n                                _this._components[name_4] = elem;\n                        }\n                        else {\n                            name_4 = elem.getAttribute(\"name\");\n                            if (typeof name_4 === \"string\" && name_4.trim().length > 0)\n                                _this._components[name_4] = elem;\n                            if (!fullName.match(/^tui:/i) || fullName.match(/^tui:(dialog-select|input-group|group|button-group)$/))\n                                searchElem(node);\n                        }\n                    }\n                };\n                this._components = { '': this._ };\n                this._noReadyCount = 0;\n                searchElem(this._);\n                this._childrenInit = true;\n            };\n            Component.prototype.initChildren = function (childNodes) {\n                var _this = this;\n                if (this.get(\"src\") == null) {\n                    childNodes.forEach(function (n) { return _this._.appendChild(n); });\n                    this.loadComponents();\n                    this.checkReady();\n                }\n            };\n            Component.prototype.use = function (fn, desc) {\n                var _this = this;\n                if (typeof fn === \"function\") {\n                    var params = tui.service.parseParameters(fn, desc);\n                    var argv = params.split(\",\").map(function (s) {\n                        if (!s)\n                            return null;\n                        else if (s[0] === '$') {\n                            return tui.service.get(s.substr(1));\n                        }\n                        else {\n                            var c = _this.getComponent(s.trim());\n                            if (c && c.__widget__)\n                                c = c.__widget__;\n                            return c;\n                        }\n                    });\n                    fn.apply(this, argv);\n                }\n            };\n            Component.prototype.render = function () {\n                widget_5.init(this._);\n            };\n            return Component;\n        }(widget_5.Group));\n        widget_5.Component = Component;\n        widget_5.register(Component, \"component\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"base.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        var VALIDATORS = {\n            \"*email\": \"^(\\\\w+([-+.]\\\\w+)*@\\\\w+([-.]\\\\w+)*\\\\.\\\\w+([-.]\\\\w+)*)?$\",\n            \"*chinese\": \"^[\\\\u4e00-\\\\u9fa5]*$\",\n            \"*url\": \"^(https?://([\\\\w-_]+:[^@/]+@)?[\\\\w-]+(\\\\.[\\\\w-]+)*(:[0-9]+)?(/[\\\\w-./?%&=]*)?)?$\",\n            \"*digital\": \"^\\\\d*$\",\n            \"*integer\": \"^([+\\\\-]?\\\\d+)?$\",\n            \"*float\": \"^([+\\\\-]?\\\\d*\\\\.\\\\d+)?$\",\n            \"*number\": \"^([+\\\\-]?\\\\d+|(\\\\d*\\\\.\\\\d+))?$\",\n            \"*currency\": \"^(-?\\\\d{1,3}(,\\\\d{3})*\\\\.\\\\d{2,3})?$\",\n            \"*date\": \"^([0-9]{4}-1[0-2]|0?[1-9]-0?[1-9]|[12][0-9]|3[01])?$\",\n            \"*key\": \"^([_a-zA-Z][a-zA-Z0-9_]*)?$\",\n            \"*any\": \"\\\\S+\"\n        };\n        var InputBase = (function (_super) {\n            __extends(InputBase, _super);\n            function InputBase() {\n                _super.apply(this, arguments);\n                this._valid = true;\n                this._invalidMessage = null;\n            }\n            InputBase.prototype.initChildren = function (childNodes) {\n                var validators = [];\n                for (var _i = 0, childNodes_4 = childNodes; _i < childNodes_4.length; _i++) {\n                    var node = childNodes_4[_i];\n                    if (widget.getFullName(node) === \"tui:verify\") {\n                        var format = node.getAttribute(\"format\");\n                        if (format) {\n                            var validator = { format: format, message: node.innerHTML };\n                            validators.push(validator);\n                        }\n                    }\n                }\n                this._set(\"validate\", validators);\n            };\n            InputBase.prototype.reset = function () {\n                if (this._valid !== true) {\n                    this._valid = true;\n                    this._invalidMessage = null;\n                    this.render();\n                }\n            };\n            InputBase.prototype.updateEmptyState = function (empty) {\n                if (this._isEmpty !== empty) {\n                    this._isEmpty = empty;\n                    if (this._valid === true)\n                        this.render();\n                }\n            };\n            InputBase.prototype.validate = function (e) {\n                var text = this.get(\"text\");\n                if (text === null)\n                    text = \"\";\n                this._valid = true;\n                var validator = this.get(\"validate\");\n                if (text === \"\" && this.get(\"allowEmpty\")) {\n                    return true;\n                }\n                if (!(validator instanceof Array))\n                    return true;\n                for (var _i = 0, validator_1 = validator; _i < validator_1.length; _i++) {\n                    var item = validator_1[_i];\n                    var k = item.format;\n                    if (k === \"*password\") {\n                        if (!/[a-z]/.test(text) ||\n                            !/[A-Z]/.test(text) ||\n                            !/[0-9]/.test(text) ||\n                            !/[\\~\\`\\!\\@\\#\\$\\%\\^\\&\\*\\(\\)\\_\\-\\+\\=\\\\\\]\\[\\{\\}\\:\\;\\\"\\'\\/\\?\\,\\.\\<\\>\\|]/.test(text) ||\n                            text.length < 6) {\n                            this._valid = false;\n                        }\n                    }\n                    else if (k.substr(0, 8) === \"*maxlen:\") {\n                        var imaxLen = parseFloat(k.substr(8));\n                        if (isNaN(imaxLen))\n                            throw new Error(\"Invalid validator: '*maxlen:...' must follow a number\");\n                        var ival = text.length;\n                        if (ival > imaxLen) {\n                            this._valid = false;\n                        }\n                    }\n                    else if (k.substr(0, 8) === \"*minlen:\") {\n                        var iminLen = parseFloat(k.substr(8));\n                        if (isNaN(iminLen))\n                            throw new Error(\"Invalid validator: '*minLen:...' must follow a number\");\n                        var ival = text.length;\n                        if (ival < iminLen) {\n                            this._valid = false;\n                        }\n                    }\n                    else if (k.substr(0, 5) === \"*max:\") {\n                        var imax = parseFloat(k.substr(5));\n                        if (isNaN(imax))\n                            throw new Error(\"Invalid validator: '*max:...' must follow a number\");\n                        var ival = parseFloat(text);\n                        if (isNaN(ival) || ival > imax) {\n                            this._valid = false;\n                        }\n                    }\n                    else if (k.substr(0, 5) === \"*min:\") {\n                        var imin = parseFloat(k.substr(5));\n                        if (isNaN(imin))\n                            throw new Error(\"Invalid validator: '*min:...' must follow a number\");\n                        var ival = parseFloat(text);\n                        if (isNaN(ival) || ival < imin) {\n                            this._valid = false;\n                        }\n                    }\n                    else if (k.substr(0, 6) === \"*same:\") {\n                        var other = k.substr(6);\n                        var o = widget.get(other);\n                        if (o) {\n                            var otherText = o.get(\"text\");\n                            if (otherText === null)\n                                otherText = \"\";\n                            if (text !== otherText)\n                                this._valid = false;\n                        }\n                        else {\n                            this._valid = false;\n                        }\n                    }\n                    else {\n                        var regexp;\n                        if (k.substr(0, 1) === \"*\") {\n                            var v = VALIDATORS[k];\n                            if (v)\n                                regexp = new RegExp(v);\n                            else\n                                throw new Error(\"Invalid validator: \" + k + \" is not a valid validator\");\n                        }\n                        else {\n                            regexp = new RegExp(k);\n                        }\n                        this._valid = regexp.test(text);\n                    }\n                    if (!this._valid) {\n                        this._invalidMessage = item.message;\n                        break;\n                    }\n                }\n                if (!this._valid && !this._invalidMessage) {\n                    this._invalidMessage = tui.str(\"Invalid input.\");\n                }\n                this.render();\n                if (e)\n                    this.fire(\"validate\", { e: e, valid: this._valid, message: this._invalidMessage });\n                return this._valid;\n            };\n            return InputBase;\n        }(widget.Widget));\n        widget.InputBase = InputBase;\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"inputBase.ts\" />\n/// <reference path=\"../browser/keyboard.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        var SelectBase = (function (_super) {\n            __extends(SelectBase, _super);\n            function SelectBase() {\n                _super.apply(this, arguments);\n                this._inSelection = false;\n            }\n            SelectBase.prototype.closeSelect = function () {\n                var popup = widget.get(this._components[\"popup\"]);\n                popup && popup.close();\n            };\n            SelectBase.prototype.init = function () {\n                var _this = this;\n                var $root = $(this._);\n                var popup = this.createPopup();\n                this._components[\"popup\"] = popup._;\n                var label = this._components[\"label\"] = document.createElement(\"span\");\n                var iconRight = this._components[\"iconRight\"] = document.createElement(\"i\");\n                var iconInvalid = this._components[\"iconInvalid\"] = document.createElement(\"i\");\n                var clearButton = this._components[\"clearButton\"] = document.createElement(\"i\");\n                clearButton.className = \"tui-input-clear-button\";\n                iconInvalid.className = \"tui-invalid-icon\";\n                label.className = \"tui-input-label\";\n                label.setAttribute(\"unselectable\", \"on\");\n                this._.appendChild(label);\n                this._.appendChild(iconInvalid);\n                this._.appendChild(iconRight);\n                this._.appendChild(clearButton);\n                this._.setAttribute(\"tabIndex\", \"0\");\n                $(this._).focus(function () {\n                    $root.addClass(\"tui-active\");\n                });\n                $(this._).blur(function () {\n                    $root.removeClass(\"tui-active\");\n                    if (_this.get(\"disable\"))\n                        return;\n                    if (_this.get(\"autoValidate\")) {\n                        if (!_this._inSelection)\n                            _this.validate();\n                    }\n                });\n                $root.on(\"mousedown\", function (e) {\n                    if (_this.get(\"disable\"))\n                        return;\n                    _this._.focus();\n                    _this.reset();\n                    setTimeout(function () {\n                        _this._inSelection = true;\n                        _this.openSelect();\n                    }, 0);\n                });\n                $root.keypress(function (e) {\n                    if (_this.get(\"disable\"))\n                        return;\n                    if (e.charCode === tui.browser.KeyCode.SPACE) {\n                        e.preventDefault();\n                        _this.reset();\n                        setTimeout(function () {\n                            _this._inSelection = true;\n                            _this.openSelect();\n                        }, 0);\n                    }\n                });\n                $(clearButton).on(\"mousedown\", function (e) {\n                    _this.set(\"value\", null);\n                    _this.set(\"text\", \"\");\n                    _this.reset();\n                    _this.fire(\"change\", e);\n                    e.stopPropagation();\n                });\n                popup.on(\"close\", function () {\n                    _this._inSelection = false;\n                    if (_this.get(\"autoValidate\")) {\n                        setTimeout(function () {\n                            if (document.activeElement !== _this._)\n                                _this.validate();\n                        });\n                    }\n                });\n            };\n            SelectBase.prototype.render = function () {\n                this._.scrollLeft = 0;\n                var $root = $(this._);\n                var label = this._components[\"label\"];\n                var iconRight = this._components[\"iconRight\"];\n                var iconInvalid = this._components[\"iconInvalid\"];\n                var clearButton = this._components[\"clearButton\"];\n                if (this.get(\"disable\")) {\n                    $root.addClass(\"tui-disable\");\n                }\n                else {\n                    $root.removeClass(\"tui-disable\");\n                }\n                var text = this.get(\"text\");\n                var noValue = false;\n                if (text === null || text === \"\") {\n                    noValue = true;\n                    text = this.get(\"placeholder\");\n                    $(label).addClass(\"tui-placeholder\");\n                }\n                else {\n                    $(label).removeClass(\"tui-placeholder\");\n                }\n                if (text === null)\n                    text = \"\";\n                $(label).text(text);\n                iconRight.className = this.get(\"iconRight\");\n                iconRight.style.display = \"\";\n                iconRight.style.right = \"0\";\n                if (!this._valid) {\n                    $root.addClass(\"tui-invalid\");\n                    iconInvalid.style.display = \"\";\n                    iconInvalid.style.right = iconRight.offsetWidth + \"px\";\n                }\n                else {\n                    $root.removeClass(\"tui-invalid\");\n                    iconInvalid.style.display = \"none\";\n                }\n                if (this.get(\"clearable\") && (!noValue)) {\n                    clearButton.style.display = \"\";\n                    clearButton.style.right = iconRight.offsetWidth + iconInvalid.offsetWidth + \"px\";\n                }\n                else {\n                    clearButton.style.display = \"none\";\n                }\n                if (!this._valid && this._invalidMessage) {\n                    this._set(\"follow-tooltip\", this._invalidMessage);\n                }\n                else {\n                    this._set(\"follow-tooltip\", null);\n                }\n            };\n            SelectBase.PADDING = 6;\n            return SelectBase;\n        }(widget.InputBase));\n        widget.SelectBase = SelectBase;\n        var SelectPopupBase = (function (_super) {\n            __extends(SelectPopupBase, _super);\n            function SelectPopupBase() {\n                _super.apply(this, arguments);\n            }\n            SelectPopupBase.prototype.createPopup = function () {\n                return widget.create(\"popup\");\n            };\n            return SelectPopupBase;\n        }(SelectBase));\n        widget.SelectPopupBase = SelectPopupBase;\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"selectBase.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        /**\n         * <tui:date-picker>\n         * Attributes: value, text(value to string), format, timeBar\n         * Method: openSelect\n         * Events: change\n         */\n        var DatePicker = (function (_super) {\n            __extends(DatePicker, _super);\n            function DatePicker() {\n                _super.apply(this, arguments);\n            }\n            DatePicker.prototype.initRestriction = function () {\n                var _this = this;\n                var calendar = widget.create(\"calendar\");\n                this._components[\"calendar\"] = calendar._;\n                _super.prototype.initRestriction.call(this);\n                this.setRestrictions({\n                    \"timeBar\": {\n                        \"set\": function (value) {\n                            calendar._set(\"timeBar\", !!value);\n                        },\n                        \"get\": function () {\n                            return !!calendar.get(\"timeBar\");\n                        }\n                    },\n                    \"text\": {\n                        \"set\": function (value) { },\n                        \"get\": function () {\n                            var value = _this.get(\"value\");\n                            if (value === null)\n                                return \"\";\n                            return tui.time.formatDate(value, _this.get(\"format\"));\n                        }\n                    }\n                });\n            };\n            DatePicker.prototype.init = function () {\n                var _this = this;\n                _super.prototype.init.call(this);\n                this.setInit(\"format\", \"yyyy-MM-dd\");\n                this.setInit(\"iconRight\", \"fa-calendar\");\n                var calendar = widget.get(this._components[\"calendar\"]);\n                var container = document.createElement(\"div\");\n                var toolbar = container.appendChild(document.createElement(\"div\"));\n                toolbar.className = \"tui-select-toolbar\";\n                container.insertBefore(calendar._, container.firstChild);\n                var popup = widget.get(this._components[\"popup\"]);\n                popup._set(\"content\", container);\n                this._components[\"toolbar\"] = toolbar;\n                calendar._.style.display = \"block\";\n                calendar._.style.borderWidth = \"0\";\n                calendar.on(\"click\", function (e) {\n                    _this.set(\"value\", calendar.get(\"value\"));\n                    _this.fire(\"change\", { e: e, value: _this.get(\"value\"), text: _this.get(\"text\") });\n                    if (e.data.type === \"pick\") {\n                        _this.closeSelect();\n                        _this._.focus();\n                    }\n                });\n                $(toolbar).click(function (e) {\n                    var obj = (e.target || e.srcElement);\n                    var name = obj.getAttribute(\"name\");\n                    if (name === \"today\") {\n                        _this.set(\"value\", tui.time.now());\n                        _this.fire(\"change\", { e: e, value: _this.get(\"value\"), text: _this.get(\"text\") });\n                        _this.closeSelect();\n                        _this._.focus();\n                    }\n                    else if (name === \"clear\") {\n                        _this.set(\"value\", null);\n                        _this.fire(\"change\", { e: e, value: _this.get(\"value\"), text: _this.get(\"text\") });\n                        _this.closeSelect();\n                        _this._.focus();\n                    }\n                });\n            };\n            DatePicker.prototype.openSelect = function () {\n                var _this = this;\n                var calendar = widget.get(this._components[\"calendar\"]);\n                var popup = widget.get(this._components[\"popup\"]);\n                //popup._set(\"content\", list._);\n                var toolbar = this._components[\"toolbar\"];\n                var todayButton = \"<a name='today'>\" + tui.str(\"Today\") + \"</a>\";\n                var clearButton = \" | <a name='clear'><i class='fa fa-trash-o'></i> \" + tui.str(\"Clear\") + \"</a>\";\n                var clearable = this.get(\"clearable\");\n                calendar._.style.outline = \"none\";\n                toolbar.style.display = \"\";\n                if (clearable)\n                    toolbar.innerHTML = todayButton + clearButton;\n                else\n                    toolbar.innerHTML = todayButton;\n                popup.open(this._, \"Lb\");\n                setTimeout(function () {\n                    calendar._.focus();\n                    calendar.set(\"value\", _this.get(\"value\"));\n                });\n            };\n            return DatePicker;\n        }(widget.SelectPopupBase));\n        widget.DatePicker = DatePicker;\n        widget.register(DatePicker, \"date-picker\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"inputBase.ts\" />\n/// <reference path=\"../browser/upload.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        var File = (function (_super) {\n            __extends(File, _super);\n            function File() {\n                _super.apply(this, arguments);\n            }\n            File.prototype.initRestriction = function () {\n                var _this = this;\n                _super.prototype.initRestriction.call(this);\n                this._uploader = tui.browser.createUploader(this._);\n                this.setRestrictions({\n                    \"action\": {\n                        \"set\": function (value) {\n                            _this._uploader.getOptions().action = value;\n                        },\n                        \"get\": function () {\n                            return _this._uploader.getOptions().action;\n                        }\n                    },\n                    \"accept\": {\n                        \"set\": function (value) {\n                            _this._uploader.getOptions().accept = value;\n                            if (_this._uploader.getInput()) {\n                                _this._uploader.deleteInput();\n                                _this._uploader.createInput();\n                            }\n                        },\n                        \"get\": function () {\n                            return _this._uploader.getOptions().accept;\n                        }\n                    },\n                    \"value\": {\n                        \"set\": function (value) {\n                            _this._data[\"value\"] = value;\n                            if (value === null || typeof value === tui.UNDEFINED) {\n                                _this._set(\"text\", \"\");\n                            }\n                        }\n                    }\n                });\n            };\n            File.prototype.init = function () {\n                var _this = this;\n                this.setInit(\"iconRight\", \"fa-file-o\");\n                var $root = $(this._);\n                var label = this._components[\"label\"] = document.createElement(\"span\");\n                var iconRight = this._components[\"iconRight\"] = document.createElement(\"i\");\n                var iconInvalid = this._components[\"iconInvalid\"] = document.createElement(\"i\");\n                iconInvalid.className = \"tui-invalid-icon\";\n                label.className = \"tui-input-label\";\n                label.setAttribute(\"unselectable\", \"on\");\n                this._.appendChild(label);\n                this._.appendChild(iconInvalid);\n                this._.appendChild(iconRight);\n                this._.setAttribute(\"tabIndex\", \"0\");\n                $(this._).focus(function () {\n                    $root.addClass(\"tui-active\");\n                });\n                var onblur = function () {\n                    if (document.activeElement === _this._ || document.activeElement === _this._uploader.getInput())\n                        return;\n                    $root.removeClass(\"tui-active\");\n                    if (_this.get(\"disable\"))\n                        return;\n                    if (_this.get(\"autoValidate\")) {\n                        _this.validate();\n                    }\n                };\n                $(this._).blur(function () {\n                    setTimeout(function () {\n                        onblur();\n                    });\n                });\n                this._uploader.on(\"focus\", function () {\n                    $root.addClass(\"tui-active\");\n                });\n                this._uploader.on(\"blur\", function () {\n                    setTimeout(function () {\n                        onblur();\n                    });\n                });\n                this._uploader.on(\"change\", function (e) {\n                    return _this.fire(\"change\", e);\n                });\n                this._uploader.on(\"success\", function (e) {\n                    _this._set(\"value\", e.data.response.fileId);\n                    _this.set(\"text\", e.data.response.fileName);\n                });\n                this._uploader.on(\"error\", function (e) {\n                    tui.errbox(e.data.response.error, tui.str(\"Error\"));\n                });\n            };\n            File.prototype.render = function () {\n                this._.scrollLeft = 0;\n                var $root = $(this._);\n                var label = this._components[\"label\"];\n                var iconRight = this._components[\"iconRight\"];\n                var iconInvalid = this._components[\"iconInvalid\"];\n                if (this.get(\"disable\")) {\n                    $root.addClass(\"tui-disable\");\n                    this._uploader.deleteInput();\n                    this._.setAttribute(\"tabIndex\", \"0\");\n                }\n                else {\n                    $root.removeClass(\"tui-disable\");\n                    this._uploader.createInput();\n                    this._.removeAttribute(\"tabIndex\");\n                }\n                var text = this.get(\"text\");\n                if (text === null || text === \"\") {\n                    text = this.get(\"placeholder\");\n                    $(label).addClass(\"tui-placeholder\");\n                }\n                else {\n                    $(label).removeClass(\"tui-placeholder\");\n                }\n                if (text === null)\n                    text = \"\";\n                $(label).text(text);\n                iconRight.className = this.get(\"iconRight\");\n                iconRight.style.display = \"\";\n                iconRight.style.right = \"0\";\n                if (!this._valid) {\n                    $root.addClass(\"tui-invalid\");\n                    iconInvalid.style.display = \"\";\n                    iconInvalid.style.right = iconRight.offsetWidth + \"px\";\n                }\n                else {\n                    $root.removeClass(\"tui-invalid\");\n                    iconInvalid.style.display = \"none\";\n                }\n                if (!this._valid && this._invalidMessage) {\n                    this._set(\"follow-tooltip\", this._invalidMessage);\n                }\n                else {\n                    this._set(\"follow-tooltip\", null);\n                }\n            };\n            File.PADDING = 6;\n            return File;\n        }(widget.InputBase));\n        widget.File = File;\n        widget.register(File, \"file\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"base.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        var Frame = (function (_super) {\n            __extends(Frame, _super);\n            function Frame() {\n                _super.apply(this, arguments);\n            }\n            Frame.prototype.initRestriction = function () {\n                var _this = this;\n                this._cache = {};\n                _super.prototype.initRestriction.call(this);\n                this.setRestrictions({\n                    \"src\": {\n                        \"set\": function (value) {\n                            _this._go(value);\n                        }\n                    }\n                });\n            };\n            Frame.prototype._go = function (src, cache, name) {\n                var _this = this;\n                if (cache === void 0) { cache = true; }\n                this._data[\"src\"] = src;\n                if (typeof name === tui.UNDEFINED || name == null) {\n                    name = \"\";\n                }\n                var key = name + \":\" + src;\n                if (cache && this._cache.hasOwnProperty(key)) {\n                    if (tui.ieVer > 0)\n                        while (this._.children.length > 0) {\n                            this._.removeChild(this._.children[0]);\n                        }\n                    else\n                        this._.innerHTML = \"\";\n                    var page = this._cache[key];\n                    this._.appendChild(page);\n                }\n                else {\n                    tui.ajax.getBody(src).done(function (content) {\n                        var page = tui.browser.toElement(content, true);\n                        if (tui.ieVer > 0)\n                            while (_this._.children.length > 0) {\n                                _this._.removeChild(_this._.children[0]);\n                            }\n                        else\n                            _this._.innerHTML = \"\";\n                        _this._.appendChild(page);\n                        if (cache) {\n                            _this._cache[key] = page;\n                        }\n                        _this.render();\n                    });\n                }\n            };\n            Frame.prototype.go = function (src, cache, name) {\n                if (cache === void 0) { cache = true; }\n                this._go(src, cache, name);\n                this.render();\n            };\n            Frame.prototype.render = function () {\n                widget.init(this._);\n            };\n            return Frame;\n        }(widget.Widget));\n        widget.Frame = Frame;\n        widget.register(Frame, \"frame\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"base.ts\" />\n/// <reference path=\"../browser/keyboard.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        function vval(v) {\n            if (isNaN(v))\n                return 0;\n            else\n                return v;\n        }\n        /**\n         * <tui:gird>\n         * Attributes: data, list(array type data), tree(tree type data),\n         * columns, sortColumn, sortType, scrollTop, scrollLeft, activeRow,\n         * activeColumn\n         * Method: scrollTo, setSortFlag\n         * Events: sort, rowclick, rowdblclick, rowcheck, keyselect\n         */\n        var Grid = (function (_super) {\n            __extends(Grid, _super);\n            function Grid() {\n                _super.apply(this, arguments);\n                this._setupHeadMoveListener = false;\n                this._columnWidths = [];\n                this._vLines = [];\n                this._handlers = [];\n            }\n            Grid.prototype.initRestriction = function () {\n                var _this = this;\n                // Register update callback routine\n                var updateCallback = (function () {\n                    var me = _this;\n                    return function (data) {\n                        if (data.data[\"completely\"]) {\n                            me.render();\n                            me.fire(\"update\");\n                        }\n                        else {\n                            me.drawContent();\n                            me.fire(\"update\");\n                        }\n                    };\n                })();\n                _super.prototype.initRestriction.call(this);\n                this.setRestrictions({\n                    \"selectable\": {\n                        \"get\": function () {\n                            var val = _this._data[\"selectable\"];\n                            if (typeof val === tui.UNDEFINED || val === null)\n                                return true;\n                            else\n                                return !!val;\n                        }\n                    },\n                    \"lineHeight\": {\n                        \"get\": function () {\n                            var val = _this._data[\"lineHeight\"];\n                            if (typeof val !== \"number\" || isNaN(val))\n                                return Grid.LINE_HEIGHT;\n                            else\n                                return val;\n                        }\n                    },\n                    \"dataType\": {\n                        \"set\": function (value) { }\n                    },\n                    \"data\": {\n                        \"set\": function (value) {\n                            if (_this._data[\"data\"] && typeof _this._data[\"data\"].off === \"function\") {\n                                _this._data[\"data\"].off(\"update\", updateCallback);\n                            }\n                            if (value instanceof tui.ds.List ||\n                                value instanceof tui.ds.RemoteList) {\n                                _this._data[\"data\"] = value;\n                                _this._data[\"dataType\"] = \"list\";\n                            }\n                            else if (value instanceof tui.ds.Tree ||\n                                value instanceof tui.ds.RemoteTree) {\n                                _this._data[\"data\"] = value;\n                                _this._data[\"dataType\"] = \"tree\";\n                            }\n                            else if (value instanceof Array) {\n                                _this._data[\"data\"] = new tui.ds.List(value);\n                            }\n                            else if (value === null) {\n                                _this._data[\"data\"] = new tui.ds.List([]);\n                            }\n                            if (_this._data[\"data\"] && typeof _this._data[\"data\"].on === \"function\") {\n                                _this._data[\"data\"].on(\"update\", updateCallback);\n                            }\n                            _this._vbar && _this._vbar._set(\"value\", 0);\n                            _this._vbar && _this._hbar._set(\"value\", 0);\n                            _this._set(\"activeRow\", null);\n                        },\n                        \"get\": function () {\n                            var data = _this._data[\"data\"];\n                            if (data)\n                                return data;\n                            else\n                                return new tui.ds.List([]);\n                        }\n                    },\n                    \"list\": {\n                        \"set\": function (value) {\n                            if (value instanceof tui.ds.List ||\n                                value instanceof tui.ds.RemoteList)\n                                _this._set(\"data\", value);\n                            else if (value instanceof Array) {\n                                _this._set(\"data\", new tui.ds.List(value));\n                            }\n                            else if (value === null) {\n                                _this._set(\"data\", null);\n                            }\n                        },\n                        \"get\": function () { }\n                    },\n                    \"tree\": {\n                        \"set\": function (value) {\n                            if (value instanceof tui.ds.Tree ||\n                                value instanceof tui.ds.RemoteTree)\n                                _this._set(\"data\", value);\n                            else if (value instanceof Array) {\n                                _this._set(\"data\", new tui.ds.Tree(value));\n                            }\n                            else if (value === null) {\n                                _this._set(\"data\", null);\n                            }\n                        },\n                        \"get\": function () { }\n                    },\n                    \"columns\": {\n                        \"set\": function (value) {\n                            if (value instanceof Array) {\n                                _this._data[\"columns\"] = value;\n                                _this.clearBuffer();\n                                _this._columnWidths = [];\n                            }\n                        },\n                        \"get\": function () {\n                            if (_this._data[\"columns\"])\n                                return _this._data[\"columns\"];\n                            else\n                                return [];\n                        }\n                    },\n                    \"scrollTop\": {\n                        \"set\": function (value) {\n                            _this._vbar._set(\"value\", value);\n                        },\n                        \"get\": function () {\n                            return _this._vbar.get(\"value\");\n                        }\n                    },\n                    \"scrollLeft\": {\n                        \"set\": function (value) {\n                            _this._hbar._set(\"value\", value);\n                        },\n                        \"get\": function () {\n                            return _this._hbar.get(\"value\");\n                        }\n                    },\n                    \"activeRow\": {\n                        \"set\": function (value) {\n                            if (typeof value === \"number\" && !isNaN(value) || value === null) {\n                                if (value < 0)\n                                    value = 0;\n                                if (value > _this.get(\"data\").length() - 1)\n                                    value = _this.get(\"data\").length() - 1;\n                                if (_this._data[\"activeRow\"] != null && _this._buffer)\n                                    $(_this._buffer.lines[_this._data[\"activeRow\"] - _this._buffer.begin]).removeClass(\"tui-actived\");\n                                _this._data[\"activeRow\"] = value;\n                                if (value != null && _this._buffer)\n                                    $(_this._buffer.lines[value - _this._buffer.begin]).addClass(\"tui-actived\");\n                            }\n                        },\n                        \"get\": function () {\n                            var row = _this._data[\"activeRow\"];\n                            if (row === null)\n                                return null;\n                            if (row >= 0 && row < _this.get(\"data\").length())\n                                return row;\n                            else\n                                return null;\n                        }\n                    },\n                    \"activeRowData\": {\n                        \"set\": function (value) { },\n                        \"get\": function () {\n                            var r = _this.get(\"activeRow\");\n                            if (r != null) {\n                                return _this.get(\"data\").get(r);\n                            }\n                            else\n                                return r;\n                        }\n                    }\n                });\n            };\n            Grid.prototype.init = function () {\n                var _this = this;\n                this._tuid = tui.tuid();\n                $(this._).attr({ \"tabIndex\": 0, \"unselectable\": \"on\" });\n                tui.browser.setInnerHtml(this._, \"<div class='tui-grid-head'></div><div class='tui-content'></div>\");\n                var head = this._components[\"head\"] = $(this._).children(\".tui-grid-head\")[0];\n                var content = this._components[\"content\"] = $(this._).children(\".tui-content\")[0];\n                this._hbar = tui.create(\"scrollbar\", { direction: \"horizontal\" });\n                this._components[\"hScroll\"] = this._hbar.appendTo(this._, false)._;\n                this._vbar = tui.create(\"scrollbar\");\n                this._components[\"vScroll\"] = this._vbar.appendTo(this._, false)._;\n                //this._lineHeight = Grid.LINE_HEIGHT;\n                if (document.createStyleSheet) {\n                    this._gridStyle = document.createStyleSheet();\n                }\n                else {\n                    this._gridStyle = document.createElement(\"style\");\n                    document.head.appendChild(this._gridStyle);\n                }\n                this._buffer = { begin: 0, end: 0, lines: [] };\n                this.setInit(\"header\", true);\n                this.on(\"resize\", function () {\n                    _this.render();\n                });\n                this._vbar.on(\"scroll\", function () {\n                    _this.drawContent();\n                });\n                this._hbar.on(\"scroll\", function () {\n                    //this.drawContent();\n                    _this.computeHOffset();\n                });\n                var mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? \"DOMMouseScroll\" : \"mousewheel\";\n                $(this._).on(mousewheelevt, function (ev) {\n                    if (_this.get(\"autoHeight\"))\n                        return;\n                    var e = ev.originalEvent;\n                    var delta = e.detail ? e.detail * (-1) : e.wheelDelta;\n                    var step = _this.get(\"lineHeight\");\n                    //delta returns +120 when wheel is scrolled up, -120 when scrolled down\n                    var scrollSize = step > 1 ? step : 1;\n                    if (delta <= 0) {\n                        // console.log(this._vbar.get(\"value\") + \" : \" + this._vbar.get(\"totle\"));\n                        if (_this._vbar.get(\"value\") < _this._vbar.get(\"total\")) {\n                            ev.stopPropagation();\n                            ev.preventDefault();\n                            _this._vbar.set(\"value\", _this._vbar.get(\"value\") + scrollSize);\n                            _this.drawContent();\n                        }\n                        else if (_this.get(\"noMouseWheel\")) {\n                            ev.stopPropagation();\n                            ev.preventDefault();\n                        }\n                    }\n                    else {\n                        if (_this._vbar.get(\"value\") > 0) {\n                            ev.stopPropagation();\n                            ev.preventDefault();\n                            _this._vbar.set(\"value\", _this._vbar.get(\"value\") - scrollSize);\n                            _this.drawContent();\n                        }\n                        else if (_this.get(\"noMouseWheel\")) {\n                            ev.stopPropagation();\n                            ev.preventDefault();\n                        }\n                    }\n                });\n                var scrollX = function (distance) {\n                    var oldValue = _this._hbar.get(\"value\");\n                    _this._hbar.set(\"value\", oldValue - distance);\n                    _this.drawContent();\n                    _this.computeHOffset();\n                    if (_this._hbar.get(\"value\") !== oldValue && Math.abs(lastSpeed) > 0.02) {\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                };\n                var scrollY = function (distance) {\n                    var oldValue = _this._vbar.get(\"value\");\n                    _this._vbar.set(\"value\", oldValue - distance);\n                    _this.drawContent();\n                    if (_this._vbar.get(\"value\") !== oldValue && Math.abs(lastSpeed) > 0.02) {\n                        return true;\n                    }\n                    else {\n                        return false;\n                    }\n                };\n                var inTouched = false;\n                var lastSpeed = 0;\n                var lastPos;\n                var lastTime;\n                var direction = null;\n                $(this._).on(\"touchstart\", function (ev) {\n                    if (inTouched)\n                        return;\n                    var obj = (ev.target || ev.srcElement);\n                    if ($(obj).hasClass(\"tui-grid-handler\")) {\n                        return;\n                    }\n                    direction = null;\n                    inTouched = true;\n                    lastSpeed = 0;\n                    var e = ev.originalEvent;\n                    if (e.targetTouches.length != 1)\n                        return;\n                    var touch = e.targetTouches[0];\n                    lastPos = { x: touch.pageX, y: touch.pageY };\n                    lastTime = new Date().getMilliseconds();\n                });\n                $(this._).on(\"touchmove\", function (ev) {\n                    clearTimeout(hittestTimer);\n                    if (!inTouched)\n                        return;\n                    var e = ev.originalEvent;\n                    var touch = e.targetTouches[0];\n                    var movePos = { x: touch.pageX, y: touch.pageY };\n                    var moveX = movePos.x - lastPos.x;\n                    var moveY = movePos.y - lastPos.y;\n                    var currentTime = new Date().getMilliseconds();\n                    var spanTime = currentTime - lastTime;\n                    if (spanTime <= 0)\n                        return;\n                    lastPos = movePos;\n                    lastTime = currentTime;\n                    if (direction == null) {\n                        if (Math.abs(moveX) > 0 && Math.abs(moveY) > 0)\n                            direction = Math.abs(moveX) > Math.abs(moveY) ? \"x\" : \"y\";\n                        else if (Math.abs(moveX) > 0)\n                            direction = \"x\";\n                        else if (Math.abs(moveY) > 0)\n                            direction = \"y\";\n                    }\n                    if (direction === \"x\") {\n                        lastSpeed = moveX / spanTime;\n                        if (scrollX(moveX)) {\n                            ev.stopPropagation();\n                            ev.preventDefault();\n                        }\n                    }\n                    else if (direction === \"y\") {\n                        lastSpeed = moveY / spanTime;\n                        if (scrollY(moveY)) {\n                            ev.stopPropagation();\n                            ev.preventDefault();\n                        }\n                    }\n                });\n                $(this._).on(\"touchend\", function (ev) {\n                    clearTimeout(hittestTimer);\n                    requestAnimationFrame(function keepMove(timestamp) {\n                        if (Math.abs(lastSpeed) > 0.1) {\n                            if (direction === \"x\") {\n                                if (scrollX(lastSpeed * 20)) {\n                                    lastSpeed *= 0.95;\n                                    requestAnimationFrame(keepMove);\n                                }\n                            }\n                            else if (direction === \"y\") {\n                                if (scrollY(lastSpeed * 20)) {\n                                    lastSpeed *= 0.95;\n                                    requestAnimationFrame(keepMove);\n                                }\n                            }\n                            else {\n                                lastSpeed = 0;\n                            }\n                        }\n                    });\n                    inTouched = false;\n                    lastTime = null;\n                });\n                $(this._).on(\"mousedown touchstart\", function (ev) {\n                    var obj = (ev.target || ev.srcElement);\n                    if ($(obj).hasClass(\"tui-grid-handler\")) {\n                        ev.stopPropagation();\n                        ev.preventDefault();\n                        var idx = _this._handlers.indexOf(obj);\n                        var columns = _this.get(\"columns\");\n                        var l = obj.offsetLeft;\n                        var positions = tui.browser.getEventPosition(ev);\n                        var srcX = positions[0].x;\n                        obj.style.height = _this._.clientHeight + \"px\";\n                        $(obj).addClass(\"tui-handler-move\");\n                        var mask = widget.openDragMask(function (e) {\n                            var positions = tui.browser.getEventPosition(e);\n                            obj.style.left = l + positions[0].x - srcX + \"px\";\n                        }, function (e) {\n                            var positions = tui.browser.getEventPosition(e);\n                            obj.style.height = \"\";\n                            $(obj).removeClass(\"tui-handler-move\");\n                            columns[idx].width = columns[idx].width + positions[0].x - srcX;\n                            _this._columnWidths = [];\n                            _this.initColumnWidth();\n                            _this.computeScroll();\n                            _this.computeColumnWidth();\n                            _this.drawHeader();\n                            _this.computeHOffset();\n                        });\n                        mask.style.cursor = \"col-resize\";\n                    }\n                });\n                var hittest = function (obj) {\n                    var line = null;\n                    var col = null;\n                    var srcObj = obj;\n                    while (obj) {\n                        var parent = obj.parentNode;\n                        if (parent && $(parent).hasClass(\"tui-grid-line\")) {\n                            line = _this._buffer.begin + _this._buffer.lines.indexOf(parent);\n                            if (_this.get(\"selectable\") === true) {\n                                col = obj.col;\n                                _this._set(\"activeRow\", line);\n                                _this._set(\"activeColumn\", col);\n                            }\n                            break;\n                        }\n                        obj = parent;\n                    }\n                    return { line: line, col: col };\n                };\n                var hittestTimer = null;\n                var testLine = function (ev) {\n                    var obj = (ev.target || ev.srcElement);\n                    var target = hittest(obj);\n                    if (target.line === null)\n                        return;\n                    var data = _this.get(\"data\");\n                    if ($(obj).hasClass(\"tui-arrow-expand\")) {\n                        data.collapse(target.line);\n                        _this.render();\n                        ev.preventDefault();\n                        _this.fire(\"collapse\", { e: ev, line: target.line });\n                    }\n                    else if ($(obj).hasClass(\"tui-arrow-collapse\")) {\n                        data.expand(target.line);\n                        _this.render();\n                        ev.preventDefault();\n                        _this.fire(\"expand\", { e: ev, line: target.line });\n                    }\n                    else if ($(obj).hasClass(\"tui-grid-check\")) {\n                        var column = _this.get(\"columns\")[target.col];\n                        var checkKey = column.checkKey ? column.checkKey : \"checked\";\n                        var checked;\n                        if (_this.get(\"dataType\") === \"tree\") {\n                            checked = data.get(target.line).item[checkKey] = !data.get(target.line).item[checkKey];\n                        }\n                        else {\n                            checked = data.get(target.line)[checkKey] = !data.get(target.line)[checkKey];\n                        }\n                        _this.drawLine(_this._buffer.lines[target.line - _this._buffer.begin], target.line, _this.get(\"lineHeight\"), _this.get(\"columns\"), data.get(target.line));\n                        ev.preventDefault();\n                        _this.fire(\"rowcheck\", { e: ev, row: target.line, col: target.col, checked: checked });\n                    }\n                    else {\n                        _this.fire(\"rowmousedown\", { e: ev, row: target.line, col: target.col });\n                    }\n                };\n                $(this._).on(\"mousedown\", function (ev) {\n                    testLine(ev);\n                });\n                $(this._).on(\"mouseup\", function (ev) {\n                    var obj = (ev.target || ev.srcElement);\n                    var target = hittest(obj);\n                    if (target.line != null)\n                        _this.fire(\"rowmouseup\", { e: ev, row: target.line, col: target.col });\n                });\n                $(content).click(function (ev) {\n                    var obj = (ev.target || ev.srcElement);\n                    if ($(obj).hasClass(\"tui-arrow-expand\")) {\n                        return;\n                    }\n                    else if ($(obj).hasClass(\"tui-arrow-collapse\")) {\n                        return;\n                    }\n                    else if ($(obj).hasClass(\"tui-grid-check\")) {\n                        return;\n                    }\n                    var target = hittest(obj);\n                    if (target.line != null)\n                        _this.fire(\"rowclick\", { e: ev, row: target.line, col: target.col });\n                });\n                $(content).dblclick(function (ev) {\n                    var obj = (ev.target || ev.srcElement);\n                    if ($(obj).hasClass(\"tui-arrow-expand\")) {\n                        return;\n                    }\n                    else if ($(obj).hasClass(\"tui-arrow-collapse\")) {\n                        return;\n                    }\n                    else if ($(obj).hasClass(\"tui-grid-check\")) {\n                        return;\n                    }\n                    var target = hittest(obj);\n                    if (target.line != null)\n                        _this.fire(\"rowdblclick\", { e: ev, row: target.line, col: target.col });\n                });\n                $(this._).keyup(function (e) {\n                    var activeRow = _this.get(\"activeRow\");\n                    _this.fire(\"keyup\", { e: e, row: activeRow });\n                });\n                $(this._).keydown(function (e) {\n                    var k = e.keyCode;\n                    var activeRow = _this.get(\"activeRow\");\n                    _this.fire(\"keydown\", { e: e, row: activeRow });\n                    if (k >= 33 && k <= 40 || k == tui.browser.KeyCode.ENTER) {\n                        if (k === tui.browser.KeyCode.LEFT) {\n                            if (_this.get(\"dataType\") === \"tree\") {\n                                if (activeRow !== null) {\n                                    var node = _this.get(\"data\").get(activeRow);\n                                    if (node.hasChild && node.expand) {\n                                        _this.get(\"data\").collapse(activeRow);\n                                        _this.render();\n                                        _this.fire(\"collapse\", { e: e, line: activeRow });\n                                        return;\n                                    }\n                                }\n                            }\n                            if (!_this.get(\"autoWidth\")) {\n                                _this._hbar.set(\"value\", _this._hbar.get(\"value\") - 30);\n                                _this.computeHOffset();\n                            }\n                        }\n                        else if (k === tui.browser.KeyCode.UP) {\n                            if (!_this.get(\"selectable\")) {\n                                var t = _this.get(\"scrollTop\");\n                                _this._vbar.set(\"value\", t - 10);\n                                _this.drawContent();\n                            }\n                            else {\n                                if (_this.get(\"activeRow\") === null) {\n                                    _this._set(\"activeRow\", 0);\n                                }\n                                else {\n                                    _this._set(\"activeRow\", _this.get(\"activeRow\") - 1);\n                                }\n                                _this.scrollTo(_this.get(\"activeRow\"));\n                                _this.fire(\"keyselect\", { e: e, row: _this.get(\"activeRow\") });\n                            }\n                        }\n                        else if (k === tui.browser.KeyCode.RIGHT) {\n                            if (_this.get(\"dataType\") === \"tree\") {\n                                if (activeRow !== null) {\n                                    var node = _this.get(\"data\").get(activeRow);\n                                    if (node.hasChild && !node.expand) {\n                                        _this.get(\"data\").expand(activeRow);\n                                        _this.render();\n                                        _this.fire(\"collapse\", { e: e, line: activeRow });\n                                        return;\n                                    }\n                                }\n                            }\n                            if (!_this.get(\"autoWidth\")) {\n                                _this._hbar.set(\"value\", _this._hbar.get(\"value\") + 30);\n                                _this.computeHOffset();\n                            }\n                        }\n                        else if (k === tui.browser.KeyCode.DOWN) {\n                            if (!_this.get(\"selectable\")) {\n                                var t = _this.get(\"scrollTop\");\n                                _this._vbar.set(\"value\", t + 10);\n                                _this.drawContent();\n                            }\n                            else {\n                                if (_this.get(\"activeRow\") === null) {\n                                    _this._set(\"activeRow\", 0);\n                                }\n                                else {\n                                    _this._set(\"activeRow\", _this.get(\"activeRow\") + 1);\n                                }\n                                _this.scrollTo(_this.get(\"activeRow\"));\n                                _this.fire(\"keyselect\", { e: e, row: _this.get(\"activeRow\") });\n                            }\n                        }\n                        else if (k === tui.browser.KeyCode.PRIOR) {\n                            if (!_this.get(\"selectable\")) {\n                                var t = _this.get(\"scrollTop\");\n                                _this._vbar.set(\"value\", t - _this._vbar.get(\"page\"));\n                                _this.drawContent();\n                            }\n                            else {\n                                if (_this.get(\"activeRow\") === null) {\n                                    _this._set(\"activeRow\", 0);\n                                }\n                                else {\n                                    _this._set(\"activeRow\", _this.get(\"activeRow\") - _this._dispLines + 1);\n                                }\n                                _this.scrollTo(_this.get(\"activeRow\"));\n                                _this.fire(\"keyselect\", { e: e, row: _this.get(\"activeRow\") });\n                            }\n                        }\n                        else if (k === tui.browser.KeyCode.NEXT) {\n                            if (!_this.get(\"selectable\")) {\n                                var t = _this.get(\"scrollTop\");\n                                _this._vbar.set(\"value\", t + _this._vbar.get(\"page\"));\n                                _this.drawContent();\n                            }\n                            else {\n                                if (_this.get(\"activeRow\") === null) {\n                                    _this._set(\"activeRow\", 0);\n                                }\n                                else {\n                                    _this._set(\"activeRow\", _this.get(\"activeRow\") + _this._dispLines - 1);\n                                }\n                                _this.scrollTo(_this.get(\"activeRow\"));\n                                _this.fire(\"keyselect\", { e: e, row: _this.get(\"activeRow\") });\n                            }\n                        }\n                        else if (k === tui.browser.KeyCode.HOME) {\n                            if (!_this.get(\"selectable\")) {\n                                _this._vbar.set(\"value\", 0);\n                                _this.drawContent();\n                            }\n                            else {\n                                _this._set(\"activeRow\", 0);\n                                _this.scrollTo(_this.get(\"activeRow\"));\n                                _this.fire(\"keyselect\", { e: e, row: _this.get(\"activeRow\") });\n                            }\n                        }\n                        else if (k === tui.browser.KeyCode.END) {\n                            if (!_this.get(\"selectable\")) {\n                                _this._vbar.set(\"value\", _this._vbar.get(\"total\"));\n                                _this.drawContent();\n                            }\n                            else {\n                                var data = _this.get(\"data\");\n                                _this._set(\"activeRow\", data.length() - 1);\n                                _this.scrollTo(_this.get(\"activeRow\"));\n                                _this.fire(\"keyselect\", { e: e, row: _this.get(\"activeRow\") });\n                            }\n                        }\n                        else if (k === tui.browser.KeyCode.ENTER) {\n                            if (_this.get(\"selectable\")) {\n                                if (_this.get(\"activeRow\") != null) {\n                                    _this.fire(\"rowclick\", { e: e, row: _this.get(\"activeRow\"), col: _this.get(\"activeColumn\") });\n                                }\n                            }\n                        }\n                        e.preventDefault();\n                        e.stopPropagation();\n                    }\n                });\n                $(head).click(function (ev) {\n                    var obj = (ev.target || ev.srcElement);\n                    var columns = _this.get(\"columns\");\n                    while (obj) {\n                        if (obj.parentNode === head) {\n                            var col = obj.col;\n                            if (columns[col].sortable) {\n                                var sortType = \"asc\";\n                                if (_this.get(\"sortColumn\") == col) {\n                                    if (_this.get(\"sortType\") === \"asc\")\n                                        sortType = \"desc\";\n                                    else {\n                                        sortType = null;\n                                        col = null;\n                                    }\n                                }\n                                if (_this.fire(\"sort\", { e: ev, column: col === null ? null : columns[col], type: sortType }))\n                                    _this.setSortFlag(col, sortType);\n                                _this.drawHeader();\n                            }\n                            return;\n                        }\n                        else\n                            obj = obj.parentNode;\n                    }\n                });\n            };\n            Grid.prototype.setSortFlag = function (col, type) {\n                this._set(\"sortColumn\", col);\n                this._set(\"sortType\", type);\n                var columns = this.get(\"columns\");\n                var column = columns[col];\n                var ds = this.get(\"data\");\n                if (col === null || type === null)\n                    ds.setOrder(null);\n                else {\n                    ds.setOrder([\n                        {\n                            key: column.key,\n                            desc: (type === \"desc\")\n                        }\n                    ]);\n                }\n            };\n            Grid.prototype.scrollTo = function (index) {\n                if (typeof index !== \"number\" || isNaN(index) || index < 0 || index >= this.get(\"data\").length())\n                    return;\n                var v = this._vbar.get(\"value\");\n                var lineHeight = this.get(\"lineHeight\");\n                if (v > index * lineHeight) {\n                    this._vbar.set(\"value\", index * lineHeight);\n                    this.drawContent();\n                }\n                else {\n                    var h = (index - this._dispLines + 1) * lineHeight;\n                    var diff = (this._.clientHeight - this.getComponent(\"head\").offsetHeight\n                        - this._hbar._.offsetHeight - this._dispLines * lineHeight);\n                    if (v < h - diff) {\n                        this._vbar.set(\"value\", h - diff);\n                        this.drawContent();\n                    }\n                }\n            };\n            Grid.prototype.iterate = function (func) {\n                var data = this.get(\"data\");\n                var dataType = this.get(\"dataType\");\n                function iterateItem(treeItem, path) {\n                    if (func(treeItem, path, true) === false)\n                        return false;\n                    var children = treeItem[childrenKey];\n                    if (children) {\n                        for (var i = 0; i < children.length; i++) {\n                            if (iterateItem(children[i], path.concat(i)) === false)\n                                return false;\n                        }\n                    }\n                }\n                if (dataType === \"tree\" && data._finalData == null) {\n                    var tree = data;\n                    var childrenKey = tree.getConfig().children;\n                    var rawData = tree.getRawData();\n                    if (!rawData)\n                        return;\n                    for (var i = 0; i < rawData.length; i++) {\n                        if (iterateItem(rawData[i], [i]) === false)\n                            break;\n                    }\n                }\n                else {\n                    var list = data;\n                    for (var i = 0; i < list.length(); i++) {\n                        var listItem = dataType === \"tree\" ? list.get(i).item : list.get(i);\n                        if (func(listItem, [i], dataType === \"tree\") === false)\n                            break;\n                    }\n                }\n            };\n            /**\n             * Search a row by condition, get field value by 'dataKey' and compare to value, if match then active it.\n             * Should only used in local data type, e.g. List or Tree, if used in RemoteList or RemoteTree may not work correctly.\n             */\n            Grid.prototype.activeTo = function (dataKey, value) {\n                var data = this.get(\"data\");\n                var dataType = this.get(\"dataType\");\n                var path = [];\n                var childrenKey;\n                // If is a subset return 1, if equals return 2, otherwise return 0\n                function matchPath(p1, p2) {\n                    for (var i = 0; i < p1.length; i++) {\n                        if (i >= p2.length)\n                            return 0;\n                        else if (p1[i] !== p2[i])\n                            return 0;\n                    }\n                    return p1.length === p2.length ? 2 : 1;\n                }\n                if (dataType === \"tree\" && data._finalData == null) {\n                    var tree = data;\n                    this.iterate(function (item, p, treeNode) {\n                        if (item[dataKey] === value) {\n                            path = p;\n                            return false;\n                        }\n                    });\n                    if (path && path.length > 0) {\n                        var searchPath = [];\n                        var searchLevel = -1;\n                        var found = false;\n                        for (var i = 0; i < tree.length(); i++) {\n                            var node = tree.get(i);\n                            if (node.level === searchLevel) {\n                                searchPath[searchLevel]++;\n                            }\n                            else if (node.level < searchLevel) {\n                                for (var j = node.level; j < searchLevel; j++)\n                                    searchPath.pop();\n                                searchLevel = node.level;\n                                searchPath[searchLevel]++;\n                            }\n                            else {\n                                searchPath.push(0);\n                                searchLevel++;\n                            }\n                            var state = matchPath(searchPath, path);\n                            if (state === 2) {\n                                found = true;\n                                break;\n                            }\n                            else if (state === 1) {\n                                tree.expand(i);\n                            }\n                        }\n                        if (found) {\n                            this._set(\"activeRow\", i);\n                            this.computeScroll();\n                            this.scrollTo(i);\n                        }\n                    }\n                }\n                else if (dataType === \"tree\" && data._finalData) {\n                    var list = data;\n                    for (var i_1 = 0; i_1 < list.length(); i_1++) {\n                        if (list.get(i_1).item[dataKey] === value) {\n                            this._set(\"activeRow\", i_1);\n                            this.scrollTo(i_1);\n                            break;\n                        }\n                    }\n                }\n                else {\n                    var list = data;\n                    for (var i_2 = 0; i_2 < list.length(); i_2++) {\n                        if (list.get(i_2)[dataKey] === value) {\n                            this._set(\"activeRow\", i_2);\n                            this.scrollTo(i_2);\n                            break;\n                        }\n                    }\n                }\n            };\n            Grid.prototype.computeWidth = function () {\n                if (this.get(\"autoWidth\")) {\n                    return this._.clientWidth;\n                }\n                else {\n                    var contentWidth = 0;\n                    for (var i = 0; i < this._columnWidths.length; i++) {\n                        contentWidth += this._columnWidths[i] + Grid.CELL_SPACE * 2;\n                    }\n                    return contentWidth;\n                }\n            };\n            Grid.prototype.computeScroll = function () {\n                var _this = this;\n                var vScroll = this._vbar;\n                $(vScroll._).addClass(\"tui-hidden\");\n                var vEnable = false;\n                var hScroll = this._hbar;\n                $(hScroll._).addClass(\"tui-hidden\");\n                var hEnable = false;\n                var clientWidth = this._.clientWidth;\n                var clientHeight = this._.clientHeight;\n                var data = this.get(\"data\");\n                var lineHeight = this.get(\"lineHeight\");\n                this._contentHeight = (data.length() + (this.get(\"header\") ? 1 : 0)) * lineHeight;\n                this._contentWidth = this.computeWidth();\n                var head = this._components[\"head\"];\n                var content = this._components[\"content\"];\n                var computeV = function (first) {\n                    var realClientHeight = clientHeight - (hEnable ? hScroll._.offsetHeight : 0);\n                    var shouldEnable = (_this.get(\"autoHeight\") ? false : _this._contentHeight > realClientHeight);\n                    if (shouldEnable) {\n                        $(vScroll._).removeClass(\"tui-hidden\");\n                        vScroll._.style.height = realClientHeight + \"px\";\n                        vScroll._set(\"total\", _this._contentHeight - realClientHeight);\n                        if (_this._contentHeight > 0) {\n                            vScroll.set(\"page\", realClientHeight / _this._contentHeight * (_this._contentHeight - realClientHeight));\n                        }\n                        else\n                            vScroll.set(\"page\", 1);\n                    }\n                    else if (_this.get(\"autoHeight\")) {\n                        vScroll._set(\"value\", 0);\n                        vScroll._set(\"total\", 0);\n                        content.style.height = _this._contentHeight + \"px\";\n                        if (hEnable) {\n                            _this._.style.height = _this._contentHeight + hScroll._.offsetHeight + \"px\";\n                        }\n                        else {\n                            _this._.style.height = _this._contentHeight + \"px\";\n                        }\n                        clientHeight = _this._.clientHeight;\n                    }\n                    else {\n                        vScroll._set(\"value\", 0);\n                        vScroll._set(\"total\", 0);\n                    }\n                    if (vEnable !== shouldEnable) {\n                        vEnable = shouldEnable;\n                        if (!first)\n                            computeH();\n                    }\n                };\n                var computeH = function () {\n                    var realClientWidth = clientWidth - (vEnable ? vScroll._.offsetWidth : 0);\n                    var shouldEnable = (_this.get(\"autoWidth\") ? false : _this._contentWidth > realClientWidth);\n                    if (shouldEnable) {\n                        $(hScroll._).removeClass(\"tui-hidden\");\n                        hScroll._.style.width = realClientWidth + \"px\";\n                        hScroll._set(\"total\", _this._contentWidth - realClientWidth);\n                        if (_this._contentWidth > 0)\n                            hScroll.set(\"page\", realClientWidth / _this._contentWidth * (_this._contentWidth - realClientWidth));\n                        else\n                            hScroll.set(\"page\", 1);\n                    }\n                    else {\n                        hScroll._set(\"total\", 0);\n                        hScroll.set(\"value\", 0);\n                    }\n                    if (hEnable !== shouldEnable) {\n                        hEnable = shouldEnable;\n                        computeV(false);\n                    }\n                };\n                computeV(true);\n                computeH();\n                if (this.get(\"header\")) {\n                    head.style.display = \"block\";\n                    var width = (vEnable ? clientWidth - vScroll._.offsetWidth : clientWidth);\n                    width = (width >= 0 ? width : 0);\n                    head.style.width = width + \"px\";\n                }\n                else {\n                    head.style.display = \"none\";\n                }\n                var width = (vEnable ? clientWidth - vScroll._.offsetWidth : clientWidth);\n                width = (width >= 0 ? width : 0);\n                content.style.width = width + \"px\";\n                var dispHeight = (hEnable ? clientHeight - hScroll._.offsetHeight : clientHeight);\n                dispHeight = (dispHeight >= 0 ? dispHeight : 0);\n                content.style.height = dispHeight + \"px\";\n                this._dispLines = Math.ceil((dispHeight - (this.get(\"header\") ? lineHeight : 0)) / lineHeight);\n            };\n            Grid.prototype.drawLine = function (line, index, lineHeight, columns, lineData) {\n                var isTree = this.get(\"dataType\") === \"tree\";\n                var item = isTree ? lineData.item : lineData;\n                var tipKey = this.get(\"rowTooltipKey\");\n                if (item[tipKey]) {\n                    line.setAttribute(\"tooltip\", item[tipKey]);\n                }\n                line.style.height = lineHeight + \"px\";\n                line.style.lineHeight = lineHeight + \"px\";\n                if (line.childNodes.length != columns.length) {\n                    line.innerHTML = \"\";\n                    for (var i = 0; i < columns.length; i++) {\n                        var span = document.createElement(\"span\");\n                        span.className = \"tui-grid-\" + this._tuid + \"-\" + i;\n                        span.setAttribute(\"unselectable\", \"on\");\n                        span.col = i;\n                        line.appendChild(span);\n                    }\n                }\n                for (var i = 0; i < columns.length; i++) {\n                    var col = columns[i];\n                    var prefix = \"\";\n                    if (col.arrow === true && isTree) {\n                        for (var j = 0; j < lineData.level; j++) {\n                            prefix += \"<i class='tui-space'></i>\";\n                        }\n                        if (lineData.hasChild) {\n                            if (lineData.expand)\n                                prefix += \"<i class='tui-arrow-expand'></i>\";\n                            else\n                                prefix += \"<i class='tui-arrow-collapse'></i>\";\n                        }\n                        else {\n                            prefix += \"<i class='tui-arrow'></i>\";\n                        }\n                    }\n                    if (col.type === \"check\") {\n                        var k = (col.checkKey ? col.checkKey : \"checked\");\n                        if (item[k] === true)\n                            prefix += \"<i class='fa fa-check-square tui-grid-check'></i>\";\n                        else if (item[k] === false)\n                            prefix += \"<i class='fa fa-square-o tui-grid-check'></i>\";\n                        else\n                            prefix += \"<i class='tui-grid-no-check'></i>\";\n                    }\n                    else if (col.type === \"tristate\") {\n                        var k = (col.checkKey ? col.checkKey : \"checked\");\n                        if (item[k] === true)\n                            prefix += \"<i class='fa-check-square tui-grid-check'></i>\";\n                        else if (item[k] === false)\n                            prefix += \"<i class='fa-square-o tui-grid-check'></i>\";\n                        else if (item[k] === \"tristate\")\n                            prefix += \"<i class='fa-check-square tui-grid-check'></i>\";\n                        else\n                            prefix += \"<i class='tui-grid-no-check'></i>\";\n                    }\n                    else if (col.type === \"select\") {\n                        prefix += \"<i class='fa fa-caret-down tui-grid-select'></i>\";\n                    }\n                    else if (col.type === \"edit\") {\n                        prefix += \"<i class='fa fa-edit tui-grid-edit'></i>\";\n                    }\n                    if (col.iconKey && item[col.iconKey]) {\n                        prefix += \"<i class='fa \" + item[col.iconKey] + \" tui-grid-icon'></i>\";\n                    }\n                    var cell = line.childNodes[i];\n                    cell.style.height = lineHeight + \"px\";\n                    cell.style.lineHeight = lineHeight + \"px\";\n                    tui.browser.setInnerHtml(cell, prefix);\n                    var prefixContent = columns[i].prefixKey !== null ? item[columns[i].prefixKey] : null;\n                    if (prefixContent) {\n                        var prefixSpan = document.createElement(\"span\");\n                        tui.browser.setInnerHtml(prefixSpan, prefixContent);\n                        cell.appendChild(prefixSpan);\n                    }\n                    cell.appendChild(document.createTextNode(item[columns[i].key]));\n                    var suffixContent = columns[i].suffixKey !== null ? item[columns[i].suffixKey] : null;\n                    if (suffixContent) {\n                        var suffixSpan = document.createElement(\"span\");\n                        tui.browser.setInnerHtml(suffixSpan, suffixContent);\n                        cell.appendChild(suffixSpan);\n                    }\n                }\n            };\n            Grid.prototype.moveLine = function (line, index, base, lineHeight) {\n                line.style.top = (base + index * lineHeight) + \"px\";\n                line.style.width = this._contentWidth + \"px\";\n            };\n            Grid.prototype.createLine = function (parent) {\n                var columns = this.get(\"columns\");\n                var line = document.createElement(\"div\");\n                line.className = \"tui-grid-line\";\n                line.setAttribute(\"unselectable\", \"on\");\n                return parent.appendChild(line);\n            };\n            Grid.prototype.clearBuffer = function () {\n                if (!this._buffer) {\n                    return;\n                }\n                var content = this._components[\"content\"];\n                for (var i = 0; i < this._buffer.lines.length; i++) {\n                    content.removeChild(this._buffer.lines[i]);\n                }\n                this._buffer.begin = 0;\n                this._buffer.end = 0;\n                this._buffer.lines = [];\n            };\n            Grid.prototype.drawHeader = function () {\n                if (!this.get(\"header\"))\n                    return;\n                var head = this._components[\"head\"];\n                head.innerHTML = \"\";\n                var columns = this.get(\"columns\");\n                for (var i = 0; i < columns.length; i++) {\n                    var prefix = \"<i class='tui-grid-no-sort'></i>\";\n                    var sortClass = \"\";\n                    if (columns[i].sortable) {\n                        prefix = \"<i class='tui-grid-sortable'></i>\";\n                        if (this.get(\"sortColumn\") == i) {\n                            if (this.get(\"sortType\") === \"desc\") {\n                                prefix = \"<i class='tui-grid-desc'></i>\";\n                                sortClass = \"tui-desc\";\n                            }\n                            else {\n                                prefix = \"<i class='tui-grid-asc'></i>\";\n                                sortClass = \"tui-asc\";\n                            }\n                        }\n                        sortClass += \" tui-sortable\";\n                    }\n                    var span = document.createElement(\"span\");\n                    span.setAttribute(\"unselectable\", \"on\");\n                    span.className = \"tui-grid-\" + this._tuid + \"-\" + i + \" \" + sortClass;\n                    span.col = i;\n                    head.appendChild(span);\n                    tui.browser.setInnerHtml(span, prefix);\n                    span.appendChild(document.createTextNode(columns[i].name));\n                }\n            };\n            Grid.prototype.drawContent = function () {\n                var _this = this;\n                var vbar = widget.get(this._components[\"vScroll\"]);\n                var content = this._components[\"content\"];\n                var lineHeight = this.get(\"lineHeight\");\n                var base = (this.get(\"header\") ? lineHeight : 0) - vbar.get(\"value\") % lineHeight;\n                var begin = Math.floor(vbar.get(\"value\") / lineHeight);\n                var end = begin + this._dispLines + 1;\n                var data = this.get(\"data\");\n                var columns = this.get(\"columns\");\n                var length = data.length();\n                var newBuffer = [];\n                var reusable = [];\n                for (var i = this._buffer.begin; i < this._buffer.end; i++) {\n                    if (i < begin || i >= end || i >= length) {\n                        reusable.push(this._buffer.lines[i - this._buffer.begin]);\n                    }\n                }\n                for (var i = begin; i < end && i < length; i++) {\n                    var line;\n                    if (i >= this._buffer.begin && i < this._buffer.end) {\n                        line = this._buffer.lines[i - this._buffer.begin];\n                    }\n                    else {\n                        if (reusable.length > 0) {\n                            line = reusable.pop();\n                            line.innerHTML = \"\";\n                            line.removeAttribute(\"tooltip\");\n                        }\n                        else {\n                            line = this.createLine(content);\n                        }\n                        if (i === this.get(\"activeRow\")) {\n                            $(line).addClass(\"tui-actived\");\n                        }\n                        else {\n                            $(line).removeClass(\"tui-actived\");\n                        }\n                    }\n                    this.moveLine(line, i - begin, base, lineHeight);\n                    newBuffer.push(line);\n                }\n                clearTimeout(this._drawTimer);\n                this._drawTimer = setTimeout(function () {\n                    var begin = Math.floor(vbar.get(\"value\") / lineHeight);\n                    var end = begin + _this._dispLines + 1;\n                    for (var i = _this._buffer.begin; i < _this._buffer.end; i++) {\n                        if (i >= begin && i < end)\n                            _this.drawLine(_this._buffer.lines[i - _this._buffer.begin], i, _this.get(\"lineHeight\"), columns, data.get(i));\n                    }\n                }, 32);\n                for (var i = 0; i < reusable.length; i++) {\n                    content.removeChild(reusable[i]);\n                }\n                this._buffer.lines = newBuffer;\n                this._buffer.begin = begin;\n                this._buffer.end = this._buffer.begin + this._buffer.lines.length;\n            };\n            Grid.prototype.initColumnWidth = function () {\n                var columns = this.get(\"columns\");\n                for (var i = 0; i < columns.length; i++) {\n                    if (typeof this._columnWidths[i] !== \"number\" || isNaN(this._columnWidths[i])) {\n                        if (typeof columns[i].width === \"number\" && !isNaN(columns[i].width))\n                            this._columnWidths[i] = columns[i].width;\n                        else\n                            this._columnWidths[i] = 150;\n                    }\n                    if (this._columnWidths[i] < 0)\n                        this._columnWidths[i] = 0;\n                }\n            };\n            Grid.prototype.computeHOffset = function () {\n                //var widths: number[] = [];\n                var head = this._components[\"head\"];\n                var content = this._components[\"content\"];\n                var scrollLeft = this._hbar.get(\"value\");\n                var columns = this.get(\"columns\");\n                head.scrollLeft = scrollLeft;\n                content.scrollLeft = scrollLeft;\n                var used = 0;\n                for (var i = 0; i < columns.length; i++) {\n                    this._vLines[i].style.left = used + vval(columns[i].width) +\n                        (Grid.CELL_SPACE * 2) - scrollLeft + \"px\";\n                    used += vval(columns[i].width) + (Grid.CELL_SPACE * 2);\n                }\n                if (this.get(\"header\")) {\n                    used = 0;\n                    for (var i = 0; i < columns.length; i++) {\n                        this._handlers[i].style.left = used + vval(columns[i].width) +\n                            (Grid.CELL_SPACE) - this._hbar.get(\"value\") + \"px\";\n                        used += vval(columns[i].width) + (Grid.CELL_SPACE * 2);\n                    }\n                }\n            };\n            Grid.prototype.computeColumnWidth = function () {\n                //var widths: number[] = [];\n                var columns = this.get(\"columns\");\n                if (this.get(\"autoWidth\")) {\n                    var total = this._contentWidth;\n                    var totalNoBorder = total - (Grid.CELL_SPACE * 2) * columns.length;\n                    var totalNoFixed = totalNoBorder;\n                    var totalCompute = 0;\n                    // Exclude all fixed columns\n                    for (var i = 0; i < columns.length; i++) {\n                        if (columns[i].fixed) {\n                            totalNoFixed -= this._columnWidths[i];\n                        }\n                        else {\n                            totalCompute += this._columnWidths[i];\n                        }\n                    }\n                    for (var i = 0; i < columns.length; i++) {\n                        if (!columns[i].fixed) {\n                            if (totalCompute <= 0)\n                                this._columnWidths[i] = NaN;\n                            else\n                                this._columnWidths[i] = (this._columnWidths[i] * 1.0) / totalCompute * totalNoFixed;\n                        }\n                    }\n                }\n                for (var i = 0; i < this._columnWidths.length; i++) {\n                    var val = Math.round(this._columnWidths[i]);\n                    //widths.push(val);\n                    columns[i].width = val;\n                }\n                // Add V lines\n                for (var i = 0; i < this._vLines.length; i++) {\n                    if (this._vLines[i].parentNode)\n                        this._.removeChild(this._vLines[i]);\n                }\n                var used = 0;\n                for (var i = 0; i < columns.length; i++) {\n                    if (i >= this._vLines.length) {\n                        this._vLines[i] = document.createElement(\"div\");\n                        this._vLines[i].className = \"tui-grid-vline\";\n                    }\n                    this._vLines[i].style.left = used + vval(columns[i].width) + (Grid.CELL_SPACE * 2) - this._hbar.get(\"value\") + \"px\";\n                    used += vval(columns[i].width) + (Grid.CELL_SPACE * 2);\n                    this._vLines[i].style.height = Math.min(this._contentHeight, this._.clientHeight) + \"px\";\n                    this._.appendChild(this._vLines[i]);\n                }\n                // Add Handlers\n                for (var i = 0; i < this._handlers.length; i++) {\n                    if (this._handlers[i].parentNode)\n                        this._.removeChild(this._handlers[i]);\n                }\n                if (this.get(\"header\")) {\n                    used = 0;\n                    for (var i = 0; i < columns.length; i++) {\n                        if (i >= this._handlers.length) {\n                            this._handlers[i] = document.createElement(\"div\");\n                            this._handlers[i].className = \"tui-grid-handler\";\n                        }\n                        this._handlers[i].style.left = used + vval(columns[i].width) + (Grid.CELL_SPACE) - this._hbar.get(\"value\") + \"px\";\n                        used += vval(columns[i].width) + (Grid.CELL_SPACE * 2);\n                        this._.appendChild(this._handlers[i]);\n                    }\n                }\n                var cssText = \"\";\n                for (var i_3 = 0; i_3 < columns.length; i_3++) {\n                    cssText += (\".tui-grid-\" + this._tuid + \"-\" + i_3 + \"{width:\" + vval(columns[i_3].width) + \"px;}\");\n                }\n                if (document.createStyleSheet)\n                    this._gridStyle.cssText = cssText;\n                else\n                    this._gridStyle.innerHTML = cssText;\n                for (var i_4 = 0; i_4 < this._buffer.lines.length; i_4++) {\n                    var line = this._buffer.lines[i_4];\n                    line.style.width = this._contentWidth + \"px\";\n                }\n            };\n            Grid.prototype.render = function () {\n                this.initColumnWidth();\n                this.computeScroll();\n                this.computeColumnWidth();\n                this.drawHeader();\n                this.drawContent();\n                this.computeHOffset();\n            };\n            Grid.CELL_SPACE = 4;\n            Grid.LINE_HEIGHT = 31;\n            return Grid;\n        }(widget.Widget));\n        widget.Grid = Grid;\n        widget.register(Grid, \"grid\");\n        widget.registerResize(\"grid\");\n        /**\n         * <tui:list>\n         */\n        var List = (function (_super) {\n            __extends(List, _super);\n            function List() {\n                _super.apply(this, arguments);\n            }\n            List.prototype.initRestriction = function () {\n                var _this = this;\n                _super.prototype.initRestriction.call(this);\n                this._column = {\n                    name: \"\",\n                    key: \"name\",\n                    checkKey: \"check\",\n                    iconKey: \"icon\",\n                    prefixKey: \"prefix\",\n                    suffixKey: \"suffix\",\n                    arrow: true\n                };\n                this.setRestrictions({\n                    \"lineHeight\": {\n                        \"get\": function () {\n                            var val = _this._data[\"lineHeight\"];\n                            if (typeof val !== \"number\" || isNaN(val))\n                                return List.LINE_HEIGHT;\n                            else\n                                return val;\n                        }\n                    },\n                    \"columns\": {\n                        \"set\": function (value) { },\n                        \"get\": function () {\n                            return [_this._column];\n                        }\n                    },\n                    \"checkKey\": {\n                        \"set\": function (value) {\n                            _this._column.checkKey = value;\n                            _this.clearBuffer();\n                        },\n                        \"get\": function () {\n                            return _this._column.checkKey;\n                        }\n                    },\n                    \"nameKey\": {\n                        \"set\": function (value) {\n                            _this._column.key = value;\n                            _this.clearBuffer();\n                        },\n                        \"get\": function () {\n                            return _this._column.key;\n                        }\n                    },\n                    \"iconKey\": {\n                        \"set\": function (value) {\n                            _this._column.iconKey = value;\n                            _this.clearBuffer();\n                        },\n                        \"get\": function () {\n                            return _this._column.iconKey;\n                        }\n                    },\n                    \"prefixKey\": {\n                        \"set\": function (value) {\n                            _this._column.prefixKey = value;\n                            _this.clearBuffer();\n                        },\n                        \"get\": function () {\n                            return _this._column.prefixKey;\n                        }\n                    },\n                    \"suffixKey\": {\n                        \"set\": function (value) {\n                            _this._column.suffixKey = value;\n                            _this.clearBuffer();\n                        },\n                        \"get\": function () {\n                            return _this._column.suffixKey;\n                        }\n                    },\n                    \"checkable\": {\n                        \"set\": function (value) {\n                            _this._column.type = value ? \"check\" : null;\n                            _this.clearBuffer();\n                        },\n                        \"get\": function () {\n                            return _this._column.type === \"check\";\n                        }\n                    },\n                    \"checkedValues\": {\n                        \"set\": function (value) {\n                            var valueKey = _this.get(\"valueKey\");\n                            var checkKey = _this.get(\"checkKey\");\n                            if (value === null)\n                                value = [];\n                            if (!(value instanceof Array))\n                                value = [value];\n                            _this.iterate(function (item, path, treeNode) {\n                                if (typeof item[checkKey] === \"boolean\") {\n                                    if (value.indexOf(item[valueKey]) >= 0)\n                                        item[checkKey] = true;\n                                    else\n                                        item[checkKey] = false;\n                                }\n                                return true;\n                            });\n                        },\n                        \"get\": function () {\n                            var value = [];\n                            var valueKey = _this.get(\"valueKey\");\n                            var checkKey = _this.get(\"checkKey\");\n                            _this.iterate(function (item, path) {\n                                if (item[checkKey] === true)\n                                    value.push(item[valueKey]);\n                                return true;\n                            });\n                            return value;\n                        }\n                    },\n                    \"checkedNames\": {\n                        \"set\": function (value) { },\n                        \"get\": function () {\n                            var names = [];\n                            var nameKey = _this.get(\"nameKey\");\n                            var checkKey = _this.get(\"checkKey\");\n                            _this.iterate(function (item, path) {\n                                if (item[checkKey] === true)\n                                    names.push(item[nameKey]);\n                                return true;\n                            });\n                            return names;\n                        }\n                    }\n                });\n            };\n            List.prototype.init = function () {\n                _super.prototype.init.call(this);\n                this._set(\"header\", false);\n                this.setInit(\"autoWidth\", true);\n                this.setInit(\"valueKey\", \"value\");\n            };\n            List.prototype.selectAll = function () {\n                var checkKey = this.get(\"checkKey\");\n                this.iterate(function (item, path) {\n                    if (typeof item[checkKey] === \"boolean\") {\n                        item[checkKey] = true;\n                    }\n                    return true;\n                });\n                this.render();\n            };\n            List.prototype.deselectAll = function () {\n                var checkKey = this.get(\"checkKey\");\n                this.iterate(function (item, path) {\n                    if (typeof item[checkKey] === \"boolean\") {\n                        item[checkKey] = false;\n                    }\n                    return true;\n                });\n                this.render();\n            };\n            List.LINE_HEIGHT = 30;\n            return List;\n        }(Grid));\n        widget.List = List;\n        widget.register(List, \"list\");\n        widget.registerResize(\"list\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"inputBase.ts\" />\n/// <reference path=\"../browser/keyboard.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        /**\n         * <input>\n         * Attributes: value, text, type, iconLeft, iconRight, autoValidate\n         * Events: input, change, left-icon-mousedown, right-icon-mousedown, left-icon-click, right-icon-click\n         */\n        var Input = (function (_super) {\n            __extends(Input, _super);\n            function Input() {\n                _super.apply(this, arguments);\n            }\n            Input.prototype.initRestriction = function () {\n                var _this = this;\n                _super.prototype.initRestriction.call(this);\n                var textbox = this._components[\"textbox\"] = document.createElement(\"input\");\n                this.setRestrictions({\n                    \"value\": {\n                        \"set\": function (value) {\n                            textbox.value = value;\n                            _this._isEmpty = (textbox.value === \"\");\n                        },\n                        \"get\": function () {\n                            return textbox.value;\n                        }\n                    },\n                    \"text\": {\n                        \"set\": function (value) {\n                            _this._set(\"value\", value);\n                        },\n                        \"get\": function () {\n                            return _this.get(\"value\");\n                        }\n                    },\n                    \"type\": {\n                        \"set\": function (value) {\n                            value = value.toLowerCase();\n                            if ([\"text\", \"password\", \"email\", \"url\", \"number\"].indexOf(value) < 0)\n                                return;\n                            textbox.setAttribute(\"type\", value);\n                        },\n                        \"get\": function () {\n                            return textbox.getAttribute(\"type\");\n                        }\n                    }\n                });\n            };\n            Input.prototype.onInput = function (textbox, e) {\n                this.updateEmptyState(textbox.value === \"\");\n                this.reset();\n                this.fire(\"input\", e);\n            };\n            Input.prototype.init = function () {\n                var _this = this;\n                var $root = $(this._);\n                var placeholder = this._components[\"placeholder\"] = document.createElement(\"span\");\n                var textbox = this._components[\"textbox\"];\n                var iconLeft = this._components[\"iconLeft\"] = document.createElement(\"i\");\n                var iconRight = this._components[\"iconRight\"] = document.createElement(\"i\");\n                var iconInvalid = this._components[\"iconInvalid\"] = document.createElement(\"i\");\n                var clearButton = this._components[\"clearButton\"] = document.createElement(\"i\");\n                iconInvalid.className = \"tui-invalid-icon\";\n                clearButton.className = \"tui-input-clear-button\";\n                placeholder.className = \"tui-placeholder\";\n                placeholder.setAttribute(\"unselectable\", \"on\");\n                this._.appendChild(placeholder);\n                this._.appendChild(iconLeft);\n                this._.appendChild(textbox);\n                this._.appendChild(iconInvalid);\n                this._.appendChild(iconRight);\n                this._.appendChild(clearButton);\n                $(textbox).focus(function () {\n                    $root.addClass(\"tui-active\");\n                });\n                $(textbox).blur(function () {\n                    $root.removeClass(\"tui-active\");\n                    if (_this.get(\"disable\"))\n                        return;\n                    if (_this.get(\"autoValidate\")) {\n                        _this.validate();\n                    }\n                });\n                if (tui.ieVer > 0 && tui.ieVer < 9) {\n                    $(textbox).on(\"propertychange\", function (e) {\n                        if (e.originalEvent.propertyName !== 'value')\n                            return;\n                        _this.onInput(textbox, e);\n                    });\n                }\n                else {\n                    if (tui.ieVer === 9) {\n                        $(textbox).on(\"keyup\", function (e) {\n                            if (e.keyCode = tui.browser.KeyCode.BACK)\n                                _this.onInput(textbox, e);\n                        });\n                    }\n                    $(textbox).on(\"input\", function (e) {\n                        _this.onInput(textbox, e);\n                    });\n                }\n                $(textbox).on(\"keydown\", function (e) {\n                    if (e.keyCode === tui.browser.KeyCode.ENTER) {\n                        _this.fire(\"enter\", e);\n                    }\n                });\n                $(textbox).on(\"change\", function (e) {\n                    _this.fire(\"change\", e);\n                });\n                $(clearButton).on(\"mousedown\", function (e) {\n                    _this.set(\"value\", \"\");\n                    _this.reset();\n                    _this.fire(\"change\", e);\n                    e.stopPropagation();\n                });\n                $root.mousedown(function (e) {\n                    if (_this.get(\"disable\"))\n                        return;\n                    var obj = e.target || e.srcElement;\n                    if (obj === textbox) {\n                        return;\n                    }\n                    setTimeout(function () {\n                        textbox.focus();\n                        if (obj === iconLeft) {\n                            _this.fire(\"left-icon-mousedown\", e);\n                        }\n                        if (obj === iconRight) {\n                            _this.fire(\"right-icon-mousedown\", e);\n                        }\n                    }, 0);\n                });\n                $root.click(function (e) {\n                    if (_this.get(\"disable\"))\n                        return;\n                    var obj = e.target || e.srcElement;\n                    if (obj === textbox) {\n                        return;\n                    }\n                    if (obj === iconLeft) {\n                        _this.fire(\"left-icon-click\", e);\n                    }\n                    if (obj === iconRight) {\n                        _this.fire(\"right-icon-click\", e);\n                    }\n                });\n                this.on(\"resize\", function () {\n                    _this.render();\n                });\n            };\n            Input.prototype.focus = function () {\n                var textbox = this._components[\"textbox\"];\n                textbox.focus();\n            };\n            Input.prototype.render = function () {\n                this._.scrollLeft = 0;\n                var $root = $(this._);\n                var textbox = this._components[\"textbox\"];\n                var iconLeft = this._components[\"iconLeft\"];\n                var iconRight = this._components[\"iconRight\"];\n                var iconInvalid = this._components[\"iconInvalid\"];\n                var placeholder = this._components[\"placeholder\"];\n                var clearButton = this._components[\"clearButton\"];\n                if (this.get(\"disable\")) {\n                    $root.addClass(\"tui-disable\");\n                    textbox.setAttribute(\"readonly\", \"readonly\");\n                }\n                else {\n                    $root.removeClass(\"tui-disable\");\n                    textbox.removeAttribute(\"readonly\");\n                }\n                var marginLeft = 0;\n                if (this.get(\"iconLeft\")) {\n                    iconLeft.className = this.get(\"iconLeft\");\n                    iconLeft.style.display = \"\";\n                    iconLeft.style.left = \"0\";\n                }\n                else {\n                    iconLeft.className = \"\";\n                    iconLeft.style.display = \"none\";\n                    marginLeft = Input.PADDING;\n                }\n                var marginRight = 0;\n                if (this.get(\"iconRight\")) {\n                    iconRight.className = this.get(\"iconRight\");\n                    iconRight.style.display = \"\";\n                    iconRight.style.right = \"0\";\n                }\n                else {\n                    iconRight.className = \"\";\n                    iconRight.style.display = \"none\";\n                    marginRight = Input.PADDING;\n                }\n                if (!this._valid) {\n                    $root.addClass(\"tui-invalid\");\n                    iconInvalid.style.display = \"\";\n                    iconInvalid.style.right = iconRight.offsetWidth + \"px\";\n                }\n                else {\n                    $root.removeClass(\"tui-invalid\");\n                    iconInvalid.style.display = \"none\";\n                    if (marginRight === 0)\n                        marginRight = Input.PADDING;\n                }\n                if (this.get(\"clearable\") && this.get(\"value\").length > 0) {\n                    clearButton.style.display = \"\";\n                    clearButton.style.right = iconRight.offsetWidth + iconInvalid.offsetWidth + \"px\";\n                }\n                else {\n                    clearButton.style.display = \"none\";\n                }\n                textbox.style.left = iconLeft.offsetWidth + marginLeft + \"px\";\n                var width = this._.clientWidth -\n                    iconLeft.offsetWidth -\n                    iconInvalid.offsetWidth -\n                    iconRight.offsetWidth -\n                    clearButton.offsetWidth -\n                    marginLeft - marginRight;\n                if (width < 0)\n                    width = 0;\n                textbox.style.width = width + \"px\";\n                var phText = this.get(\"placeholder\");\n                var showPh = phText && !this.get(\"value\");\n                if (showPh) {\n                    $(placeholder).text(phText);\n                    placeholder.style.left = iconLeft.offsetWidth + marginLeft + \"px\";\n                    placeholder.style.width = textbox.style.width;\n                    placeholder.style.display = \"\";\n                }\n                else {\n                    placeholder.style.display = \"none\";\n                }\n                if (!this._valid && this._invalidMessage) {\n                    this._set(\"follow-tooltip\", this._invalidMessage);\n                }\n                else {\n                    this._set(\"follow-tooltip\", null);\n                }\n            };\n            Input.PADDING = 6;\n            return Input;\n        }(widget.InputBase));\n        widget.Input = Input;\n        widget.register(Input, \"input\");\n        widget.registerResize(\"input\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"base.ts\" />\n/// <reference path=\"../browser/keyboard.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        widget.popStack = [];\n        function findPopupToClose(bindElem) {\n            var index = 0;\n            if (bindElem && bindElem.nodeName) {\n                for (var i = 0; i < widget.popStack.length; i++) {\n                    var item = widget.popStack[i];\n                    if (tui.browser.isAncestry(bindElem, item._)) {\n                        index = i + 1;\n                        break;\n                    }\n                }\n            }\n            if (index < widget.popStack.length)\n                widget.popStack[index].close();\n        }\n        setInterval(function () {\n            findPopupToClose(document.activeElement);\n        }, 50);\n        // $(window).on(\"mousedown\", function(){\n        // \tpopStack[0] && popStack[0].close();\n        // });\n        /**\n         * <popup>\n         * Attributes: content, direction, referPos, referElement, opened\n         * Method: open(), close()\n         * Events: open, close\n         */\n        var Popup = (function (_super) {\n            __extends(Popup, _super);\n            function Popup() {\n                var _this = this;\n                _super.apply(this, arguments);\n                this.popIndex = null;\n                this.referRect = null;\n                this.checkInterval = null;\n                this.refProc = function () {\n                    _this.render();\n                };\n            }\n            Popup.prototype.initRestriction = function () {\n                var _this = this;\n                _super.prototype.initRestriction.call(this);\n                this.setRestrictions({\n                    \"content\": {\n                        \"set\": function (value) {\n                            _this._data[\"content\"] = value;\n                            if (typeof value === \"string\")\n                                _this._.innerHTML = value;\n                            else if (value && value.nodeName)\n                                _this._.appendChild(value);\n                        }\n                    }\n                });\n            };\n            Popup.prototype.initChildren = function (childNodes) {\n                if (childNodes.length > 0) {\n                    var div = document.createElement(\"div\");\n                    for (var _i = 0, childNodes_5 = childNodes; _i < childNodes_5.length; _i++) {\n                        var node = childNodes_5[_i];\n                        div.appendChild(node);\n                    }\n                    this._set(\"content\", div);\n                }\n            };\n            Popup.prototype.init = function () {\n                var _this = this;\n                var $root = $(this._);\n                $root.attr(\"tabIndex\", \"-1\");\n                $root.css(\"display\", \"none\");\n                var content = this.get(\"content\");\n                if (typeof content === \"string\")\n                    $root.html(content);\n                else if (content && content.nodeName)\n                    $root.append(content);\n                widget.init(this._);\n                tui.browser.removeNode(this._);\n                $root.keydown(function (e) {\n                    var c = e.keyCode;\n                    if (c === tui.browser.KeyCode.ESCAPE) {\n                        _this.close();\n                        if (_this.get(\"referElement\")) {\n                            _this.get(\"referElement\").focus();\n                        }\n                    }\n                });\n                $(this._).mousedown(function (e) {\n                    e.stopImmediatePropagation();\n                });\n            };\n            Popup.prototype.open = function (refer, direction) {\n                var _this = this;\n                if (this.get(\"opened\"))\n                    return;\n                if (typeof refer === \"string\")\n                    refer = document.getElementById(refer);\n                if (typeof direction === tui.UNDEFINED)\n                    direction = \"Lb\";\n                if (typeof direction !== \"string\" || !/^[lLrR][tTbB]$/.test(direction)) {\n                    throw new SyntaxError(\"Invalid popup direction value\");\n                }\n                if (typeof refer === \"object\" && refer.nodeName) {\n                    this._set(\"referElement\", refer);\n                    findPopupToClose(refer);\n                    this.referRect = tui.browser.getRectOfScreen(refer);\n                    this.checkInterval = setInterval(function () {\n                        var newRect = tui.browser.getRectOfScreen(refer);\n                        if (newRect.left !== _this.referRect.left ||\n                            newRect.top !== _this.referRect.top ||\n                            newRect.width !== _this.referRect.width ||\n                            newRect.height !== _this.referRect.height) {\n                            _this.referRect = newRect;\n                            _this.render();\n                        }\n                    }, 16);\n                    $(window).on(\"resize scroll\", this.refProc);\n                }\n                else if (typeof refer === \"object\" && typeof refer.left === \"number\" && typeof refer.top === \"number\") {\n                    this._set(\"referPos\", refer);\n                    findPopupToClose();\n                }\n                else\n                    throw new SyntaxError(\"Invalid popup refer value, must be an element or position\");\n                this.popIndex = widget.popStack.push(this) - 1;\n                this._set(\"direction\", direction);\n                this._set(\"opened\", true);\n                $(this._).css({\n                    \"display\": \"block\",\n                    \"position\": \"fixed\"\n                });\n                this.appendTo(document.body); // Will cause refresh\n                widget.init(this._); // refresh children\n                this.render(); // refresh self again\n                this._.focus();\n                this.fire(\"open\");\n            };\n            Popup.prototype.closeSelf = function () {\n                tui.browser.removeNode(this._);\n                this._set(\"opened\", false);\n                if (this.checkInterval != null) {\n                    clearInterval(this.checkInterval);\n                    this.checkInterval = null;\n                }\n                $(window).off(\"resize scroll\", this.refProc);\n                this.fire(\"close\");\n            };\n            Popup.prototype.close = function () {\n                if (!this.get(\"opened\"))\n                    return;\n                for (var i = this.popIndex; i < widget.popStack.length; i++) {\n                    var item = widget.popStack[i];\n                    item.closeSelf();\n                }\n                widget.popStack.splice(this.popIndex, widget.popStack.length - this.popIndex + 1);\n            };\n            Popup.prototype.render = function () {\n                if (!this.get(\"opened\"))\n                    return;\n                var root = this._;\n                var ww = $(window).width();\n                var wh = $(window).height();\n                root.style.left = \"0px\";\n                root.style.top = \"0px\";\n                root.style.width = \"\";\n                //root.style.width = browser.getCurrentStyle(root).width;\n                var ew = root.offsetWidth;\n                var eh = root.offsetHeight;\n                var box = { left: 0, top: 0, width: 0, height: 0 };\n                var pos = { left: 0, top: 0 };\n                if (this.get(\"referPos\")) {\n                    box = this.get(\"referPos\");\n                    box.width = 0;\n                    box.height = 0;\n                }\n                else if (this.get(\"referElement\")) {\n                    box = tui.browser.getRectOfScreen(this.get(\"referElement\"));\n                }\n                // lower case letter means 'next to', upper case letter means 'align to'\n                var compute = {\n                    \"l\": function () {\n                        pos.left = box.left - ew;\n                        if (pos.left < 2)\n                            pos.left = box.left + box.width;\n                    },\n                    \"r\": function () {\n                        pos.left = box.left + box.width;\n                        if (pos.left + ew > ww - 2)\n                            pos.left = box.left - ew;\n                    },\n                    \"t\": function () {\n                        pos.top = box.top - eh;\n                        if (pos.top < 2)\n                            pos.top = box.top + box.height;\n                    },\n                    \"b\": function () {\n                        pos.top = box.top + box.height;\n                        if (pos.top + eh > wh - 2)\n                            pos.top = box.top - eh;\n                    },\n                    \"L\": function () {\n                        pos.left = box.left;\n                        if (pos.left + ew > ww - 2)\n                            pos.left = box.left + box.width - ew;\n                    },\n                    \"R\": function () {\n                        pos.left = box.left + box.width - ew;\n                        if (pos.left < 2)\n                            pos.left = box.left;\n                    },\n                    \"T\": function () {\n                        pos.top = box.top;\n                        if (pos.top + eh > wh - 2)\n                            pos.top = box.top + box.height - eh;\n                    },\n                    \"B\": function () {\n                        pos.top = box.top + box.height - eh;\n                        if (pos.top < 2)\n                            pos.top = box.top;\n                    }\n                };\n                var direction = this.get(\"direction\");\n                compute[direction.substring(0, 1)](); // parse left\n                compute[direction.substring(1, 2)](); // parse top\n                if (pos.left > ww - 2)\n                    pos.left = ww - 2;\n                if (pos.left < 2)\n                    pos.left = 2;\n                if (pos.top > wh - 2)\n                    pos.top = wh - 2;\n                if (pos.top < 2)\n                    pos.top = 2;\n                root.style.left = pos.left + \"px\";\n                root.style.top = pos.top + \"px\";\n            };\n            return Popup;\n        }(widget.Widget));\n        widget.Popup = Popup;\n        widget.register(Popup, \"popup\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"popup.ts\" />\n/// <reference path=\"../browser/keyboard.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        /**\n         * <menu>\n         * Attributes: content, direction, referPos, referElement, opened\n         * Method: open(), close()\n         * Events: open, close, click\n         */\n        var Menu = (function (_super) {\n            __extends(Menu, _super);\n            function Menu() {\n                _super.apply(this, arguments);\n                this.activeItem = null;\n            }\n            Menu.prototype.initChildren = function (childNodes) {\n                var data = [];\n                function hasChildItem(node) {\n                    for (var i = 0; i < node.childNodes.length; i++) {\n                        var child = node.childNodes[i];\n                        if (widget.getFullName(child) === \"tui:item\")\n                            return true;\n                    }\n                    return false;\n                }\n                function addChild(node, items) {\n                    var item = new widget.Item(node);\n                    var text = item.get(\"text\");\n                    if (text === null)\n                        text = $.trim(tui.browser.getNodeOwnText(node));\n                    var menuItem = {\n                        \"text\": text\n                    };\n                    var type = item.get(\"type\");\n                    if (type && /^(button|check|radio|menu|line)$/.test(type))\n                        menuItem.type = type;\n                    if (hasChildItem(node) && (typeof menuItem.type === tui.UNDEFINED || menuItem.type === null))\n                        menuItem.type = \"menu\";\n                    var icon = item.get(\"icon\");\n                    if (typeof icon === \"string\" && icon.trim().length > 0)\n                        menuItem.icon = icon;\n                    var shortcut = item.get(\"shortcut\");\n                    if (typeof shortcut === \"string\" && shortcut.trim().length > 0)\n                        menuItem.shortcut = shortcut;\n                    var checked = item.get(\"checked\");\n                    if (typeof checked === \"boolean\")\n                        menuItem.checked = checked;\n                    var disable = item.get(\"disable\");\n                    if (typeof disable === \"boolean\")\n                        menuItem.disable = disable;\n                    if (menuItem.type === \"radio\") {\n                        var group = item.get(\"group\");\n                        if (typeof group === \"string\" && group.length > 0)\n                            menuItem.group = group;\n                        else\n                            menuItem.group = \"\";\n                    }\n                    var value = item.get(\"value\");\n                    if (value !== null && typeof value !== tui.UNDEFINED)\n                        menuItem.value = value;\n                    if (menuItem.type === \"menu\") {\n                        menuItem.children = [];\n                        addChildren(node.childNodes, menuItem.children);\n                    }\n                    items.push(menuItem);\n                }\n                function addChildren(childNodes, items) {\n                    for (var i = 0; i < childNodes.length; i++) {\n                        var node = childNodes[i];\n                        if (widget.getFullName(node) === \"tui:item\") {\n                            addChild(node, items);\n                        }\n                    }\n                }\n                addChildren(childNodes, data);\n                if (data.length > 0)\n                    this._set(\"items\", data);\n            };\n            Menu.prototype.open = function (refer, direction) {\n                var data = this.get(\"items\");\n                if (data == null)\n                    data = [];\n                this._.innerHTML = \"\";\n                for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {\n                    var item = data_1[_i];\n                    var div = void 0;\n                    if (item.type !== \"line\") {\n                        div = tui.browser.toElement(\"<div tabIndex='-1' unselectable='on'><span class='tui-icon'></span>\" +\n                            \"<span class='tui-arrow'></span><span class='tui-label'></span><span class='tui-shortcut'></span></div>\");\n                        if (item.disable) {\n                            $(div).addClass(\"tui-disabled\");\n                        }\n                        if (item.type === \"check\" || item.type === \"radio\") {\n                            if (item.checked) {\n                                $(div).children(\".tui-icon\").addClass(\"fa-check\");\n                            }\n                        }\n                        else if (item.icon) {\n                            $(div).children(\".tui-icon\").addClass(item.icon);\n                        }\n                        $(div).children(\".tui-label\").text(item.text);\n                        if (typeof item.shortcut === \"string\")\n                            $(div).children(\".tui-shortcut\").text(item.shortcut);\n                        if (item.type === \"menu\")\n                            $(div).children(\".tui-arrow\").addClass(\"fa-caret-right\");\n                        if (item.disable)\n                            $(div).addClass(\"tui-disabled\");\n                    }\n                    else\n                        div = tui.browser.toElement(\"<div class='tui-line'></div>\");\n                    this._.appendChild(div);\n                }\n                _super.prototype.open.call(this, refer, direction);\n                if (this.activeItem != null) {\n                    $(this._).children(\"div\").removeClass(\"tui-active\");\n                    this.activeItem = null;\n                }\n            };\n            Menu.prototype.init = function () {\n                var _this = this;\n                var $root = $(this._);\n                $root.attr(\"tabIndex\", \"-1\");\n                $root.css(\"display\", \"none\");\n                tui.browser.removeNode(this._);\n                $(this._).mousedown(function (e) {\n                    e.stopImmediatePropagation();\n                });\n                function findMenuItemDiv(elem) {\n                    var children = $root.children(\"div\");\n                    for (var i = 0; i < children.length; i++) {\n                        var div = children[i];\n                        if ((typeof elem === \"number\" && elem === i) ||\n                            (typeof elem === \"object\" && tui.browser.isAncestry(elem, div))) {\n                            return div;\n                        }\n                    }\n                    return null;\n                }\n                ;\n                function findDivIndex(elem) {\n                    var children = $root.children(\"div\");\n                    for (var i = 0; i < children.length; i++) {\n                        var div = children[i];\n                        if (div === elem) {\n                            return i;\n                        }\n                    }\n                    return null;\n                }\n                ;\n                var ie8hack = function (div, index) {\n                    if (tui.ieVer >= 7 && tui.ieVer < 9) {\n                        var data = _this.get(\"items\");\n                        var item = data[index];\n                        var icon = $(div).children(\".tui-icon\")[0];\n                        if (item.type === \"check\" || item.type === \"radio\") {\n                            if (item.checked) {\n                                $(icon).removeClass(\"fa-check\");\n                                setTimeout(function () {\n                                    $(icon).addClass(\"fa-check\");\n                                });\n                            }\n                        }\n                        else if (item.icon) {\n                            $(icon).removeClass(item.icon);\n                            setTimeout(function () {\n                                $(icon).addClass(item.icon);\n                            });\n                        }\n                        if (item.type === \"menu\") {\n                            var arrow = $(div).children(\".tui-arrow\")[0];\n                            $(arrow).removeClass(\"fa-caret-right\");\n                            setTimeout(function () {\n                                $(arrow).addClass(\"fa-caret-right\");\n                            });\n                        }\n                    }\n                };\n                function activeLine(index) {\n                    var div = findMenuItemDiv(index);\n                    $(div).addClass(\"tui-actived\");\n                    ie8hack(div, index);\n                }\n                ;\n                function deactiveLine(index) {\n                    var div = findMenuItemDiv(index);\n                    $(div).removeClass(\"tui-actived\");\n                    ie8hack(div, index);\n                }\n                ;\n                $root.mousemove(function (e) {\n                    var elem = e.target || e.srcElement;\n                    var div = findMenuItemDiv(elem);\n                    if (div !== null) {\n                        var found = findDivIndex(div);\n                        if (found !== _this.activeItem) {\n                            if (_this.activeItem !== null) {\n                                deactiveLine(_this.activeItem);\n                            }\n                            if ($(div).hasClass(\"tui-disabled\")) {\n                                clearTimeout(openSubMenuTimer);\n                                _this.activeItem = null;\n                                _this._.focus();\n                                return;\n                            }\n                            _this.activeItem = found;\n                            activeLine(_this.activeItem);\n                            if (!$(div).hasClass(\"tui-sub\")) {\n                                _this._.focus();\n                                openSubMenu();\n                            }\n                        }\n                    }\n                });\n                $root.on(\"touchstart\", function (e) {\n                    var elem = e.target || e.srcElement;\n                    var div = findMenuItemDiv(elem);\n                    if (div !== null) {\n                        var found = findDivIndex(div);\n                        if (found !== _this.activeItem) {\n                            if (_this.activeItem !== null) {\n                                deactiveLine(_this.activeItem);\n                            }\n                            if ($(div).hasClass(\"tui-disabled\")) {\n                                clearTimeout(openSubMenuTimer);\n                                _this.activeItem = null;\n                                _this._.focus();\n                                return;\n                            }\n                            _this.activeItem = found;\n                            activeLine(_this.activeItem);\n                            if (_this.activeItem !== null) {\n                                var data = _this.get(\"items\");\n                                var item = data[_this.activeItem];\n                                if (item.children && item.children.length > 0) {\n                                    _this._.focus();\n                                    openSubMenu();\n                                    e.preventDefault();\n                                }\n                            }\n                        }\n                    }\n                });\n                $root.mouseleave(function (e) {\n                    if (_this.activeItem != null) {\n                        deactiveLine(_this.activeItem);\n                        _this.activeItem = null;\n                    }\n                    clearTimeout(openSubMenuTimer);\n                });\n                $root.click(function (e) {\n                    if (_this.activeItem != null) {\n                        var data = _this.get(\"items\");\n                        var item = data[_this.activeItem];\n                        if (item.type === \"check\") {\n                            item.checked = !item.checked;\n                        }\n                        else if (item.type === \"radio\") {\n                            if (typeof item.group === \"string\") {\n                                for (var _i = 0, data_2 = data; _i < data_2.length; _i++) {\n                                    var it = data_2[_i];\n                                    if (it.type === \"radio\" && it.group == item.group) {\n                                        it.checked = false;\n                                    }\n                                }\n                            }\n                            item.checked = true;\n                        }\n                        if (!item.children || item.children.length == 0) {\n                            _this.fire(\"click\", { e: e, item: item });\n                            _this.close();\n                        }\n                    }\n                });\n                var findItem = function (from, step) {\n                    var data = _this.get(\"items\");\n                    for (var i = from; i < data.length && i >= 0; i = i + step) {\n                        if (data[i].type !== \"line\" && !data[i].disable)\n                            return i;\n                    }\n                    return null;\n                };\n                $root.keydown(function (e) {\n                    var c = e.keyCode;\n                    var data = _this.get(\"items\");\n                    function stopEvent() {\n                        e.stopPropagation();\n                        e.preventDefault();\n                    }\n                    if (c === tui.browser.KeyCode.ESCAPE) {\n                        stopEvent();\n                        _this.close();\n                        if (_this.get(\"referElement\")) {\n                            _this.get(\"referElement\").focus();\n                        }\n                    }\n                    else if (c === tui.browser.KeyCode.LEFT) {\n                        stopEvent();\n                        if (widget.popStack.length < 2 || !(widget.popStack[widget.popStack.length - 2] instanceof Menu))\n                            return;\n                        widget.popStack[widget.popStack.length - 2]._.focus();\n                    }\n                    if (data.length === 0) {\n                        _this.activeItem = null;\n                        return;\n                    }\n                    if (c === tui.browser.KeyCode.DOWN || c === tui.browser.KeyCode.TAB) {\n                        stopEvent();\n                        if (_this.activeItem === null) {\n                            _this.activeItem = findItem(0, 1);\n                        }\n                        else {\n                            deactiveLine(_this.activeItem);\n                            _this.activeItem = findItem(_this.activeItem + 1, 1);\n                            if (_this.activeItem === null)\n                                _this.activeItem = 0;\n                        }\n                        activeLine(_this.activeItem);\n                    }\n                    else if (c === tui.browser.KeyCode.UP) {\n                        stopEvent();\n                        if (_this.activeItem === null) {\n                            _this.activeItem = findItem(data.length - 1, -1);\n                        }\n                        else {\n                            deactiveLine(_this.activeItem);\n                            _this.activeItem = findItem(_this.activeItem - 1, -1);\n                            if (_this.activeItem === null)\n                                _this.activeItem = data.length - 1;\n                        }\n                        activeLine(_this.activeItem);\n                    }\n                    else if (c === tui.browser.KeyCode.RIGHT) {\n                        stopEvent();\n                        openSubMenu();\n                    }\n                    else if (c === tui.browser.KeyCode.ENTER) {\n                        stopEvent();\n                        if (_this.activeItem !== null) {\n                            var item = data[_this.activeItem];\n                            _this.fire(\"click\", { e: e, item: item });\n                            _this.close();\n                        }\n                    }\n                });\n                var openSubMenuTimer = null;\n                var openSubMenu = function () {\n                    var data = _this.get(\"items\");\n                    if (_this.activeItem !== null) {\n                        clearTimeout(openSubMenuTimer);\n                        var item = data[_this.activeItem];\n                        if (item.type !== \"menu\")\n                            return;\n                        var div_1 = findMenuItemDiv(_this.activeItem);\n                        if ($(div_1).hasClass(\"tui-sub\"))\n                            return;\n                        var itemIndex_1 = _this.activeItem;\n                        openSubMenuTimer = setTimeout(function () {\n                            var childItems = item.children;\n                            var subMenu = widget.create(\"menu\", { \"items\": childItems });\n                            if ($(_this._).hasClass(\"tui-big\"))\n                                $(subMenu._).addClass(\"tui-big\");\n                            $(div_1).addClass(\"tui-sub\");\n                            ie8hack(div_1, itemIndex_1);\n                            subMenu.open(div_1, \"rT\");\n                            subMenu.on(\"close\", function () {\n                                $(div_1).removeClass(\"tui-sub\");\n                                ie8hack(div_1, itemIndex_1);\n                            });\n                            subMenu.on(\"click\", function (e) {\n                                _this.fire(\"click\", e.data);\n                                _this.close();\n                            });\n                        }, 200);\n                    }\n                };\n            };\n            return Menu;\n        }(widget.Popup));\n        widget.Menu = Menu;\n        widget.register(Menu, \"menu\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        var Navigator = (function (_super) {\n            __extends(Navigator, _super);\n            function Navigator() {\n                _super.apply(this, arguments);\n            }\n            Navigator.prototype.initRestriction = function () {\n                var _this = this;\n                _super.prototype.initRestriction.call(this);\n                this.setRestrictions({\n                    \"items\": {\n                        \"get\": function () {\n                            var items = _this._data[\"items\"];\n                            return items ? items : [];\n                        }\n                    },\n                    \"activeItem\": {\n                        \"set\": function (value) { },\n                        \"get\": function () {\n                            if (_this._activeItem != null) {\n                                return _this._activeItem.item;\n                            }\n                        }\n                    }\n                });\n            };\n            Navigator.prototype.initChildren = function (childNodes) {\n                var data = [];\n                function addChild(node, items) {\n                    var item = new widget.Item(node);\n                    var text = item.get(\"text\");\n                    if (text === null)\n                        text = $.trim(tui.browser.getNodeOwnText(node));\n                    var naviItem = {\n                        \"text\": text\n                    };\n                    naviItem.name = item.get(\"name\");\n                    naviItem.path = item.get(\"path\");\n                    naviItem.icon = item.get(\"icon\");\n                    naviItem.expand = item.get(\"expand\");\n                    var children = [];\n                    addChildren(node.childNodes, children);\n                    if (children.length > 0)\n                        naviItem.children = children;\n                    items.push(naviItem);\n                }\n                function addChildren(childNodes, data) {\n                    for (var i = 0; i < childNodes.length; i++) {\n                        var node = childNodes[i];\n                        if (widget.getFullName(node) === \"tui:item\") {\n                            addChild(node, data);\n                        }\n                    }\n                }\n                addChildren(childNodes, data);\n                if (data.length > 0)\n                    this._set(\"items\", data);\n            };\n            Navigator.prototype.checkScroll = function () {\n                var container = this._components[\"container\"];\n                var up = this._components[\"up\"];\n                var down = this._components[\"down\"];\n                if (container.scrollTop == 0) {\n                    up.style.display = \"none\";\n                }\n                else {\n                    up.style.display = \"block\";\n                }\n                if (container.scrollTop == container.scrollHeight - container.clientHeight) {\n                    down.style.display = \"none\";\n                }\n                else {\n                    down.style.display = \"block\";\n                }\n            };\n            Navigator.prototype.init = function () {\n                var _this = this;\n                var container = this._components[\"container\"] = document.createElement(\"div\");\n                var up = this._components[\"up\"] = document.createElement(\"div\");\n                var down = this._components[\"down\"] = document.createElement(\"div\");\n                container.className = \"tui-container\";\n                up.className = \"tui-up\";\n                down.className = \"tui-down\";\n                this._.appendChild(container);\n                this._.appendChild(up);\n                this._.appendChild(down);\n                var mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? \"DOMMouseScroll\" : \"mousewheel\";\n                $(this._).on(mousewheelevt, function (ev) {\n                    var e = ev.originalEvent;\n                    var delta = e.detail ? e.detail * (-1) : e.wheelDelta;\n                    if (delta <= 0) {\n                        if (container.scrollTop + container.clientHeight >= container.scrollHeight) {\n                            ev.preventDefault();\n                        }\n                    }\n                    else {\n                        if (container.scrollTop <= 0) {\n                            ev.preventDefault();\n                        }\n                    }\n                    ev.stopPropagation();\n                    ev.stopImmediatePropagation();\n                });\n                this.on(\"resize\", function () {\n                    var scrollbarWidth = container.offsetWidth - container.clientWidth;\n                    container.style.width = _this._.offsetWidth + scrollbarWidth + \"px\";\n                    _this.checkScroll();\n                });\n                container.onscroll = function (e) {\n                    _this.checkScroll();\n                };\n                function findLine(elem) {\n                    if (!elem)\n                        return null;\n                    if ($(elem).hasClass(\"tui-line\"))\n                        return elem;\n                    else\n                        return findLine(elem.parentElement);\n                }\n                $(container).on(\"click keydown\", function (e) {\n                    var elem = e.target || e.srcElement;\n                    elem = findLine(elem);\n                    if (e.type === \"keydown\" && e.keyCode != tui.browser.KeyCode.ENTER)\n                        return;\n                    if (elem) {\n                        var $elem = $(elem);\n                        if ($elem.hasClass(\"tui-expand\")) {\n                            _this.collapse(elem);\n                        }\n                        else if ($elem.hasClass(\"tui-collapse\")) {\n                            _this.expand(elem);\n                        }\n                        else {\n                            _this.active(elem);\n                            if (_this.fire(\"select\", elem.item) === false)\n                                return;\n                            if (_this.get(\"openPath\")) {\n                                var item = elem.item;\n                                if (item && item.path) {\n                                    window.location.href = item.path;\n                                }\n                            }\n                        }\n                    }\n                });\n            };\n            Navigator.prototype.collapse = function (elem) {\n                var _this = this;\n                var $elem = $(elem);\n                elem.item.expand = false;\n                if (!$elem.hasClass(\"tui-collapse\")) {\n                    $elem.removeClass(\"tui-expand\");\n                    $elem.addClass(\"tui-collapse\");\n                    $elem.next().animate({ height: \"toggle\" }, function () {\n                        _this.checkScroll();\n                    });\n                }\n            };\n            Navigator.prototype.expand = function (elem) {\n                var _this = this;\n                var $elem = $(elem);\n                elem.item.expand = true;\n                if (!$elem.hasClass(\"tui-expand\")) {\n                    $elem.removeClass(\"tui-collapse\");\n                    $elem.addClass(\"tui-expand\");\n                    $elem.next().animate({ height: \"toggle\" }, function () {\n                        _this.checkScroll();\n                    });\n                }\n            };\n            Navigator.prototype.active = function (elem) {\n                var container = this._components[\"container\"];\n                var rc = tui.browser.getRectOfParent(elem);\n                if (rc.top >= container.scrollTop && rc.top + rc.height <= container.scrollTop + container.clientHeight) {\n                }\n                else if (rc.top < container.scrollTop) {\n                    container.scrollTop = rc.top;\n                }\n                else if (rc.top + rc.height > container.scrollTop + container.clientHeight) {\n                    container.scrollTop = (rc.top + rc.height - container.clientHeight);\n                }\n                if (this._activeItem)\n                    $(this._activeItem).removeClass(\"tui-active\");\n                if (this.get(\"selectable\")) {\n                    $(elem).addClass(\"tui-active\");\n                    this._activeItem = elem;\n                }\n            };\n            Navigator.prototype.drawItems = function (parent, items, level) {\n                for (var _i = 0, items_3 = items; _i < items_3.length; _i++) {\n                    var item = items_3[_i];\n                    var line = document.createElement(\"div\");\n                    line.item = item;\n                    var $line = $(line);\n                    $line.attr(\"unselectable\", \"on\");\n                    $line.attr(\"tabIndex\", \"0\");\n                    $line.addClass(\"tui-line\");\n                    $line.text(item.text);\n                    if (level > 0)\n                        $line.addClass(\"tui-child\");\n                    if (item.icon) {\n                        var icon = document.createElement(\"i\");\n                        icon.className = item.icon;\n                        line.insertBefore(icon, line.firstChild);\n                    }\n                    if (item.path)\n                        line.setAttribute(\"path\", item.path);\n                    if (item.name)\n                        line.setAttribute(\"name\", item.name);\n                    var space = document.createElement(\"span\");\n                    space.style.display = \"inline-block\";\n                    space.style.width = 20 * level + \"px\";\n                    line.insertBefore(space, line.firstChild);\n                    parent.appendChild(line);\n                    if (item.children && item.children.length > 0) {\n                        var subArea = document.createElement(\"div\");\n                        subArea.className = \"tui-sub\";\n                        if (item.expand) {\n                            $line.addClass(\"tui-expand\");\n                            subArea.style.display = \"block\";\n                        }\n                        else {\n                            $line.addClass(\"tui-collapse\");\n                            subArea.style.display = \"none\";\n                        }\n                        this.drawItems(subArea, item.children, level + 1);\n                        parent.appendChild(subArea);\n                    }\n                }\n            };\n            Navigator.prototype._activeBy = function (parent, key, value) {\n                for (var i = 0; i < parent.children.length; i++) {\n                    var node = parent.children[i];\n                    if ($(node).hasClass(\"tui-line\")) {\n                        if (node.item[key] === value) {\n                            this.active(node);\n                            return true;\n                        }\n                    }\n                    else if ($(node).hasClass(\"tui-sub\")) {\n                        if (this._activeBy(node, key, value)) {\n                            this.expand($(node).prev()[0]);\n                            return true;\n                        }\n                    }\n                }\n                return false;\n            };\n            Navigator.prototype.activeBy = function (key, value) {\n                var container = this._components[\"container\"];\n                this._activeBy(container, key, value);\n            };\n            Navigator.prototype.render = function () {\n                var items = this.get(\"items\");\n                var container = this._components[\"container\"];\n                container.innerHTML = \"\";\n                this.drawItems(container, items, 0);\n                this.checkScroll();\n            };\n            return Navigator;\n        }(widget.Widget));\n        widget.Navigator = Navigator;\n        widget.register(Navigator, \"navigator\");\n        widget.registerResize(\"navigator\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"base.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        var Scrollbar = (function (_super) {\n            __extends(Scrollbar, _super);\n            function Scrollbar() {\n                _super.apply(this, arguments);\n            }\n            Scrollbar.prototype.initRestriction = function () {\n                var _this = this;\n                _super.prototype.initRestriction.call(this);\n                this.setRestrictions({\n                    \"total\": {\n                        \"get\": function () {\n                            var value = _this._data[\"total\"];\n                            if (typeof value !== \"number\" || isNaN(value) || value < 0)\n                                return 0;\n                            else\n                                return value;\n                        },\n                        \"set\": function (value) {\n                            if (typeof value !== \"number\" || isNaN(value))\n                                value = 0;\n                            if (value < 0)\n                                value = 0;\n                            value = Math.round(value);\n                            _this._data[\"total\"] = value;\n                            if (_this.get(\"value\") > value)\n                                _this._set(\"value\", value);\n                            if (_this.get(\"page\") > value)\n                                _this._set(\"page\", value);\n                        }\n                    },\n                    \"page\": {\n                        \"get\": function () {\n                            var value = _this._data[\"page\"];\n                            if (typeof value !== \"number\" || isNaN(value) || value < 1)\n                                return 1;\n                            else\n                                return value;\n                        },\n                        \"set\": function (value) {\n                            if (typeof value !== \"number\" || isNaN(value))\n                                value = 1;\n                            value = Math.round(value);\n                            if (value < 1)\n                                value = 1;\n                            if (value > _this.get(\"total\"))\n                                value = _this.get(\"total\");\n                            _this._data[\"page\"] = value;\n                        }\n                    },\n                    \"value\": {\n                        \"get\": function () {\n                            var value = _this._data[\"value\"];\n                            if (typeof value !== \"number\" || isNaN(value) || value < 0)\n                                return 0;\n                            else\n                                return value;\n                        },\n                        \"set\": function (value) {\n                            if (typeof value !== \"number\" || isNaN(value))\n                                value = 0;\n                            value = Math.round(value);\n                            if (value < 0)\n                                value = 0;\n                            if (value > _this.get(\"total\"))\n                                value = _this.get(\"total\");\n                            _this._data[\"value\"] = value;\n                        }\n                    },\n                    \"direction\": {\n                        \"get\": function () {\n                            var dir = _this._data[\"direction\"];\n                            if (dir !== \"vertical\" && dir !== \"horizontal\")\n                                return \"vertical\";\n                            else\n                                return dir;\n                        },\n                        \"set\": function (value) {\n                            if (value !== \"vertical\" && value !== \"horizontal\")\n                                return;\n                            _this._data[\"direction\"] = value;\n                        }\n                    }\n                });\n            };\n            Scrollbar.prototype.init = function () {\n                var _this = this;\n                var root$ = $(this._);\n                this._.innerHTML = \"<span class='tui-scroll-thumb'></span>\";\n                var btnThumb = this._components[\"thumb\"] = root$.children(\".tui-scroll-thumb\")[0];\n                root$.attr(\"unselectable\", \"on\");\n                $(this._).mousedown(function (e) {\n                    e.stopPropagation();\n                    e.preventDefault();\n                    var obj = e.target || e.srcElement;\n                    if (obj !== _this._) {\n                        return;\n                    }\n                    if (_this.get(\"total\") <= 0)\n                        return;\n                    var dir = _this.get(\"direction\");\n                    var pos, thumbLen;\n                    if (dir === \"vertical\") {\n                        pos = (typeof e.offsetY === \"number\" ? e.offsetY : e[\"originalEvent\"].layerY);\n                        thumbLen = btnThumb.offsetHeight;\n                    }\n                    else {\n                        pos = (typeof e.offsetX === \"number\" ? e.offsetX : e[\"originalEvent\"].layerX);\n                        thumbLen = btnThumb.offsetWidth;\n                    }\n                    var v = _this.posToValue(pos - thumbLen / 2);\n                    _this.set(\"value\", v);\n                    _this.fire(\"scroll\", { e: e, value: _this.get(\"value\"), type: \"mousedown\" });\n                    return false;\n                });\n                var mousewheelevt = (/Firefox/i.test(navigator.userAgent)) ? \"DOMMouseScroll\" : \"mousewheel\";\n                $(this._).on(mousewheelevt, function (e) {\n                    var ev = e.originalEvent;\n                    var delta = ev.detail ? ev.detail * (-1) : ev.wheelDelta;\n                    var page = _this.get(\"page\");\n                    //delta returns +120 when wheel is scrolled up, -120 when scrolled down\n                    var scrollSize = (Math.round(page / 2) > 1 ? Math.round(page / 2) : 1);\n                    var oldValue = _this.get(\"value\");\n                    if (delta <= -0) {\n                        _this.set(\"value\", oldValue + scrollSize);\n                    }\n                    else {\n                        _this.set(\"value\", oldValue - scrollSize);\n                    }\n                    if (oldValue !== _this.get(\"value\"))\n                        _this.fire(\"scroll\", { e: e, value: _this.get(\"value\"), type: \"mousewheel\" });\n                    e.stopPropagation();\n                    e.preventDefault();\n                });\n                var beginX = 0, beginY = 0, beginLeft = 0, beginTop = 0;\n                var dragThumb = function (e) {\n                    var diff = 0;\n                    var oldValue = _this.get(\"value\");\n                    var pos;\n                    var positions = tui.browser.getEventPosition(e);\n                    if (_this.get(\"direction\") === \"vertical\") {\n                        diff = positions[0].y - beginY;\n                        pos = beginTop + diff;\n                    }\n                    else {\n                        diff = positions[0].x - beginX;\n                        pos = beginLeft + diff;\n                    }\n                    _this.set(\"value\", _this.posToValue(pos));\n                    if (oldValue !== _this.get(\"value\")) {\n                        _this.fire(\"scroll\", { e: e, value: _this.get(\"value\"), type: \"drag\" });\n                    }\n                };\n                var dragEnd = function (e) {\n                    $(_this._).removeClass(\"tui-actived\");\n                    _this.fire(\"dragend\", { e: e, value: _this.get(\"value\") });\n                };\n                $(btnThumb).on(\"mousedown touchstart\", function (e) {\n                    if (e.which !== 1 && e.type !== \"touchstart\")\n                        return;\n                    var positions = tui.browser.getEventPosition(e);\n                    if (positions.length > 1)\n                        return;\n                    e.preventDefault();\n                    beginX = positions[0].x;\n                    beginY = positions[0].y;\n                    beginLeft = btnThumb.offsetLeft;\n                    beginTop = btnThumb.offsetTop;\n                    $(_this._).addClass(\"tui-actived\");\n                    widget.openDragMask(dragThumb, dragEnd);\n                    _this.fire(\"dragstart\", { e: e, value: _this.get(\"value\") });\n                });\n                this.on(\"resize\", function () {\n                    _this.render();\n                });\n                this.refresh();\n            };\n            Scrollbar.prototype.posToValue = function (pos) {\n                var btnThumb = this._components[\"thumb\"];\n                var total = this.get(\"total\");\n                if (total <= 0) {\n                    return 0;\n                }\n                var len = 0;\n                var val = 0;\n                if (this.get(\"direction\") === \"vertical\") {\n                    len = this._.clientHeight - btnThumb.offsetHeight;\n                    if (len <= 0)\n                        val = 0;\n                    else\n                        val = pos / len * total;\n                }\n                else {\n                    len = this._.clientWidth - btnThumb.offsetWidth;\n                    if (len <= 0)\n                        val = 0;\n                    else\n                        val = pos / len * total;\n                }\n                val = Math.round(val);\n                return val;\n            };\n            Scrollbar.prototype.valueToPos = function (value) {\n                var minSize = 20;\n                var total = this.get(\"total\");\n                var page = this.get(\"page\");\n                var vertical = (this.get(\"direction\") === \"vertical\");\n                if (total <= 0) {\n                    return { pos: 0, thumbLen: 0 };\n                }\n                var len = (vertical ? this._.clientHeight : this._.clientWidth);\n                var thumbLen = Math.round(page / total * len);\n                if (thumbLen < minSize)\n                    thumbLen = minSize;\n                if (thumbLen > len - 10)\n                    thumbLen = len - 10;\n                var scale = (value / total);\n                if (scale < 0)\n                    scale = 0;\n                if (scale > 1)\n                    scale = 1;\n                var pos = Math.round(scale * (len - thumbLen));\n                return {\n                    \"pos\": pos, \"thumbLen\": thumbLen\n                };\n            };\n            Scrollbar.prototype.render = function () {\n                var pos = this.valueToPos(this.get(\"value\"));\n                var vertical = (this.get(\"direction\") === \"vertical\");\n                var btnThumb = this._components[\"thumb\"];\n                if (vertical) {\n                    $(this._).removeClass(\"tui-horizontal\");\n                    $(this._).addClass(\"tui-vertical\");\n                    btnThumb.style.height = (pos.thumbLen > 0 ? pos.thumbLen : 0) + \"px\";\n                    btnThumb.style.top = pos.pos + \"px\";\n                    btnThumb.style.left = \"\";\n                    btnThumb.style.width = \"\";\n                }\n                else {\n                    $(this._).addClass(\"tui-horizontal\");\n                    $(this._).removeClass(\"tui-vertical\");\n                    btnThumb.style.width = (pos.thumbLen > 0 ? pos.thumbLen : 0) + \"px\";\n                    btnThumb.style.left = pos.pos + \"px\";\n                    btnThumb.style.top = \"\";\n                    btnThumb.style.height = \"\";\n                }\n            };\n            return Scrollbar;\n        }(widget.Widget));\n        widget.Scrollbar = Scrollbar;\n        widget.register(Scrollbar, \"scrollbar\");\n        widget.registerResize(\"scrollbar\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"selectBase.ts\" />\n/// <reference path=\"dialog.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        /**\n         * <tui:select>\n         * Attributes: data, list, tree, multiSelect, checkKey, nameKey, canSearch, search\n         * iconKey, valueKey\n         * Method: openSelect\n         * Events: change, click\n         */\n        var Select = (function (_super) {\n            __extends(Select, _super);\n            function Select() {\n                _super.apply(this, arguments);\n            }\n            Select.prototype.initRestriction = function () {\n                var _this = this;\n                var list = widget.create(\"list\");\n                list._set(\"noMouseWheel\", true);\n                list.set(\"lineHeight\", Select.LIST_LINE_HEIGHT);\n                this._components[\"list\"] = list._;\n                _super.prototype.initRestriction.call(this);\n                this.setRestrictions({\n                    \"value\": {\n                        \"set\": function (value) {\n                            _this._data[\"value\"] = value;\n                            _this.updateTextByValue(list);\n                        }\n                    },\n                    \"data\": {\n                        \"set\": function (value) {\n                            list._set(\"data\", value);\n                            _this.updateTextByValue(list);\n                        },\n                        \"get\": function () {\n                            return list.get(\"data\");\n                        }\n                    },\n                    \"list\": {\n                        \"set\": function (value) {\n                            list._set(\"list\", value);\n                            _this.updateTextByValue(list);\n                        },\n                        \"get\": function () {\n                            return list.get(\"list\");\n                        }\n                    },\n                    \"tree\": {\n                        \"set\": function (value) {\n                            list._set(\"tree\", value);\n                            _this.updateTextByValue(list);\n                        },\n                        \"get\": function () {\n                            return list.get(\"tree\");\n                        }\n                    },\n                    \"activeRow\": {\n                        \"set\": function (value) {\n                            list.set(\"activeRow\", value);\n                            _this.updateTextByValue(list);\n                        },\n                        \"get\": function () {\n                            return list.get(\"activeRow\");\n                        }\n                    },\n                    \"selection\": {\n                        \"set\": function (value) { },\n                        \"get\": function () {\n                            return _this.getSelection(list);\n                        }\n                    },\n                    \"activeRowData\": {\n                        \"set\": function (value) { },\n                        \"get\": function () {\n                            return list.get(\"activeRowData\");\n                        }\n                    },\n                    \"multiSelect\": {\n                        \"set\": function (value) {\n                            list._set(\"checkable\", value);\n                        },\n                        \"get\": function () {\n                            return list.get(\"checkable\");\n                        }\n                    },\n                    \"checkKey\": {\n                        \"set\": function (value) {\n                            list._set(\"checkKey\", value);\n                        },\n                        \"get\": function () {\n                            return list.get(\"checkKey\");\n                        }\n                    },\n                    \"nameKey\": {\n                        \"set\": function (value) {\n                            list._set(\"nameKey\", value);\n                        },\n                        \"get\": function () {\n                            return list.get(\"nameKey\");\n                        }\n                    },\n                    \"iconKey\": {\n                        \"set\": function (value) {\n                            list._set(\"iconKey\", value);\n                        },\n                        \"get\": function () {\n                            return list.get(\"iconKey\");\n                        }\n                    },\n                    \"valueKey\": {\n                        \"set\": function (value) {\n                            list._set(\"valueKey\", value);\n                        },\n                        \"get\": function () {\n                            return list.get(\"valueKey\");\n                        }\n                    },\n                    \"showCount\": {\n                        \"get\": function () {\n                            var count = _this._data[\"showCount\"];\n                            if (typeof count === \"number\" && !isNaN(count))\n                                return count;\n                            else\n                                return 8;\n                        }\n                    },\n                    \"canSearch\": {\n                        \"get\": function () {\n                            var value = _this._data[\"canSearch\"];\n                            if (typeof value === tui.UNDEFINED || value === null)\n                                return false;\n                            else\n                                return !!value;\n                        },\n                        \"set\": function (value) {\n                            _this._data[\"canSearch\"] = !!value;\n                        }\n                    }\n                });\n            };\n            Select.prototype.changeSize = function () {\n                var list = widget.get(this._components[\"list\"]);\n                var popup = widget.get(this._components[\"popup\"]);\n                var count = list.get(\"data\").length();\n                if (count > this.get(\"showCount\"))\n                    count = this.get(\"showCount\");\n                list._.style.height = count * Select.LIST_LINE_HEIGHT + \"px\";\n                popup.render();\n            };\n            ;\n            Select.prototype.getSelection = function (list) {\n                var textKey = this.get(\"textKey\");\n                if (textKey === null)\n                    textKey = this.get(\"nameKey\");\n                var valueKey = this.get(\"valueKey\");\n                var val = this.get(\"value\");\n                if (val === null)\n                    return null;\n                if (!this.get(\"multiSelect\")) {\n                    var selectedItem_1 = null;\n                    list.iterate(function (item, path, treeNode) {\n                        var nodeValue = item[valueKey];\n                        if (nodeValue === val) {\n                            selectedItem_1 = item;\n                            return false;\n                        }\n                        return true;\n                    });\n                    return selectedItem_1;\n                }\n                else {\n                    if (!(val instanceof Array))\n                        val = [val];\n                    var selectedItems_1 = [];\n                    list.iterate(function (item, path, treeNode) {\n                        var nodeValue = item[valueKey];\n                        if (val.indexOf(nodeValue) >= 0) {\n                            selectedItems_1.push(item);\n                        }\n                        return true;\n                    });\n                    return selectedItems_1;\n                }\n            };\n            Select.prototype.updateTextByValue = function (list) {\n                var textKey = this.get(\"textKey\");\n                if (textKey === null)\n                    textKey = this.get(\"nameKey\");\n                var selected = this.getSelection(list);\n                if (selected == null)\n                    this._set(\"text\", null);\n                else if (selected instanceof Array)\n                    this._set(\"text\", selected.reduce(function (s, v, i) {\n                        return i > 0 ? s + \", \" + v[textKey] : v[textKey];\n                    }, \"\"));\n                else\n                    this._set(\"text\", selected[textKey]);\n            };\n            Select.prototype.init = function () {\n                var _this = this;\n                _super.prototype.init.call(this);\n                this.setInit(\"iconRight\", \"fa-caret-down\");\n                var list = widget.get(this._components[\"list\"]);\n                var container = document.createElement(\"div\");\n                var searchbar = container.appendChild(document.createElement(\"div\"));\n                searchbar.className = \"tui-select-searchbar\";\n                var searchBox = widget.create(\"input\");\n                searchBox._set(\"clearable\", true);\n                searchBox._set(\"iconLeft\", \"fa-search\");\n                searchbar.appendChild(searchBox._);\n                container.appendChild(list._);\n                var toolbar = container.appendChild(document.createElement(\"div\"));\n                toolbar.className = \"tui-select-toolbar\";\n                var popup = widget.get(this._components[\"popup\"]);\n                popup._set(\"content\", container);\n                this._components[\"searchbar\"] = searchbar;\n                this._components[\"toolbar\"] = toolbar;\n                this._components[\"searchBox\"] = searchBox._;\n                list._.style.width = \"inherit\";\n                list._.style.display = \"block\";\n                list._.style.borderWidth = \"0\";\n                list.on(\"expand collapse update\", function () {\n                    _this.changeSize();\n                });\n                list.on(\"rowclick keyselect\", function (e) {\n                    var rowData = list.get(\"activeRowData\");\n                    if (!_this.get(\"multiSelect\")) {\n                        var item;\n                        if (list.get(\"dataType\") === \"tree\")\n                            item = rowData.item;\n                        else\n                            item = rowData;\n                        // this._set(\"text\", item[list.get(\"nameKey\")]);\n                        _this.set(\"value\", item[list.get(\"valueKey\")]);\n                        _this.fire(\"change\", { e: e, value: _this.get(\"value\"), text: _this.get(\"text\") });\n                        if (e.event === \"rowclick\") {\n                            _this.closeSelect();\n                            _this._.focus();\n                            _this.fire(\"click\", { e: e, value: _this.get(\"value\"), text: _this.get(\"text\") });\n                        }\n                    }\n                });\n                searchBox.on(\"enter change\", function (e) {\n                    var searchValue = searchBox.get(\"value\");\n                    if (searchValue == null || searchValue.length == 0) {\n                        list.get(\"data\").setFilter(null);\n                    }\n                    else {\n                        list.get(\"data\").setFilter([{\n                                key: _this.get(\"nameKey\"),\n                                value: searchValue\n                            }]);\n                    }\n                    list._set(\"activeRow\", null);\n                    list.scrollTo(0);\n                    if (!_this.get(\"multiSelect\") && _this.get(\"value\") !== null) {\n                        list.activeTo(_this.get(\"valueKey\"), _this.get(\"value\"));\n                    }\n                });\n                $(toolbar).click(function (e) {\n                    var obj = (e.target || e.srcElement);\n                    var name = obj.getAttribute(\"name\");\n                    if (name === \"selectAll\") {\n                        list.selectAll();\n                    }\n                    else if (name === \"deselectAll\") {\n                        list.deselectAll();\n                    }\n                    else if (name === \"ok\") {\n                        _this.set(\"value\", list.get(\"checkedValues\"));\n                        // this.set(\"text\", list.get(\"checkedNames\").join(\", \"));\n                        _this.fire(\"change\", { e: e, value: _this.get(\"value\"), text: _this.get(\"text\") });\n                        _this.closeSelect();\n                        _this._.focus();\n                        _this.fire(\"click\", { e: e, value: _this.get(\"value\"), text: _this.get(\"text\") });\n                    }\n                    else if (name === \"clear\") {\n                        // this._set(\"text\", null);\n                        _this.set(\"value\", null);\n                        _this.fire(\"change\", { e: e, value: _this.get(\"value\"), text: _this.get(\"text\") });\n                        _this.closeSelect();\n                        _this._.focus();\n                        _this.fire(\"click\", { e: e, value: _this.get(\"value\"), text: _this.get(\"text\") });\n                    }\n                });\n            };\n            Select.prototype.openSelect = function () {\n                var _this = this;\n                var list = widget.get(this._components[\"list\"]);\n                var popup = widget.get(this._components[\"popup\"]);\n                var minWidth = this._.offsetWidth - 2;\n                if (minWidth < 250)\n                    minWidth = 250;\n                popup._.style.minWidth = minWidth + \"px\";\n                //popup._set(\"content\", list._);\n                var toolbar = this._components[\"toolbar\"];\n                var searchbar = this._components[\"searchbar\"];\n                var searchBox = widget.get(this._components[\"searchBox\"]);\n                if (this.get(\"canSearch\")) {\n                    searchbar.style.display = \"block\";\n                }\n                else\n                    searchbar.style.display = \"none\";\n                var checkButtons = \"<a name='selectAll'>\" + tui.str(\"Select all\") + \"</a> | \" +\n                    \"<a name='deselectAll'>\" + tui.str(\"Deselect all\") +\n                    \"</a> | <a name='ok'><i class='fa fa-check'></i> \" + tui.str(\"OK\") + \"</a>\";\n                var clearButton = \"<a name='clear'><i class='fa fa-trash-o'></i> \" + tui.str(\"Clear\") + \"</a>\";\n                var multiSelect = this.get(\"multiSelect\");\n                var clearable = !multiSelect && this.get(\"clearable\");\n                toolbar.style.display = \"\";\n                if (multiSelect)\n                    toolbar.innerHTML = checkButtons;\n                else if (clearable)\n                    toolbar.innerHTML = clearButton;\n                else\n                    toolbar.style.display = \"none\";\n                popup.open(this._);\n                setTimeout(function () {\n                    if (_this.get(\"canSearch\"))\n                        searchBox.render();\n                    list._.focus();\n                    list.render();\n                    if (tui.ieVer > 0 && tui.ieVer <= 9) {\n                        // FIX ie bug.\n                        setTimeout(function () {\n                            list.render();\n                        });\n                    }\n                    if (!_this.get(\"multiSelect\")) {\n                        if (_this.get(\"value\") !== null) {\n                            list.activeTo(_this.get(\"valueKey\"), _this.get(\"value\"));\n                        }\n                        else {\n                            list._set(\"activeRow\", null);\n                            list.scrollTo(0);\n                        }\n                    }\n                    else {\n                        var value = _this.get(\"value\");\n                        list.set(\"checkedValues\", value);\n                    }\n                    _this.changeSize();\n                });\n            };\n            Select.LIST_LINE_HEIGHT = 28;\n            return Select;\n        }(widget.SelectPopupBase));\n        widget.Select = Select;\n        widget.register(Select, \"select\");\n        var DialogSelect = (function (_super) {\n            __extends(DialogSelect, _super);\n            function DialogSelect() {\n                _super.apply(this, arguments);\n            }\n            DialogSelect.prototype.openSelect = function () {\n                if (this.fire(\"open\", this.dialog) === false) {\n                    return;\n                }\n                this.dialog.set(\"title\", this.get(\"title\"));\n                this.dialog.open(\"ok#tui-primary\");\n            };\n            DialogSelect.prototype.initChildren = function (childNodes) {\n                var _this = this;\n                _super.prototype.initChildren.call(this, childNodes);\n                this.dialog = widget.create(\"dialog\");\n                this.content = document.createElement(\"div\");\n                childNodes.forEach(function (n) {\n                    if (widget.getFullName(n) !== \"tui:verify\")\n                        _this.content.appendChild(n);\n                });\n                this.dialog.setContent(this.content);\n                widget.init(this.content);\n            };\n            DialogSelect.prototype.createPopup = function () {\n                var _this = this;\n                this.dialog.on(\"btnclick\", function () {\n                    _this.fire(\"close\");\n                    _this.dialog.close();\n                });\n                return this.dialog;\n            };\n            DialogSelect.prototype.init = function () {\n                _super.prototype.init.call(this);\n                this.setInit(\"iconRight\", \"fa-pencil\");\n            };\n            return DialogSelect;\n        }(widget.SelectBase));\n        widget.DialogSelect = DialogSelect;\n        widget.register(DialogSelect, \"dialog-select\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"inputBase.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        /**\n         * <input>\n         * Attributes: value, text, type, iconLeft, iconRight, autoValidate\n         * Events: input, change, left-icon-mousedown, right-icon-mousedown, left-icon-click, right-icon-click\n         */\n        var Textarea = (function (_super) {\n            __extends(Textarea, _super);\n            function Textarea() {\n                _super.apply(this, arguments);\n            }\n            Textarea.prototype.initRestriction = function () {\n                var _this = this;\n                _super.prototype.initRestriction.call(this);\n                var textbox = this._components[\"textbox\"] = document.createElement(\"textarea\");\n                textbox.setAttribute(\"wrap\", \"physical\");\n                this.setRestrictions({\n                    \"value\": {\n                        \"set\": function (value) {\n                            textbox.value = value;\n                            _this._isEmpty = (textbox.value === \"\");\n                        },\n                        \"get\": function () {\n                            return textbox.value;\n                        }\n                    },\n                    \"text\": {\n                        \"set\": function (value) {\n                            _this._set(\"value\", value);\n                        },\n                        \"get\": function () {\n                            return _this.get(\"value\");\n                        }\n                    }\n                });\n            };\n            Textarea.prototype.onInput = function (textbox, e) {\n                this.updateEmptyState(textbox.value === \"\");\n                var oldHeight = tui.browser.getCurrentStyle(textbox).height;\n                textbox.style.height = \"\";\n                if (this._valid && textbox.scrollHeight !== this._lastTextHeight)\n                    this.render();\n                else\n                    textbox.style.height = oldHeight;\n                this.reset();\n                this.fire(\"input\", e);\n            };\n            Textarea.prototype.init = function () {\n                var _this = this;\n                var $root = $(this._);\n                var placeholder = this._components[\"placeholder\"] = document.createElement(\"span\");\n                var textbox = this._components[\"textbox\"];\n                var iconInvalid = this._components[\"iconInvalid\"] = document.createElement(\"i\");\n                iconInvalid.className = \"tui-invalid-icon\";\n                placeholder.className = \"tui-placeholder\";\n                placeholder.setAttribute(\"unselectable\", \"on\");\n                this._.appendChild(placeholder);\n                this._.appendChild(textbox);\n                this._.appendChild(iconInvalid);\n                $(textbox).focus(function () {\n                    $root.addClass(\"tui-active\");\n                });\n                $(textbox).blur(function () {\n                    $root.removeClass(\"tui-active\");\n                    if (_this.get(\"disable\"))\n                        return;\n                    if (_this.get(\"autoValidate\")) {\n                        _this.validate();\n                    }\n                });\n                if (tui.ieVer > 0 && tui.ieVer < 9) {\n                    $(textbox).on(\"propertychange\", function (e) {\n                        if (e.originalEvent.propertyName !== 'value')\n                            return;\n                        _this.onInput(textbox, e);\n                    });\n                }\n                else {\n                    if (tui.ieVer === 9) {\n                        $(textbox).on(\"keyup\", function (e) {\n                            if (e.keyCode = tui.browser.KeyCode.BACK)\n                                _this.onInput(textbox, e);\n                        });\n                    }\n                    $(textbox).on(\"input\", function (e) {\n                        _this.onInput(textbox, e);\n                    });\n                }\n                $(textbox).on(\"change\", function (e) {\n                    _this.fire(\"change\", e);\n                });\n                $root.mousedown(function (e) {\n                    if (_this.get(\"disable\"))\n                        return;\n                    var obj = e.target || e.srcElement;\n                    if (obj === textbox) {\n                        return;\n                    }\n                    setTimeout(function () {\n                        textbox.focus();\n                    }, 0);\n                });\n                $root.click(function (e) {\n                    if (_this.get(\"disable\"))\n                        return;\n                    var obj = e.target || e.srcElement;\n                    if (obj === textbox) {\n                        return;\n                    }\n                });\n                this.on(\"resize\", function () {\n                    _this.render();\n                });\n            };\n            Textarea.prototype.focus = function () {\n                var textbox = this._components[\"textbox\"];\n                textbox.focus();\n            };\n            Textarea.prototype.render = function () {\n                this._.scrollLeft = 0;\n                var $root = $(this._);\n                var textbox = this._components[\"textbox\"];\n                var iconInvalid = this._components[\"iconInvalid\"];\n                var placeholder = this._components[\"placeholder\"];\n                if (this.get(\"disable\")) {\n                    $root.addClass(\"tui-disable\");\n                    textbox.setAttribute(\"readonly\", \"readonly\");\n                }\n                else {\n                    $root.removeClass(\"tui-disable\");\n                    textbox.removeAttribute(\"readonly\");\n                }\n                var marginLeft = widget.Input.PADDING;\n                var marginRight = widget.Input.PADDING;\n                if (!this._valid) {\n                    $root.addClass(\"tui-invalid\");\n                    iconInvalid.style.display = \"\";\n                    iconInvalid.style.right = \"0px\";\n                }\n                else {\n                    $root.removeClass(\"tui-invalid\");\n                    iconInvalid.style.display = \"none\";\n                }\n                textbox.style.height = \"\";\n                this._lastTextHeight = textbox.scrollHeight;\n                if (this._lastTextHeight < 46)\n                    this._lastTextHeight = 46;\n                textbox.style.height = this._lastTextHeight + 2 + \"px\";\n                this._.style.height = this._lastTextHeight + 4 + \"px\";\n                textbox.style.left = marginLeft + \"px\";\n                var width = this._.clientWidth - iconInvalid.offsetWidth - marginLeft - marginRight;\n                if (width < 0)\n                    width = 0;\n                textbox.style.width = width + \"px\";\n                var phText = this.get(\"placeholder\");\n                var showPh = phText && !this.get(\"value\");\n                if (showPh) {\n                    $(placeholder).text(phText);\n                    placeholder.style.left = marginLeft + \"px\";\n                    placeholder.style.width = textbox.style.width;\n                    placeholder.style.display = \"\";\n                }\n                else {\n                    placeholder.style.display = \"none\";\n                }\n                if (!this._valid && this._invalidMessage) {\n                    this._set(\"follow-tooltip\", this._invalidMessage);\n                }\n                else {\n                    this._set(\"follow-tooltip\", null);\n                }\n            };\n            return Textarea;\n        }(widget.InputBase));\n        widget.Textarea = Textarea;\n        widget.register(Textarea, \"textarea\");\n        widget.registerResize(\"textarea\");\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n/// <reference path=\"../core.ts\" />\nvar tui;\n(function (tui) {\n    var widget;\n    (function (widget) {\n        \"use strict\";\n        var _tooltip = document.createElement(\"span\");\n        _tooltip.className = \"tui-tooltip\";\n        _tooltip.setAttribute(\"unselectable\", \"on\");\n        var _tooltipTarget = null;\n        function showTooltip(target, tooltip, pos, update) {\n            function show() {\n                if (pos.x + _tooltip.offsetWidth > $(window).width()) {\n                    pos.x = $(window).width() - _tooltip.offsetWidth;\n                }\n                _tooltip.style.left = pos.x + \"px\";\n                _tooltip.style.top = pos.y + 25 + \"px\";\n            }\n            if (target === _tooltipTarget || target === _tooltip) {\n                if (update) {\n                    show();\n                }\n                return;\n            }\n            _tooltip.style.width = \"\";\n            _tooltip.style.whiteSpace = \"nowrap\";\n            if (target.hasAttribute(\"html-tooltip\"))\n                _tooltip.innerHTML = tooltip;\n            else\n                $(_tooltip).text(tooltip);\n            document.body.appendChild(_tooltip);\n            _tooltipTarget = target;\n            if (_tooltip.scrollWidth > _tooltip.clientWidth) {\n                _tooltip.style.whiteSpace = \"normal\";\n            }\n            else\n                _tooltip.style.whiteSpace = \"nowrap\";\n            _tooltip.style.width = $(_tooltip).width() + \"px\";\n            show();\n        }\n        widget.showTooltip = showTooltip;\n        function closeTooltip() {\n            if (_tooltip.parentNode)\n                _tooltip.parentNode.removeChild(_tooltip);\n            _tooltip.innerHTML = \"\";\n            _tooltip.style.width = \"\";\n            _tooltipTarget = null;\n        }\n        widget.closeTooltip = closeTooltip;\n        var _tooltipTimer = null;\n        function whetherShowTooltip(target, e) {\n            if (tui.browser.isAncestry(target, _tooltip))\n                return;\n            var obj = target;\n            while (obj) {\n                if (!obj.getAttribute) {\n                    obj = null;\n                    break;\n                }\n                var tooltip = obj.getAttribute(\"follow-tooltip\"); // high priority\n                if (tooltip) {\n                    showTooltip(obj, tooltip, { x: e.clientX, y: e.clientY }, true);\n                    return;\n                }\n                else {\n                    tooltip = obj.getAttribute(\"tooltip\");\n                    if (tooltip) {\n                        closeTooltip();\n                        _tooltipTimer = setTimeout(function () {\n                            showTooltip(obj, tooltip, { x: e.clientX, y: e.clientY }, false);\n                        }, 500);\n                        return;\n                    }\n                    else\n                        obj = obj.parentElement;\n                }\n            }\n            if (!obj)\n                closeTooltip();\n        }\n        widget.whetherShowTooltip = whetherShowTooltip;\n        function whetherCloseTooltip(target) {\n            if (target !== _tooltipTarget && target !== _tooltip) {\n                closeTooltip();\n            }\n        }\n        widget.whetherCloseTooltip = whetherCloseTooltip;\n        var _hoverElement;\n        $(window.document).mousemove(function (e) {\n            clearTimeout(_tooltipTimer);\n            _hoverElement = e.target || e.toElement;\n            if (e.button === 0 && (e.which === 1 || e.which === 0)) {\n                whetherShowTooltip(_hoverElement, e);\n            }\n        });\n        $(window).scroll(function () { closeTooltip(); });\n    })(widget = tui.widget || (tui.widget = {}));\n})(tui || (tui = {}));\n\n//# sourceMappingURL=tui2.js.map\n"]}